var h2=l=>{throw TypeError(l)};var Hm=(l,t,e)=>t.has(l)||h2("Cannot "+e);var gn=(l,t,e)=>(Hm(l,t,"read from private field"),e?e.call(l):t.get(l)),wr=(l,t,e)=>t.has(l)?h2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,e),ca=(l,t,e,n)=>(Hm(l,t,"write to private field"),n?n.call(l,e):t.set(l,e),e),Rr=(l,t,e)=>(Hm(l,t,"access private method"),e);var d2=(l,t,e,n)=>({set _(a){ca(l,t,a,e)},get _(){return gn(l,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();function Y1(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Um={exports:{}},bf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function r3(){if(f2)return bf;f2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,r){var u=null;if(r!==void 0&&(u=""+r),a.key!==void 0&&(u=""+a.key),"key"in a){r={};for(var d in a)d!=="key"&&(r[d]=a[d])}else r=a;return a=r.ref,{$$typeof:l,type:n,key:u,ref:a!==void 0?a:null,props:r}}return bf.Fragment=t,bf.jsx=e,bf.jsxs=e,bf}var p2;function l3(){return p2||(p2=1,Um.exports=r3()),Um.exports}var ut=l3(),Gm={exports:{}},ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function o3(){if(g2)return ce;g2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),S=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=S&&U[S]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,w={};function R(U,$,ht){this.props=U,this.context=$,this.refs=w,this.updater=ht||x}R.prototype.isReactComponent={},R.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},R.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=R.prototype;function O(U,$,ht){this.props=U,this.context=$,this.refs=w,this.updater=ht||x}var N=O.prototype=new M;N.constructor=O,T(N,R.prototype),N.isPureReactComponent=!0;var z=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function k(U,$,ht,ft,Mt,Ht){return ht=Ht.ref,{$$typeof:l,type:U,key:$,ref:ht!==void 0?ht:null,props:Ht}}function Y(U,$){return k(U.type,$,void 0,void 0,void 0,U.props)}function J(U){return typeof U=="object"&&U!==null&&U.$$typeof===l}function lt(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ht){return $[ht]})}var ct=/\/+/g;function gt(U,$){return typeof U=="object"&&U!==null&&U.key!=null?lt(""+U.key):$.toString(36)}function St(){}function dt(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(St,St):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function vt(U,$,ht,ft,Mt){var Ht=typeof U;(Ht==="undefined"||Ht==="boolean")&&(U=null);var Nt=!1;if(U===null)Nt=!0;else switch(Ht){case"bigint":case"string":case"number":Nt=!0;break;case"object":switch(U.$$typeof){case l:case t:Nt=!0;break;case y:return Nt=U._init,vt(Nt(U._payload),$,ht,ft,Mt)}}if(Nt)return Mt=Mt(U),Nt=ft===""?"."+gt(U,0):ft,z(Mt)?(ht="",Nt!=null&&(ht=Nt.replace(ct,"$&/")+"/"),vt(Mt,$,ht,"",function(un){return un})):Mt!=null&&(J(Mt)&&(Mt=Y(Mt,ht+(Mt.key==null||U&&U.key===Mt.key?"":(""+Mt.key).replace(ct,"$&/")+"/")+Nt)),$.push(Mt)),1;Nt=0;var jt=ft===""?".":ft+":";if(z(U))for(var he=0;he<U.length;he++)ft=U[he],Ht=jt+gt(ft,he),Nt+=vt(ft,$,ht,Ht,Mt);else if(he=_(U),typeof he=="function")for(U=he.call(U),he=0;!(ft=U.next()).done;)ft=ft.value,Ht=jt+gt(ft,he++),Nt+=vt(ft,$,ht,Ht,Mt);else if(Ht==="object"){if(typeof U.then=="function")return vt(dt(U),$,ht,ft,Mt);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Nt}function H(U,$,ht){if(U==null)return U;var ft=[],Mt=0;return vt(U,ft,"","",function(Ht){return $.call(ht,Ht,Mt++)}),ft}function Z(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(ht){(U._status===0||U._status===-1)&&(U._status=1,U._result=ht)},function(ht){(U._status===0||U._status===-1)&&(U._status=2,U._result=ht)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var ot=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function Ct(){}return ce.Children={map:H,forEach:function(U,$,ht){H(U,function(){$.apply(this,arguments)},ht)},count:function(U){var $=0;return H(U,function(){$++}),$},toArray:function(U){return H(U,function($){return $})||[]},only:function(U){if(!J(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},ce.Component=R,ce.Fragment=e,ce.Profiler=a,ce.PureComponent=O,ce.StrictMode=n,ce.Suspense=f,ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ce.__COMPILER_RUNTIME={__proto__:null,c:function(U){return P.H.useMemoCache(U)}},ce.cache=function(U){return function(){return U.apply(null,arguments)}},ce.cloneElement=function(U,$,ht){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ft=T({},U.props),Mt=U.key,Ht=void 0;if($!=null)for(Nt in $.ref!==void 0&&(Ht=void 0),$.key!==void 0&&(Mt=""+$.key),$)!j.call($,Nt)||Nt==="key"||Nt==="__self"||Nt==="__source"||Nt==="ref"&&$.ref===void 0||(ft[Nt]=$[Nt]);var Nt=arguments.length-2;if(Nt===1)ft.children=ht;else if(1<Nt){for(var jt=Array(Nt),he=0;he<Nt;he++)jt[he]=arguments[he+2];ft.children=jt}return k(U.type,Mt,void 0,void 0,Ht,ft)},ce.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:r,_context:U},U},ce.createElement=function(U,$,ht){var ft,Mt={},Ht=null;if($!=null)for(ft in $.key!==void 0&&(Ht=""+$.key),$)j.call($,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(Mt[ft]=$[ft]);var Nt=arguments.length-2;if(Nt===1)Mt.children=ht;else if(1<Nt){for(var jt=Array(Nt),he=0;he<Nt;he++)jt[he]=arguments[he+2];Mt.children=jt}if(U&&U.defaultProps)for(ft in Nt=U.defaultProps,Nt)Mt[ft]===void 0&&(Mt[ft]=Nt[ft]);return k(U,Ht,void 0,void 0,null,Mt)},ce.createRef=function(){return{current:null}},ce.forwardRef=function(U){return{$$typeof:d,render:U}},ce.isValidElement=J,ce.lazy=function(U){return{$$typeof:y,_payload:{_status:-1,_result:U},_init:Z}},ce.memo=function(U,$){return{$$typeof:g,type:U,compare:$===void 0?null:$}},ce.startTransition=function(U){var $=P.T,ht={};P.T=ht;try{var ft=U(),Mt=P.S;Mt!==null&&Mt(ht,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(Ct,ot)}catch(Ht){ot(Ht)}finally{P.T=$}},ce.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ce.use=function(U){return P.H.use(U)},ce.useActionState=function(U,$,ht){return P.H.useActionState(U,$,ht)},ce.useCallback=function(U,$){return P.H.useCallback(U,$)},ce.useContext=function(U){return P.H.useContext(U)},ce.useDebugValue=function(){},ce.useDeferredValue=function(U,$){return P.H.useDeferredValue(U,$)},ce.useEffect=function(U,$,ht){var ft=P.H;if(typeof ht=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ft.useEffect(U,$)},ce.useId=function(){return P.H.useId()},ce.useImperativeHandle=function(U,$,ht){return P.H.useImperativeHandle(U,$,ht)},ce.useInsertionEffect=function(U,$){return P.H.useInsertionEffect(U,$)},ce.useLayoutEffect=function(U,$){return P.H.useLayoutEffect(U,$)},ce.useMemo=function(U,$){return P.H.useMemo(U,$)},ce.useOptimistic=function(U,$){return P.H.useOptimistic(U,$)},ce.useReducer=function(U,$,ht){return P.H.useReducer(U,$,ht)},ce.useRef=function(U){return P.H.useRef(U)},ce.useState=function(U){return P.H.useState(U)},ce.useSyncExternalStore=function(U,$,ht){return P.H.useSyncExternalStore(U,$,ht)},ce.useTransition=function(){return P.H.useTransition()},ce.version="19.1.1",ce}var m2;function M0(){return m2||(m2=1,Gm.exports=o3()),Gm.exports}var q=M0();const Jn=Y1(q);var km={exports:{}},Sf={},jm={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2;function u3(){return y2||(y2=1,(function(l){function t(H,Z){var ot=H.length;H.push(Z);t:for(;0<ot;){var Ct=ot-1>>>1,U=H[Ct];if(0<a(U,Z))H[Ct]=Z,H[ot]=U,ot=Ct;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Z=H[0],ot=H.pop();if(ot!==Z){H[0]=ot;t:for(var Ct=0,U=H.length,$=U>>>1;Ct<$;){var ht=2*(Ct+1)-1,ft=H[ht],Mt=ht+1,Ht=H[Mt];if(0>a(ft,ot))Mt<U&&0>a(Ht,ft)?(H[Ct]=Ht,H[Mt]=ot,Ct=Mt):(H[Ct]=ft,H[ht]=ot,Ct=ht);else if(Mt<U&&0>a(Ht,ot))H[Ct]=Ht,H[Mt]=ot,Ct=Mt;else break t}}return Z}function a(H,Z){var ot=H.sortIndex-Z.sortIndex;return ot!==0?ot:H.id-Z.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;l.unstable_now=function(){return r.now()}}else{var u=Date,d=u.now();l.unstable_now=function(){return u.now()-d}}var f=[],g=[],y=1,S=null,_=3,x=!1,T=!1,w=!1,R=!1,M=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function z(H){for(var Z=e(g);Z!==null;){if(Z.callback===null)n(g);else if(Z.startTime<=H)n(g),Z.sortIndex=Z.expirationTime,t(f,Z);else break;Z=e(g)}}function P(H){if(w=!1,z(H),!T)if(e(f)!==null)T=!0,j||(j=!0,gt());else{var Z=e(g);Z!==null&&vt(P,Z.startTime-H)}}var j=!1,k=-1,Y=5,J=-1;function lt(){return R?!0:!(l.unstable_now()-J<Y)}function ct(){if(R=!1,j){var H=l.unstable_now();J=H;var Z=!0;try{t:{T=!1,w&&(w=!1,O(k),k=-1),x=!0;var ot=_;try{e:{for(z(H),S=e(f);S!==null&&!(S.expirationTime>H&&lt());){var Ct=S.callback;if(typeof Ct=="function"){S.callback=null,_=S.priorityLevel;var U=Ct(S.expirationTime<=H);if(H=l.unstable_now(),typeof U=="function"){S.callback=U,z(H),Z=!0;break e}S===e(f)&&n(f),z(H)}else n(f);S=e(f)}if(S!==null)Z=!0;else{var $=e(g);$!==null&&vt(P,$.startTime-H),Z=!1}}break t}finally{S=null,_=ot,x=!1}Z=void 0}}finally{Z?gt():j=!1}}}var gt;if(typeof N=="function")gt=function(){N(ct)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,dt=St.port2;St.port1.onmessage=ct,gt=function(){dt.postMessage(null)}}else gt=function(){M(ct,0)};function vt(H,Z){k=M(function(){H(l.unstable_now())},Z)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(H){H.callback=null},l.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<H?Math.floor(1e3/H):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_next=function(H){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var ot=_;_=Z;try{return H()}finally{_=ot}},l.unstable_requestPaint=function(){R=!0},l.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ot=_;_=H;try{return Z()}finally{_=ot}},l.unstable_scheduleCallback=function(H,Z,ot){var Ct=l.unstable_now();switch(typeof ot=="object"&&ot!==null?(ot=ot.delay,ot=typeof ot=="number"&&0<ot?Ct+ot:Ct):ot=Ct,H){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ot+U,H={id:y++,callback:Z,priorityLevel:H,startTime:ot,expirationTime:U,sortIndex:-1},ot>Ct?(H.sortIndex=ot,t(g,H),e(f)===null&&H===e(g)&&(w?(O(k),k=-1):w=!0,vt(P,ot-Ct))):(H.sortIndex=U,t(f,H),T||x||(T=!0,j||(j=!0,gt()))),H},l.unstable_shouldYield=lt,l.unstable_wrapCallback=function(H){var Z=_;return function(){var ot=_;_=Z;try{return H.apply(this,arguments)}finally{_=ot}}}})(Fm)),Fm}var v2;function X1(){return v2||(v2=1,jm.exports=u3()),jm.exports}var qm={exports:{}},Bi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function c3(){if(b2)return Bi;b2=1;var l=M0();function t(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(f,g,y){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:S==null?null:""+S,children:f,containerInfo:g,implementation:y}}var u=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Bi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Bi.createPortal=function(f,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return r(f,g,null,y)},Bi.flushSync=function(f){var g=u.T,y=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=g,n.p=y,n.d.f()}},Bi.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(f,g))},Bi.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Bi.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var y=g.as,S=d(y,g.crossOrigin),_=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?n.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:S,integrity:_,fetchPriority:x}):y==="script"&&n.d.X(f,{crossOrigin:S,integrity:_,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Bi.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);n.d.M(f,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(f)},Bi.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,S=d(y,g.crossOrigin);n.d.L(f,y,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Bi.preloadModule=function(f,g){if(typeof f=="string")if(g){var y=d(g.as,g.crossOrigin);n.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(f)},Bi.requestFormReset=function(f){n.d.r(f)},Bi.unstable_batchedUpdates=function(f,g){return f(g)},Bi.useFormState=function(f,g,y){return u.H.useFormState(f,g,y)},Bi.useFormStatus=function(){return u.H.useHostTransitionStatus()},Bi.version="19.1.1",Bi}var S2;function h3(){if(S2)return qm.exports;S2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),qm.exports=c3(),qm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2;function d3(){if(_2)return Sf;_2=1;var l=X1(),t=M0(),e=h3();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function r(i){var s=i,h=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(h=s.return),i=s.return;while(i)}return s.tag===3?h:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(r(i)!==i)throw Error(n(188))}function f(i){var s=i.alternate;if(!s){if(s=r(i),s===null)throw Error(n(188));return s!==i?null:i}for(var h=i,p=s;;){var v=h.return;if(v===null)break;var A=v.alternate;if(A===null){if(p=v.return,p!==null){h=p;continue}break}if(v.child===A.child){for(A=v.child;A;){if(A===h)return d(v),i;if(A===p)return d(v),s;A=A.sibling}throw Error(n(188))}if(h.return!==p.return)h=v,p=A;else{for(var D=!1,L=v.child;L;){if(L===h){D=!0,h=v,p=A;break}if(L===p){D=!0,p=v,h=A;break}L=L.sibling}if(!D){for(L=A.child;L;){if(L===h){D=!0,h=A,p=v;break}if(L===p){D=!0,p=A,h=v;break}L=L.sibling}if(!D)throw Error(n(189))}}if(h.alternate!==p)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?i:s}function g(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=g(i),s!==null)return s;i=i.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),ct=Symbol.iterator;function gt(i){return i===null||typeof i!="object"?null:(i=ct&&i[ct]||i["@@iterator"],typeof i=="function"?i:null)}var St=Symbol.for("react.client.reference");function dt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===St?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case j:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case N:return(i.displayName||"Context")+".Provider";case O:return(i._context.displayName||"Context")+".Consumer";case z:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return s=i.displayName||null,s!==null?s:dt(i.type)||"Memo";case Y:s=i._payload,i=i._init;try{return dt(i(s))}catch{}}return null}var vt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},Ct=[],U=-1;function $(i){return{current:i}}function ht(i){0>U||(i.current=Ct[U],Ct[U]=null,U--)}function ft(i,s){U++,Ct[U]=i.current,i.current=s}var Mt=$(null),Ht=$(null),Nt=$(null),jt=$(null);function he(i,s){switch(ft(Nt,s),ft(Ht,i),ft(Mt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Gy(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Gy(s),i=ky(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ht(Mt),ft(Mt,i)}function un(){ht(Mt),ht(Ht),ht(Nt)}function Te(i){i.memoizedState!==null&&ft(jt,i);var s=Mt.current,h=ky(s,i.type);s!==h&&(ft(Ht,i),ft(Mt,h))}function Tn(i){Ht.current===i&&(ht(Mt),ht(Ht)),jt.current===i&&(ht(jt),pf._currentValue=ot)}var Yn=Object.prototype.hasOwnProperty,ee=l.unstable_scheduleCallback,Pe=l.unstable_cancelCallback,de=l.unstable_shouldYield,Et=l.unstable_requestPaint,Gt=l.unstable_now,ne=l.unstable_getCurrentPriorityLevel,Oe=l.unstable_ImmediatePriority,vn=l.unstable_UserBlockingPriority,xe=l.unstable_NormalPriority,He=l.unstable_LowPriority,ki=l.unstable_IdlePriority,ls=l.log,os=l.unstable_setDisableYieldValue,_e=null,Jt=null;function $e(i){if(typeof ls=="function"&&os(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(_e,i)}catch{}}var tn=Math.clz32?Math.clz32:gp,Rl=Math.log,pp=Math.LN2;function gp(i){return i>>>=0,i===0?32:31-(Rl(i)/pp|0)|0}var Bo=256,ic=4194304;function us(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ac(i,s,h){var p=i.pendingLanes;if(p===0)return 0;var v=0,A=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var L=p&134217727;return L!==0?(p=L&~A,p!==0?v=us(p):(D&=L,D!==0?v=us(D):h||(h=L&~i,h!==0&&(v=us(h))))):(L=p&~A,L!==0?v=us(L):D!==0?v=us(D):h||(h=p&~i,h!==0&&(v=us(h)))),v===0?0:s!==0&&s!==v&&(s&A)===0&&(A=v&-v,h=s&-s,A>=h||A===32&&(h&4194048)!==0)?s:v}function Ml(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function $0(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sc(){var i=Bo;return Bo<<=1,(Bo&4194048)===0&&(Bo=256),i}function Po(){var i=ic;return ic<<=1,(ic&62914560)===0&&(ic=4194304),i}function rc(i){for(var s=[],h=0;31>h;h++)s.push(i);return s}function qs(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function mp(i,s,h,p,v,A){var D=i.pendingLanes;i.pendingLanes=h,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=h,i.entangledLanes&=h,i.errorRecoveryDisabledLanes&=h,i.shellSuspendCounter=0;var L=i.entanglements,F=i.expirationTimes,et=i.hiddenUpdates;for(h=D&~h;0<h;){var pt=31-tn(h),yt=1<<pt;L[pt]=0,F[pt]=-1;var it=et[pt];if(it!==null)for(et[pt]=null,pt=0;pt<it.length;pt++){var at=it[pt];at!==null&&(at.lane&=-536870913)}h&=~yt}p!==0&&Ho(i,p,0),A!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=A&~(D&~s))}function Ho(i,s,h){i.pendingLanes|=s,i.suspendedLanes&=~s;var p=31-tn(s);i.entangledLanes|=s,i.entanglements[p]=i.entanglements[p]|1073741824|h&4194090}function Yh(i,s){var h=i.entangledLanes|=s;for(i=i.entanglements;h;){var p=31-tn(h),v=1<<p;v&s|i[p]&s&&(i[p]|=s),h&=~v}}function lc(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function oc(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Uo(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:s2(i.type))}function uc(i,s){var h=Z.p;try{return Z.p=i,s()}finally{Z.p=h}}var Da=Math.random().toString(36).slice(2),bn="__reactFiber$"+Da,fi="__reactProps$"+Da,cs="__reactContainer$"+Da,Go="__reactEvents$"+Da,Xh="__reactListeners$"+Da,Is="__reactHandles$"+Da,hs="__reactResources$"+Da,ds="__reactMarker$"+Da;function ko(i){delete i[bn],delete i[fi],delete i[Go],delete i[Xh],delete i[Is]}function Oa(i){var s=i[bn];if(s)return s;for(var h=i.parentNode;h;){if(s=h[cs]||h[bn]){if(h=s.alternate,s.child!==null||h!==null&&h.child!==null)for(i=Iy(i);i!==null;){if(h=i[bn])return h;i=Iy(i)}return s}i=h,h=i.parentNode}return null}function Na(i){if(i=i[bn]||i[cs]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Dl(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Gr(i){var s=i[hs];return s||(s=i[hs]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function On(i){i[ds]=!0}var cc=new Set,hc={};function Ie(i,s){Vs(i,s),Vs(i+"Capture",s)}function Vs(i,s){for(hc[i]=s,i=0;i<s.length;i++)cc.add(s[i])}var Kh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qh={},Zh={};function tm(i){return Yn.call(Zh,i)?!0:Yn.call(Qh,i)?!1:Kh.test(i)?Zh[i]=!0:(Qh[i]=!0,!1)}function Ol(i,s,h){if(tm(s))if(h===null)i.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+h)}}function Nl(i,s,h){if(h===null)i.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+h)}}function ga(i,s,h,p){if(p===null)i.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(h);return}i.setAttributeNS(s,h,""+p)}}var ti,Sn;function Ys(i){if(ti===void 0)try{throw Error()}catch(h){var s=h.stack.trim().match(/\n( *(at )?)/);ti=s&&s[1]||"",Sn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+i+Sn}var kr=!1;function Ll(i,s){if(!i||kr)return"";kr=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(at){var it=at}Reflect.construct(i,[],yt)}else{try{yt.call()}catch(at){it=at}i.call(yt.prototype)}}else{try{throw Error()}catch(at){it=at}(yt=i())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(at){if(at&&it&&typeof at.stack=="string")return[at.stack,it.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=p.DetermineComponentFrameRoot(),D=A[0],L=A[1];if(D&&L){var F=D.split(`
`),et=L.split(`
`);for(v=p=0;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;for(;v<et.length&&!et[v].includes("DetermineComponentFrameRoot");)v++;if(p===F.length||v===et.length)for(p=F.length-1,v=et.length-1;1<=p&&0<=v&&F[p]!==et[v];)v--;for(;1<=p&&0<=v;p--,v--)if(F[p]!==et[v]){if(p!==1||v!==1)do if(p--,v--,0>v||F[p]!==et[v]){var pt=`
`+F[p].replace(" at new "," at ");return i.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",i.displayName)),pt}while(1<=p&&0<=v);break}}}finally{kr=!1,Error.prepareStackTrace=h}return(h=i?i.displayName||i.name:"")?Ys(h):""}function Wh(i){switch(i.tag){case 26:case 27:case 5:return Ys(i.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 15:return Ll(i.type,!1);case 11:return Ll(i.type.render,!1);case 1:return Ll(i.type,!0);case 31:return Ys("Activity");default:return""}}function La(i){try{var s="";do s+=Wh(i),i=i.return;while(i);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function pi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function dc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Jh(i){var s=dc(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),p=""+i[s];if(!i.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,A=h.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return v.call(this)},set:function(D){p=""+D,A.call(this,D)}}),Object.defineProperty(i,s,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(D){p=""+D},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function jo(i){i._valueTracker||(i._valueTracker=Jh(i))}function $h(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var h=s.getValue(),p="";return i&&(p=dc(i)?i.checked?"true":"false":i.value),i=p,i!==h?(s.setValue(i),!0):!1}function Fo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var yp=/[\n"\\]/g;function ji(i){return i.replace(yp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fc(i,s,h,p,v,A,D,L){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),s!=null?D==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+pi(s)):i.value!==""+pi(s)&&(i.value=""+pi(s)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),s!=null?gc(i,D,pi(s)):h!=null?gc(i,D,pi(h)):p!=null&&i.removeAttribute("value"),v==null&&A!=null&&(i.defaultChecked=!!A),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?i.name=""+pi(L):i.removeAttribute("name")}function pc(i,s,h,p,v,A,D,L){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.type=A),s!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||s!=null))return;h=h!=null?""+pi(h):"",s=s!=null?""+pi(s):h,L||s===i.value||(i.value=s),i.defaultValue=s}p=p??v,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=L?i.checked:!!p,i.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function gc(i,s,h){s==="number"&&Fo(i.ownerDocument)===i||i.defaultValue===""+h||(i.defaultValue=""+h)}function zl(i,s,h,p){if(i=i.options,s){s={};for(var v=0;v<h.length;v++)s["$"+h[v]]=!0;for(h=0;h<i.length;h++)v=s.hasOwnProperty("$"+i[h].value),i[h].selected!==v&&(i[h].selected=v),v&&p&&(i[h].defaultSelected=!0)}else{for(h=""+pi(h),s=null,v=0;v<i.length;v++){if(i[v].value===h){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}s!==null||i[v].disabled||(s=i[v])}s!==null&&(s.selected=!0)}}function td(i,s,h){if(s!=null&&(s=""+pi(s),s!==i.value&&(i.value=s),h==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=h!=null?""+pi(h):""}function ed(i,s,h,p){if(s==null){if(p!=null){if(h!=null)throw Error(n(92));if(vt(p)){if(1<p.length)throw Error(n(93));p=p[0]}h=p}h==null&&(h=""),s=h}h=pi(s),i.defaultValue=h,p=i.textContent,p===h&&p!==""&&p!==null&&(i.value=p)}function jr(i,s){if(s){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=s;return}}i.textContent=s}var nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(i,s,h){var p=s.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":p?i.setProperty(s,h):typeof h!="number"||h===0||nd.has(s)?s==="float"?i.cssFloat=h:i[s]=(""+h).trim():i[s]=h+"px"}function ad(i,s,h){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var v in s)p=s[v],s.hasOwnProperty(v)&&h[v]!==p&&id(i,v,p)}else for(var A in s)s.hasOwnProperty(A)&&id(i,A,s[A])}function mc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yc(i){return bp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var vc=null;function Xs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var fs=null,Fr=null;function qo(i){var s=Na(i);if(s&&(i=s.stateNode)){var h=i[fi]||null;t:switch(i=s.stateNode,s.type){case"input":if(fc(i,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),s=h.name,h.type==="radio"&&s!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ji(""+s)+'"][type="radio"]'),s=0;s<h.length;s++){var p=h[s];if(p!==i&&p.form===i.form){var v=p[fi]||null;if(!v)throw Error(n(90));fc(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(s=0;s<h.length;s++)p=h[s],p.form===i.form&&$h(p)}break t;case"textarea":td(i,h.value,h.defaultValue);break t;case"select":s=h.value,s!=null&&zl(i,!!h.multiple,s,!1)}}}var qr=!1;function sd(i,s,h){if(qr)return i(s,h);qr=!0;try{var p=i(s);return p}finally{if(qr=!1,(fs!==null||Fr!==null)&&(Ar(),fs&&(s=fs,i=Fr,Fr=fs=null,qo(s),i)))for(s=0;s<i.length;s++)qo(i[s])}}function Bl(i,s){var h=i.stateNode;if(h===null)return null;var p=h[fi]||null;if(p===null)return null;h=p[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(n(231,s,typeof h));return h}var za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=!1;if(za)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){bc=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{bc=!1}var ps=null,Io=null,Vo=null;function rd(){if(Vo)return Vo;var i,s=Io,h=s.length,p,v="value"in ps?ps.value:ps.textContent,A=v.length;for(i=0;i<h&&s[i]===v[i];i++);var D=h-i;for(p=1;p<=D&&s[h-p]===v[A-p];p++);return Vo=v.slice(i,1<p?1-p:void 0)}function Hl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Yo(){return!0}function ld(){return!1}function gi(i){function s(h,p,v,A,D){this._reactName=h,this._targetInst=v,this.type=p,this.nativeEvent=A,this.target=D,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(h=i[L],this[L]=h?h(A):A[L]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Yo:ld,this.isPropagationStopped=ld,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Yo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Yo)},persist:function(){},isPersistent:Yo}),s}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xo=gi(gs),Ul=y({},gs,{view:0,detail:0}),em=gi(Ul),od,Sc,ms,Gl=y({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ms&&(ms&&i.type==="mousemove"?(od=i.screenX-ms.screenX,Sc=i.screenY-ms.screenY):Sc=od=0,ms=i),od)},movementY:function(i){return"movementY"in i?i.movementY:Sc}}),Ko=gi(Gl),Sp=y({},Gl,{dataTransfer:0}),_p=gi(Sp),_c=y({},Ul,{relatedTarget:0}),Ir=gi(_c),Ac=y({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ap=gi(Ac),Ep=y({},gs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ks=gi(Ep),Tp=y({},gs,{data:0}),ys=gi(Tp),vs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ud={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xp(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ud[i])?!!s[i]:!1}function Tc(){return xp}var Vr=y({},Ul,{key:function(i){if(i.key){var s=vs[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Hl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ec[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(i){return i.type==="keypress"?Hl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Hl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),xc=gi(Vr),Cp=y({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cc=gi(Cp),wp=y({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),Rp=gi(wp),nm=y({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xn=gi(nm),Mp=y({},Gl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Dp=gi(Mp),Op=y({},gs,{newState:0,oldState:0}),Np=gi(Op),Lp=[9,13,27,32],kl=za&&"CompositionEvent"in window,Yr=null;za&&"documentMode"in document&&(Yr=document.documentMode);var zp=za&&"TextEvent"in window&&!Yr,cd=za&&(!kl||Yr&&8<Yr&&11>=Yr),hd=" ",wc=!1;function Rc(i,s){switch(i){case"keyup":return Lp.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qs=!1;function Mc(i,s){switch(i){case"compositionend":return dd(s);case"keypress":return s.which!==32?null:(wc=!0,hd);case"textInput":return i=s.data,i===hd&&wc?null:i;default:return null}}function fd(i,s){if(Qs)return i==="compositionend"||!kl&&Rc(i,s)?(i=rd(),Vo=Io=ps=null,Qs=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cd&&s.locale!=="ko"?null:s.data;default:return null}}var Bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dc(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Bp[i.type]:s==="textarea"}function pd(i,s,h,p){fs?Fr?Fr.push(p):Fr=[p]:fs=p,s=Ng(s,"onChange"),0<s.length&&(h=new Xo("onChange","change",null,h,p),i.push({event:h,listeners:s}))}var Fi=null,Xr=null;function im(i){zy(i,0)}function Qo(i){var s=Dl(i);if($h(s))return i}function xi(i,s){if(i==="change")return s}var gd=!1;if(za){var Zo;if(za){var Oc="oninput"in document;if(!Oc){var md=document.createElement("div");md.setAttribute("oninput","return;"),Oc=typeof md.oninput=="function"}Zo=Oc}else Zo=!1;gd=Zo&&(!document.documentMode||9<document.documentMode)}function Nc(){Fi&&(Fi.detachEvent("onpropertychange",Lc),Xr=Fi=null)}function Lc(i){if(i.propertyName==="value"&&Qo(Xr)){var s=[];pd(s,Xr,i,Xs(i)),sd(im,s)}}function Pp(i,s,h){i==="focusin"?(Nc(),Fi=s,Xr=h,Fi.attachEvent("onpropertychange",Lc)):i==="focusout"&&Nc()}function zc(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Qo(Xr)}function Wo(i,s){if(i==="click")return Qo(s)}function cn(i,s){if(i==="input"||i==="change")return Qo(s)}function am(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var qi=typeof Object.is=="function"?Object.is:am;function jl(i,s){if(qi(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var h=Object.keys(i),p=Object.keys(s);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var v=h[p];if(!Yn.call(s,v)||!qi(i[v],s[v]))return!1}return!0}function Fl(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bs(i,s){var h=Fl(i);i=0;for(var p;h;){if(h.nodeType===3){if(p=i+h.textContent.length,i<=s&&p>=s)return{node:h,offset:s-i};i=p}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Fl(h)}}function yd(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?yd(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function vd(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Fo(i.document);s instanceof i.HTMLIFrameElement;){try{var h=typeof s.contentWindow.location.href=="string"}catch{h=!1}if(h)i=s.contentWindow;else break;s=Fo(i.document)}return s}function Kr(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Ba=za&&"documentMode"in document&&11>=document.documentMode,Qr=null,Jo=null,ql=null,$o=!1;function Bc(i,s,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;$o||Qr==null||Qr!==Fo(p)||(p=Qr,"selectionStart"in p&&Kr(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ql&&jl(ql,p)||(ql=p,p=Ng(Jo,"onSelect"),0<p.length&&(s=new Xo("onSelect","select",null,s,h),i.push({event:s,listeners:p}),s.target=Qr)))}function Pa(i,s){var h={};return h[i.toLowerCase()]=s.toLowerCase(),h["Webkit"+i]="webkit"+s,h["Moz"+i]="moz"+s,h}var Zr={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},Pc={},Hp={};za&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Zs(i){if(Pc[i])return Pc[i];if(!Zr[i])return i;var s=Zr[i],h;for(h in s)if(s.hasOwnProperty(h)&&h in Hp)return Pc[i]=s[h];return i}var bd=Zs("animationend"),ta=Zs("animationiteration"),Hc=Zs("animationstart"),Up=Zs("transitionrun"),sm=Zs("transitionstart"),Sd=Zs("transitioncancel"),ei=Zs("transitionend"),_d=new Map,ni="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ni.push("scrollEnd");function ea(i,s){_d.set(i,s),Ie(s,[i])}var Ss=new WeakMap;function kn(i,s){if(typeof i=="object"&&i!==null){var h=Ss.get(i);return h!==void 0?h:(s={value:i,source:s,stack:La(s)},Ss.set(i,s),s)}return{value:i,source:s,stack:La(s)}}var Nn=[],Ws=0,tu=0;function Ii(){for(var i=Ws,s=tu=Ws=0;s<i;){var h=Nn[s];Nn[s++]=null;var p=Nn[s];Nn[s++]=null;var v=Nn[s];Nn[s++]=null;var A=Nn[s];if(Nn[s++]=null,p!==null&&v!==null){var D=p.pending;D===null?v.next=v:(v.next=D.next,D.next=v),p.pending=v}A!==0&&$s(h,v,A)}}function eu(i,s,h,p){Nn[Ws++]=i,Nn[Ws++]=s,Nn[Ws++]=h,Nn[Ws++]=p,tu|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Js(i,s,h,p){return eu(i,s,h,p),nu(i)}function Ha(i,s){return eu(i,null,null,s),nu(i)}function $s(i,s,h){i.lanes|=h;var p=i.alternate;p!==null&&(p.lanes|=h);for(var v=!1,A=i.return;A!==null;)A.childLanes|=h,p=A.alternate,p!==null&&(p.childLanes|=h),A.tag===22&&(i=A.stateNode,i===null||i._visibility&1||(v=!0)),i=A,A=A.return;return i.tag===3?(A=i.stateNode,v&&s!==null&&(v=31-tn(h),i=A.hiddenUpdates,p=i[v],p===null?i[v]=[s]:p.push(s),s.lane=h|536870912),A):null}function nu(i){if(50<$a)throw $a=0,zu=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Wr={};function iu(i,s,h,p){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(i,s,h,p){return new iu(i,s,h,p)}function Il(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ua(i,s){var h=i.alternate;return h===null?(h=Ci(i.tag,s,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=s,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&65011712,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,s=i.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h.refCleanup=i.refCleanup,h}function Uc(i,s){i.flags&=65011714;var h=i.alternate;return h===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=h.childLanes,i.lanes=h.lanes,i.child=h.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=h.memoizedProps,i.memoizedState=h.memoizedState,i.updateQueue=h.updateQueue,i.type=h.type,s=h.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Vl(i,s,h,p,v,A){var D=0;if(p=i,typeof i=="function")Il(i)&&(D=1);else if(typeof i=="string")D=X_(i,h,Mt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case J:return i=Ci(31,h,s,v),i.elementType=J,i.lanes=A,i;case T:return _s(h.children,v,A,s);case w:D=8,v|=24;break;case R:return i=Ci(12,h,s,v|2),i.elementType=R,i.lanes=A,i;case P:return i=Ci(13,h,s,v),i.elementType=P,i.lanes=A,i;case j:return i=Ci(19,h,s,v),i.elementType=j,i.lanes=A,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:case N:D=10;break t;case O:D=9;break t;case z:D=11;break t;case k:D=14;break t;case Y:D=16,p=null;break t}D=29,h=Error(n(130,i===null?"null":typeof i,"")),p=null}return s=Ci(D,h,s,v),s.elementType=i,s.type=p,s.lanes=A,s}function _s(i,s,h,p){return i=Ci(7,i,p,s),i.lanes=h,i}function Gc(i,s,h){return i=Ci(6,i,null,s),i.lanes=h,i}function au(i,s,h){return s=Ci(4,i.children!==null?i.children:[],i.key,s),s.lanes=h,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var jn=[],Jr=0,ii=null,su=0,Vi=[],na=0,wi=null,Ga=1,ma="";function ia(i,s){jn[Jr++]=su,jn[Jr++]=ii,ii=i,su=s}function Ad(i,s,h){Vi[na++]=Ga,Vi[na++]=ma,Vi[na++]=wi,wi=i;var p=Ga;i=ma;var v=32-tn(p)-1;p&=~(1<<v),h+=1;var A=32-tn(s)+v;if(30<A){var D=v-v%5;A=(p&(1<<D)-1).toString(32),p>>=D,v-=D,Ga=1<<32-tn(s)+v|h<<v|p,ma=A+i}else Ga=1<<A|h<<v|p,ma=i}function kc(i){i.return!==null&&(ia(i,1),Ad(i,1,0))}function jc(i){for(;i===ii;)ii=jn[--Jr],jn[Jr]=null,su=jn[--Jr],jn[Jr]=null;for(;i===wi;)wi=Vi[--na],Vi[na]=null,ma=Vi[--na],Vi[na]=null,Ga=Vi[--na],Vi[na]=null}var ai=null,sn=null,Ce=!1,$r=null,ka=!1,Ed=Error(n(519));function tr(i){var s=Error(n(418,""));throw Xl(kn(s,i)),Ed}function Td(i){var s=i.stateNode,h=i.type,p=i.memoizedProps;switch(s[bn]=i,s[fi]=p,h){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(h=0;h<of.length;h++)be(of[h],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":be("invalid",s),pc(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),jo(s);break;case"select":be("invalid",s);break;case"textarea":be("invalid",s),ed(s,p.value,p.defaultValue,p.children),jo(s)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||s.textContent===""+h||p.suppressHydrationWarning===!0||Uy(s.textContent,h)?(p.popover!=null&&(be("beforetoggle",s),be("toggle",s)),p.onScroll!=null&&be("scroll",s),p.onScrollEnd!=null&&be("scrollend",s),p.onClick!=null&&(s.onclick=Lg),s=!0):s=!1,s||tr(i)}function tl(i){for(ai=i.return;ai;)switch(ai.tag){case 5:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:ai=ai.return}}function er(i){if(i!==ai)return!1;if(!Ce)return tl(i),Ce=!0,!1;var s=i.tag,h;if((h=s!==3&&s!==27)&&((h=s===5)&&(h=i.type,h=!(h!=="form"&&h!=="button")||Em(i.type,i.memoizedProps)),h=!h),h&&sn&&tr(i),tl(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(h=i.data,h==="/$"){if(s===0){sn=Ps(i.nextSibling);break t}s--}else h!=="$"&&h!=="$!"&&h!=="$?"||s++;i=i.nextSibling}sn=null}}else s===27?(s=sn,yo(i.type)?(i=wm,wm=null,sn=i):sn=s):sn=ai?Ps(i.stateNode.nextSibling):null;return!0}function Yl(){sn=ai=null,Ce=!1}function xd(){var i=$r;return i!==null&&(Zn===null?Zn=i:Zn.push.apply(Zn,i),$r=null),i}function Xl(i){$r===null?$r=[i]:$r.push(i)}var Fc=$(null),nr=null,ja=null;function aa(i,s,h){ft(Fc,s._currentValue),s._currentValue=h}function Fa(i){i._currentValue=Fc.current,ht(Fc)}function qc(i,s,h){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===h)break;i=i.return}}function Le(i,s,h,p){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var A=v.dependencies;if(A!==null){var D=v.child;A=A.firstContext;t:for(;A!==null;){var L=A;A=v;for(var F=0;F<s.length;F++)if(L.context===s[F]){A.lanes|=h,L=A.alternate,L!==null&&(L.lanes|=h),qc(A.return,h,i),p||(D=null);break t}A=L.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(n(341));D.lanes|=h,A=D.alternate,A!==null&&(A.lanes|=h),qc(D,h,i),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===i){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function el(i,s,h,p){i=null;for(var v=s,A=!1;v!==null;){if(!A){if((v.flags&524288)!==0)A=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(n(387));if(D=D.memoizedProps,D!==null){var L=v.type;qi(v.pendingProps.value,D.value)||(i!==null?i.push(L):i=[L])}}else if(v===jt.current){if(D=v.alternate,D===null)throw Error(n(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(pf):i=[pf])}v=v.return}i!==null&&Le(s,i,h,p),s.flags|=262144}function Ic(i){for(i=i.firstContext;i!==null;){if(!qi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ir(i){nr=i,ja=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function si(i){return Gp(nr,i)}function Vc(i,s){return nr===null&&ir(i),Gp(i,s)}function Gp(i,s){var h=s._currentValue;if(s={context:s,memoizedValue:h,next:null},ja===null){if(i===null)throw Error(n(308));ja=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ja=ja.next=s;return h}var rm=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(h,p){i.push(p)}};this.abort=function(){s.aborted=!0,i.forEach(function(h){return h()})}},Cd=l.unstable_scheduleCallback,As=l.unstable_NormalPriority,xn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kl(){return{controller:new rm,data:new Map,refCount:0}}function ya(i){i.refCount--,i.refCount===0&&Cd(As,function(){i.controller.abort()})}var nl=null,ru=0,Ql=0,il=null;function kp(i,s){if(nl===null){var h=nl=[];ru=0,Ql=pm(),il={status:"pending",value:void 0,then:function(p){h.push(p)}}}return ru++,s.then(wd,wd),s}function wd(){if(--ru===0&&nl!==null){il!==null&&(il.status="fulfilled");var i=nl;nl=null,Ql=0,il=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function jp(i,s){var h=[],p={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return i.then(function(){p.status="fulfilled",p.value=s;for(var v=0;v<h.length;v++)(0,h[v])(s)},function(v){for(p.status="rejected",p.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),p}var Rd=H.S;H.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&kp(i,s),Rd!==null&&Rd(i,s)};var Es=$(null);function re(){var i=Es.current;return i!==null?i:qe.pooledCache}function Yc(i,s){s===null?ft(Es,Es.current):ft(Es,s.pool)}function Ri(){var i=re();return i===null?null:{parent:xn._currentValue,pool:i}}var al=Error(n(460)),Fp=Error(n(474)),sl=Error(n(542)),ar={then:function(){}};function rl(i){return i=i.status,i==="fulfilled"||i==="rejected"}function lu(){}function Xc(i,s,h){switch(h=i[h],h===void 0?i.push(s):h!==s&&(s.then(lu,lu),s=h),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ts(i),i;default:if(typeof s.status=="string")s.then(lu,lu);else{if(i=qe,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(p){if(s.status==="pending"){var v=s;v.status="fulfilled",v.value=p}},function(p){if(s.status==="pending"){var v=s;v.status="rejected",v.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Ts(i),i}throw ou=s,al}}var ou=null;function Md(){if(ou===null)throw Error(n(459));var i=ou;return ou=null,i}function Ts(i){if(i===al||i===sl)throw Error(n(483))}var qa=!1;function uu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cu(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ia(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function mi(i,s,h){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Kt&2)!==0){var v=p.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),p.pending=s,s=nu(i),$s(i,null,h),s}return eu(i,p,s,h),nu(i)}function ll(i,s,h){if(s=s.updateQueue,s!==null&&(s=s.shared,(h&4194048)!==0)){var p=s.lanes;p&=i.pendingLanes,h|=p,s.lanes=h,Yh(i,h)}}function Dd(i,s){var h=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var v=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?v=A=D:A=A.next=D,h=h.next}while(h!==null);A===null?v=A=s:A=A.next=s}else v=A=s;h={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:A,shared:p.shared,callbacks:p.callbacks},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=s:i.next=s,h.lastBaseUpdate=s}var Kc=!1;function hu(){if(Kc){var i=il;if(i!==null)throw i}}function sr(i,s,h,p){Kc=!1;var v=i.updateQueue;qa=!1;var A=v.firstBaseUpdate,D=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var F=L,et=F.next;F.next=null,D===null?A=et:D.next=et,D=F;var pt=i.alternate;pt!==null&&(pt=pt.updateQueue,L=pt.lastBaseUpdate,L!==D&&(L===null?pt.firstBaseUpdate=et:L.next=et,pt.lastBaseUpdate=F))}if(A!==null){var yt=v.baseState;D=0,pt=et=F=null,L=A;do{var it=L.lane&-536870913,at=it!==L.lane;if(at?(ve&it)===it:(p&it)===it){it!==0&&it===Ql&&(Kc=!0),pt!==null&&(pt=pt.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var Zt=i,It=L;it=s;var We=h;switch(It.tag){case 1:if(Zt=It.payload,typeof Zt=="function"){yt=Zt.call(We,yt,it);break t}yt=Zt;break t;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=It.payload,it=typeof Zt=="function"?Zt.call(We,yt,it):Zt,it==null)break t;yt=y({},yt,it);break t;case 2:qa=!0}}it=L.callback,it!==null&&(i.flags|=64,at&&(i.flags|=8192),at=v.callbacks,at===null?v.callbacks=[it]:at.push(it))}else at={lane:it,tag:L.tag,payload:L.payload,callback:L.callback,next:null},pt===null?(et=pt=at,F=yt):pt=pt.next=at,D|=it;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;at=L,L=at.next,at.next=null,v.lastBaseUpdate=at,v.shared.pending=null}}while(!0);pt===null&&(F=yt),v.baseState=F,v.firstBaseUpdate=et,v.lastBaseUpdate=pt,A===null&&(v.shared.lanes=0),Ye|=D,i.lanes=D,i.memoizedState=yt}}function kt(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function qp(i,s){var h=i.callbacks;if(h!==null)for(i.callbacks=null,i=0;i<h.length;i++)kt(h[i],s)}var Zl=$(null),du=$(0);function Wl(i,s){i=Ja,ft(du,i),ft(Zl,s),Ja=i|s.baseLanes}function Od(){ft(du,Ja),ft(Zl,Zl.current)}function Nd(){Ja=du.current,ht(Zl),ht(du)}var rr=0,le=null,je=null,pn=null,fu=!1,xs=!1,lr=!1,Qc=0,pu=0,sa=null,Cs=0;function ge(){throw Error(n(321))}function Va(i,s){if(s===null)return!1;for(var h=0;h<s.length&&h<i.length;h++)if(!qi(i[h],s[h]))return!1;return!0}function Mi(i,s,h,p,v,A){return rr=A,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=i===null||i.memoizedState===null?Sg:Qd,lr=!1,A=h(p,v),lr=!1,xs&&(A=Vp(s,h,p,v)),Ip(i),A}function Ip(i){H.H=eh;var s=je!==null&&je.next!==null;if(rr=0,pn=je=le=null,fu=!1,pu=0,sa=null,s)throw Error(n(300));i===null||Fe||(i=i.dependencies,i!==null&&Ic(i)&&(Fe=!0))}function Vp(i,s,h,p){le=i;var v=0;do{if(xs&&(sa=null),pu=0,xs=!1,25<=v)throw Error(n(301));if(v+=1,pn=je=null,i.updateQueue!=null){var A=i.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}H.H=cm,A=s(h,p)}while(xs);return A}function Fn(){var i=H.H,s=i.useState()[0];return s=typeof s.then=="function"?gu(s):s,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(le.flags|=1024),s}function va(){var i=Qc!==0;return Qc=0,i}function Ld(i,s,h){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~h}function zd(i){if(fu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}fu=!1}rr=0,pn=je=le=null,xs=!1,pu=Qc=0,sa=null}function Di(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?le.memoizedState=pn=i:pn=pn.next=i,pn}function Cn(){if(je===null){var i=le.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var s=pn===null?le.memoizedState:pn.next;if(s!==null)pn=s,je=i;else{if(i===null)throw le.alternate===null?Error(n(467)):Error(n(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},pn===null?le.memoizedState=pn=i:pn=pn.next=i}return pn}function Zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gu(i){var s=pu;return pu+=1,sa===null&&(sa=[]),i=Xc(sa,i,s),s=le,(pn===null?s.memoizedState:pn.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Sg:Qd),i}function mu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return gu(i);if(i.$$typeof===N)return si(i)}throw Error(n(438,String(i)))}function Bd(i){var s=null,h=le.updateQueue;if(h!==null&&(s=h.memoCache),s==null){var p=le.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(v){return v.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),h===null&&(h=Zc(),le.updateQueue=h),h.memoCache=s,h=s.data[s.index],h===void 0)for(h=s.data[s.index]=Array(i),p=0;p<i;p++)h[p]=lt;return s.index++,h}function Oi(i,s){return typeof s=="function"?s(i):s}function Ya(i){var s=Cn();return Pd(s,je,i)}function Pd(i,s,h){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=h;var v=i.baseQueue,A=p.pending;if(A!==null){if(v!==null){var D=v.next;v.next=A.next,A.next=D}s.baseQueue=v=A,p.pending=null}if(A=i.baseState,v===null)i.memoizedState=A;else{s=v.next;var L=D=null,F=null,et=s,pt=!1;do{var yt=et.lane&-536870913;if(yt!==et.lane?(ve&yt)===yt:(rr&yt)===yt){var it=et.revertLane;if(it===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),yt===Ql&&(pt=!0);else if((rr&it)===it){et=et.next,it===Ql&&(pt=!0);continue}else yt={lane:0,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},F===null?(L=F=yt,D=A):F=F.next=yt,le.lanes|=it,Ye|=it;yt=et.action,lr&&h(A,yt),A=et.hasEagerState?et.eagerState:h(A,yt)}else it={lane:yt,revertLane:et.revertLane,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},F===null?(L=F=it,D=A):F=F.next=it,le.lanes|=yt,Ye|=yt;et=et.next}while(et!==null&&et!==s);if(F===null?D=A:F.next=L,!qi(A,i.memoizedState)&&(Fe=!0,pt&&(h=il,h!==null)))throw h;i.memoizedState=A,i.baseState=D,i.baseQueue=F,p.lastRenderedState=A}return v===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function Hd(i){var s=Cn(),h=s.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var p=h.dispatch,v=h.pending,A=s.memoizedState;if(v!==null){h.pending=null;var D=v=v.next;do A=i(A,D.action),D=D.next;while(D!==v);qi(A,s.memoizedState)||(Fe=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),h.lastRenderedState=A}return[A,p]}function Yp(i,s,h){var p=le,v=Cn(),A=Ce;if(A){if(h===void 0)throw Error(n(407));h=h()}else h=s();var D=!qi((je||v).memoizedState,h);D&&(v.memoizedState=h,Fe=!0),v=v.queue;var L=Kp.bind(null,p,v,i);if(yu(2048,8,L,[i]),v.getSnapshot!==s||D||pn!==null&&pn.memoizedState.tag&1){if(p.flags|=2048,to(9,Wc(),Xp.bind(null,p,v,h,s),null),qe===null)throw Error(n(349));A||(rr&124)!==0||Jl(p,s,h)}return h}function Jl(i,s,h){i.flags|=16384,i={getSnapshot:s,value:h},s=le.updateQueue,s===null?(s=Zc(),le.updateQueue=s,s.stores=[i]):(h=s.stores,h===null?s.stores=[i]:h.push(i))}function Xp(i,s,h,p){s.value=h,s.getSnapshot=p,Qp(s)&&$l(i)}function Kp(i,s,h){return h(function(){Qp(s)&&$l(i)})}function Qp(i){var s=i.getSnapshot;i=i.value;try{var h=s();return!qi(i,h)}catch{return!0}}function $l(i){var s=Ha(i,2);s!==null&&Dn(s,i,2)}function Ud(i){var s=Di();if(typeof i=="function"){var h=i;if(i=h(),lr){$e(!0);try{h()}finally{$e(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:i},s}function Zp(i,s,h,p){return i.baseState=h,Pd(i,je,typeof p=="function"?p:Oi)}function lm(i,s,h,p,v){if(th(i))throw Error(n(485));if(i=s.action,i!==null){var A={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){A.listeners.push(D)}};H.T!==null?h(!0):A.isTransition=!1,p(A),h=s.pending,h===null?(A.next=s.pending=A,Wp(s,A)):(A.next=h.next,s.pending=h.next=A)}}function Wp(i,s){var h=s.action,p=s.payload,v=i.state;if(s.isTransition){var A=H.T,D={};H.T=D;try{var L=h(v,p),F=H.S;F!==null&&F(D,L),Jp(i,s,L)}catch(et){Gd(i,s,et)}finally{H.T=A}}else try{A=h(v,p),Jp(i,s,A)}catch(et){Gd(i,s,et)}}function Jp(i,s,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){$p(i,s,p)},function(p){return Gd(i,s,p)}):$p(i,s,h)}function $p(i,s,h){s.status="fulfilled",s.value=h,tg(s),i.state=h,s=i.pending,s!==null&&(h=s.next,h===s?i.pending=null:(h=h.next,s.next=h,Wp(i,h)))}function Gd(i,s,h){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=h,tg(s),s=s.next;while(s!==p)}i.action=null}function tg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function eg(i,s){return s}function ng(i,s){if(Ce){var h=qe.formState;if(h!==null){t:{var p=le;if(Ce){if(sn){e:{for(var v=sn,A=ka;v.nodeType!==8;){if(!A){v=null;break e}if(v=Ps(v.nextSibling),v===null){v=null;break e}}A=v.data,v=A==="F!"||A==="F"?v:null}if(v){sn=Ps(v.nextSibling),p=v.data==="F!";break t}}tr(p)}p=!1}p&&(s=h[0])}}return h=Di(),h.memoizedState=h.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:s},h.queue=p,h=yg.bind(null,le,p),p.dispatch=h,p=Ud(!1),A=Kd.bind(null,le,!1,p.queue),p=Di(),v={state:s,dispatch:null,action:i,pending:null},p.queue=v,h=lm.bind(null,le,v,A,h),v.dispatch=h,p.memoizedState=i,[s,h,!1]}function ig(i){var s=Cn();return ag(s,je,i)}function ag(i,s,h){if(s=Pd(i,s,eg)[0],i=Ya(Oi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=gu(s)}catch(D){throw D===al?sl:D}else p=s;s=Cn();var v=s.queue,A=v.dispatch;return h!==s.memoizedState&&(le.flags|=2048,to(9,Wc(),sg.bind(null,v,h),null)),[p,A,i]}function sg(i,s){i.action=s}function rg(i){var s=Cn(),h=je;if(h!==null)return ag(s,h,i);Cn(),s=s.memoizedState,h=Cn();var p=h.queue.dispatch;return h.memoizedState=i,[s,p,!1]}function to(i,s,h,p){return i={tag:i,create:h,deps:p,inst:s,next:null},s=le.updateQueue,s===null&&(s=Zc(),le.updateQueue=s),h=s.lastEffect,h===null?s.lastEffect=i.next=i:(p=h.next,h.next=i,i.next=p,s.lastEffect=i),i}function Wc(){return{destroy:void 0,resource:void 0}}function lg(){return Cn().memoizedState}function Jc(i,s,h,p){var v=Di();p=p===void 0?null:p,le.flags|=i,v.memoizedState=to(1|s,Wc(),h,p)}function yu(i,s,h,p){var v=Cn();p=p===void 0?null:p;var A=v.memoizedState.inst;je!==null&&p!==null&&Va(p,je.memoizedState.deps)?v.memoizedState=to(s,A,h,p):(le.flags|=i,v.memoizedState=to(1|s,A,h,p))}function kd(i,s){Jc(8390656,8,i,s)}function jd(i,s){yu(2048,8,i,s)}function og(i,s){return yu(4,2,i,s)}function Fd(i,s){return yu(4,4,i,s)}function qd(i,s){if(typeof s=="function"){i=i();var h=s(i);return function(){typeof h=="function"?h():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Id(i,s,h){h=h!=null?h.concat([i]):null,yu(4,4,qd.bind(null,s,i),h)}function vu(){}function $c(i,s){var h=Cn();s=s===void 0?null:s;var p=h.memoizedState;return s!==null&&Va(s,p[1])?p[0]:(h.memoizedState=[i,s],i)}function ug(i,s){var h=Cn();s=s===void 0?null:s;var p=h.memoizedState;if(s!==null&&Va(s,p[1]))return p[0];if(p=i(),lr){$e(!0);try{i()}finally{$e(!1)}}return h.memoizedState=[p,s],p}function Vd(i,s,h){return h===void 0||(rr&1073741824)!==0?i.memoizedState=s:(i.memoizedState=h,i=dn(),le.lanes|=i,Ye|=i,h)}function cg(i,s,h,p){return qi(h,s)?h:Zl.current!==null?(i=Vd(i,h,p),qi(i,s)||(Fe=!0),i):(rr&42)===0?(Fe=!0,i.memoizedState=h):(i=dn(),le.lanes|=i,Ye|=i,s)}function hg(i,s,h,p,v){var A=Z.p;Z.p=A!==0&&8>A?A:8;var D=H.T,L={};H.T=L,Kd(i,!1,s,h);try{var F=v(),et=H.S;if(et!==null&&et(L,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var pt=jp(F,p);bu(i,s,pt,_n(i))}else bu(i,s,p,_n(i))}catch(yt){bu(i,s,{then:function(){},status:"rejected",reason:yt},_n())}finally{Z.p=A,H.T=D}}function dg(){}function Yd(i,s,h,p){if(i.tag!==5)throw Error(n(476));var v=fg(i).queue;hg(i,v,s,ot,h===null?dg:function(){return pg(i),h(p)})}function fg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:ot},next:null};var h={};return s.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:h},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function pg(i){var s=fg(i).next.queue;bu(i,s,{},_n())}function Xd(){return si(pf)}function gg(){return Cn().memoizedState}function mg(){return Cn().memoizedState}function om(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var h=_n();i=Ia(h);var p=mi(s,i,h);p!==null&&(Dn(p,s,h),ll(p,s,h)),s={cache:Kl()},i.payload=s;return}s=s.return}}function um(i,s,h){var p=_n();h={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},th(i)?vg(s,h):(h=Js(i,s,h,p),h!==null&&(Dn(h,i,p),bg(h,s,p)))}function yg(i,s,h){var p=_n();bu(i,s,h,p)}function bu(i,s,h,p){var v={lane:p,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(th(i))vg(s,v);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var D=s.lastRenderedState,L=A(D,h);if(v.hasEagerState=!0,v.eagerState=L,qi(L,D))return eu(i,s,v,0),qe===null&&Ii(),!1}catch{}finally{}if(h=Js(i,s,v,p),h!==null)return Dn(h,i,p),bg(h,s,p),!0}return!1}function Kd(i,s,h,p){if(p={lane:2,revertLane:pm(),action:p,hasEagerState:!1,eagerState:null,next:null},th(i)){if(s)throw Error(n(479))}else s=Js(i,h,p,2),s!==null&&Dn(s,i,2)}function th(i){var s=i.alternate;return i===le||s!==null&&s===le}function vg(i,s){xs=fu=!0;var h=i.pending;h===null?s.next=s:(s.next=h.next,h.next=s),i.pending=s}function bg(i,s,h){if((h&4194048)!==0){var p=s.lanes;p&=i.pendingLanes,h|=p,s.lanes=h,Yh(i,h)}}var eh={readContext:si,use:mu,useCallback:ge,useContext:ge,useEffect:ge,useImperativeHandle:ge,useLayoutEffect:ge,useInsertionEffect:ge,useMemo:ge,useReducer:ge,useRef:ge,useState:ge,useDebugValue:ge,useDeferredValue:ge,useTransition:ge,useSyncExternalStore:ge,useId:ge,useHostTransitionStatus:ge,useFormState:ge,useActionState:ge,useOptimistic:ge,useMemoCache:ge,useCacheRefresh:ge},Sg={readContext:si,use:mu,useCallback:function(i,s){return Di().memoizedState=[i,s===void 0?null:s],i},useContext:si,useEffect:kd,useImperativeHandle:function(i,s,h){h=h!=null?h.concat([i]):null,Jc(4194308,4,qd.bind(null,s,i),h)},useLayoutEffect:function(i,s){return Jc(4194308,4,i,s)},useInsertionEffect:function(i,s){Jc(4,2,i,s)},useMemo:function(i,s){var h=Di();s=s===void 0?null:s;var p=i();if(lr){$e(!0);try{i()}finally{$e(!1)}}return h.memoizedState=[p,s],p},useReducer:function(i,s,h){var p=Di();if(h!==void 0){var v=h(s);if(lr){$e(!0);try{h(s)}finally{$e(!1)}}}else v=s;return p.memoizedState=p.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},p.queue=i,i=i.dispatch=um.bind(null,le,i),[p.memoizedState,i]},useRef:function(i){var s=Di();return i={current:i},s.memoizedState=i},useState:function(i){i=Ud(i);var s=i.queue,h=yg.bind(null,le,s);return s.dispatch=h,[i.memoizedState,h]},useDebugValue:vu,useDeferredValue:function(i,s){var h=Di();return Vd(h,i,s)},useTransition:function(){var i=Ud(!1);return i=hg.bind(null,le,i.queue,!0,!1),Di().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,h){var p=le,v=Di();if(Ce){if(h===void 0)throw Error(n(407));h=h()}else{if(h=s(),qe===null)throw Error(n(349));(ve&124)!==0||Jl(p,s,h)}v.memoizedState=h;var A={value:h,getSnapshot:s};return v.queue=A,kd(Kp.bind(null,p,A,i),[i]),p.flags|=2048,to(9,Wc(),Xp.bind(null,p,A,h,s),null),h},useId:function(){var i=Di(),s=qe.identifierPrefix;if(Ce){var h=ma,p=Ga;h=(p&~(1<<32-tn(p)-1)).toString(32)+h,s=""+s+"R"+h,h=Qc++,0<h&&(s+="H"+h.toString(32)),s+=""}else h=Cs++,s=""+s+"r"+h.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:Xd,useFormState:ng,useActionState:ng,useOptimistic:function(i){var s=Di();s.memoizedState=s.baseState=i;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=h,s=Kd.bind(null,le,!0,h),h.dispatch=s,[i,s]},useMemoCache:Bd,useCacheRefresh:function(){return Di().memoizedState=om.bind(null,le)}},Qd={readContext:si,use:mu,useCallback:$c,useContext:si,useEffect:jd,useImperativeHandle:Id,useInsertionEffect:og,useLayoutEffect:Fd,useMemo:ug,useReducer:Ya,useRef:lg,useState:function(){return Ya(Oi)},useDebugValue:vu,useDeferredValue:function(i,s){var h=Cn();return cg(h,je.memoizedState,i,s)},useTransition:function(){var i=Ya(Oi)[0],s=Cn().memoizedState;return[typeof i=="boolean"?i:gu(i),s]},useSyncExternalStore:Yp,useId:gg,useHostTransitionStatus:Xd,useFormState:ig,useActionState:ig,useOptimistic:function(i,s){var h=Cn();return Zp(h,je,i,s)},useMemoCache:Bd,useCacheRefresh:mg},cm={readContext:si,use:mu,useCallback:$c,useContext:si,useEffect:jd,useImperativeHandle:Id,useInsertionEffect:og,useLayoutEffect:Fd,useMemo:ug,useReducer:Hd,useRef:lg,useState:function(){return Hd(Oi)},useDebugValue:vu,useDeferredValue:function(i,s){var h=Cn();return je===null?Vd(h,i,s):cg(h,je.memoizedState,i,s)},useTransition:function(){var i=Hd(Oi)[0],s=Cn().memoizedState;return[typeof i=="boolean"?i:gu(i),s]},useSyncExternalStore:Yp,useId:gg,useHostTransitionStatus:Xd,useFormState:rg,useActionState:rg,useOptimistic:function(i,s){var h=Cn();return je!==null?Zp(h,je,i,s):(h.baseState=i,[i,h.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:mg},eo=null,yi=0;function Su(i){var s=yi;return yi+=1,eo===null&&(eo=[]),Xc(eo,i,s)}function ol(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function _u(i,s){throw s.$$typeof===S?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Zd(i){var s=i._init;return s(i._payload)}function Wd(i){function s(K,V){if(i){var tt=K.deletions;tt===null?(K.deletions=[V],K.flags|=16):tt.push(V)}}function h(K,V){if(!i)return null;for(;V!==null;)s(K,V),V=V.sibling;return null}function p(K){for(var V=new Map;K!==null;)K.key!==null?V.set(K.key,K):V.set(K.index,K),K=K.sibling;return V}function v(K,V){return K=Ua(K,V),K.index=0,K.sibling=null,K}function A(K,V,tt){return K.index=tt,i?(tt=K.alternate,tt!==null?(tt=tt.index,tt<V?(K.flags|=67108866,V):tt):(K.flags|=67108866,V)):(K.flags|=1048576,V)}function D(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function L(K,V,tt,mt){return V===null||V.tag!==6?(V=Gc(tt,K.mode,mt),V.return=K,V):(V=v(V,tt),V.return=K,V)}function F(K,V,tt,mt){var Bt=tt.type;return Bt===T?pt(K,V,tt.props.children,mt,tt.key):V!==null&&(V.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Y&&Zd(Bt)===V.type)?(V=v(V,tt.props),ol(V,tt),V.return=K,V):(V=Vl(tt.type,tt.key,tt.props,null,K.mode,mt),ol(V,tt),V.return=K,V)}function et(K,V,tt,mt){return V===null||V.tag!==4||V.stateNode.containerInfo!==tt.containerInfo||V.stateNode.implementation!==tt.implementation?(V=au(tt,K.mode,mt),V.return=K,V):(V=v(V,tt.children||[]),V.return=K,V)}function pt(K,V,tt,mt,Bt){return V===null||V.tag!==7?(V=_s(tt,K.mode,mt,Bt),V.return=K,V):(V=v(V,tt),V.return=K,V)}function yt(K,V,tt){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Gc(""+V,K.mode,tt),V.return=K,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _:return tt=Vl(V.type,V.key,V.props,null,K.mode,tt),ol(tt,V),tt.return=K,tt;case x:return V=au(V,K.mode,tt),V.return=K,V;case Y:var mt=V._init;return V=mt(V._payload),yt(K,V,tt)}if(vt(V)||gt(V))return V=_s(V,K.mode,tt,null),V.return=K,V;if(typeof V.then=="function")return yt(K,Su(V),tt);if(V.$$typeof===N)return yt(K,Vc(K,V),tt);_u(K,V)}return null}function it(K,V,tt,mt){var Bt=V!==null?V.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return Bt!==null?null:L(K,V,""+tt,mt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case _:return tt.key===Bt?F(K,V,tt,mt):null;case x:return tt.key===Bt?et(K,V,tt,mt):null;case Y:return Bt=tt._init,tt=Bt(tt._payload),it(K,V,tt,mt)}if(vt(tt)||gt(tt))return Bt!==null?null:pt(K,V,tt,mt,null);if(typeof tt.then=="function")return it(K,V,Su(tt),mt);if(tt.$$typeof===N)return it(K,V,Vc(K,tt),mt);_u(K,tt)}return null}function at(K,V,tt,mt,Bt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return K=K.get(tt)||null,L(V,K,""+mt,Bt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case _:return K=K.get(mt.key===null?tt:mt.key)||null,F(V,K,mt,Bt);case x:return K=K.get(mt.key===null?tt:mt.key)||null,et(V,K,mt,Bt);case Y:var me=mt._init;return mt=me(mt._payload),at(K,V,tt,mt,Bt)}if(vt(mt)||gt(mt))return K=K.get(tt)||null,pt(V,K,mt,Bt,null);if(typeof mt.then=="function")return at(K,V,tt,Su(mt),Bt);if(mt.$$typeof===N)return at(K,V,tt,Vc(V,mt),Bt);_u(V,mt)}return null}function Zt(K,V,tt,mt){for(var Bt=null,me=null,Pt=V,Yt=V=0,ci=null;Pt!==null&&Yt<tt.length;Yt++){Pt.index>Yt?(ci=Pt,Pt=null):ci=Pt.sibling;var Ue=it(K,Pt,tt[Yt],mt);if(Ue===null){Pt===null&&(Pt=ci);break}i&&Pt&&Ue.alternate===null&&s(K,Pt),V=A(Ue,V,Yt),me===null?Bt=Ue:me.sibling=Ue,me=Ue,Pt=ci}if(Yt===tt.length)return h(K,Pt),Ce&&ia(K,Yt),Bt;if(Pt===null){for(;Yt<tt.length;Yt++)Pt=yt(K,tt[Yt],mt),Pt!==null&&(V=A(Pt,V,Yt),me===null?Bt=Pt:me.sibling=Pt,me=Pt);return Ce&&ia(K,Yt),Bt}for(Pt=p(Pt);Yt<tt.length;Yt++)ci=at(Pt,K,Yt,tt[Yt],mt),ci!==null&&(i&&ci.alternate!==null&&Pt.delete(ci.key===null?Yt:ci.key),V=A(ci,V,Yt),me===null?Bt=ci:me.sibling=ci,me=ci);return i&&Pt.forEach(function(Ao){return s(K,Ao)}),Ce&&ia(K,Yt),Bt}function It(K,V,tt,mt){if(tt==null)throw Error(n(151));for(var Bt=null,me=null,Pt=V,Yt=V=0,ci=null,Ue=tt.next();Pt!==null&&!Ue.done;Yt++,Ue=tt.next()){Pt.index>Yt?(ci=Pt,Pt=null):ci=Pt.sibling;var Ao=it(K,Pt,Ue.value,mt);if(Ao===null){Pt===null&&(Pt=ci);break}i&&Pt&&Ao.alternate===null&&s(K,Pt),V=A(Ao,V,Yt),me===null?Bt=Ao:me.sibling=Ao,me=Ao,Pt=ci}if(Ue.done)return h(K,Pt),Ce&&ia(K,Yt),Bt;if(Pt===null){for(;!Ue.done;Yt++,Ue=tt.next())Ue=yt(K,Ue.value,mt),Ue!==null&&(V=A(Ue,V,Yt),me===null?Bt=Ue:me.sibling=Ue,me=Ue);return Ce&&ia(K,Yt),Bt}for(Pt=p(Pt);!Ue.done;Yt++,Ue=tt.next())Ue=at(Pt,K,Yt,Ue.value,mt),Ue!==null&&(i&&Ue.alternate!==null&&Pt.delete(Ue.key===null?Yt:Ue.key),V=A(Ue,V,Yt),me===null?Bt=Ue:me.sibling=Ue,me=Ue);return i&&Pt.forEach(function(s3){return s(K,s3)}),Ce&&ia(K,Yt),Bt}function We(K,V,tt,mt){if(typeof tt=="object"&&tt!==null&&tt.type===T&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case _:t:{for(var Bt=tt.key;V!==null;){if(V.key===Bt){if(Bt=tt.type,Bt===T){if(V.tag===7){h(K,V.sibling),mt=v(V,tt.props.children),mt.return=K,K=mt;break t}}else if(V.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Y&&Zd(Bt)===V.type){h(K,V.sibling),mt=v(V,tt.props),ol(mt,tt),mt.return=K,K=mt;break t}h(K,V);break}else s(K,V);V=V.sibling}tt.type===T?(mt=_s(tt.props.children,K.mode,mt,tt.key),mt.return=K,K=mt):(mt=Vl(tt.type,tt.key,tt.props,null,K.mode,mt),ol(mt,tt),mt.return=K,K=mt)}return D(K);case x:t:{for(Bt=tt.key;V!==null;){if(V.key===Bt)if(V.tag===4&&V.stateNode.containerInfo===tt.containerInfo&&V.stateNode.implementation===tt.implementation){h(K,V.sibling),mt=v(V,tt.children||[]),mt.return=K,K=mt;break t}else{h(K,V);break}else s(K,V);V=V.sibling}mt=au(tt,K.mode,mt),mt.return=K,K=mt}return D(K);case Y:return Bt=tt._init,tt=Bt(tt._payload),We(K,V,tt,mt)}if(vt(tt))return Zt(K,V,tt,mt);if(gt(tt)){if(Bt=gt(tt),typeof Bt!="function")throw Error(n(150));return tt=Bt.call(tt),It(K,V,tt,mt)}if(typeof tt.then=="function")return We(K,V,Su(tt),mt);if(tt.$$typeof===N)return We(K,V,Vc(K,tt),mt);_u(K,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,V!==null&&V.tag===6?(h(K,V.sibling),mt=v(V,tt),mt.return=K,K=mt):(h(K,V),mt=Gc(tt,K.mode,mt),mt.return=K,K=mt),D(K)):h(K,V)}return function(K,V,tt,mt){try{yi=0;var Bt=We(K,V,tt,mt);return eo=null,Bt}catch(Pt){if(Pt===al||Pt===sl)throw Pt;var me=Ci(29,Pt,null,K.mode);return me.lanes=mt,me.return=K,me}finally{}}}var no=Wd(!0),Jd=Wd(!1),Yi=$(null),Xa=null;function or(i){var s=i.alternate;ft(pe,pe.current&1),ft(Yi,i),Xa===null&&(s===null||Zl.current!==null||s.memoizedState!==null)&&(Xa=i)}function _g(i){if(i.tag===22){if(ft(pe,pe.current),ft(Yi,i),Xa===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Xa=i)}}else ws()}function ws(){ft(pe,pe.current),ft(Yi,Yi.current)}function Rs(i){ht(Yi),Xa===i&&(Xa=null),ht(pe)}var pe=$(0);function Au(i){for(var s=i;s!==null;){if(s.tag===13){var h=s.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Cm(h)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function $d(i,s,h,p){s=i.memoizedState,h=h(p,s),h=h==null?s:y({},s,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var nh={enqueueSetState:function(i,s,h){i=i._reactInternals;var p=_n(),v=Ia(p);v.payload=s,h!=null&&(v.callback=h),s=mi(i,v,p),s!==null&&(Dn(s,i,p),ll(s,i,p))},enqueueReplaceState:function(i,s,h){i=i._reactInternals;var p=_n(),v=Ia(p);v.tag=1,v.payload=s,h!=null&&(v.callback=h),s=mi(i,v,p),s!==null&&(Dn(s,i,p),ll(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var h=_n(),p=Ia(h);p.tag=2,s!=null&&(p.callback=s),s=mi(i,p,h),s!==null&&(Dn(s,i,h),ll(s,i,h))}};function tf(i,s,h,p,v,A,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,A,D):s.prototype&&s.prototype.isPureReactComponent?!jl(h,p)||!jl(v,A):!0}function ul(i,s,h,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(h,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(h,p),s.state!==i&&nh.enqueueReplaceState(s,s.state,null)}function Ms(i,s){var h=s;if("ref"in s){h={};for(var p in s)p!=="ref"&&(h[p]=s[p])}if(i=i.defaultProps){h===s&&(h=y({},h));for(var v in i)h[v]===void 0&&(h[v]=i[v])}return h}var Ds=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function cl(i){Ds(i)}function Ni(i){console.error(i)}function Ag(i){Ds(i)}function ih(i,s){try{var h=i.onUncaughtError;h(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function Eu(i,s,h){try{var p=i.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function io(i,s,h){return h=Ia(h),h.tag=3,h.payload={element:null},h.callback=function(){ih(i,s)},h}function Tu(i){return i=Ia(i),i.tag=3,i}function ah(i,s,h,p){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var A=p.value;i.payload=function(){return v(A)},i.callback=function(){Eu(s,h,p)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){Eu(s,h,p),typeof v!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var L=p.stack;this.componentDidCatch(p.value,{componentStack:L!==null?L:""})})}function hm(i,s,h,p,v){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=h.alternate,s!==null&&el(s,h,v,!0),h=Yi.current,h!==null){switch(h.tag){case 13:return Xa===null?ts():h.alternate===null&&oe===0&&(oe=3),h.flags&=-257,h.flags|=65536,h.lanes=v,p===ar?h.flags|=16384:(s=h.updateQueue,s===null?h.updateQueue=new Set([p]):s.add(p),bt(i,p,v)),!1;case 22:return h.flags|=65536,p===ar?h.flags|=16384:(s=h.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=s):(h=s.retryQueue,h===null?s.retryQueue=new Set([p]):h.add(p)),bt(i,p,v)),!1}throw Error(n(435,h.tag))}return bt(i,p,v),ts(),!1}if(Ce)return s=Yi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=v,p!==Ed&&(i=Error(n(422),{cause:p}),Xl(kn(i,h)))):(p!==Ed&&(s=Error(n(423),{cause:p}),Xl(kn(s,h))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,p=kn(p,h),v=io(i.stateNode,p,v),Dd(i,v),oe!==4&&(oe=2)),!1;var A=Error(n(520),{cause:p});if(A=kn(A,h),vr===null?vr=[A]:vr.push(A),oe!==4&&(oe=2),s===null)return!0;p=kn(p,h),h=s;do{switch(h.tag){case 3:return h.flags|=65536,i=v&-v,h.lanes|=i,i=io(h.stateNode,p,i),Dd(h,i),!1;case 1:if(s=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Sr===null||!Sr.has(A))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Tu(v),ah(v,i,h,p),Dd(h,v),!1}h=h.return}while(h!==null);return!1}var Eg=Error(n(461)),Fe=!1;function qn(i,s,h,p){s.child=i===null?Jd(s,null,h,p):no(s,i.child,h,p)}function Tg(i,s,h,p,v){h=h.render;var A=s.ref;if("ref"in p){var D={};for(var L in p)L!=="ref"&&(D[L]=p[L])}else D=p;return ir(s),p=Mi(i,s,h,D,A,v),L=va(),i!==null&&!Fe?(Ld(i,s,v),en(i,s,v)):(Ce&&L&&kc(s),s.flags|=1,qn(i,s,p,v),s.child)}function sh(i,s,h,p,v){if(i===null){var A=h.type;return typeof A=="function"&&!Il(A)&&A.defaultProps===void 0&&h.compare===null?(s.tag=15,s.type=A,xg(i,s,A,p,v)):(i=Vl(h.type,null,p,s,s.mode,v),i.ref=s.ref,i.return=s,s.child=i)}if(A=i.child,!hl(i,v)){var D=A.memoizedProps;if(h=h.compare,h=h!==null?h:jl,h(D,p)&&i.ref===s.ref)return en(i,s,v)}return s.flags|=1,i=Ua(A,p),i.ref=s.ref,i.return=s,s.child=i}function xg(i,s,h,p,v){if(i!==null){var A=i.memoizedProps;if(jl(A,p)&&i.ref===s.ref)if(Fe=!1,s.pendingProps=p=A,hl(i,v))(i.flags&131072)!==0&&(Fe=!0);else return s.lanes=i.lanes,en(i,s,v)}return vi(i,s,h,p,v)}function Cg(i,s,h){var p=s.pendingProps,v=p.children,A=i!==null?i.memoizedState:null;if(p.mode==="hidden"){if((s.flags&128)!==0){if(p=A!==null?A.baseLanes|h:h,i!==null){for(v=s.child=i.child,A=0;v!==null;)A=A|v.lanes|v.childLanes,v=v.sibling;s.childLanes=A&~p}else s.childLanes=0,s.child=null;return wg(i,s,p,h)}if((h&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Yc(s,A!==null?A.cachePool:null),A!==null?Wl(s,A):Od(),_g(s);else return s.lanes=s.childLanes=536870912,wg(i,s,A!==null?A.baseLanes|h:h,h)}else A!==null?(Yc(s,A.cachePool),Wl(s,A),ws(),s.memoizedState=null):(i!==null&&Yc(s,null),Od(),ws());return qn(i,s,v,h),s.child}function wg(i,s,h,p){var v=re();return v=v===null?null:{parent:xn._currentValue,pool:v},s.memoizedState={baseLanes:h,cachePool:v},i!==null&&Yc(s,null),Od(),_g(s),i!==null&&el(i,s,p,!0),null}function ur(i,s){var h=s.ref;if(h===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(i===null||i.ref!==h)&&(s.flags|=4194816)}}function vi(i,s,h,p,v){return ir(s),h=Mi(i,s,h,p,void 0,v),p=va(),i!==null&&!Fe?(Ld(i,s,v),en(i,s,v)):(Ce&&p&&kc(s),s.flags|=1,qn(i,s,h,v),s.child)}function rh(i,s,h,p,v,A){return ir(s),s.updateQueue=null,h=Vp(s,p,h,v),Ip(i),p=va(),i!==null&&!Fe?(Ld(i,s,A),en(i,s,A)):(Ce&&p&&kc(s),s.flags|=1,qn(i,s,h,A),s.child)}function ef(i,s,h,p,v){if(ir(s),s.stateNode===null){var A=Wr,D=h.contextType;typeof D=="object"&&D!==null&&(A=si(D)),A=new h(p,A),s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=nh,s.stateNode=A,A._reactInternals=s,A=s.stateNode,A.props=p,A.state=s.memoizedState,A.refs={},uu(s),D=h.contextType,A.context=typeof D=="object"&&D!==null?si(D):Wr,A.state=s.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&($d(s,h,D,p),A.state=s.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(D=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),D!==A.state&&nh.enqueueReplaceState(A,A.state,null),sr(s,p,A,v),hu(),A.state=s.memoizedState),typeof A.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(i===null){A=s.stateNode;var L=s.memoizedProps,F=Ms(h,L);A.props=F;var et=A.context,pt=h.contextType;D=Wr,typeof pt=="object"&&pt!==null&&(D=si(pt));var yt=h.getDerivedStateFromProps;pt=typeof yt=="function"||typeof A.getSnapshotBeforeUpdate=="function",L=s.pendingProps!==L,pt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(L||et!==D)&&ul(s,A,p,D),qa=!1;var it=s.memoizedState;A.state=it,sr(s,p,A,v),hu(),et=s.memoizedState,L||it!==et||qa?(typeof yt=="function"&&($d(s,h,yt,p),et=s.memoizedState),(F=qa||tf(s,h,F,p,it,et,D))?(pt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=et),A.props=p,A.state=et,A.context=D,p=F):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{A=s.stateNode,cu(i,s),D=s.memoizedProps,pt=Ms(h,D),A.props=pt,yt=s.pendingProps,it=A.context,et=h.contextType,F=Wr,typeof et=="object"&&et!==null&&(F=si(et)),L=h.getDerivedStateFromProps,(et=typeof L=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==yt||it!==F)&&ul(s,A,p,F),qa=!1,it=s.memoizedState,A.state=it,sr(s,p,A,v),hu();var at=s.memoizedState;D!==yt||it!==at||qa||i!==null&&i.dependencies!==null&&Ic(i.dependencies)?(typeof L=="function"&&($d(s,h,L,p),at=s.memoizedState),(pt=qa||tf(s,h,pt,p,it,at,F)||i!==null&&i.dependencies!==null&&Ic(i.dependencies))?(et||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,at,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,at,F)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||D===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=at),A.props=p,A.state=at,A.context=F,p=pt):(typeof A.componentDidUpdate!="function"||D===i.memoizedProps&&it===i.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&it===i.memoizedState||(s.flags|=1024),p=!1)}return A=p,ur(i,s),p=(s.flags&128)!==0,A||p?(A=s.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:A.render(),s.flags|=1,i!==null&&p?(s.child=no(s,i.child,null,v),s.child=no(s,null,h,v)):qn(i,s,h,v),s.memoizedState=A.state,i=s.child):i=en(i,s,v),i}function lh(i,s,h,p){return Yl(),s.flags|=256,qn(i,s,h,p),s.child}var oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cr(i){return{baseLanes:i,cachePool:Ri()}}function hr(i,s,h){return i=i!==null?i.childLanes&~h:0,s&&(i|=Qn),i}function xu(i,s,h){var p=s.pendingProps,v=!1,A=(s.flags&128)!==0,D;if((D=A)||(D=i!==null&&i.memoizedState===null?!1:(pe.current&2)!==0),D&&(v=!0,s.flags&=-129),D=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ce){if(v?or(s):ws(),Ce){var L=sn,F;if(F=L){t:{for(F=L,L=ka;F.nodeType!==8;){if(!L){L=null;break t}if(F=Ps(F.nextSibling),F===null){L=null;break t}}L=F}L!==null?(s.memoizedState={dehydrated:L,treeContext:wi!==null?{id:Ga,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},F=Ci(18,null,null,0),F.stateNode=L,F.return=s,s.child=F,ai=s,sn=null,F=!0):F=!1}F||tr(s)}if(L=s.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return Cm(L)?s.lanes=32:s.lanes=536870912,null;Rs(s)}return L=p.children,p=p.fallback,v?(ws(),v=s.mode,L=bi({mode:"hidden",children:L},v),p=_s(p,v,h,null),L.return=s,p.return=s,L.sibling=p,s.child=L,v=s.child,v.memoizedState=cr(h),v.childLanes=hr(i,D,h),s.memoizedState=oh,p):(or(s),ao(s,L))}if(F=i.memoizedState,F!==null&&(L=F.dehydrated,L!==null)){if(A)s.flags&256?(or(s),s.flags&=-257,s=Li(i,s,h)):s.memoizedState!==null?(ws(),s.child=i.child,s.flags|=128,s=null):(ws(),v=p.fallback,L=s.mode,p=bi({mode:"visible",children:p.children},L),v=_s(v,L,h,null),v.flags|=2,p.return=s,v.return=s,p.sibling=v,s.child=p,no(s,i.child,null,h),p=s.child,p.memoizedState=cr(h),p.childLanes=hr(i,D,h),s.memoizedState=oh,s=v);else if(or(s),Cm(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var et=D.dgst;D=et,p=Error(n(419)),p.stack="",p.digest=D,Xl({value:p,source:null,stack:null}),s=Li(i,s,h)}else if(Fe||el(i,s,h,!1),D=(h&i.childLanes)!==0,Fe||D){if(D=qe,D!==null&&(p=h&-h,p=(p&42)!==0?1:lc(p),p=(p&(D.suspendedLanes|h))!==0?0:p,p!==0&&p!==F.retryLane))throw F.retryLane=p,Ha(i,p),Dn(D,i,p),Eg;L.data==="$?"||ts(),s=Li(i,s,h)}else L.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=F.treeContext,sn=Ps(L.nextSibling),ai=s,Ce=!0,$r=null,ka=!1,i!==null&&(Vi[na++]=Ga,Vi[na++]=ma,Vi[na++]=wi,Ga=i.id,ma=i.overflow,wi=s),s=ao(s,p.children),s.flags|=4096);return s}return v?(ws(),v=p.fallback,L=s.mode,F=i.child,et=F.sibling,p=Ua(F,{mode:"hidden",children:p.children}),p.subtreeFlags=F.subtreeFlags&65011712,et!==null?v=Ua(et,v):(v=_s(v,L,h,null),v.flags|=2),v.return=s,p.return=s,p.sibling=v,s.child=p,p=v,v=s.child,L=i.child.memoizedState,L===null?L=cr(h):(F=L.cachePool,F!==null?(et=xn._currentValue,F=F.parent!==et?{parent:et,pool:et}:F):F=Ri(),L={baseLanes:L.baseLanes|h,cachePool:F}),v.memoizedState=L,v.childLanes=hr(i,D,h),s.memoizedState=oh,p):(or(s),h=i.child,i=h.sibling,h=Ua(h,{mode:"visible",children:p.children}),h.return=s,h.sibling=null,i!==null&&(D=s.deletions,D===null?(s.deletions=[i],s.flags|=16):D.push(i)),s.child=h,s.memoizedState=null,h)}function ao(i,s){return s=bi({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function bi(i,s){return i=Ci(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Li(i,s,h){return no(s,i.child,null,h),i=ao(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function dr(i,s,h){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),qc(i.return,s,h)}function ba(i,s,h,p,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=h,A.tailMode=v)}function Ka(i,s,h){var p=s.pendingProps,v=p.revealOrder,A=p.tail;if(qn(i,s,p.children,h),p=pe.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&dr(i,h,s);else if(i.tag===19)dr(i,h,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}switch(ft(pe,p),v){case"forwards":for(h=s.child,v=null;h!==null;)i=h.alternate,i!==null&&Au(i)===null&&(v=h),h=h.sibling;h=v,h===null?(v=s.child,s.child=null):(v=h.sibling,h.sibling=null),ba(s,!1,v,h,A);break;case"backwards":for(h=null,v=s.child,s.child=null;v!==null;){if(i=v.alternate,i!==null&&Au(i)===null){s.child=v;break}i=v.sibling,v.sibling=h,h=v,v=i}ba(s,!0,h,null,A);break;case"together":ba(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function en(i,s,h){if(i!==null&&(s.dependencies=i.dependencies),Ye|=s.lanes,(h&s.childLanes)===0)if(i!==null){if(el(i,s,h,!1),(h&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,h=Ua(i,i.pendingProps),s.child=h,h.return=s;i.sibling!==null;)i=i.sibling,h=h.sibling=Ua(i,i.pendingProps),h.return=s;h.sibling=null}return s.child}function hl(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Ic(i)))}function fr(i,s,h){switch(s.tag){case 3:he(s,s.stateNode.containerInfo),aa(s,xn,i.memoizedState.cache),Yl();break;case 27:case 5:Te(s);break;case 4:he(s,s.stateNode.containerInfo);break;case 10:aa(s,s.type,s.memoizedProps.value);break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(or(s),s.flags|=128,null):(h&s.child.childLanes)!==0?xu(i,s,h):(or(s),i=en(i,s,h),i!==null?i.sibling:null);or(s);break;case 19:var v=(i.flags&128)!==0;if(p=(h&s.childLanes)!==0,p||(el(i,s,h,!1),p=(h&s.childLanes)!==0),v){if(p)return Ka(i,s,h);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ft(pe,pe.current),p)break;return null;case 22:case 23:return s.lanes=0,Cg(i,s,h);case 24:aa(s,xn,i.memoizedState.cache)}return en(i,s,h)}function Cu(i,s,h){if(i!==null)if(i.memoizedProps!==s.pendingProps)Fe=!0;else{if(!hl(i,h)&&(s.flags&128)===0)return Fe=!1,fr(i,s,h);Fe=(i.flags&131072)!==0}else Fe=!1,Ce&&(s.flags&1048576)!==0&&Ad(s,su,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var p=s.elementType,v=p._init;if(p=v(p._payload),s.type=p,typeof p=="function")Il(p)?(i=Ms(p,i),s.tag=1,s=ef(null,s,p,i,h)):(s.tag=0,s=vi(null,s,p,i,h));else{if(p!=null){if(v=p.$$typeof,v===z){s.tag=11,s=Tg(null,s,p,i,h);break t}else if(v===k){s.tag=14,s=sh(null,s,p,i,h);break t}}throw s=dt(p)||p,Error(n(306,s,""))}}return s;case 0:return vi(i,s,s.type,s.pendingProps,h);case 1:return p=s.type,v=Ms(p,s.pendingProps),ef(i,s,p,v,h);case 3:t:{if(he(s,s.stateNode.containerInfo),i===null)throw Error(n(387));p=s.pendingProps;var A=s.memoizedState;v=A.element,cu(i,s),sr(s,p,null,h);var D=s.memoizedState;if(p=D.cache,aa(s,xn,p),p!==A.cache&&Le(s,[xn],h,!0),hu(),p=D.element,A.isDehydrated)if(A={element:p,isDehydrated:!1,cache:D.cache},s.updateQueue.baseState=A,s.memoizedState=A,s.flags&256){s=lh(i,s,p,h);break t}else if(p!==v){v=kn(Error(n(424)),s),Xl(v),s=lh(i,s,p,h);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(sn=Ps(i.firstChild),ai=s,Ce=!0,$r=null,ka=!0,h=Jd(s,null,p,h),s.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Yl(),p===v){s=en(i,s,h);break t}qn(i,s,p,h)}s=s.child}return s;case 26:return ur(i,s),i===null?(h=Ky(s.type,null,s.pendingProps,null))?s.memoizedState=h:Ce||(h=s.type,i=s.pendingProps,p=zg(Nt.current).createElement(h),p[bn]=s,p[fi]=i,Ei(p,h,i),On(p),s.stateNode=p):s.memoizedState=Ky(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Te(s),i===null&&Ce&&(p=s.stateNode=Vy(s.type,s.pendingProps,Nt.current),ai=s,ka=!0,v=sn,yo(s.type)?(wm=v,sn=Ps(p.firstChild)):sn=v),qn(i,s,s.pendingProps.children,h),ur(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ce&&((v=p=sn)&&(p=z_(p,s.type,s.pendingProps,ka),p!==null?(s.stateNode=p,ai=s,sn=Ps(p.firstChild),ka=!1,v=!0):v=!1),v||tr(s)),Te(s),v=s.type,A=s.pendingProps,D=i!==null?i.memoizedProps:null,p=A.children,Em(v,A)?p=null:D!==null&&Em(v,D)&&(s.flags|=32),s.memoizedState!==null&&(v=Mi(i,s,Fn,null,null,h),pf._currentValue=v),ur(i,s),qn(i,s,p,h),s.child;case 6:return i===null&&Ce&&((i=h=sn)&&(h=B_(h,s.pendingProps,ka),h!==null?(s.stateNode=h,ai=s,sn=null,i=!0):i=!1),i||tr(s)),null;case 13:return xu(i,s,h);case 4:return he(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=no(s,null,p,h):qn(i,s,p,h),s.child;case 11:return Tg(i,s,s.type,s.pendingProps,h);case 7:return qn(i,s,s.pendingProps,h),s.child;case 8:return qn(i,s,s.pendingProps.children,h),s.child;case 12:return qn(i,s,s.pendingProps.children,h),s.child;case 10:return p=s.pendingProps,aa(s,s.type,p.value),qn(i,s,p.children,h),s.child;case 9:return v=s.type._context,p=s.pendingProps.children,ir(s),v=si(v),p=p(v),s.flags|=1,qn(i,s,p,h),s.child;case 14:return sh(i,s,s.type,s.pendingProps,h);case 15:return xg(i,s,s.type,s.pendingProps,h);case 19:return Ka(i,s,h);case 31:return p=s.pendingProps,h=s.mode,p={mode:p.mode,children:p.children},i===null?(h=bi(p,h),h.ref=s.ref,s.child=h,h.return=s,s=h):(h=Ua(i.child,p),h.ref=s.ref,s.child=h,h.return=s,s=h),s;case 22:return Cg(i,s,h);case 24:return ir(s),p=si(xn),i===null?(v=re(),v===null&&(v=qe,A=Kl(),v.pooledCache=A,A.refCount++,A!==null&&(v.pooledCacheLanes|=h),v=A),s.memoizedState={parent:p,cache:v},uu(s),aa(s,xn,v)):((i.lanes&h)!==0&&(cu(i,s),sr(s,null,null,h),hu()),v=i.memoizedState,A=s.memoizedState,v.parent!==p?(v={parent:p,cache:p},s.memoizedState=v,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=v),aa(s,xn,p)):(p=A.cache,aa(s,xn,p),p!==v.cache&&Le(s,[xn],h,!0))),qn(i,s,s.pendingProps.children,h),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function hn(i){i.flags|=4}function wn(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!$y(s)){if(s=Yi.current,s!==null&&((ve&4194048)===ve?Xa!==null:(ve&62914560)!==ve&&(ve&536870912)===0||s!==Xa))throw ou=ar,Fp;i.flags|=8192}}function Ae(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Po():536870912,i.lanes|=s,co|=s)}function Sa(i,s){if(!Ce)switch(i.tailMode){case"hidden":s=i.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Ne(i){var s=i.alternate!==null&&i.alternate.child===i.child,h=0,p=0;if(s)for(var v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags&65011712,p|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)h|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=h,s}function nf(i,s,h){var p=s.pendingProps;switch(jc(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(s),null;case 1:return Ne(s),null;case 3:return h=s.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),Fa(xn),un(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(er(s)?hn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xd())),Ne(s),null;case 26:return h=s.memoizedState,i===null?(hn(s),h!==null?(Ne(s),wn(s,h)):(Ne(s),s.flags&=-16777217)):h?h!==i.memoizedState?(hn(s),Ne(s),wn(s,h)):(Ne(s),s.flags&=-16777217):(i.memoizedProps!==p&&hn(s),Ne(s),s.flags&=-16777217),null;case 27:Tn(s),h=Nt.current;var v=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==p&&hn(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Ne(s),null}i=Mt.current,er(s)?Td(s):(i=Vy(v,p,h),s.stateNode=i,hn(s))}return Ne(s),null;case 5:if(Tn(s),h=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&hn(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Ne(s),null}if(i=Mt.current,er(s))Td(s);else{switch(v=zg(Nt.current),i){case 1:i=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:i=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":i=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":i=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof p.is=="string"?v.createElement("select",{is:p.is}):v.createElement("select"),p.multiple?i.multiple=!0:p.size&&(i.size=p.size);break;default:i=typeof p.is=="string"?v.createElement(h,{is:p.is}):v.createElement(h)}}i[bn]=s,i[fi]=p;t:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)i.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break t;for(;v.sibling===null;){if(v.return===null||v.return===s)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=i;t:switch(Ei(i,h,p),h){case"button":case"input":case"select":case"textarea":i=!!p.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&hn(s)}}return Ne(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==p&&hn(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(n(166));if(i=Nt.current,er(s)){if(i=s.stateNode,h=s.memoizedProps,p=null,v=ai,v!==null)switch(v.tag){case 27:case 5:p=v.memoizedProps}i[bn]=s,i=!!(i.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||Uy(i.nodeValue,h)),i||tr(s)}else i=zg(i).createTextNode(p),i[bn]=s,s.stateNode=i}return Ne(s),null;case 13:if(p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=er(s),p!==null&&p.dehydrated!==null){if(i===null){if(!v)throw Error(n(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[bn]=s}else Yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ne(s),v=!1}else v=xd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return s.flags&256?(Rs(s),s):(Rs(s),null)}if(Rs(s),(s.flags&128)!==0)return s.lanes=h,s;if(h=p!==null,i=i!==null&&i.memoizedState!==null,h){p=s.child,v=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(v=p.alternate.memoizedState.cachePool.pool);var A=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==v&&(p.flags|=2048)}return h!==i&&h&&(s.child.flags|=8192),Ae(s,s.updateQueue),Ne(s),null;case 4:return un(),i===null&&vm(s.stateNode.containerInfo),Ne(s),null;case 10:return Fa(s.type),Ne(s),null;case 19:if(ht(pe),v=s.memoizedState,v===null)return Ne(s),null;if(p=(s.flags&128)!==0,A=v.rendering,A===null)if(p)Sa(v,!1);else{if(oe!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(A=Au(i),A!==null){for(s.flags|=128,Sa(v,!1),i=A.updateQueue,s.updateQueue=i,Ae(s,i),s.subtreeFlags=0,i=h,h=s.child;h!==null;)Uc(h,i),h=h.sibling;return ft(pe,pe.current&1|2),s.child}i=i.sibling}v.tail!==null&&Gt()>pl&&(s.flags|=128,p=!0,Sa(v,!1),s.lanes=4194304)}else{if(!p)if(i=Au(A),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,Ae(s,i),Sa(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!Ce)return Ne(s),null}else 2*Gt()-v.renderingStartTime>pl&&h!==536870912&&(s.flags|=128,p=!0,Sa(v,!1),s.lanes=4194304);v.isBackwards?(A.sibling=s.child,s.child=A):(i=v.last,i!==null?i.sibling=A:s.child=A,v.last=A)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Gt(),s.sibling=null,i=pe.current,ft(pe,p?i&1|2:i&1),s):(Ne(s),null);case 22:case 23:return Rs(s),Nd(),p=s.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(h&536870912)!==0&&(s.flags&128)===0&&(Ne(s),s.subtreeFlags&6&&(s.flags|=8192)):Ne(s),h=s.updateQueue,h!==null&&Ae(s,h.retryQueue),h=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==h&&(s.flags|=2048),i!==null&&ht(Es),null;case 24:return h=null,i!==null&&(h=i.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),Fa(xn),Ne(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function Xi(i,s){switch(jc(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Fa(xn),un(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Tn(s),null;case 13:if(Rs(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Yl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return ht(pe),null;case 4:return un(),null;case 10:return Fa(s.type),null;case 22:case 23:return Rs(s),Nd(),i!==null&&ht(Es),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Fa(xn),null;case 25:return null;default:return null}}function wu(i,s){switch(jc(s),s.tag){case 3:Fa(xn),un();break;case 26:case 27:case 5:Tn(s);break;case 4:un();break;case 13:Rs(s);break;case 19:ht(pe);break;case 10:Fa(s.type);break;case 22:case 23:Rs(s),Nd(),i!==null&&ht(Es);break;case 24:Fa(xn)}}function _a(i,s){try{var h=s.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var v=p.next;h=v;do{if((h.tag&i)===i){p=void 0;var A=h.create,D=h.inst;p=A(),D.destroy=p}h=h.next}while(h!==v)}}catch(L){Q(s,s.return,L)}}function ri(i,s,h){try{var p=s.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var A=v.next;p=A;do{if((p.tag&i)===i){var D=p.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,v=s;var F=h,et=L;try{et()}catch(pt){Q(v,F,pt)}}}p=p.next}while(p!==A)}}catch(pt){Q(s,s.return,pt)}}function Rg(i){var s=i.updateQueue;if(s!==null){var h=i.stateNode;try{qp(s,h)}catch(p){Q(i,i.return,p)}}}function Mg(i,s,h){h.props=Ms(i.type,i.memoizedProps),h.state=i.memoizedState;try{h.componentWillUnmount()}catch(p){Q(i,s,p)}}function Ru(i,s){try{var h=i.ref;if(h!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof h=="function"?i.refCleanup=h(p):h.current=p}}catch(v){Q(i,s,v)}}function ze(i,s){var h=i.ref,p=i.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(v){Q(i,s,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){Q(i,s,v)}else h.current=null}function Mu(i){var s=i.type,h=i.memoizedProps,p=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break t;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(v){Q(i,i.return,v)}}function pr(i,s,h){try{var p=i.stateNode;M_(p,i.type,h,s),p[fi]=s}catch(v){Q(i,i.return,v)}}function uh(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&yo(i.type)||i.tag===4}function so(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||uh(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&yo(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Du(i,s,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(i,s):(s=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,s.appendChild(i),h=h._reactRootContainer,h!=null||s.onclick!==null||(s.onclick=Lg));else if(p!==4&&(p===27&&yo(i.type)&&(h=i.stateNode,s=null),i=i.child,i!==null))for(Du(i,s,h),i=i.sibling;i!==null;)Du(i,s,h),i=i.sibling}function Os(i,s,h){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?h.insertBefore(i,s):h.appendChild(i);else if(p!==4&&(p===27&&yo(i.type)&&(h=i.stateNode),i=i.child,i!==null))for(Os(i,s,h),i=i.sibling;i!==null;)Os(i,s,h),i=i.sibling}function ro(i){var s=i.stateNode,h=i.memoizedProps;try{for(var p=i.type,v=s.attributes;v.length;)s.removeAttributeNode(v[0]);Ei(s,p,h),s[bn]=i,s[fi]=h}catch(A){Q(i,i.return,A)}}var Aa=!1,Xe=!1,gr=!1,af=typeof WeakSet=="function"?WeakSet:Set,rn=null;function dm(i,s){if(i=i.containerInfo,_m=kg,i=vd(i),Kr(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else t:{h=(h=i.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var v=p.anchorOffset,A=p.focusNode;p=p.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break t}var D=0,L=-1,F=-1,et=0,pt=0,yt=i,it=null;e:for(;;){for(var at;yt!==h||v!==0&&yt.nodeType!==3||(L=D+v),yt!==A||p!==0&&yt.nodeType!==3||(F=D+p),yt.nodeType===3&&(D+=yt.nodeValue.length),(at=yt.firstChild)!==null;)it=yt,yt=at;for(;;){if(yt===i)break e;if(it===h&&++et===v&&(L=D),it===A&&++pt===p&&(F=D),(at=yt.nextSibling)!==null)break;yt=it,it=yt.parentNode}yt=at}h=L===-1||F===-1?null:{start:L,end:F}}else h=null}h=h||{start:0,end:0}}else h=null;for(Am={focusedElem:i,selectionRange:h},kg=!1,rn=s;rn!==null;)if(s=rn,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,rn=i;else for(;rn!==null;){switch(s=rn,A=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&A!==null){i=void 0,h=s,v=A.memoizedProps,A=A.memoizedState,p=h.stateNode;try{var Zt=Ms(h.type,v,h.elementType===h.type);i=p.getSnapshotBeforeUpdate(Zt,A),p.__reactInternalSnapshotBeforeUpdate=i}catch(It){Q(h,h.return,It)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,h=i.nodeType,h===9)xm(i);else if(h===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":xm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,rn=i;break}rn=s.return}}function lo(i,s,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:ye(i,h),p&4&&_a(5,h);break;case 1:if(ye(i,h),p&4)if(i=h.stateNode,s===null)try{i.componentDidMount()}catch(D){Q(h,h.return,D)}else{var v=Ms(h.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(v,s,i.__reactInternalSnapshotBeforeUpdate)}catch(D){Q(h,h.return,D)}}p&64&&Rg(h),p&512&&Ru(h,h.return);break;case 3:if(ye(i,h),p&64&&(i=h.updateQueue,i!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{qp(i,s)}catch(D){Q(h,h.return,D)}}break;case 27:s===null&&p&4&&ro(h);case 26:case 5:ye(i,h),s===null&&p&4&&Mu(h),p&512&&Ru(h,h.return);break;case 12:ye(i,h);break;case 13:ye(i,h),p&4&&dl(i,h),p&64&&(i=h.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(h=Ot.bind(null,h),P_(i,h))));break;case 22:if(p=h.memoizedState!==null||Aa,!p){s=s!==null&&s.memoizedState!==null||Xe,v=Aa;var A=Xe;Aa=p,(Xe=s)&&!A?Ea(i,h,(h.subtreeFlags&8772)!==0):ye(i,h),Aa=v,Xe=A}break;case 30:break;default:ye(i,h)}}function ch(i){var s=i.alternate;s!==null&&(i.alternate=null,ch(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ko(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ve=null,Kn=!1;function zi(i,s,h){for(h=h.child;h!==null;)Ki(i,s,h),h=h.sibling}function Ki(i,s,h){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(_e,h)}catch{}switch(h.tag){case 26:Xe||ze(h,s),zi(i,s,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xe||ze(h,s);var p=Ve,v=Kn;yo(h.type)&&(Ve=h.stateNode,Kn=!1),zi(i,s,h),cf(h.stateNode),Ve=p,Kn=v;break;case 5:Xe||ze(h,s);case 6:if(p=Ve,v=Kn,Ve=null,zi(i,s,h),Ve=p,Kn=v,Ve!==null)if(Kn)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(h.stateNode)}catch(A){Q(h,s,A)}else try{Ve.removeChild(h.stateNode)}catch(A){Q(h,s,A)}break;case 18:Ve!==null&&(Kn?(i=Ve,qy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,h.stateNode),vf(i)):qy(Ve,h.stateNode));break;case 4:p=Ve,v=Kn,Ve=h.stateNode.containerInfo,Kn=!0,zi(i,s,h),Ve=p,Kn=v;break;case 0:case 11:case 14:case 15:Xe||ri(2,h,s),Xe||ri(4,h,s),zi(i,s,h);break;case 1:Xe||(ze(h,s),p=h.stateNode,typeof p.componentWillUnmount=="function"&&Mg(h,s,p)),zi(i,s,h);break;case 21:zi(i,s,h);break;case 22:Xe=(p=Xe)||h.memoizedState!==null,zi(i,s,h),Xe=p;break;default:zi(i,s,h)}}function dl(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{vf(i)}catch(h){Q(s,s.return,h)}}function sf(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new af),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new af),s;default:throw Error(n(435,i.tag))}}function Qa(i,s){var h=sf(i);s.forEach(function(p){var v=ie.bind(null,i,p);h.has(p)||(h.add(p),p.then(v,v))})}function Si(i,s){var h=s.deletions;if(h!==null)for(var p=0;p<h.length;p++){var v=h[p],A=i,D=s,L=D;t:for(;L!==null;){switch(L.tag){case 27:if(yo(L.type)){Ve=L.stateNode,Kn=!1;break t}break;case 5:Ve=L.stateNode,Kn=!1;break t;case 3:case 4:Ve=L.stateNode.containerInfo,Kn=!0;break t}L=L.return}if(Ve===null)throw Error(n(160));Ki(A,D,v),Ve=null,Kn=!1,A=v.alternate,A!==null&&(A.return=null),v.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Ou(s,i),s=s.sibling}var li=null;function Ou(i,s){var h=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Si(s,i),Rn(i),p&4&&(ri(3,i,i.return),_a(3,i),ri(5,i,i.return));break;case 1:Si(s,i),Rn(i),p&512&&(Xe||h===null||ze(h,h.return)),p&64&&Aa&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(h=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var v=li;if(Si(s,i),Rn(i),p&512&&(Xe||h===null||ze(h,h.return)),p&4){var A=h!==null?h.memoizedState:null;if(p=i.memoizedState,h===null)if(p===null)if(i.stateNode===null){t:{p=i.type,h=i.memoizedProps,v=v.ownerDocument||v;e:switch(p){case"title":A=v.getElementsByTagName("title")[0],(!A||A[ds]||A[bn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=v.createElement(p),v.head.insertBefore(A,v.querySelector("head > title"))),Ei(A,p,h),A[bn]=i,On(A),p=A;break t;case"link":var D=Wy("link","href",v).get(p+(h.href||""));if(D){for(var L=0;L<D.length;L++)if(A=D[L],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(L,1);break e}}A=v.createElement(p),Ei(A,p,h),v.head.appendChild(A);break;case"meta":if(D=Wy("meta","content",v).get(p+(h.content||""))){for(L=0;L<D.length;L++)if(A=D[L],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(L,1);break e}}A=v.createElement(p),Ei(A,p,h),v.head.appendChild(A);break;default:throw Error(n(468,p))}A[bn]=i,On(A),p=A}i.stateNode=p}else Jy(v,i.type,i.stateNode);else i.stateNode=Zy(v,p,i.memoizedProps);else A!==p?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,p===null?Jy(v,i.type,i.stateNode):Zy(v,p,i.memoizedProps)):p===null&&i.stateNode!==null&&pr(i,i.memoizedProps,h.memoizedProps)}break;case 27:Si(s,i),Rn(i),p&512&&(Xe||h===null||ze(h,h.return)),h!==null&&p&4&&pr(i,i.memoizedProps,h.memoizedProps);break;case 5:if(Si(s,i),Rn(i),p&512&&(Xe||h===null||ze(h,h.return)),i.flags&32){v=i.stateNode;try{jr(v,"")}catch(at){Q(i,i.return,at)}}p&4&&i.stateNode!=null&&(v=i.memoizedProps,pr(i,v,h!==null?h.memoizedProps:v)),p&1024&&(gr=!0);break;case 6:if(Si(s,i),Rn(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,h=i.stateNode;try{h.nodeValue=p}catch(at){Q(i,i.return,at)}}break;case 3:if(Hg=null,v=li,li=Bg(s.containerInfo),Si(s,i),li=v,Rn(i),p&4&&h!==null&&h.memoizedState.isDehydrated)try{vf(s.containerInfo)}catch(at){Q(i,i.return,at)}gr&&(gr=!1,ae(i));break;case 4:p=li,li=Bg(i.stateNode.containerInfo),Si(s,i),Rn(i),li=p;break;case 12:Si(s,i),Rn(i);break;case 13:Si(s,i),Rn(i),i.child.flags&8192&&i.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(fo=Gt()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Qa(i,p)));break;case 22:v=i.memoizedState!==null;var F=h!==null&&h.memoizedState!==null,et=Aa,pt=Xe;if(Aa=et||v,Xe=pt||F,Si(s,i),Xe=pt,Aa=et,Rn(i),p&8192)t:for(s=i.stateNode,s._visibility=v?s._visibility&-2:s._visibility|1,v&&(h===null||F||Aa||Xe||Ke(i)),h=null,s=i;;){if(s.tag===5||s.tag===26){if(h===null){F=h=s;try{if(A=F.stateNode,v)D=A.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=F.stateNode;var yt=F.memoizedProps.style,it=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;L.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(at){Q(F,F.return,at)}}}else if(s.tag===6){if(h===null){F=s;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(at){Q(F,F.return,at)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;h===s&&(h=null),s=s.return}h===s&&(h=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=i.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Qa(i,h))));break;case 19:Si(s,i),Rn(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,Qa(i,p)));break;case 30:break;case 21:break;default:Si(s,i),Rn(i)}}function Rn(i){var s=i.flags;if(s&2){try{for(var h,p=i.return;p!==null;){if(uh(p)){h=p;break}p=p.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var v=h.stateNode,A=so(i);Os(i,A,v);break;case 5:var D=h.stateNode;h.flags&32&&(jr(D,""),h.flags&=-33);var L=so(i);Os(i,L,D);break;case 3:case 4:var F=h.stateNode.containerInfo,et=so(i);Du(i,et,F);break;default:throw Error(n(161))}}catch(pt){Q(i,i.return,pt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function ae(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;ae(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ye(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)lo(i,s.alternate,s),s=s.sibling}function Ke(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ri(4,s,s.return),Ke(s);break;case 1:ze(s,s.return);var h=s.stateNode;typeof h.componentWillUnmount=="function"&&Mg(s,s.return,h),Ke(s);break;case 27:cf(s.stateNode);case 26:case 5:ze(s,s.return),Ke(s);break;case 22:s.memoizedState===null&&Ke(s);break;case 30:Ke(s);break;default:Ke(s)}i=i.sibling}}function Ea(i,s,h){for(h=h&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,v=i,A=s,D=A.flags;switch(A.tag){case 0:case 11:case 15:Ea(v,A,h),_a(4,A);break;case 1:if(Ea(v,A,h),p=A,v=p.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(et){Q(p,p.return,et)}if(p=A,v=p.updateQueue,v!==null){var L=p.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)kt(F[v],L)}catch(et){Q(p,p.return,et)}}h&&D&64&&Rg(A),Ru(A,A.return);break;case 27:ro(A);case 26:case 5:Ea(v,A,h),h&&p===null&&D&4&&Mu(A),Ru(A,A.return);break;case 12:Ea(v,A,h);break;case 13:Ea(v,A,h),h&&D&4&&dl(v,A);break;case 22:A.memoizedState===null&&Ea(v,A,h),Ru(A,A.return);break;case 30:break;default:Ea(v,A,h)}s=s.sibling}}function mr(i,s){var h=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==h&&(i!=null&&i.refCount++,h!=null&&ya(h))}function Ns(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ya(i))}function Qi(i,s,h,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)oo(i,s,h,p),s=s.sibling}function oo(i,s,h,p){var v=s.flags;switch(s.tag){case 0:case 11:case 15:Qi(i,s,h,p),v&2048&&_a(9,s);break;case 1:Qi(i,s,h,p);break;case 3:Qi(i,s,h,p),v&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ya(i)));break;case 12:if(v&2048){Qi(i,s,h,p),i=s.stateNode;try{var A=s.memoizedProps,D=A.id,L=A.onPostCommit;typeof L=="function"&&L(D,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){Q(s,s.return,F)}}else Qi(i,s,h,p);break;case 13:Qi(i,s,h,p);break;case 23:break;case 22:A=s.stateNode,D=s.alternate,s.memoizedState!==null?A._visibility&2?Qi(i,s,h,p):Nu(i,s):A._visibility&2?Qi(i,s,h,p):(A._visibility|=2,Ta(i,s,h,p,(s.subtreeFlags&10256)!==0)),v&2048&&mr(D,s);break;case 24:Qi(i,s,h,p),v&2048&&Ns(s.alternate,s);break;default:Qi(i,s,h,p)}}function Ta(i,s,h,p,v){for(v=v&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var A=i,D=s,L=h,F=p,et=D.flags;switch(D.tag){case 0:case 11:case 15:Ta(A,D,L,F,v),_a(8,D);break;case 23:break;case 22:var pt=D.stateNode;D.memoizedState!==null?pt._visibility&2?Ta(A,D,L,F,v):Nu(A,D):(pt._visibility|=2,Ta(A,D,L,F,v)),v&&et&2048&&mr(D.alternate,D);break;case 24:Ta(A,D,L,F,v),v&&et&2048&&Ns(D.alternate,D);break;default:Ta(A,D,L,F,v)}s=s.sibling}}function Nu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var h=i,p=s,v=p.flags;switch(p.tag){case 22:Nu(h,p),v&2048&&mr(p.alternate,p);break;case 24:Nu(h,p),v&2048&&Ns(p.alternate,p);break;default:Nu(h,p)}s=s.sibling}}var yr=8192;function fl(i){if(i.subtreeFlags&yr)for(i=i.child;i!==null;)rf(i),i=i.sibling}function rf(i){switch(i.tag){case 26:fl(i),i.flags&yr&&i.memoizedState!==null&&Q_(li,i.memoizedState,i.memoizedProps);break;case 5:fl(i);break;case 3:case 4:var s=li;li=Bg(i.stateNode.containerInfo),fl(i),li=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=yr,yr=16777216,fl(i),yr=s):fl(i));break;default:fl(i)}}function Dg(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Za(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var p=s[h];rn=p,lf(p,i)}Dg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)uo(i),i=i.sibling}function uo(i){switch(i.tag){case 0:case 11:case 15:Za(i),i.flags&2048&&ri(9,i,i.return);break;case 3:Za(i);break;case 12:Za(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Ls(i)):Za(i);break;default:Za(i)}}function Ls(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var p=s[h];rn=p,lf(p,i)}Dg(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ri(8,s,s.return),Ls(s);break;case 22:h=s.stateNode,h._visibility&2&&(h._visibility&=-3,Ls(s));break;default:Ls(s)}i=i.sibling}}function lf(i,s){for(;rn!==null;){var h=rn;switch(h.tag){case 0:case 11:case 15:ri(8,h,s);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:ya(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,rn=p;else t:for(h=i;rn!==null;){p=rn;var v=p.sibling,A=p.return;if(ch(p),p===h){rn=null;break t}if(v!==null){v.return=A,rn=v;break t}rn=A}}}var ra={getCacheForType:function(i){var s=si(xn),h=s.data.get(i);return h===void 0&&(h=i(),s.data.set(i,h)),h}},Wa=typeof WeakMap=="function"?WeakMap:Map,Kt=0,qe=null,fe=null,ve=0,Qt=0,_i=null,oi=!1,Qe=!1,Lu=!1,Ja=0,oe=0,Ye=0,Mn=0,Zi=0,Qn=0,co=0,vr=null,Zn=null,ho=!1,fo=0,pl=1/0,br=null,Sr=null,Ft=0,we=null,$t=null,ue=0,Be=0,Ai=null,zs=null,$a=0,zu=null;function _n(){if((Kt&2)!==0&&ve!==0)return ve&-ve;if(H.T!==null){var i=Ql;return i!==0?i:pm()}return Uo()}function dn(){Qn===0&&(Qn=(ve&536870912)===0||Ce?sc():536870912);var i=Yi.current;return i!==null&&(i.flags|=32),Qn}function Dn(i,s,h){(i===qe&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)&&(Er(i,0),Wi(i,ve,Qn,!1)),qs(i,h),((Kt&2)===0||i!==qe)&&(i===qe&&((Kt&2)===0&&(Mn|=h),oe===4&&Wi(i,ve,Qn,!1)),Lt(i))}function _r(i,s,h){if((Kt&6)!==0)throw Error(n(327));var p=!h&&(s&124)===0&&(s&i.expiredLanes)===0||Ml(i,s),v=p?go(i,s):Ln(i,s,!0),A=p;do{if(v===0){Qe&&!p&&Wi(i,s,0,!1);break}else{if(h=i.current.alternate,A&&!la(h)){v=Ln(i,s,!1),A=!1;continue}if(v===2){if(A=s,i.errorRecoveryDisabledLanes&A)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){s=D;t:{var L=i;v=vr;var F=L.current.memoizedState.isDehydrated;if(F&&(Er(L,D).flags|=256),D=Ln(L,D,!1),D!==2){if(Lu&&!F){L.errorRecoveryDisabledLanes|=A,Mn|=A,v=4;break t}A=Zn,Zn=v,A!==null&&(Zn===null?Zn=A:Zn.push.apply(Zn,A))}v=D}if(A=!1,v!==2)continue}}if(v===1){Er(i,0),Wi(i,s,0,!0);break}t:{switch(p=i,A=v,A){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Wi(p,s,Qn,!oi);break t;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(v=fo+300-Gt(),10<v)){if(Wi(p,s,Qn,!oi),ac(p,0,!0)!==0)break t;p.timeoutHandle=jy(hh.bind(null,p,h,Zn,br,ho,s,Qn,Mn,co,oi,A,2,-0,0),v);break t}hh(p,h,Zn,br,ho,s,Qn,Mn,co,oi,A,0,-0,0)}}break}while(!0);Lt(i)}function hh(i,s,h,p,v,A,D,L,F,et,pt,yt,it,at){if(i.timeoutHandle=-1,yt=s.subtreeFlags,(yt&8192||(yt&16785408)===16785408)&&(ff={stylesheets:null,count:0,unsuspend:K_},rf(s),yt=Z_(),yt!==null)){i.cancelPendingCommit=yt(o.bind(null,i,s,A,h,p,v,D,L,F,pt,1,it,at)),Wi(i,A,D,!et);return}o(i,s,A,h,p,v,D,L,F)}function la(i){for(var s=i;;){var h=s.tag;if((h===0||h===11||h===15)&&s.flags&16384&&(h=s.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var v=h[p],A=v.getSnapshot;v=v.value;try{if(!qi(A(),v))return!1}catch{return!1}}if(h=s.child,s.subtreeFlags&16384&&h!==null)h.return=s,s=h;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Wi(i,s,h,p){s&=~Zi,s&=~Mn,i.suspendedLanes|=s,i.pingedLanes&=~s,p&&(i.warmLanes|=s),p=i.expirationTimes;for(var v=s;0<v;){var A=31-tn(v),D=1<<A;p[A]=-1,v&=~D}h!==0&&Ho(i,h,s)}function Ar(){return(Kt&6)===0?(Ge(0),!1):!0}function ui(){if(fe!==null){if(Qt===0)var i=fe.return;else i=fe,ja=nr=null,zd(i),eo=null,yi=0,i=fe;for(;i!==null;)wu(i.alternate,i),i=i.return;fe=null}}function Er(i,s){var h=i.timeoutHandle;h!==-1&&(i.timeoutHandle=-1,O_(h)),h=i.cancelPendingCommit,h!==null&&(i.cancelPendingCommit=null,h()),ui(),qe=i,fe=h=Ua(i.current,null),ve=s,Qt=0,_i=null,oi=!1,Qe=Ml(i,s),Lu=!1,co=Qn=Zi=Mn=Ye=oe=0,Zn=vr=null,ho=!1,(s&8)!==0&&(s|=s&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=s;0<p;){var v=31-tn(p),A=1<<v;s|=i[v],p&=~A}return Ja=s,Ii(),h}function dh(i,s){le=null,H.H=eh,s===al||s===sl?(s=Md(),Qt=3):s===Fp?(s=Md(),Qt=4):Qt=s===Eg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,_i=s,fe===null&&(oe=1,ih(i,kn(s,i.current)))}function po(){var i=H.H;return H.H=eh,i===null?eh:i}function Bu(){var i=H.A;return H.A=ra,i}function ts(){oe=4,oi||(ve&4194048)!==ve&&Yi.current!==null||(Qe=!0),(Ye&134217727)===0&&(Mn&134217727)===0||qe===null||Wi(qe,ve,Qn,!1)}function Ln(i,s,h){var p=Kt;Kt|=2;var v=po(),A=Bu();(qe!==i||ve!==s)&&(br=null,Er(i,s)),s=!1;var D=oe;t:do try{if(Qt!==0&&fe!==null){var L=fe,F=_i;switch(Qt){case 8:ui(),D=6;break t;case 3:case 2:case 9:case 6:Yi.current===null&&(s=!0);var et=Qt;if(Qt=0,_i=null,gl(i,L,F,et),h&&Qe){D=0;break t}break;default:et=Qt,Qt=0,_i=null,gl(i,L,F,et)}}Tr(),D=oe;break}catch(pt){dh(i,pt)}while(!0);return s&&i.shellSuspendCounter++,ja=nr=null,Kt=p,H.H=v,H.A=A,fe===null&&(qe=null,ve=0,Ii()),D}function Tr(){for(;fe!==null;)fh(fe)}function go(i,s){var h=Kt;Kt|=2;var p=po(),v=Bu();qe!==i||ve!==s?(br=null,pl=Gt()+500,Er(i,s)):Qe=Ml(i,s);t:do try{if(Qt!==0&&fe!==null){s=fe;var A=_i;e:switch(Qt){case 1:Qt=0,_i=null,gl(i,s,A,1);break;case 2:case 9:if(rl(A)){Qt=0,_i=null,ph(s);break}s=function(){Qt!==2&&Qt!==9||qe!==i||(Qt=7),Lt(i)},A.then(s,s);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:rl(A)?(Qt=0,_i=null,ph(s)):(Qt=0,_i=null,gl(i,s,A,7));break;case 5:var D=null;switch(fe.tag){case 26:D=fe.memoizedState;case 5:case 27:var L=fe;if(!D||$y(D)){Qt=0,_i=null;var F=L.sibling;if(F!==null)fe=F;else{var et=L.return;et!==null?(fe=et,xr(et)):fe=null}break e}}Qt=0,_i=null,gl(i,s,A,5);break;case 6:Qt=0,_i=null,gl(i,s,A,6);break;case 8:ui(),oe=6;break t;default:throw Error(n(462))}}mo();break}catch(pt){dh(i,pt)}while(!0);return ja=nr=null,H.H=p,H.A=v,Kt=h,fe!==null?0:(qe=null,ve=0,Ii(),oe)}function mo(){for(;fe!==null&&!de();)fh(fe)}function fh(i){var s=Cu(i.alternate,i,Ja);i.memoizedProps=i.pendingProps,s===null?xr(i):fe=s}function ph(i){var s=i,h=s.alternate;switch(s.tag){case 15:case 0:s=rh(h,s,s.pendingProps,s.type,void 0,ve);break;case 11:s=rh(h,s,s.pendingProps,s.type.render,s.ref,ve);break;case 5:zd(s);default:wu(h,s),s=fe=Uc(s,Ja),s=Cu(h,s,Ja)}i.memoizedProps=i.pendingProps,s===null?xr(i):fe=s}function gl(i,s,h,p){ja=nr=null,zd(s),eo=null,yi=0;var v=s.return;try{if(hm(i,v,s,h,ve)){oe=1,ih(i,kn(h,i.current)),fe=null;return}}catch(A){if(v!==null)throw fe=v,A;oe=1,ih(i,kn(h,i.current)),fe=null;return}s.flags&32768?(Ce||p===1?i=!0:Qe||(ve&536870912)!==0?i=!1:(oi=i=!0,(p===2||p===9||p===3||p===6)&&(p=Yi.current,p!==null&&p.tag===13&&(p.flags|=16384))),gh(s,i)):xr(s)}function xr(i){var s=i;do{if((s.flags&32768)!==0){gh(s,oi);return}i=s.return;var h=nf(s.alternate,s,Ja);if(h!==null){fe=h;return}if(s=s.sibling,s!==null){fe=s;return}fe=s=i}while(s!==null);oe===0&&(oe=5)}function gh(i,s){do{var h=Xi(i.alternate,i);if(h!==null){h.flags&=32767,fe=h;return}if(h=i.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!s&&(i=i.sibling,i!==null)){fe=i;return}fe=i=h}while(i!==null);oe=6,fe=null}function o(i,s,h,p,v,A,D,L,F){i.cancelPendingCommit=null;do C();while(Ft!==0);if((Kt&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(A=s.lanes|s.childLanes,A|=tu,mp(i,h,A,D,L,F),i===qe&&(fe=qe=null,ve=0),$t=s,we=i,ue=h,Be=A,Ai=v,zs=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,oa(xe,function(){return B(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,v=Z.p,Z.p=2,D=Kt,Kt|=4;try{dm(i,s,h)}finally{Kt=D,Z.p=v,H.T=p}}Ft=1,c(),m(),b()}}function c(){if(Ft===1){Ft=0;var i=we,s=$t,h=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||h){h=H.T,H.T=null;var p=Z.p;Z.p=2;var v=Kt;Kt|=4;try{Ou(s,i);var A=Am,D=vd(i.containerInfo),L=A.focusedElem,F=A.selectionRange;if(D!==L&&L&&L.ownerDocument&&yd(L.ownerDocument.documentElement,L)){if(F!==null&&Kr(L)){var et=F.start,pt=F.end;if(pt===void 0&&(pt=et),"selectionStart"in L)L.selectionStart=et,L.selectionEnd=Math.min(pt,L.value.length);else{var yt=L.ownerDocument||document,it=yt&&yt.defaultView||window;if(it.getSelection){var at=it.getSelection(),Zt=L.textContent.length,It=Math.min(F.start,Zt),We=F.end===void 0?It:Math.min(F.end,Zt);!at.extend&&It>We&&(D=We,We=It,It=D);var K=bs(L,It),V=bs(L,We);if(K&&V&&(at.rangeCount!==1||at.anchorNode!==K.node||at.anchorOffset!==K.offset||at.focusNode!==V.node||at.focusOffset!==V.offset)){var tt=yt.createRange();tt.setStart(K.node,K.offset),at.removeAllRanges(),It>We?(at.addRange(tt),at.extend(V.node,V.offset)):(tt.setEnd(V.node,V.offset),at.addRange(tt))}}}}for(yt=[],at=L;at=at.parentNode;)at.nodeType===1&&yt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<yt.length;L++){var mt=yt[L];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}kg=!!_m,Am=_m=null}finally{Kt=v,Z.p=p,H.T=h}}i.current=s,Ft=2}}function m(){if(Ft===2){Ft=0;var i=we,s=$t,h=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||h){h=H.T,H.T=null;var p=Z.p;Z.p=2;var v=Kt;Kt|=4;try{lo(i,s.alternate,s)}finally{Kt=v,Z.p=p,H.T=h}}Ft=3}}function b(){if(Ft===4||Ft===3){Ft=0,Et();var i=we,s=$t,h=ue,p=zs;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ft=5:(Ft=0,$t=we=null,E(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Sr=null),oc(h),s=s.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(_e,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=H.T,v=Z.p,Z.p=2,H.T=null;try{for(var A=i.onRecoverableError,D=0;D<p.length;D++){var L=p[D];A(L.value,{componentStack:L.stack})}}finally{H.T=s,Z.p=v}}(ue&3)!==0&&C(),Lt(i),v=i.pendingLanes,(h&4194090)!==0&&(v&42)!==0?i===zu?$a++:($a=0,zu=i):$a=0,Ge(0)}}function E(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ya(s)))}function C(i){return c(),m(),b(),B()}function B(){if(Ft!==5)return!1;var i=we,s=Be;Be=0;var h=oc(ue),p=H.T,v=Z.p;try{Z.p=32>h?32:h,H.T=null,h=Ai,Ai=null;var A=we,D=ue;if(Ft=0,$t=we=null,ue=0,(Kt&6)!==0)throw Error(n(331));var L=Kt;if(Kt|=4,uo(A.current),oo(A,A.current,D,h),Kt=L,Ge(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(_e,A)}catch{}return!0}finally{Z.p=v,H.T=p,E(i,s)}}function I(i,s,h){s=kn(h,s),s=io(i.stateNode,s,2),i=mi(i,s,2),i!==null&&(qs(i,2),Lt(i))}function Q(i,s,h){if(i.tag===3)I(i,i,h);else for(;s!==null;){if(s.tag===3){I(s,i,h);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Sr===null||!Sr.has(p))){i=kn(h,i),h=Tu(2),p=mi(s,h,2),p!==null&&(ah(h,p,s,i),qs(p,2),Lt(p));break}}s=s.return}}function bt(i,s,h){var p=i.pingCache;if(p===null){p=i.pingCache=new Wa;var v=new Set;p.set(s,v)}else v=p.get(s),v===void 0&&(v=new Set,p.set(s,v));v.has(h)||(Lu=!0,v.add(h),i=Tt.bind(null,i,s,h),s.then(i,i))}function Tt(i,s,h){var p=i.pingCache;p!==null&&p.delete(s),i.pingedLanes|=i.suspendedLanes&h,i.warmLanes&=~h,qe===i&&(ve&h)===h&&(oe===4||oe===3&&(ve&62914560)===ve&&300>Gt()-fo?(Kt&2)===0&&Er(i,0):Zi|=h,co===ve&&(co=0)),Lt(i)}function Dt(i,s){s===0&&(s=Po()),i=Ha(i,s),i!==null&&(qs(i,s),Lt(i))}function Ot(i){var s=i.memoizedState,h=0;s!==null&&(h=s.retryLane),Dt(i,h)}function ie(i,s){var h=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(h=v.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(s),Dt(i,h)}function oa(i,s){return ee(i,s)}var Cr=null,ua=null,nt=!1,X=!1,st=!1,_t=0;function Lt(i){i!==ua&&i.next===null&&(ua===null?Cr=ua=i:ua=ua.next=i),X=!0,nt||(nt=!0,fm())}function Ge(i,s){if(!st&&X){st=!0;do for(var h=!1,p=Cr;p!==null;){if(i!==0){var v=p.pendingLanes;if(v===0)var A=0;else{var D=p.suspendedLanes,L=p.pingedLanes;A=(1<<31-tn(42|i)+1)-1,A&=v&~(D&~L),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,Bs(p,A))}else A=ve,A=ac(p,p===qe?A:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(A&3)===0||Ml(p,A)||(h=!0,Bs(p,A));p=p.next}while(h);st=!1}}function Vt(){Re()}function Re(){X=nt=!1;var i=0;_t!==0&&(D_()&&(i=_t),_t=0);for(var s=Gt(),h=null,p=Cr;p!==null;){var v=p.next,A=zn(p,s);A===0?(p.next=null,h===null?Cr=v:h.next=v,v===null&&(ua=h)):(h=p,(i!==0||(A&3)!==0)&&(X=!0)),p=v}Ge(i)}function zn(i,s){for(var h=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,A=i.pendingLanes&-62914561;0<A;){var D=31-tn(A),L=1<<D,F=v[D];F===-1?((L&h)===0||(L&p)!==0)&&(v[D]=$0(L,s)):F<=s&&(i.expiredLanes|=L),A&=~L}if(s=qe,h=ve,h=ac(i,i===s?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,h===0||i===s&&(Qt===2||Qt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Pe(p),i.callbackNode=null,i.callbackPriority=0;if((h&3)===0||Ml(i,h)){if(s=h&-h,s===i.callbackPriority)return s;switch(p!==null&&Pe(p),oc(h)){case 2:case 8:h=vn;break;case 32:h=xe;break;case 268435456:h=ki;break;default:h=xe}return p=Me.bind(null,i),h=ee(h,p),i.callbackPriority=s,i.callbackNode=h,s}return p!==null&&p!==null&&Pe(p),i.callbackPriority=2,i.callbackNode=null,2}function Me(i,s){if(Ft!==0&&Ft!==5)return i.callbackNode=null,i.callbackPriority=0,null;var h=i.callbackNode;if(C()&&i.callbackNode!==h)return null;var p=ve;return p=ac(i,i===qe?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(_r(i,p,s),zn(i,Gt()),i.callbackNode!=null&&i.callbackNode===h?Me.bind(null,i):null)}function Bs(i,s){if(C())return null;_r(i,s,!0)}function fm(){N_(function(){(Kt&6)!==0?ee(Oe,Vt):Re()})}function pm(){return _t===0&&(_t=sc()),_t}function Ny(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:yc(""+i)}function Ly(i,s){var h=s.ownerDocument.createElement("input");return h.name=s.name,h.value=s.value,i.id&&h.setAttribute("form",i.id),s.parentNode.insertBefore(h,s),i=new FormData(i),h.parentNode.removeChild(h),i}function E_(i,s,h,p,v){if(s==="submit"&&h&&h.stateNode===v){var A=Ny((v[fi]||null).action),D=p.submitter;D&&(s=(s=D[fi]||null)?Ny(s.formAction):D.getAttribute("formAction"),s!==null&&(A=s,D=null));var L=new Xo("action","action",null,p,v);i.push({event:L,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(_t!==0){var F=D?Ly(v,D):new FormData(v);Yd(h,{pending:!0,data:F,method:v.method,action:A},null,F)}}else typeof A=="function"&&(L.preventDefault(),F=D?Ly(v,D):new FormData(v),Yd(h,{pending:!0,data:F,method:v.method,action:A},A,F))},currentTarget:v}]})}}for(var gm=0;gm<ni.length;gm++){var mm=ni[gm],T_=mm.toLowerCase(),x_=mm[0].toUpperCase()+mm.slice(1);ea(T_,"on"+x_)}ea(bd,"onAnimationEnd"),ea(ta,"onAnimationIteration"),ea(Hc,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(Up,"onTransitionRun"),ea(sm,"onTransitionStart"),ea(Sd,"onTransitionCancel"),ea(ei,"onTransitionEnd"),Vs("onMouseEnter",["mouseout","mouseover"]),Vs("onMouseLeave",["mouseout","mouseover"]),Vs("onPointerEnter",["pointerout","pointerover"]),Vs("onPointerLeave",["pointerout","pointerover"]),Ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(of));function zy(i,s){s=(s&4)!==0;for(var h=0;h<i.length;h++){var p=i[h],v=p.event;p=p.listeners;t:{var A=void 0;if(s)for(var D=p.length-1;0<=D;D--){var L=p[D],F=L.instance,et=L.currentTarget;if(L=L.listener,F!==A&&v.isPropagationStopped())break t;A=L,v.currentTarget=et;try{A(v)}catch(pt){Ds(pt)}v.currentTarget=null,A=F}else for(D=0;D<p.length;D++){if(L=p[D],F=L.instance,et=L.currentTarget,L=L.listener,F!==A&&v.isPropagationStopped())break t;A=L,v.currentTarget=et;try{A(v)}catch(pt){Ds(pt)}v.currentTarget=null,A=F}}}}function be(i,s){var h=s[Go];h===void 0&&(h=s[Go]=new Set);var p=i+"__bubble";h.has(p)||(By(s,i,2,!1),h.add(p))}function ym(i,s,h){var p=0;s&&(p|=4),By(h,i,p,s)}var Og="_reactListening"+Math.random().toString(36).slice(2);function vm(i){if(!i[Og]){i[Og]=!0,cc.forEach(function(h){h!=="selectionchange"&&(C_.has(h)||ym(h,!1,i),ym(h,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Og]||(s[Og]=!0,ym("selectionchange",!1,s))}}function By(i,s,h,p){switch(s2(s)){case 2:var v=$_;break;case 8:v=t3;break;default:v=Nm}h=v.bind(null,s,h,i),v=void 0,!bc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(s,h,{capture:!0,passive:v}):i.addEventListener(s,h,!0):v!==void 0?i.addEventListener(s,h,{passive:v}):i.addEventListener(s,h,!1)}function bm(i,s,h,p,v){var A=p;if((s&1)===0&&(s&2)===0&&p!==null)t:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var L=p.stateNode.containerInfo;if(L===v)break;if(D===4)for(D=p.return;D!==null;){var F=D.tag;if((F===3||F===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;L!==null;){if(D=Oa(L),D===null)return;if(F=D.tag,F===5||F===6||F===26||F===27){p=A=D;continue t}L=L.parentNode}}p=p.return}sd(function(){var et=A,pt=Xs(h),yt=[];t:{var it=_d.get(i);if(it!==void 0){var at=Xo,Zt=i;switch(i){case"keypress":if(Hl(h)===0)break t;case"keydown":case"keyup":at=xc;break;case"focusin":Zt="focus",at=Ir;break;case"focusout":Zt="blur",at=Ir;break;case"beforeblur":case"afterblur":at=Ir;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ko;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=_p;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Rp;break;case bd:case ta:case Hc:at=Ap;break;case ei:at=Xn;break;case"scroll":case"scrollend":at=em;break;case"wheel":at=Dp;break;case"copy":case"cut":case"paste":at=Ks;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Cc;break;case"toggle":case"beforetoggle":at=Np}var It=(s&4)!==0,We=!It&&(i==="scroll"||i==="scrollend"),K=It?it!==null?it+"Capture":null:it;It=[];for(var V=et,tt;V!==null;){var mt=V;if(tt=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||tt===null||K===null||(mt=Bl(V,K),mt!=null&&It.push(uf(V,mt,tt))),We)break;V=V.return}0<It.length&&(it=new at(it,Zt,null,h,pt),yt.push({event:it,listeners:It}))}}if((s&7)===0){t:{if(it=i==="mouseover"||i==="pointerover",at=i==="mouseout"||i==="pointerout",it&&h!==vc&&(Zt=h.relatedTarget||h.fromElement)&&(Oa(Zt)||Zt[cs]))break t;if((at||it)&&(it=pt.window===pt?pt:(it=pt.ownerDocument)?it.defaultView||it.parentWindow:window,at?(Zt=h.relatedTarget||h.toElement,at=et,Zt=Zt?Oa(Zt):null,Zt!==null&&(We=r(Zt),It=Zt.tag,Zt!==We||It!==5&&It!==27&&It!==6)&&(Zt=null)):(at=null,Zt=et),at!==Zt)){if(It=Ko,mt="onMouseLeave",K="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(It=Cc,mt="onPointerLeave",K="onPointerEnter",V="pointer"),We=at==null?it:Dl(at),tt=Zt==null?it:Dl(Zt),it=new It(mt,V+"leave",at,h,pt),it.target=We,it.relatedTarget=tt,mt=null,Oa(pt)===et&&(It=new It(K,V+"enter",Zt,h,pt),It.target=tt,It.relatedTarget=We,mt=It),We=mt,at&&Zt)e:{for(It=at,K=Zt,V=0,tt=It;tt;tt=mh(tt))V++;for(tt=0,mt=K;mt;mt=mh(mt))tt++;for(;0<V-tt;)It=mh(It),V--;for(;0<tt-V;)K=mh(K),tt--;for(;V--;){if(It===K||K!==null&&It===K.alternate)break e;It=mh(It),K=mh(K)}It=null}else It=null;at!==null&&Py(yt,it,at,It,!1),Zt!==null&&We!==null&&Py(yt,We,Zt,It,!0)}}t:{if(it=et?Dl(et):window,at=it.nodeName&&it.nodeName.toLowerCase(),at==="select"||at==="input"&&it.type==="file")var Bt=xi;else if(Dc(it))if(gd)Bt=cn;else{Bt=zc;var me=Pp}else at=it.nodeName,!at||at.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?et&&mc(et.elementType)&&(Bt=xi):Bt=Wo;if(Bt&&(Bt=Bt(i,et))){pd(yt,Bt,h,pt);break t}me&&me(i,it,et),i==="focusout"&&et&&it.type==="number"&&et.memoizedProps.value!=null&&gc(it,"number",it.value)}switch(me=et?Dl(et):window,i){case"focusin":(Dc(me)||me.contentEditable==="true")&&(Qr=me,Jo=et,ql=null);break;case"focusout":ql=Jo=Qr=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,Bc(yt,h,pt);break;case"selectionchange":if(Ba)break;case"keydown":case"keyup":Bc(yt,h,pt)}var Pt;if(kl)t:{switch(i){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Qs?Rc(i,h)&&(Yt="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Yt="onCompositionStart");Yt&&(cd&&h.locale!=="ko"&&(Qs||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Qs&&(Pt=rd()):(ps=pt,Io="value"in ps?ps.value:ps.textContent,Qs=!0)),me=Ng(et,Yt),0<me.length&&(Yt=new ys(Yt,i,null,h,pt),yt.push({event:Yt,listeners:me}),Pt?Yt.data=Pt:(Pt=dd(h),Pt!==null&&(Yt.data=Pt)))),(Pt=zp?Mc(i,h):fd(i,h))&&(Yt=Ng(et,"onBeforeInput"),0<Yt.length&&(me=new ys("onBeforeInput","beforeinput",null,h,pt),yt.push({event:me,listeners:Yt}),me.data=Pt)),E_(yt,i,et,h,pt)}zy(yt,s)})}function uf(i,s,h){return{instance:i,listener:s,currentTarget:h}}function Ng(i,s){for(var h=s+"Capture",p=[];i!==null;){var v=i,A=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||A===null||(v=Bl(i,h),v!=null&&p.unshift(uf(i,v,A)),v=Bl(i,s),v!=null&&p.push(uf(i,v,A))),i.tag===3)return p;i=i.return}return[]}function mh(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Py(i,s,h,p,v){for(var A=s._reactName,D=[];h!==null&&h!==p;){var L=h,F=L.alternate,et=L.stateNode;if(L=L.tag,F!==null&&F===p)break;L!==5&&L!==26&&L!==27||et===null||(F=et,v?(et=Bl(h,A),et!=null&&D.unshift(uf(h,et,F))):v||(et=Bl(h,A),et!=null&&D.push(uf(h,et,F)))),h=h.return}D.length!==0&&i.push({event:s,listeners:D})}var w_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function Hy(i){return(typeof i=="string"?i:""+i).replace(w_,`
`).replace(R_,"")}function Uy(i,s){return s=Hy(s),Hy(i)===s}function Lg(){}function Ze(i,s,h,p,v,A){switch(h){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||jr(i,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&jr(i,""+p);break;case"className":Nl(i,"class",p);break;case"tabIndex":Nl(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Nl(i,h,p);break;case"style":ad(i,p,A);break;case"data":if(s!=="object"){Nl(i,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||h!=="href")){i.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(h);break}p=yc(""+p),i.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(s!=="input"&&Ze(i,s,"name",v.name,v,null),Ze(i,s,"formEncType",v.formEncType,v,null),Ze(i,s,"formMethod",v.formMethod,v,null),Ze(i,s,"formTarget",v.formTarget,v,null)):(Ze(i,s,"encType",v.encType,v,null),Ze(i,s,"method",v.method,v,null),Ze(i,s,"target",v.target,v,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(h);break}p=yc(""+p),i.setAttribute(h,p);break;case"onClick":p!=null&&(i.onclick=Lg);break;case"onScroll":p!=null&&be("scroll",i);break;case"onScrollEnd":p!=null&&be("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(h=p.__html,h!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=h}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}h=yc(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(h,""+p):i.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(h,""):i.removeAttribute(h);break;case"capture":case"download":p===!0?i.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(h,p):i.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(h,p):i.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(h):i.setAttribute(h,p);break;case"popover":be("beforetoggle",i),be("toggle",i),Ol(i,"popover",p);break;case"xlinkActuate":ga(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ga(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ga(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ga(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ga(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ga(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ga(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ga(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ga(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ol(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=vp.get(h)||h,Ol(i,h,p))}}function Sm(i,s,h,p,v,A){switch(h){case"style":ad(i,p,A);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(h=p.__html,h!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=h}}break;case"children":typeof p=="string"?jr(i,p):(typeof p=="number"||typeof p=="bigint")&&jr(i,""+p);break;case"onScroll":p!=null&&be("scroll",i);break;case"onScrollEnd":p!=null&&be("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Lg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hc.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),s=h.slice(2,v?h.length-7:void 0),A=i[fi]||null,A=A!=null?A[h]:null,typeof A=="function"&&i.removeEventListener(s,A,v),typeof p=="function")){typeof A!="function"&&A!==null&&(h in i?i[h]=null:i.hasAttribute(h)&&i.removeAttribute(h)),i.addEventListener(s,p,v);break t}h in i?i[h]=p:p===!0?i.setAttribute(h,""):Ol(i,h,p)}}}function Ei(i,s,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",i),be("load",i);var p=!1,v=!1,A;for(A in h)if(h.hasOwnProperty(A)){var D=h[A];if(D!=null)switch(A){case"src":p=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ze(i,s,A,D,h,null)}}v&&Ze(i,s,"srcSet",h.srcSet,h,null),p&&Ze(i,s,"src",h.src,h,null);return;case"input":be("invalid",i);var L=A=D=v=null,F=null,et=null;for(p in h)if(h.hasOwnProperty(p)){var pt=h[p];if(pt!=null)switch(p){case"name":v=pt;break;case"type":D=pt;break;case"checked":F=pt;break;case"defaultChecked":et=pt;break;case"value":A=pt;break;case"defaultValue":L=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(n(137,s));break;default:Ze(i,s,p,pt,h,null)}}pc(i,A,L,F,et,D,v,!1),jo(i);return;case"select":be("invalid",i),p=D=A=null;for(v in h)if(h.hasOwnProperty(v)&&(L=h[v],L!=null))switch(v){case"value":A=L;break;case"defaultValue":D=L;break;case"multiple":p=L;default:Ze(i,s,v,L,h,null)}s=A,h=D,i.multiple=!!p,s!=null?zl(i,!!p,s,!1):h!=null&&zl(i,!!p,h,!0);return;case"textarea":be("invalid",i),A=v=p=null;for(D in h)if(h.hasOwnProperty(D)&&(L=h[D],L!=null))switch(D){case"value":p=L;break;case"defaultValue":v=L;break;case"children":A=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:Ze(i,s,D,L,h,null)}ed(i,p,v,A),jo(i);return;case"option":for(F in h)if(h.hasOwnProperty(F)&&(p=h[F],p!=null))switch(F){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Ze(i,s,F,p,h,null)}return;case"dialog":be("beforetoggle",i),be("toggle",i),be("cancel",i),be("close",i);break;case"iframe":case"object":be("load",i);break;case"video":case"audio":for(p=0;p<of.length;p++)be(of[p],i);break;case"image":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"embed":case"source":case"link":be("error",i),be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in h)if(h.hasOwnProperty(et)&&(p=h[et],p!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Ze(i,s,et,p,h,null)}return;default:if(mc(s)){for(pt in h)h.hasOwnProperty(pt)&&(p=h[pt],p!==void 0&&Sm(i,s,pt,p,h,void 0));return}}for(L in h)h.hasOwnProperty(L)&&(p=h[L],p!=null&&Ze(i,s,L,p,h,null))}function M_(i,s,h,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,A=null,D=null,L=null,F=null,et=null,pt=null;for(at in h){var yt=h[at];if(h.hasOwnProperty(at)&&yt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":F=yt;default:p.hasOwnProperty(at)||Ze(i,s,at,null,p,yt)}}for(var it in p){var at=p[it];if(yt=h[it],p.hasOwnProperty(it)&&(at!=null||yt!=null))switch(it){case"type":A=at;break;case"name":v=at;break;case"checked":et=at;break;case"defaultChecked":pt=at;break;case"value":D=at;break;case"defaultValue":L=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,s));break;default:at!==yt&&Ze(i,s,it,at,p,yt)}}fc(i,D,L,F,et,pt,A,v);return;case"select":at=D=L=it=null;for(A in h)if(F=h[A],h.hasOwnProperty(A)&&F!=null)switch(A){case"value":break;case"multiple":at=F;default:p.hasOwnProperty(A)||Ze(i,s,A,null,p,F)}for(v in p)if(A=p[v],F=h[v],p.hasOwnProperty(v)&&(A!=null||F!=null))switch(v){case"value":it=A;break;case"defaultValue":L=A;break;case"multiple":D=A;default:A!==F&&Ze(i,s,v,A,p,F)}s=L,h=D,p=at,it!=null?zl(i,!!h,it,!1):!!p!=!!h&&(s!=null?zl(i,!!h,s,!0):zl(i,!!h,h?[]:"",!1));return;case"textarea":at=it=null;for(L in h)if(v=h[L],h.hasOwnProperty(L)&&v!=null&&!p.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Ze(i,s,L,null,p,v)}for(D in p)if(v=p[D],A=h[D],p.hasOwnProperty(D)&&(v!=null||A!=null))switch(D){case"value":it=v;break;case"defaultValue":at=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==A&&Ze(i,s,D,v,p,A)}td(i,it,at);return;case"option":for(var Zt in h)if(it=h[Zt],h.hasOwnProperty(Zt)&&it!=null&&!p.hasOwnProperty(Zt))switch(Zt){case"selected":i.selected=!1;break;default:Ze(i,s,Zt,null,p,it)}for(F in p)if(it=p[F],at=h[F],p.hasOwnProperty(F)&&it!==at&&(it!=null||at!=null))switch(F){case"selected":i.selected=it&&typeof it!="function"&&typeof it!="symbol";break;default:Ze(i,s,F,it,p,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var It in h)it=h[It],h.hasOwnProperty(It)&&it!=null&&!p.hasOwnProperty(It)&&Ze(i,s,It,null,p,it);for(et in p)if(it=p[et],at=h[et],p.hasOwnProperty(et)&&it!==at&&(it!=null||at!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,s));break;default:Ze(i,s,et,it,p,at)}return;default:if(mc(s)){for(var We in h)it=h[We],h.hasOwnProperty(We)&&it!==void 0&&!p.hasOwnProperty(We)&&Sm(i,s,We,void 0,p,it);for(pt in p)it=p[pt],at=h[pt],!p.hasOwnProperty(pt)||it===at||it===void 0&&at===void 0||Sm(i,s,pt,it,p,at);return}}for(var K in h)it=h[K],h.hasOwnProperty(K)&&it!=null&&!p.hasOwnProperty(K)&&Ze(i,s,K,null,p,it);for(yt in p)it=p[yt],at=h[yt],!p.hasOwnProperty(yt)||it===at||it==null&&at==null||Ze(i,s,yt,it,p,at)}var _m=null,Am=null;function zg(i){return i.nodeType===9?i:i.ownerDocument}function Gy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ky(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Em(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tm=null;function D_(){var i=window.event;return i&&i.type==="popstate"?i===Tm?!1:(Tm=i,!0):(Tm=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,O_=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(i){return Fy.resolve(null).then(i).catch(L_)}:jy;function L_(i){setTimeout(function(){throw i})}function yo(i){return i==="head"}function qy(i,s){var h=s,p=0,v=0;do{var A=h.nextSibling;if(i.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"){if(0<p&&8>p){h=p;var D=i.ownerDocument;if(h&1&&cf(D.documentElement),h&2&&cf(D.body),h&4)for(h=D.head,cf(h),D=h.firstChild;D;){var L=D.nextSibling,F=D.nodeName;D[ds]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&D.rel.toLowerCase()==="stylesheet"||h.removeChild(D),D=L}}if(v===0){i.removeChild(A),vf(s);return}v--}else h==="$"||h==="$?"||h==="$!"?v++:p=h.charCodeAt(0)-48;else p=0;h=A}while(h);vf(s)}function xm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var h=s;switch(s=s.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":xm(h),ko(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}i.removeChild(h)}}function z_(i,s,h,p){for(;i.nodeType===1;){var v=h;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[ds])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(A=i.getAttribute("rel"),A==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(A!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(A=i.getAttribute("src"),(A!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&A&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var A=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===A)return i}else return i;if(i=Ps(i.nextSibling),i===null)break}return null}function B_(i,s,h){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!h||(i=Ps(i.nextSibling),i===null))return null;return i}function Cm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function P_(i,s){var h=i.ownerDocument;if(i.data!=="$?"||h.readyState==="complete")s();else{var p=function(){s(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Ps(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var wm=null;function Iy(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(s===0)return i;s--}else h==="/$"&&s++}i=i.previousSibling}return null}function Vy(i,s,h){switch(s=zg(h),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function cf(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ko(i)}var es=new Map,Yy=new Set;function Bg(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ml=Z.d;Z.d={f:H_,r:U_,D:G_,C:k_,L:j_,m:F_,X:I_,S:q_,M:V_};function H_(){var i=ml.f(),s=Ar();return i||s}function U_(i){var s=Na(i);s!==null&&s.tag===5&&s.type==="form"?pg(s):ml.r(i)}var yh=typeof document>"u"?null:document;function Xy(i,s,h){var p=yh;if(p&&typeof s=="string"&&s){var v=ji(s);v='link[rel="'+i+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),Yy.has(v)||(Yy.add(v),i={rel:i,crossOrigin:h,href:s},p.querySelector(v)===null&&(s=p.createElement("link"),Ei(s,"link",i),On(s),p.head.appendChild(s)))}}function G_(i){ml.D(i),Xy("dns-prefetch",i,null)}function k_(i,s){ml.C(i,s),Xy("preconnect",i,s)}function j_(i,s,h){ml.L(i,s,h);var p=yh;if(p&&i&&s){var v='link[rel="preload"][as="'+ji(s)+'"]';s==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+ji(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+ji(h.imageSizes)+'"]')):v+='[href="'+ji(i)+'"]';var A=v;switch(s){case"style":A=vh(i);break;case"script":A=bh(i)}es.has(A)||(i=y({rel:"preload",href:s==="image"&&h&&h.imageSrcSet?void 0:i,as:s},h),es.set(A,i),p.querySelector(v)!==null||s==="style"&&p.querySelector(hf(A))||s==="script"&&p.querySelector(df(A))||(s=p.createElement("link"),Ei(s,"link",i),On(s),p.head.appendChild(s)))}}function F_(i,s){ml.m(i,s);var h=yh;if(h&&i){var p=s&&typeof s.as=="string"?s.as:"script",v='link[rel="modulepreload"][as="'+ji(p)+'"][href="'+ji(i)+'"]',A=v;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=bh(i)}if(!es.has(A)&&(i=y({rel:"modulepreload",href:i},s),es.set(A,i),h.querySelector(v)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(df(A)))return}p=h.createElement("link"),Ei(p,"link",i),On(p),h.head.appendChild(p)}}}function q_(i,s,h){ml.S(i,s,h);var p=yh;if(p&&i){var v=Gr(p).hoistableStyles,A=vh(i);s=s||"default";var D=v.get(A);if(!D){var L={loading:0,preload:null};if(D=p.querySelector(hf(A)))L.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":s},h),(h=es.get(A))&&Rm(i,h);var F=D=p.createElement("link");On(F),Ei(F,"link",i),F._p=new Promise(function(et,pt){F.onload=et,F.onerror=pt}),F.addEventListener("load",function(){L.loading|=1}),F.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Pg(D,s,p)}D={type:"stylesheet",instance:D,count:1,state:L},v.set(A,D)}}}function I_(i,s){ml.X(i,s);var h=yh;if(h&&i){var p=Gr(h).hoistableScripts,v=bh(i),A=p.get(v);A||(A=h.querySelector(df(v)),A||(i=y({src:i,async:!0},s),(s=es.get(v))&&Mm(i,s),A=h.createElement("script"),On(A),Ei(A,"link",i),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},p.set(v,A))}}function V_(i,s){ml.M(i,s);var h=yh;if(h&&i){var p=Gr(h).hoistableScripts,v=bh(i),A=p.get(v);A||(A=h.querySelector(df(v)),A||(i=y({src:i,async:!0,type:"module"},s),(s=es.get(v))&&Mm(i,s),A=h.createElement("script"),On(A),Ei(A,"link",i),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},p.set(v,A))}}function Ky(i,s,h,p){var v=(v=Nt.current)?Bg(v):null;if(!v)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(s=vh(h.href),h=Gr(v).hoistableStyles,p=h.get(s),p||(p={type:"style",instance:null,count:0,state:null},h.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){i=vh(h.href);var A=Gr(v).hoistableStyles,D=A.get(i);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(i,D),(A=v.querySelector(hf(i)))&&!A._p&&(D.instance=A,D.state.loading=5),es.has(i)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},es.set(i,h),A||Y_(v,i,h,D.state))),s&&p===null)throw Error(n(528,""));return D}if(s&&p!==null)throw Error(n(529,""));return null;case"script":return s=h.async,h=h.src,typeof h=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=bh(h),h=Gr(v).hoistableScripts,p=h.get(s),p||(p={type:"script",instance:null,count:0,state:null},h.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function vh(i){return'href="'+ji(i)+'"'}function hf(i){return'link[rel="stylesheet"]['+i+"]"}function Qy(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function Y_(i,s,h,p){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=i.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),Ei(s,"link",h),On(s),i.head.appendChild(s))}function bh(i){return'[src="'+ji(i)+'"]'}function df(i){return"script[async]"+i}function Zy(i,s,h){if(s.count++,s.instance===null)switch(s.type){case"style":var p=i.querySelector('style[data-href~="'+ji(h.href)+'"]');if(p)return s.instance=p,On(p),p;var v=y({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),On(p),Ei(p,"style",v),Pg(p,h.precedence,i),s.instance=p;case"stylesheet":v=vh(h.href);var A=i.querySelector(hf(v));if(A)return s.state.loading|=4,s.instance=A,On(A),A;p=Qy(h),(v=es.get(v))&&Rm(p,v),A=(i.ownerDocument||i).createElement("link"),On(A);var D=A;return D._p=new Promise(function(L,F){D.onload=L,D.onerror=F}),Ei(A,"link",p),s.state.loading|=4,Pg(A,h.precedence,i),s.instance=A;case"script":return A=bh(h.src),(v=i.querySelector(df(A)))?(s.instance=v,On(v),v):(p=h,(v=es.get(A))&&(p=y({},h),Mm(p,v)),i=i.ownerDocument||i,v=i.createElement("script"),On(v),Ei(v,"link",p),i.head.appendChild(v),s.instance=v);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,Pg(p,h.precedence,i));return s.instance}function Pg(i,s,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=p.length?p[p.length-1]:null,A=v,D=0;D<p.length;D++){var L=p[D];if(L.dataset.precedence===s)A=L;else if(A!==v)break}A?A.parentNode.insertBefore(i,A.nextSibling):(s=h.nodeType===9?h.head:h,s.insertBefore(i,s.firstChild))}function Rm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Mm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Hg=null;function Wy(i,s,h){if(Hg===null){var p=new Map,v=Hg=new Map;v.set(h,p)}else v=Hg,p=v.get(h),p||(p=new Map,v.set(h,p));if(p.has(i))return p;for(p.set(i,null),h=h.getElementsByTagName(i),v=0;v<h.length;v++){var A=h[v];if(!(A[ds]||A[bn]||i==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var D=A.getAttribute(s)||"";D=i+D;var L=p.get(D);L?L.push(A):p.set(D,[A])}}return p}function Jy(i,s,h){i=i.ownerDocument||i,i.head.insertBefore(h,s==="title"?i.querySelector("head > title"):null)}function X_(i,s,h){if(h===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $y(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ff=null;function K_(){}function Q_(i,s,h){if(ff===null)throw Error(n(475));var p=ff;if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var v=vh(h.href),A=i.querySelector(hf(v));if(A){i=A._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(p.count++,p=Ug.bind(p),i.then(p,p)),s.state.loading|=4,s.instance=A,On(A);return}A=i.ownerDocument||i,h=Qy(h),(v=es.get(v))&&Rm(h,v),A=A.createElement("link"),On(A);var D=A;D._p=new Promise(function(L,F){D.onload=L,D.onerror=F}),Ei(A,"link",h),s.instance=A}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(p.count++,s=Ug.bind(p),i.addEventListener("load",s),i.addEventListener("error",s))}}function Z_(){if(ff===null)throw Error(n(475));var i=ff;return i.stylesheets&&i.count===0&&Dm(i,i.stylesheets),0<i.count?function(s){var h=setTimeout(function(){if(i.stylesheets&&Dm(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(h)}}:null}function Ug(){if(this.count--,this.count===0){if(this.stylesheets)Dm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Gg=null;function Dm(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Gg=new Map,s.forEach(W_,i),Gg=null,Ug.call(i))}function W_(i,s){if(!(s.state.loading&4)){var h=Gg.get(i);if(h)var p=h.get(null);else{h=new Map,Gg.set(i,h);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<v.length;A++){var D=v[A];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),p=D)}p&&h.set(null,p)}v=s.instance,D=v.getAttribute("data-precedence"),A=h.get(D)||p,A===p&&h.set(null,v),h.set(D,v),this.count++,p=Ug.bind(this),v.addEventListener("load",p),v.addEventListener("error",p),A?A.parentNode.insertBefore(v,A.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),s.state.loading|=4}}var pf={$$typeof:N,Provider:null,Consumer:null,_currentValue:ot,_currentValue2:ot,_threadCount:0};function J_(i,s,h,p,v,A,D,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rc(0),this.hiddenUpdates=rc(null),this.identifierPrefix=p,this.onUncaughtError=v,this.onCaughtError=A,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function t2(i,s,h,p,v,A,D,L,F,et,pt,yt){return i=new J_(i,s,h,D,L,F,et,yt),s=1,A===!0&&(s|=24),A=Ci(3,null,null,s),i.current=A,A.stateNode=i,s=Kl(),s.refCount++,i.pooledCache=s,s.refCount++,A.memoizedState={element:p,isDehydrated:h,cache:s},uu(A),i}function e2(i){return i?(i=Wr,i):Wr}function n2(i,s,h,p,v,A){v=e2(v),p.context===null?p.context=v:p.pendingContext=v,p=Ia(s),p.payload={element:h},A=A===void 0?null:A,A!==null&&(p.callback=A),h=mi(i,p,s),h!==null&&(Dn(h,i,s),ll(h,i,s))}function i2(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<s?h:s}}function Om(i,s){i2(i,s),(i=i.alternate)&&i2(i,s)}function a2(i){if(i.tag===13){var s=Ha(i,67108864);s!==null&&Dn(s,i,67108864),Om(i,67108864)}}var kg=!0;function $_(i,s,h,p){var v=H.T;H.T=null;var A=Z.p;try{Z.p=2,Nm(i,s,h,p)}finally{Z.p=A,H.T=v}}function t3(i,s,h,p){var v=H.T;H.T=null;var A=Z.p;try{Z.p=8,Nm(i,s,h,p)}finally{Z.p=A,H.T=v}}function Nm(i,s,h,p){if(kg){var v=Lm(p);if(v===null)bm(i,s,p,jg,h),r2(i,p);else if(n3(v,i,s,h,p))p.stopPropagation();else if(r2(i,p),s&4&&-1<e3.indexOf(i)){for(;v!==null;){var A=Na(v);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var D=us(A.pendingLanes);if(D!==0){var L=A;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var F=1<<31-tn(D);L.entanglements[1]|=F,D&=~F}Lt(A),(Kt&6)===0&&(pl=Gt()+500,Ge(0))}}break;case 13:L=Ha(A,2),L!==null&&Dn(L,A,2),Ar(),Om(A,2)}if(A=Lm(p),A===null&&bm(i,s,p,jg,h),A===v)break;v=A}v!==null&&p.stopPropagation()}else bm(i,s,p,null,h)}}function Lm(i){return i=Xs(i),zm(i)}var jg=null;function zm(i){if(jg=null,i=Oa(i),i!==null){var s=r(i);if(s===null)i=null;else{var h=s.tag;if(h===13){if(i=u(s),i!==null)return i;i=null}else if(h===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return jg=i,null}function s2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case Oe:return 2;case vn:return 8;case xe:case He:return 32;case ki:return 268435456;default:return 32}default:return 32}}var Bm=!1,vo=null,bo=null,So=null,gf=new Map,mf=new Map,_o=[],e3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r2(i,s){switch(i){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":gf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(s.pointerId)}}function yf(i,s,h,p,v,A){return i===null||i.nativeEvent!==A?(i={blockedOn:s,domEventName:h,eventSystemFlags:p,nativeEvent:A,targetContainers:[v]},s!==null&&(s=Na(s),s!==null&&a2(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),i)}function n3(i,s,h,p,v){switch(s){case"focusin":return vo=yf(vo,i,s,h,p,v),!0;case"dragenter":return bo=yf(bo,i,s,h,p,v),!0;case"mouseover":return So=yf(So,i,s,h,p,v),!0;case"pointerover":var A=v.pointerId;return gf.set(A,yf(gf.get(A)||null,i,s,h,p,v)),!0;case"gotpointercapture":return A=v.pointerId,mf.set(A,yf(mf.get(A)||null,i,s,h,p,v)),!0}return!1}function l2(i){var s=Oa(i.target);if(s!==null){var h=r(s);if(h!==null){if(s=h.tag,s===13){if(s=u(h),s!==null){i.blockedOn=s,uc(i.priority,function(){if(h.tag===13){var p=_n();p=lc(p);var v=Ha(h,p);v!==null&&Dn(v,h,p),Om(h,p)}});return}}else if(s===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Fg(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var h=Lm(i.nativeEvent);if(h===null){h=i.nativeEvent;var p=new h.constructor(h.type,h);vc=p,h.target.dispatchEvent(p),vc=null}else return s=Na(h),s!==null&&a2(s),i.blockedOn=h,!1;s.shift()}return!0}function o2(i,s,h){Fg(i)&&h.delete(s)}function i3(){Bm=!1,vo!==null&&Fg(vo)&&(vo=null),bo!==null&&Fg(bo)&&(bo=null),So!==null&&Fg(So)&&(So=null),gf.forEach(o2),mf.forEach(o2)}function qg(i,s){i.blockedOn===s&&(i.blockedOn=null,Bm||(Bm=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,i3)))}var Ig=null;function u2(i){Ig!==i&&(Ig=i,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ig===i&&(Ig=null);for(var s=0;s<i.length;s+=3){var h=i[s],p=i[s+1],v=i[s+2];if(typeof p!="function"){if(zm(p||h)===null)continue;break}var A=Na(h);A!==null&&(i.splice(s,3),s-=3,Yd(A,{pending:!0,data:v,method:h.method,action:p},p,v))}}))}function vf(i){function s(F){return qg(F,i)}vo!==null&&qg(vo,i),bo!==null&&qg(bo,i),So!==null&&qg(So,i),gf.forEach(s),mf.forEach(s);for(var h=0;h<_o.length;h++){var p=_o[h];p.blockedOn===i&&(p.blockedOn=null)}for(;0<_o.length&&(h=_o[0],h.blockedOn===null);)l2(h),h.blockedOn===null&&_o.shift();if(h=(i.ownerDocument||i).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var v=h[p],A=h[p+1],D=v[fi]||null;if(typeof A=="function")D||u2(h);else if(D){var L=null;if(A&&A.hasAttribute("formAction")){if(v=A,D=A[fi]||null)L=D.formAction;else if(zm(v)!==null)continue}else L=D.action;typeof L=="function"?h[p+1]=L:(h.splice(p,3),p-=3),u2(h)}}}function Pm(i){this._internalRoot=i}Vg.prototype.render=Pm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var h=s.current,p=_n();n2(h,p,i,s,null,null)},Vg.prototype.unmount=Pm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;n2(i.current,2,null,i,null,null),Ar(),s[cs]=null}};function Vg(i){this._internalRoot=i}Vg.prototype.unstable_scheduleHydration=function(i){if(i){var s=Uo();i={blockedOn:null,target:i,priority:s};for(var h=0;h<_o.length&&s!==0&&s<_o[h].priority;h++);_o.splice(h,0,i),h===0&&l2(i)}};var c2=t.version;if(c2!=="19.1.1")throw Error(n(527,c2,"19.1.1"));Z.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(s),i=i!==null?g(i):null,i=i===null?null:i.stateNode,i};var a3={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yg.isDisabled&&Yg.supportsFiber)try{_e=Yg.inject(a3),Jt=Yg}catch{}}return Sf.createRoot=function(i,s){if(!a(i))throw Error(n(299));var h=!1,p="",v=cl,A=Ni,D=Ag,L=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(v=s.onUncaughtError),s.onCaughtError!==void 0&&(A=s.onCaughtError),s.onRecoverableError!==void 0&&(D=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(L=s.unstable_transitionCallbacks)),s=t2(i,1,!1,null,null,h,p,v,A,D,L,null),i[cs]=s.current,vm(i),new Pm(s)},Sf.hydrateRoot=function(i,s,h){if(!a(i))throw Error(n(299));var p=!1,v="",A=cl,D=Ni,L=Ag,F=null,et=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(L=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(F=h.unstable_transitionCallbacks),h.formState!==void 0&&(et=h.formState)),s=t2(i,1,!0,s,h??null,p,v,A,D,L,F,et),s.context=e2(null),h=s.current,p=_n(),p=lc(p),v=Ia(p),v.callback=null,mi(h,v,p),h=p,s.current.lanes=h,qs(s,h),Lt(s),i[cs]=s.current,vm(i),new Vg(s)},Sf.version="19.1.1",Sf}var A2;function f3(){if(A2)return km.exports;A2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),km.exports=d3(),km.exports}var p3=f3();function ib(l,t){return function(){return l.apply(t,arguments)}}const{toString:g3}=Object.prototype,{getPrototypeOf:K1}=Object,{iterator:D0,toStringTag:ab}=Symbol,O0=(l=>t=>{const e=g3.call(t);return l[e]||(l[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),ks=l=>(l=l.toLowerCase(),t=>O0(t)===l),N0=l=>t=>typeof t===l,{isArray:Uh}=Array,Lh=N0("undefined");function Jf(l){return l!==null&&!Lh(l)&&l.constructor!==null&&!Lh(l.constructor)&&fa(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const sb=ks("ArrayBuffer");function m3(l){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(l):t=l&&l.buffer&&sb(l.buffer),t}const y3=N0("string"),fa=N0("function"),rb=N0("number"),$f=l=>l!==null&&typeof l=="object",v3=l=>l===!0||l===!1,f0=l=>{if(O0(l)!=="object")return!1;const t=K1(l);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ab in l)&&!(D0 in l)},b3=l=>{if(!$f(l)||Jf(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},S3=ks("Date"),_3=ks("File"),A3=ks("Blob"),E3=ks("FileList"),T3=l=>$f(l)&&fa(l.pipe),x3=l=>{let t;return l&&(typeof FormData=="function"&&l instanceof FormData||fa(l.append)&&((t=O0(l))==="formdata"||t==="object"&&fa(l.toString)&&l.toString()==="[object FormData]"))},C3=ks("URLSearchParams"),[w3,R3,M3,D3]=["ReadableStream","Request","Response","Headers"].map(ks),O3=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tp(l,t,{allOwnKeys:e=!1}={}){if(l===null||typeof l>"u")return;let n,a;if(typeof l!="object"&&(l=[l]),Uh(l))for(n=0,a=l.length;n<a;n++)t.call(null,l[n],n,l);else{if(Jf(l))return;const r=e?Object.getOwnPropertyNames(l):Object.keys(l),u=r.length;let d;for(n=0;n<u;n++)d=r[n],t.call(null,l[d],d,l)}}function lb(l,t){if(Jf(l))return null;t=t.toLowerCase();const e=Object.keys(l);let n=e.length,a;for(;n-- >0;)if(a=e[n],t===a.toLowerCase())return a;return null}const Gu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ob=l=>!Lh(l)&&l!==Gu;function y1(){const{caseless:l,skipUndefined:t}=ob(this)&&this||{},e={},n=(a,r)=>{const u=l&&lb(e,r)||r;f0(e[u])&&f0(a)?e[u]=y1(e[u],a):f0(a)?e[u]=y1({},a):Uh(a)?e[u]=a.slice():(!t||!Lh(a))&&(e[u]=a)};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&tp(arguments[a],n);return e}const N3=(l,t,e,{allOwnKeys:n}={})=>(tp(t,(a,r)=>{e&&fa(a)?l[r]=ib(a,e):l[r]=a},{allOwnKeys:n}),l),L3=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),z3=(l,t,e,n)=>{l.prototype=Object.create(t.prototype,n),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:t.prototype}),e&&Object.assign(l.prototype,e)},B3=(l,t,e,n)=>{let a,r,u;const d={};if(t=t||{},l==null)return t;do{for(a=Object.getOwnPropertyNames(l),r=a.length;r-- >0;)u=a[r],(!n||n(u,l,t))&&!d[u]&&(t[u]=l[u],d[u]=!0);l=e!==!1&&K1(l)}while(l&&(!e||e(l,t))&&l!==Object.prototype);return t},P3=(l,t,e)=>{l=String(l),(e===void 0||e>l.length)&&(e=l.length),e-=t.length;const n=l.indexOf(t,e);return n!==-1&&n===e},H3=l=>{if(!l)return null;if(Uh(l))return l;let t=l.length;if(!rb(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=l[t];return e},U3=(l=>t=>l&&t instanceof l)(typeof Uint8Array<"u"&&K1(Uint8Array)),G3=(l,t)=>{const n=(l&&l[D0]).call(l);let a;for(;(a=n.next())&&!a.done;){const r=a.value;t.call(l,r[0],r[1])}},k3=(l,t)=>{let e;const n=[];for(;(e=l.exec(t))!==null;)n.push(e);return n},j3=ks("HTMLFormElement"),F3=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,a){return n.toUpperCase()+a}),E2=(({hasOwnProperty:l})=>(t,e)=>l.call(t,e))(Object.prototype),q3=ks("RegExp"),ub=(l,t)=>{const e=Object.getOwnPropertyDescriptors(l),n={};tp(e,(a,r)=>{let u;(u=t(a,r,l))!==!1&&(n[r]=u||a)}),Object.defineProperties(l,n)},I3=l=>{ub(l,(t,e)=>{if(fa(l)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=l[e];if(fa(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},V3=(l,t)=>{const e={},n=a=>{a.forEach(r=>{e[r]=!0})};return Uh(l)?n(l):n(String(l).split(t)),e},Y3=()=>{},X3=(l,t)=>l!=null&&Number.isFinite(l=+l)?l:t;function K3(l){return!!(l&&fa(l.append)&&l[ab]==="FormData"&&l[D0])}const Q3=l=>{const t=new Array(10),e=(n,a)=>{if($f(n)){if(t.indexOf(n)>=0)return;if(Jf(n))return n;if(!("toJSON"in n)){t[a]=n;const r=Uh(n)?[]:{};return tp(n,(u,d)=>{const f=e(u,a+1);!Lh(f)&&(r[d]=f)}),t[a]=void 0,r}}return n};return e(l,0)},Z3=ks("AsyncFunction"),W3=l=>l&&($f(l)||fa(l))&&fa(l.then)&&fa(l.catch),cb=((l,t)=>l?setImmediate:t?((e,n)=>(Gu.addEventListener("message",({source:a,data:r})=>{a===Gu&&r===e&&n.length&&n.shift()()},!1),a=>{n.push(a),Gu.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",fa(Gu.postMessage)),J3=typeof queueMicrotask<"u"?queueMicrotask.bind(Gu):typeof process<"u"&&process.nextTick||cb,$3=l=>l!=null&&fa(l[D0]),rt={isArray:Uh,isArrayBuffer:sb,isBuffer:Jf,isFormData:x3,isArrayBufferView:m3,isString:y3,isNumber:rb,isBoolean:v3,isObject:$f,isPlainObject:f0,isEmptyObject:b3,isReadableStream:w3,isRequest:R3,isResponse:M3,isHeaders:D3,isUndefined:Lh,isDate:S3,isFile:_3,isBlob:A3,isRegExp:q3,isFunction:fa,isStream:T3,isURLSearchParams:C3,isTypedArray:U3,isFileList:E3,forEach:tp,merge:y1,extend:N3,trim:O3,stripBOM:L3,inherits:z3,toFlatObject:B3,kindOf:O0,kindOfTest:ks,endsWith:P3,toArray:H3,forEachEntry:G3,matchAll:k3,isHTMLForm:j3,hasOwnProperty:E2,hasOwnProp:E2,reduceDescriptors:ub,freezeMethods:I3,toObjectSet:V3,toCamelCase:F3,noop:Y3,toFiniteNumber:X3,findKey:lb,global:Gu,isContextDefined:ob,isSpecCompliantForm:K3,toJSONObject:Q3,isAsyncFn:Z3,isThenable:W3,setImmediate:cb,asap:J3,isIterable:$3};function se(l,t,e,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}rt.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:rt.toJSONObject(this.config),code:this.code,status:this.status}}});const hb=se.prototype,db={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{db[l]={value:l}});Object.defineProperties(se,db);Object.defineProperty(hb,"isAxiosError",{value:!0});se.from=(l,t,e,n,a,r)=>{const u=Object.create(hb);rt.toFlatObject(l,u,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const d=l&&l.message?l.message:"Error",f=t==null&&l?l.code:t;return se.call(u,d,f,e,n,a),l&&u.cause==null&&Object.defineProperty(u,"cause",{value:l,configurable:!0}),u.name=l&&l.name||"Error",r&&Object.assign(u,r),u};const tA=null;function v1(l){return rt.isPlainObject(l)||rt.isArray(l)}function fb(l){return rt.endsWith(l,"[]")?l.slice(0,-2):l}function T2(l,t,e){return l?l.concat(t).map(function(a,r){return a=fb(a),!e&&r?"["+a+"]":a}).join(e?".":""):t}function eA(l){return rt.isArray(l)&&!l.some(v1)}const nA=rt.toFlatObject(rt,{},null,function(t){return/^is[A-Z]/.test(t)});function L0(l,t,e){if(!rt.isObject(l))throw new TypeError("target must be an object");t=t||new FormData,e=rt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,R){return!rt.isUndefined(R[w])});const n=e.metaTokens,a=e.visitor||y,r=e.dots,u=e.indexes,f=(e.Blob||typeof Blob<"u"&&Blob)&&rt.isSpecCompliantForm(t);if(!rt.isFunction(a))throw new TypeError("visitor must be a function");function g(T){if(T===null)return"";if(rt.isDate(T))return T.toISOString();if(rt.isBoolean(T))return T.toString();if(!f&&rt.isBlob(T))throw new se("Blob is not supported. Use a Buffer instead.");return rt.isArrayBuffer(T)||rt.isTypedArray(T)?f&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function y(T,w,R){let M=T;if(T&&!R&&typeof T=="object"){if(rt.endsWith(w,"{}"))w=n?w:w.slice(0,-2),T=JSON.stringify(T);else if(rt.isArray(T)&&eA(T)||(rt.isFileList(T)||rt.endsWith(w,"[]"))&&(M=rt.toArray(T)))return w=fb(w),M.forEach(function(N,z){!(rt.isUndefined(N)||N===null)&&t.append(u===!0?T2([w],z,r):u===null?w:w+"[]",g(N))}),!1}return v1(T)?!0:(t.append(T2(R,w,r),g(T)),!1)}const S=[],_=Object.assign(nA,{defaultVisitor:y,convertValue:g,isVisitable:v1});function x(T,w){if(!rt.isUndefined(T)){if(S.indexOf(T)!==-1)throw Error("Circular reference detected in "+w.join("."));S.push(T),rt.forEach(T,function(M,O){(!(rt.isUndefined(M)||M===null)&&a.call(t,M,rt.isString(O)?O.trim():O,w,_))===!0&&x(M,w?w.concat(O):[O])}),S.pop()}}if(!rt.isObject(l))throw new TypeError("data must be an object");return x(l),t}function x2(l){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Q1(l,t){this._pairs=[],l&&L0(l,this,t)}const pb=Q1.prototype;pb.append=function(t,e){this._pairs.push([t,e])};pb.toString=function(t){const e=t?function(n){return t.call(this,n,x2)}:x2;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function iA(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gb(l,t,e){if(!t)return l;const n=e&&e.encode||iA;rt.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let r;if(a?r=a(t,e):r=rt.isURLSearchParams(t)?t.toString():new Q1(t,e).toString(n),r){const u=l.indexOf("#");u!==-1&&(l=l.slice(0,u)),l+=(l.indexOf("?")===-1?"?":"&")+r}return l}class C2{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){rt.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aA=typeof URLSearchParams<"u"?URLSearchParams:Q1,sA=typeof FormData<"u"?FormData:null,rA=typeof Blob<"u"?Blob:null,lA={isBrowser:!0,classes:{URLSearchParams:aA,FormData:sA,Blob:rA},protocols:["http","https","file","blob","url","data"]},Z1=typeof window<"u"&&typeof document<"u",b1=typeof navigator=="object"&&navigator||void 0,oA=Z1&&(!b1||["ReactNative","NativeScript","NS"].indexOf(b1.product)<0),uA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",cA=Z1&&window.location.href||"http://localhost",hA=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z1,hasStandardBrowserEnv:oA,hasStandardBrowserWebWorkerEnv:uA,navigator:b1,origin:cA},Symbol.toStringTag,{value:"Module"})),Ui={...hA,...lA};function dA(l,t){return L0(l,new Ui.classes.URLSearchParams,{visitor:function(e,n,a,r){return Ui.isNode&&rt.isBuffer(e)?(this.append(n,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function fA(l){return rt.matchAll(/\w+|\[(\w*)]/g,l).map(t=>t[0]==="[]"?"":t[1]||t[0])}function pA(l){const t={},e=Object.keys(l);let n;const a=e.length;let r;for(n=0;n<a;n++)r=e[n],t[r]=l[r];return t}function yb(l){function t(e,n,a,r){let u=e[r++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),f=r>=e.length;return u=!u&&rt.isArray(a)?a.length:u,f?(rt.hasOwnProp(a,u)?a[u]=[a[u],n]:a[u]=n,!d):((!a[u]||!rt.isObject(a[u]))&&(a[u]=[]),t(e,n,a[u],r)&&rt.isArray(a[u])&&(a[u]=pA(a[u])),!d)}if(rt.isFormData(l)&&rt.isFunction(l.entries)){const e={};return rt.forEachEntry(l,(n,a)=>{t(fA(n),a,e,0)}),e}return null}function gA(l,t,e){if(rt.isString(l))try{return(t||JSON.parse)(l),rt.trim(l)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(l)}const ep={transitional:mb,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",a=n.indexOf("application/json")>-1,r=rt.isObject(t);if(r&&rt.isHTMLForm(t)&&(t=new FormData(t)),rt.isFormData(t))return a?JSON.stringify(yb(t)):t;if(rt.isArrayBuffer(t)||rt.isBuffer(t)||rt.isStream(t)||rt.isFile(t)||rt.isBlob(t)||rt.isReadableStream(t))return t;if(rt.isArrayBufferView(t))return t.buffer;if(rt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return dA(t,this.formSerializer).toString();if((d=rt.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return L0(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return r||a?(e.setContentType("application/json",!1),gA(t)):t}],transformResponse:[function(t){const e=this.transitional||ep.transitional,n=e&&e.forcedJSONParsing,a=this.responseType==="json";if(rt.isResponse(t)||rt.isReadableStream(t))return t;if(t&&rt.isString(t)&&(n&&!this.responseType||a)){const u=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(d){if(u)throw d.name==="SyntaxError"?se.from(d,se.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ui.classes.FormData,Blob:Ui.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};rt.forEach(["delete","get","head","post","put","patch"],l=>{ep.headers[l]={}});const mA=rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),yA=l=>{const t={};let e,n,a;return l&&l.split(`
`).forEach(function(u){a=u.indexOf(":"),e=u.substring(0,a).trim().toLowerCase(),n=u.substring(a+1).trim(),!(!e||t[e]&&mA[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},w2=Symbol("internals");function _f(l){return l&&String(l).trim().toLowerCase()}function p0(l){return l===!1||l==null?l:rt.isArray(l)?l.map(p0):String(l)}function vA(l){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(l);)t[n[1]]=n[2];return t}const bA=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function Im(l,t,e,n,a){if(rt.isFunction(n))return n.call(this,t,e);if(a&&(t=e),!!rt.isString(t)){if(rt.isString(n))return t.indexOf(n)!==-1;if(rt.isRegExp(n))return n.test(t)}}function SA(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function _A(l,t){const e=rt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(l,n+e,{value:function(a,r,u){return this[n].call(this,t,a,r,u)},configurable:!0})})}let pa=class{constructor(t){t&&this.set(t)}set(t,e,n){const a=this;function r(d,f,g){const y=_f(f);if(!y)throw new Error("header name must be a non-empty string");const S=rt.findKey(a,y);(!S||a[S]===void 0||g===!0||g===void 0&&a[S]!==!1)&&(a[S||f]=p0(d))}const u=(d,f)=>rt.forEach(d,(g,y)=>r(g,y,f));if(rt.isPlainObject(t)||t instanceof this.constructor)u(t,e);else if(rt.isString(t)&&(t=t.trim())&&!bA(t))u(yA(t),e);else if(rt.isObject(t)&&rt.isIterable(t)){let d={},f,g;for(const y of t){if(!rt.isArray(y))throw TypeError("Object iterator must return a key-value pair");d[g=y[0]]=(f=d[g])?rt.isArray(f)?[...f,y[1]]:[f,y[1]]:y[1]}u(d,e)}else t!=null&&r(e,t,n);return this}get(t,e){if(t=_f(t),t){const n=rt.findKey(this,t);if(n){const a=this[n];if(!e)return a;if(e===!0)return vA(a);if(rt.isFunction(e))return e.call(this,a,n);if(rt.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=_f(t),t){const n=rt.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||Im(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let a=!1;function r(u){if(u=_f(u),u){const d=rt.findKey(n,u);d&&(!e||Im(n,n[d],d,e))&&(delete n[d],a=!0)}}return rt.isArray(t)?t.forEach(r):r(t),a}clear(t){const e=Object.keys(this);let n=e.length,a=!1;for(;n--;){const r=e[n];(!t||Im(this,this[r],r,t,!0))&&(delete this[r],a=!0)}return a}normalize(t){const e=this,n={};return rt.forEach(this,(a,r)=>{const u=rt.findKey(n,r);if(u){e[u]=p0(a),delete e[r];return}const d=t?SA(r):String(r).trim();d!==r&&delete e[r],e[d]=p0(a),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return rt.forEach(this,(n,a)=>{n!=null&&n!==!1&&(e[a]=t&&rt.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[w2]=this[w2]={accessors:{}}).accessors,a=this.prototype;function r(u){const d=_f(u);n[d]||(_A(a,u),n[d]=!0)}return rt.isArray(t)?t.forEach(r):r(t),this}};pa.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);rt.reduceDescriptors(pa.prototype,({value:l},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>l,set(n){this[e]=n}}});rt.freezeMethods(pa);function Vm(l,t){const e=this||ep,n=t||e,a=pa.from(n.headers);let r=n.data;return rt.forEach(l,function(d){r=d.call(e,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function vb(l){return!!(l&&l.__CANCEL__)}function Gh(l,t,e){se.call(this,l??"canceled",se.ERR_CANCELED,t,e),this.name="CanceledError"}rt.inherits(Gh,se,{__CANCEL__:!0});function bb(l,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?l(e):t(new se("Request failed with status code "+e.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function AA(l){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return t&&t[1]||""}function EA(l,t){l=l||10;const e=new Array(l),n=new Array(l);let a=0,r=0,u;return t=t!==void 0?t:1e3,function(f){const g=Date.now(),y=n[r];u||(u=g),e[a]=f,n[a]=g;let S=r,_=0;for(;S!==a;)_+=e[S++],S=S%l;if(a=(a+1)%l,a===r&&(r=(r+1)%l),g-u<t)return;const x=y&&g-y;return x?Math.round(_*1e3/x):void 0}}function TA(l,t){let e=0,n=1e3/t,a,r;const u=(g,y=Date.now())=>{e=y,a=null,r&&(clearTimeout(r),r=null),l(...g)};return[(...g)=>{const y=Date.now(),S=y-e;S>=n?u(g,y):(a=g,r||(r=setTimeout(()=>{r=null,u(a)},n-S)))},()=>a&&u(a)]}const A0=(l,t,e=3)=>{let n=0;const a=EA(50,250);return TA(r=>{const u=r.loaded,d=r.lengthComputable?r.total:void 0,f=u-n,g=a(f),y=u<=d;n=u;const S={loaded:u,total:d,progress:d?u/d:void 0,bytes:f,rate:g||void 0,estimated:g&&d&&y?(d-u)/g:void 0,event:r,lengthComputable:d!=null,[t?"download":"upload"]:!0};l(S)},e)},R2=(l,t)=>{const e=l!=null;return[n=>t[0]({lengthComputable:e,total:l,loaded:n}),t[1]]},M2=l=>(...t)=>rt.asap(()=>l(...t)),xA=Ui.hasStandardBrowserEnv?((l,t)=>e=>(e=new URL(e,Ui.origin),l.protocol===e.protocol&&l.host===e.host&&(t||l.port===e.port)))(new URL(Ui.origin),Ui.navigator&&/(msie|trident)/i.test(Ui.navigator.userAgent)):()=>!0,CA=Ui.hasStandardBrowserEnv?{write(l,t,e,n,a,r){const u=[l+"="+encodeURIComponent(t)];rt.isNumber(e)&&u.push("expires="+new Date(e).toGMTString()),rt.isString(n)&&u.push("path="+n),rt.isString(a)&&u.push("domain="+a),r===!0&&u.push("secure"),document.cookie=u.join("; ")},read(l){const t=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(l){this.write(l,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wA(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function RA(l,t){return t?l.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):l}function Sb(l,t,e){let n=!wA(t);return l&&(n||e==!1)?RA(l,t):t}const D2=l=>l instanceof pa?{...l}:l;function Yu(l,t){t=t||{};const e={};function n(g,y,S,_){return rt.isPlainObject(g)&&rt.isPlainObject(y)?rt.merge.call({caseless:_},g,y):rt.isPlainObject(y)?rt.merge({},y):rt.isArray(y)?y.slice():y}function a(g,y,S,_){if(rt.isUndefined(y)){if(!rt.isUndefined(g))return n(void 0,g,S,_)}else return n(g,y,S,_)}function r(g,y){if(!rt.isUndefined(y))return n(void 0,y)}function u(g,y){if(rt.isUndefined(y)){if(!rt.isUndefined(g))return n(void 0,g)}else return n(void 0,y)}function d(g,y,S){if(S in t)return n(g,y);if(S in l)return n(void 0,g)}const f={url:r,method:r,data:r,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(g,y,S)=>a(D2(g),D2(y),S,!0)};return rt.forEach(Object.keys({...l,...t}),function(y){const S=f[y]||a,_=S(l[y],t[y],y);rt.isUndefined(_)&&S!==d||(e[y]=_)}),e}const _b=l=>{const t=Yu({},l);let{data:e,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:r,headers:u,auth:d}=t;if(t.headers=u=pa.from(u),t.url=gb(Sb(t.baseURL,t.url,t.allowAbsoluteUrls),l.params,l.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),rt.isFormData(e)){if(Ui.hasStandardBrowserEnv||Ui.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(rt.isFunction(e.getHeaders)){const f=e.getHeaders(),g=["content-type","content-length"];Object.entries(f).forEach(([y,S])=>{g.includes(y.toLowerCase())&&u.set(y,S)})}}if(Ui.hasStandardBrowserEnv&&(n&&rt.isFunction(n)&&(n=n(t)),n||n!==!1&&xA(t.url))){const f=a&&r&&CA.read(r);f&&u.set(a,f)}return t},MA=typeof XMLHttpRequest<"u",DA=MA&&function(l){return new Promise(function(e,n){const a=_b(l);let r=a.data;const u=pa.from(a.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:g}=a,y,S,_,x,T;function w(){x&&x(),T&&T(),a.cancelToken&&a.cancelToken.unsubscribe(y),a.signal&&a.signal.removeEventListener("abort",y)}let R=new XMLHttpRequest;R.open(a.method.toUpperCase(),a.url,!0),R.timeout=a.timeout;function M(){if(!R)return;const N=pa.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:N,config:l,request:R};bb(function(k){e(k),w()},function(k){n(k),w()},P),R=null}"onloadend"in R?R.onloadend=M:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(M)},R.onabort=function(){R&&(n(new se("Request aborted",se.ECONNABORTED,l,R)),R=null)},R.onerror=function(z){const P=z&&z.message?z.message:"Network Error",j=new se(P,se.ERR_NETWORK,l,R);j.event=z||null,n(j),R=null},R.ontimeout=function(){let z=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||mb;a.timeoutErrorMessage&&(z=a.timeoutErrorMessage),n(new se(z,P.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,l,R)),R=null},r===void 0&&u.setContentType(null),"setRequestHeader"in R&&rt.forEach(u.toJSON(),function(z,P){R.setRequestHeader(P,z)}),rt.isUndefined(a.withCredentials)||(R.withCredentials=!!a.withCredentials),d&&d!=="json"&&(R.responseType=a.responseType),g&&([_,T]=A0(g,!0),R.addEventListener("progress",_)),f&&R.upload&&([S,x]=A0(f),R.upload.addEventListener("progress",S),R.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(y=N=>{R&&(n(!N||N.type?new Gh(null,l,R):N),R.abort(),R=null)},a.cancelToken&&a.cancelToken.subscribe(y),a.signal&&(a.signal.aborted?y():a.signal.addEventListener("abort",y)));const O=AA(a.url);if(O&&Ui.protocols.indexOf(O)===-1){n(new se("Unsupported protocol "+O+":",se.ERR_BAD_REQUEST,l));return}R.send(r||null)})},OA=(l,t)=>{const{length:e}=l=l?l.filter(Boolean):[];if(t||e){let n=new AbortController,a;const r=function(g){if(!a){a=!0,d();const y=g instanceof Error?g:this.reason;n.abort(y instanceof se?y:new Gh(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,r(new se(`timeout ${t} of ms exceeded`,se.ETIMEDOUT))},t);const d=()=>{l&&(u&&clearTimeout(u),u=null,l.forEach(g=>{g.unsubscribe?g.unsubscribe(r):g.removeEventListener("abort",r)}),l=null)};l.forEach(g=>g.addEventListener("abort",r));const{signal:f}=n;return f.unsubscribe=()=>rt.asap(d),f}},NA=function*(l,t){let e=l.byteLength;if(e<t){yield l;return}let n=0,a;for(;n<e;)a=n+t,yield l.slice(n,a),n=a},LA=async function*(l,t){for await(const e of zA(l))yield*NA(e,t)},zA=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const t=l.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},O2=(l,t,e,n)=>{const a=LA(l,t);let r=0,u,d=f=>{u||(u=!0,n&&n(f))};return new ReadableStream({async pull(f){try{const{done:g,value:y}=await a.next();if(g){d(),f.close();return}let S=y.byteLength;if(e){let _=r+=S;e(_)}f.enqueue(new Uint8Array(y))}catch(g){throw d(g),g}},cancel(f){return d(f),a.return()}},{highWaterMark:2})},N2=64*1024,{isFunction:Xg}=rt,BA=(({Request:l,Response:t})=>({Request:l,Response:t}))(rt.global),{ReadableStream:L2,TextEncoder:z2}=rt.global,B2=(l,...t)=>{try{return!!l(...t)}catch{return!1}},PA=l=>{l=rt.merge.call({skipUndefined:!0},BA,l);const{fetch:t,Request:e,Response:n}=l,a=t?Xg(t):typeof fetch=="function",r=Xg(e),u=Xg(n);if(!a)return!1;const d=a&&Xg(L2),f=a&&(typeof z2=="function"?(T=>w=>T.encode(w))(new z2):async T=>new Uint8Array(await new e(T).arrayBuffer())),g=r&&d&&B2(()=>{let T=!1;const w=new e(Ui.origin,{body:new L2,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!w}),y=u&&d&&B2(()=>rt.isReadableStream(new n("").body)),S={stream:y&&(T=>T.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!S[T]&&(S[T]=(w,R)=>{let M=w&&w[T];if(M)return M.call(w);throw new se(`Response type '${T}' is not supported`,se.ERR_NOT_SUPPORT,R)})});const _=async T=>{if(T==null)return 0;if(rt.isBlob(T))return T.size;if(rt.isSpecCompliantForm(T))return(await new e(Ui.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(rt.isArrayBufferView(T)||rt.isArrayBuffer(T))return T.byteLength;if(rt.isURLSearchParams(T)&&(T=T+""),rt.isString(T))return(await f(T)).byteLength},x=async(T,w)=>{const R=rt.toFiniteNumber(T.getContentLength());return R??_(w)};return async T=>{let{url:w,method:R,data:M,signal:O,cancelToken:N,timeout:z,onDownloadProgress:P,onUploadProgress:j,responseType:k,headers:Y,withCredentials:J="same-origin",fetchOptions:lt}=_b(T),ct=t||fetch;k=k?(k+"").toLowerCase():"text";let gt=OA([O,N&&N.toAbortSignal()],z),St=null;const dt=gt&&gt.unsubscribe&&(()=>{gt.unsubscribe()});let vt;try{if(j&&g&&R!=="get"&&R!=="head"&&(vt=await x(Y,M))!==0){let $=new e(w,{method:"POST",body:M,duplex:"half"}),ht;if(rt.isFormData(M)&&(ht=$.headers.get("content-type"))&&Y.setContentType(ht),$.body){const[ft,Mt]=R2(vt,A0(M2(j)));M=O2($.body,N2,ft,Mt)}}rt.isString(J)||(J=J?"include":"omit");const H=r&&"credentials"in e.prototype,Z={...lt,signal:gt,method:R.toUpperCase(),headers:Y.normalize().toJSON(),body:M,duplex:"half",credentials:H?J:void 0};St=r&&new e(w,Z);let ot=await(r?ct(St,lt):ct(w,Z));const Ct=y&&(k==="stream"||k==="response");if(y&&(P||Ct&&dt)){const $={};["status","statusText","headers"].forEach(Ht=>{$[Ht]=ot[Ht]});const ht=rt.toFiniteNumber(ot.headers.get("content-length")),[ft,Mt]=P&&R2(ht,A0(M2(P),!0))||[];ot=new n(O2(ot.body,N2,ft,()=>{Mt&&Mt(),dt&&dt()}),$)}k=k||"text";let U=await S[rt.findKey(S,k)||"text"](ot,T);return!Ct&&dt&&dt(),await new Promise(($,ht)=>{bb($,ht,{data:U,headers:pa.from(ot.headers),status:ot.status,statusText:ot.statusText,config:T,request:St})})}catch(H){throw dt&&dt(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new se("Network Error",se.ERR_NETWORK,T,St),{cause:H.cause||H}):se.from(H,H&&H.code,T,St)}}},HA=new Map,Ab=l=>{let t=l?l.env:{};const{fetch:e,Request:n,Response:a}=t,r=[n,a,e];let u=r.length,d=u,f,g,y=HA;for(;d--;)f=r[d],g=y.get(f),g===void 0&&y.set(f,g=d?new Map:PA(t)),y=g;return g};Ab();const S1={http:tA,xhr:DA,fetch:{get:Ab}};rt.forEach(S1,(l,t)=>{if(l){try{Object.defineProperty(l,"name",{value:t})}catch{}Object.defineProperty(l,"adapterName",{value:t})}});const P2=l=>`- ${l}`,UA=l=>rt.isFunction(l)||l===null||l===!1,Eb={getAdapter:(l,t)=>{l=rt.isArray(l)?l:[l];const{length:e}=l;let n,a;const r={};for(let u=0;u<e;u++){n=l[u];let d;if(a=n,!UA(n)&&(a=S1[(d=String(n)).toLowerCase()],a===void 0))throw new se(`Unknown adapter '${d}'`);if(a&&(rt.isFunction(a)||(a=a.get(t))))break;r[d||"#"+u]=a}if(!a){const u=Object.entries(r).map(([f,g])=>`adapter ${f} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=e?u.length>1?`since :
`+u.map(P2).join(`
`):" "+P2(u[0]):"as no adapter specified";throw new se("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:S1};function Ym(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new Gh(null,l)}function H2(l){return Ym(l),l.headers=pa.from(l.headers),l.data=Vm.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),Eb.getAdapter(l.adapter||ep.adapter,l)(l).then(function(n){return Ym(l),n.data=Vm.call(l,l.transformResponse,n),n.headers=pa.from(n.headers),n},function(n){return vb(n)||(Ym(l),n&&n.response&&(n.response.data=Vm.call(l,l.transformResponse,n.response),n.response.headers=pa.from(n.response.headers))),Promise.reject(n)})}const Tb="1.12.2",z0={};["object","boolean","number","function","string","symbol"].forEach((l,t)=>{z0[l]=function(n){return typeof n===l||"a"+(t<1?"n ":" ")+l}});const U2={};z0.transitional=function(t,e,n){function a(r,u){return"[Axios v"+Tb+"] Transitional option '"+r+"'"+u+(n?". "+n:"")}return(r,u,d)=>{if(t===!1)throw new se(a(u," has been removed"+(e?" in "+e:"")),se.ERR_DEPRECATED);return e&&!U2[u]&&(U2[u]=!0,console.warn(a(u," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,u,d):!0}};z0.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function GA(l,t,e){if(typeof l!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const n=Object.keys(l);let a=n.length;for(;a-- >0;){const r=n[a],u=t[r];if(u){const d=l[r],f=d===void 0||u(d,r,l);if(f!==!0)throw new se("option "+r+" must be "+f,se.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new se("Unknown option "+r,se.ERR_BAD_OPTION)}}const g0={assertOptions:GA,validators:z0},Mr=g0.validators;let Vu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new C2,response:new C2}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Yu(this.defaults,e);const{transitional:n,paramsSerializer:a,headers:r}=e;n!==void 0&&g0.assertOptions(n,{silentJSONParsing:Mr.transitional(Mr.boolean),forcedJSONParsing:Mr.transitional(Mr.boolean),clarifyTimeoutError:Mr.transitional(Mr.boolean)},!1),a!=null&&(rt.isFunction(a)?e.paramsSerializer={serialize:a}:g0.assertOptions(a,{encode:Mr.function,serialize:Mr.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),g0.assertOptions(e,{baseUrl:Mr.spelling("baseURL"),withXsrfToken:Mr.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=r&&rt.merge(r.common,r[e.method]);r&&rt.forEach(["delete","get","head","post","put","patch","common"],T=>{delete r[T]}),e.headers=pa.concat(u,r);const d=[];let f=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(f=f&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const g=[];this.interceptors.response.forEach(function(w){g.push(w.fulfilled,w.rejected)});let y,S=0,_;if(!f){const T=[H2.bind(this),void 0];for(T.unshift(...d),T.push(...g),_=T.length,y=Promise.resolve(e);S<_;)y=y.then(T[S++],T[S++]);return y}_=d.length;let x=e;for(;S<_;){const T=d[S++],w=d[S++];try{x=T(x)}catch(R){w.call(this,R);break}}try{y=H2.call(this,x)}catch(T){return Promise.reject(T)}for(S=0,_=g.length;S<_;)y=y.then(g[S++],g[S++]);return y}getUri(t){t=Yu(this.defaults,t);const e=Sb(t.baseURL,t.url,t.allowAbsoluteUrls);return gb(e,t.params,t.paramsSerializer)}};rt.forEach(["delete","get","head","options"],function(t){Vu.prototype[t]=function(e,n){return this.request(Yu(n||{},{method:t,url:e,data:(n||{}).data}))}});rt.forEach(["post","put","patch"],function(t){function e(n){return function(r,u,d){return this.request(Yu(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:u}))}}Vu.prototype[t]=e(),Vu.prototype[t+"Form"]=e(!0)});let kA=class xb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const n=this;this.promise.then(a=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](a);n._listeners=null}),this.promise.then=a=>{let r;const u=new Promise(d=>{n.subscribe(d),r=d}).then(a);return u.cancel=function(){n.unsubscribe(r)},u},t(function(r,u,d){n.reason||(n.reason=new Gh(r,u,d),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new xb(function(a){t=a}),cancel:t}}};function jA(l){return function(e){return l.apply(null,e)}}function FA(l){return rt.isObject(l)&&l.isAxiosError===!0}const _1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_1).forEach(([l,t])=>{_1[t]=l});function Cb(l){const t=new Vu(l),e=ib(Vu.prototype.request,t);return rt.extend(e,Vu.prototype,t,{allOwnKeys:!0}),rt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return Cb(Yu(l,a))},e}const Un=Cb(ep);Un.Axios=Vu;Un.CanceledError=Gh;Un.CancelToken=kA;Un.isCancel=vb;Un.VERSION=Tb;Un.toFormData=L0;Un.AxiosError=se;Un.Cancel=Un.CanceledError;Un.all=function(t){return Promise.all(t)};Un.spread=jA;Un.isAxiosError=FA;Un.mergeConfig=Yu;Un.AxiosHeaders=pa;Un.formToJSON=l=>yb(rt.isHTMLForm(l)?new FormData(l):l);Un.getAdapter=Eb.getAdapter;Un.HttpStatusCode=_1;Un.default=Un;const{Axios:IC,AxiosError:VC,CanceledError:YC,isCancel:XC,CancelToken:KC,VERSION:QC,all:ZC,Cancel:WC,isAxiosError:JC,spread:$C,toFormData:t7,AxiosHeaders:e7,HttpStatusCode:n7,formToJSON:i7,getAdapter:a7,mergeConfig:s7}=Un,qA="/api/users/";function wb(l){const e=`; ${document.cookie}`.split(`; ${l}=`);if(e.length===2)return e.pop().split(";").shift()}const as=Un.create({baseURL:qA,withCredentials:!0});as.interceptors.request.use(l=>{const t=wb("csrftoken");return t&&(l.headers["X-CSRFToken"]=t),l},l=>Promise.reject(l));const IA=(l="")=>l.includes("/login/")||l.includes("/logout/")||l.includes("/csrf/")||l.includes("/token/refresh/");as.interceptors.response.use(l=>l,async l=>{const t=l.config;if(l?.response?.status!==401||t?._retry||IA(t?.url))return Promise.reject(l);t._retry=!0;try{return await as.post("/token/refresh/",{},{withCredentials:!0,headers:{"X-CSRFToken":wb("csrftoken")||""}}),as(t)}catch(n){return Promise.reject(n)}});const kh=q.createContext();function VA({children:l}){const[t,e]=q.useState(null),[n,a]=q.useState(!1),[r,u]=q.useState(!1),d=async(g,y)=>{try{await as.get("/csrf/"),await as.post("/login/",{username:g,password:y},{headers:{"Content-Type":"application/json"}});const S=await as.get("/protected/");e(S.data.name),a(!0)}catch(S){throw e(null),a(!1),S}},f=async()=>{try{await as.post("/logout/")}catch(g){console.error("Logout error",g)}e(null),a(!1),u(!0),window.location.href="/login"};return q.useEffect(()=>{if(r)return;(async()=>{try{await as.get("/csrf/");const y=await as.get("/protected/");e(y.data.name),a(!0)}catch{e(null),a(!1)}})()},[r]),ut.jsx(kh.Provider,{value:{isLoggedIn:n,username:t,login:d,logout:f},children:l})}const YA=()=>{const{isLoggedIn:l,logout:t}=q.useContext(kh);return ut.jsxs("header",{className:"header",children:[ut.jsx("a",{href:"/",style:{textDecoration:"none"},children:ut.jsx("h1",{className:"title",children:"Simple PDF Editor"})}),ut.jsx("nav",{className:"nav",children:l?ut.jsx(ut.Fragment,{children:ut.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},children:"Logout"})}):ut.jsxs(ut.Fragment,{children:[ut.jsx("a",{href:"/login",children:"Login"}),ut.jsx("a",{href:"/register",children:"Sign Up"})]})})]})},XA=()=>ut.jsx("footer",{className:"footer",children:ut.jsxs("p",{children:[" ",new Date().getFullYear()," ",ut.jsx("span",{children:"PDF Editor"}),". All rights reserved."]})}),Ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),A1=[.001,0,0,.001,0,0],Xm=1.35,xa={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Br={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Rb="pdfjs_internal_editor_",Wt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Ee={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Mb={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Gf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Bn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Eh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},np={ERRORS:0,WARNINGS:1,INFOS:5},Vf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Kg={moveTo:0,lineTo:1,curveTo:2,closePath:3},Db={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let B0=np.WARNINGS;function KA(l){Number.isInteger(l)&&(B0=l)}function QA(){return B0}function P0(l){B0>=np.INFOS&&console.log(`Info: ${l}`)}function te(l){B0>=np.WARNINGS&&console.log(`Warning: ${l}`)}function Je(l){throw new Error(l)}function Vn(l,t){l||Je(t)}function ZA(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function W1(l,t=null,e=null){if(!l)return null;if(e&&typeof l=="string"&&(e.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),e.tryConvertEncoding))try{l=e4(l)}catch{}const n=t?URL.parse(l,t):URL.parse(l);return ZA(n)?n:null}function J1(l,t,e=!1){const n=URL.parse(l);return n?(n.hash=t,n.href):e&&W1(l,"http://example.com")?l.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Se(l,t,e,n=!1){return Object.defineProperty(l,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Zu=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class G2 extends Zu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Km extends Zu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class E0 extends Zu{constructor(t){super(t,"InvalidPDFException")}}class Yf extends Zu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class WA extends Zu{constructor(t){super(t,"FormatError")}}class Al extends Zu{constructor(t){super(t,"AbortException")}}function Ob(l){(typeof l!="object"||l?.length===void 0)&&Je("Invalid argument for bytesToString");const t=l.length,e=8192;if(t<e)return String.fromCharCode.apply(null,l);const n=[];for(let a=0;a<t;a+=e){const r=Math.min(a+e,t),u=l.subarray(a,r);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function ip(l){typeof l!="string"&&Je("Invalid argument for stringToBytes");const t=l.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=l.charCodeAt(n)&255;return e}function JA(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function $A(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function t4(){try{return new Function(""),!0}catch{return!1}}class di{static get isLittleEndian(){return Se(this,"isLittleEndian",$A())}static get isEvalSupported(){return Se(this,"isEvalSupported",t4())}static get isOffscreenCanvasSupported(){return Se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Se(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Se(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Se(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Qm=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));let Ut=class{static makeHexColor(t,e,n){return`#${Qm[t]}${Qm[e]}${Qm[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const a=t[n],r=t[n+1];t[n]=a*e[0]+r*e[2]+e[4],t[n+1]=a*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],r=e[1],u=e[2],d=e[3],f=e[4],g=e[5];for(let y=0;y<6;y+=2){const S=t[n+y],_=t[n+y+1];t[n+y]=S*a+_*u+f,t[n+y+1]=S*r+_*d+g}}static applyInverseTransform(t,e){const n=t[0],a=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const a=e[0],r=e[1],u=e[2],d=e[3],f=e[4],g=e[5],y=t[0],S=t[1],_=t[2],x=t[3];let T=a*y+f,w=T,R=a*_+f,M=R,O=d*S+g,N=O,z=d*x+g,P=z;if(r!==0||u!==0){const j=r*y,k=r*_,Y=u*S,J=u*x;T+=Y,M+=Y,R+=J,w+=J,O+=j,P+=j,z+=k,N+=k}n[0]=Math.min(n[0],T,R,w,M),n[1]=Math.min(n[1],O,z,N,P),n[2]=Math.max(n[2],T,R,w,M),n[3]=Math.max(n[3],O,z,N,P)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],r=t[2],u=t[3],d=n**2+a**2,f=n*r+a*u,g=r**2+u**2,y=(d+g)/2,S=Math.sqrt(y**2-(d*g-f**2));e[0]=Math.sqrt(y+S||1),e[1]=Math.sqrt(y-S||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>u?null:[n,r,a,u]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,a),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,a)}static#t(t,e,n,a,r,u,d,f,g,y){if(g<=0||g>=1)return;const S=1-g,_=g*g,x=_*g,T=S*(S*(S*t+3*g*e)+3*_*n)+x*a,w=S*(S*(S*r+3*g*u)+3*_*d)+x*f;y[0]=Math.min(y[0],T),y[1]=Math.min(y[1],w),y[2]=Math.max(y[2],T),y[3]=Math.max(y[3],w)}static#e(t,e,n,a,r,u,d,f,g,y,S,_){if(Math.abs(g)<1e-12){Math.abs(y)>=1e-12&&this.#t(t,e,n,a,r,u,d,f,-S/y,_);return}const x=y**2-4*S*g;if(x<0)return;const T=Math.sqrt(x),w=2*g;this.#t(t,e,n,a,r,u,d,f,(-y+T)/w,_),this.#t(t,e,n,a,r,u,d,f,(-y-T)/w,_)}static bezierBoundingBox(t,e,n,a,r,u,d,f,g){g[0]=Math.min(g[0],t,d),g[1]=Math.min(g[1],e,f),g[2]=Math.max(g[2],t,d),g[3]=Math.max(g[3],e,f),this.#e(t,n,r,d,e,a,u,f,3*(-t+3*(n-r)+d),6*(t-2*n+r),3*(n-t),g),this.#e(t,n,r,d,e,a,u,f,3*(-e+3*(a-u)+f),6*(e-2*a+u),3*(a-e),g)}};function e4(l){return decodeURIComponent(escape(l))}let Zm=null,k2=null;function Nb(l){return Zm||(Zm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,k2=new Map([["","t"]])),l.replaceAll(Zm,(t,e,n)=>e?e.normalize("NFKC"):k2.get(n))}function $1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),Ob(l)}const ty="pdfjs_internal_id_";function n4(l,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...r]=e;if(!l(n)&&!Number.isInteger(n)||!t(a))return!1;const u=r.length;let d=!0;switch(a.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;d=!1;break;default:return!1}for(const f of r)if(!(typeof f=="number"||d&&f===null))return!1;return!0}function Hi(l,t,e){return Math.min(Math.max(l,t),e)}function Lb(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(Ob(l))}function i4(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):ip(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...t){return new Promise(e=>{e(l(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((t,e)=>t+e,0)});const vl="http://www.w3.org/2000/svg";class Xu{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function jh(l,t="text"){if(Df(l,document.baseURI)){const e=await fetch(l);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",l,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class ap{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:r=0,offsetY:u=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=r,this.offsetY=u,n*=e;const f=(t[2]+t[0])/2,g=(t[3]+t[1])/2;let y,S,_,x;switch(a%=360,a<0&&(a+=360),a){case 180:y=-1,S=0,_=0,x=1;break;case 90:y=0,S=1,_=1,x=0;break;case 270:y=0,S=-1,_=-1,x=0;break;case 0:y=1,S=0,_=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(_=-_,x=-x);let T,w,R,M;y===0?(T=Math.abs(g-t[1])*n+r,w=Math.abs(f-t[0])*n+u,R=(t[3]-t[1])*n,M=(t[2]-t[0])*n):(T=Math.abs(f-t[0])*n+r,w=Math.abs(g-t[1])*n+u,R=(t[2]-t[0])*n,M=(t[3]-t[1])*n),this.transform=[y*n,S*n,_*n,x*n,T-y*n*f-_*n*g,w-S*n*f-x*n*g],this.width=R,this.height=M}get rawDims(){const t=this.viewBox;return Se(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:r=!1}={}){return new ap({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return Ut.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Ut.applyTransform(e,this.transform);const n=[t[2],t[3]];return Ut.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Ut.applyInverseTransform(n,this.transform),n}}class H0 extends Zu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function sp(l){const t=l.length;let e=0;for(;e<t&&l[e].trim()==="";)e++;return l.substring(e,e+5).toLowerCase()==="data:"}function U0(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function zb(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function Bb(l,t="document.pdf"){if(typeof l!="string")return t;if(sp(l))return te('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(d=>{try{return new URL(d)}catch{try{return new URL(decodeURIComponent(d))}catch{try{return new URL(d,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(d),"https://foo.bar")}catch{return null}}}}})(l);if(!n)return t;const a=d=>{try{let f=decodeURIComponent(d);return f.includes("/")?(f=f.split("/").at(-1),f.test(/^\.pdf$/i)?f:d):f}catch{return d}},r=/\.pdf$/i,u=n.pathname.split("/").at(-1);if(r.test(u))return a(u);if(n.searchParams.size>0){const d=Array.from(n.searchParams.values()).reverse();for(const g of d)if(r.test(g))return a(g);const f=Array.from(n.searchParams.keys()).reverse();for(const g of f)if(r.test(g))return a(g)}if(n.hash){const f=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(f)return a(f[0])}return t}class j2{started=Object.create(null);times=[];time(t){t in this.started&&te(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||te(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-a}ms
`);return t.join("")}}function Df(l,t){const e=t?URL.parse(l,t):URL.parse(l);return e?.protocol==="http:"||e?.protocol==="https:"}function rs(l){l.preventDefault()}function Hn(l){l.preventDefault(),l.stopPropagation()}function a4(l){console.log("Deprecated API usage: "+l)}class ey{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const g=e[7]||"Z";let y=parseInt(e[8],10);y=y>=0&&y<=23?y:0;let S=parseInt(e[9],10)||0;return S=S>=0&&S<=59?S:0,g==="-"?(u+=y,d+=S):g==="+"&&(u-=y,d-=S),new Date(Date.UTC(n,a,r,u,d,f))}}function Pb(l,{scale:t=1,rotation:e=0}){const{width:n,height:a}=l.attributes.style,r=[0,0,parseInt(n),parseInt(a)];return new ap({viewBox:r,userUnit:1,scale:t,rotation:e})}function ny(l){if(l.startsWith("#")){const t=parseInt(l.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(t=>parseInt(t)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(te(`Not a valid color format: "${l}"`),[0,0,0])}function s4(l){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of l.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;l.set(e,ny(n))}t.remove()}function An(l){const{a:t,b:e,c:n,d:a,e:r,f:u}=l.getTransform();return[t,e,n,a,r,u]}function Dr(l){const{a:t,b:e,c:n,d:a,e:r,f:u}=l.getTransform().invertSelf();return[t,e,n,a,r,u]}function Ro(l,t,e=!1,n=!0){if(t instanceof ap){const{pageWidth:a,pageHeight:r}=t.rawDims,{style:u}=l,d=di.isCSSRoundSupported,f=`var(--total-scale-factor) * ${a}px`,g=`var(--total-scale-factor) * ${r}px`,y=d?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,S=d?`round(down, ${g}, var(--scale-round-y))`:`calc(${g})`;!e||t.rotation%180===0?(u.width=y,u.height=S):(u.width=S,u.height=y)}n&&l.setAttribute("data-main-rotation",t.rotation)}class Us{constructor(){const{pixelRatio:t}=Us;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,r=-1){let u=1/0,d=1/0,f=1/0;n=Us.capPixels(n,r),n>0&&(u=Math.sqrt(n/(t*e))),a!==-1&&(d=a/t,f=a/e);const g=Math.min(u,d,f);return this.sx>g||this.sy>g?(this.sx=g,this.sy=g,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const T0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class kf{#t=null;#e=null;#n;#i=null;#s=null;#a=null;static#l=null;constructor(t){this.#n=t,kf.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;t.addEventListener("contextmenu",rs,{signal:e}),t.addEventListener("pointerdown",kf.#r,{signal:e});const n=this.#i=document.createElement("div");n.className="buttons",t.append(n);const a=this.#n.toolbarPosition;if(a){const{style:r}=t,u=this.#n._uiManager.direction==="ltr"?1-a[0]:a[0];r.insetInlineEnd=`${100*u}%`,r.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#r(t){t.stopPropagation()}#h(t){this.#n._focusEventsAllowed=!1,Hn(t)}#o(t){this.#n._focusEventsAllowed=!0,Hn(t)}#d(t){const e=this.#n._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#o.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",rs,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",kf.#l[t]),this.#d(n),n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#i.append(n)}get#c(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#d(e),this.#i.append(e,this.#c),this.#s=t}addColorPicker(t){this.#e=t;const e=t.renderButton();this.#d(e),this.#i.append(e,this.#c)}async addEditSignatureButton(t){const e=this.#a=await t.renderEditButton(this.#n);this.#d(e),this.#i.append(e,this.#c)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class r4{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",rs,{signal:this.#n._signal});const e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#a(),t}#s(t,e){let n=0,a=0;for(const r of t){const u=r.y+r.height;if(u<n)continue;const d=r.x+(e?r.width:0);if(u>n){a=d,n=u;continue}e?d>a&&(a=d):d<a&&(a=d)}return[e?1-a:a,n]}show(t,e,n){const[a,r]=this.#s(e,n),{style:u}=this.#e||=this.#i();t.append(this.#e),u.insetInlineEnd=`${100*a}%`,u.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#n._signal;t.addEventListener("contextmenu",rs,{signal:n}),t.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function Hb(l,t,e){for(const n of e)t.addEventListener(n,l[n].bind(l))}class l4{#t=0;get id(){return`${Rb}${this.#t++}`}}class iy{#t=$1();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const r=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Se(this,"_isSVGFittingCanvas",r)}async#i(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(n.url=e,a=await jh(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const r=iy._isSVGFittingCanvas,u=new FileReader,d=new Image,f=new Promise((g,y)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,g()},u.onload=async()=>{const S=n.svgUrl=u.result;d.src=await r?`${S}#svgView(preserveAspectRatio(none))`:S},d.onerror=u.onerror=y});u.readAsDataURL(a),await f}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){te(a),n=null}return this.#n.set(t,n),n&&this.#n.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:a,type:r}=t;return this.#i(`${e}_${n}_${a}_${r}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const n=await e;return this.#i(t,n)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let n=this.#n.get(t);if(n?.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,n),this.#n.set(n.id,n),n}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class o4{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:n,mustExec:a,type:r=NaN,overwriteIfSameType:u=!1,keepUndo:d=!1}){if(a&&t(),this.#e)return;const f={cmd:t,undo:e,post:n,type:r};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(f);return}if(u&&this.#t[this.#i].type===r){d&&(f.undo=this.#t[this.#i].undo),this.#t[this.#i]=f;return}const g=this.#i+1;g===this.#n?this.#t.splice(0,1):(this.#i=g,g<this.#t.length&&this.#t.splice(g)),this.#t.push(f)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class rp{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=di.platform;for(const[n,a,r={}]of t)for(const u of n){const d=u.startsWith("mac+");e&&d?(this.callbacks.set(u.slice(4),{callback:a,options:r}),this.allKeys.add(u.split("+").at(-1))):!e&&!d&&(this.callbacks.set(u,{callback:a,options:r}),this.allKeys.add(u.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:a,options:{bubbles:r=!1,args:u=[],checker:d=null}}=n;d&&!d(t,e)||(a.bind(t,...u,e)(),r||Hn(e))}}class ay{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return s4(t),Se(this,"_colors",t)}convert(t){const e=ny(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((r,u)=>r===e[u]))return ay._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Ut.makeHexColor(...e):t}}class El{#t=new AbortController;#e=null;#n=new Map;#i=new Map;#s=null;#a=null;#l=null;#r=new o4;#h=null;#o=null;#d=0;#c=new Set;#f=null;#p=null;#g=new Set;_editorUndoBar=null;#u=!1;#m=!1;#y=!1;#v=null;#S=null;#_=null;#A=null;#x=!1;#w=null;#M=new l4;#E=!1;#R=!1;#C=null;#O=null;#N=null;#L=null;#k=null;#T=Wt.NONE;#b=new Set;#H=null;#U=null;#q=null;#I=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#z=null;#B=null;#F=null;#Q=null;#P=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=El.prototype,e=u=>u.#B.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:d})=>{if(d instanceof HTMLInputElement){const{type:f}=d;return f!=="text"&&f!=="number"}return!0},a=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Se(this,"_keyboardManager",new rp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:d})=>!(d instanceof HTMLButtonElement)&&u.#B.contains(d)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:d})=>!(d instanceof HTMLButtonElement)&&u.#B.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,a,r,u,d,f,g,y,S,_,x,T,w){const R=this._signal=this.#t.signal;this.#B=t,this.#F=e,this.#Q=n,this.#s=a,this.#U=r,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:R}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:R}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:R}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:R}),u._on("setpreference",this.onSetPreference.bind(this),{signal:R}),u._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:R}),this.#at(),this.#ot(),this.#W(),this.#a=d.annotationStorage,this.#v=d.filterFactory,this.#q=f,this.#A=g||null,this.#u=y,this.#m=S,this.#y=_,this.#k=x||null,this.viewParameters={realScale:Xu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=T||null,this._supportsPinchToZoom=w!==!1}destroy(){this.#P?.resolve(),this.#P=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#i.values())t.destroy();this.#i.clear(),this.#n.clear(),this.#g.clear(),this.#L?.clear(),this.#e=null,this.#b.clear(),this.#r.destroy(),this.#s?.destroy(),this.#U?.destroy(),this.#w?.hide(),this.#w=null,this.#N?.destroy(),this.#N=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#k}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Se(this,"hcmFilter",this.#q?this.#v.addHCMFilter(this.#q.foreground,this.#q.background):"none")}get direction(){return Se(this,"direction",getComputedStyle(this.#B).direction)}get highlightColors(){return Se(this,"highlightColors",this.#A?new Map(this.#A.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return Se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#o=t}setMainHighlightColorPicker(t){this.#N=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=e;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#B.focus()}findParent(t,e){for(const n of this.#i.values()){const{x:a,y:r,width:u,height:d}=n.div.getBoundingClientRect();if(t>=a&&t<=a+u&&e>=r&&e<=r+d)return n}return null}disableUserSelect(t=!1){this.#F.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Xu.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#o?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#X({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Z(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#i.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:a,focusNode:r,focusOffset:u}=e,d=e.toString(),g=this.#X(e).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;e.empty();const S=this.#Z(g),_=this.#T===Wt.NONE,x=()=>{S?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:n,anchorOffset:a,focusNode:r,focusOffset:u,text:d}),_&&this.showAllEditors("highlight",!0,!0)};if(_){this.switchToMode(Wt.HIGHLIGHT,x);return}x()}#nt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#X(t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(this.#w||=new r4(this),this.#w.show(n,a,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#Q;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#it(){const t=document.getSelection();if(!t||t.isCollapsed){this.#H&&(this.#w?.hide(),this.#H=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#H)return;const a=this.#X(t).closest(".textLayer");if(!a){this.#H&&(this.#w?.hide(),this.#H=null,this.#D({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#H=e,this.#D({hasSelectedText:!0}),!(this.#T!==Wt.HIGHLIGHT&&this.#T!==Wt.NONE)&&(this.#T===Wt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#T===Wt.HIGHLIGHT?this.#Z(a):null;r?.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),f=g=>{g.type==="pointerup"&&g.button!==0||(u.abort(),r?.toggleDrawing(!0),g.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}}#K(t=""){this.#T===Wt.HIGHLIGHT?this.highlightSelection(t):this.#u&&this.#nt()}#at(){document.addEventListener("selectionchange",this.#it.bind(this),{signal:this._signal})}#st(){if(this.#_)return;this.#_=new AbortController;const t=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#rt(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#b)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#W(){if(this.#C)return;this.#C=new AbortController;const t=this.combinedSignal(this.#C);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#lt(){this.#C?.abort(),this.#C=null}#J(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#$(){this.#h?.abort(),this.#h=null}#ot(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#W(),this.#J()}removeEditListeners(){this.#lt(),this.#$()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#p)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#p)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#b){const a=n.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const u of this.#p)if(u.isHandlingMimeForPasting(r.type)){u.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){te(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const r=[];for(const f of n){const g=await a.deserialize(f);if(!g)return;r.push(g)}const u=()=>{for(const f of r)this.#tt(f);this.#et(r)},d=()=>{for(const f of r)f.remove()};this.addCommands({cmd:u,undo:d,mustExec:!0})}catch(r){te(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Wt.NONE&&!this.isEditorHandlingKeyboard&&El._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([n,a])=>this.#V[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#T===Wt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ee.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#st(),this.#J(),this.#D({isEditing:this.#T!==Wt.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#rt(),this.#$(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#p){this.#p=t;for(const e of this.#p)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#d)}getLayer(t){return this.#i.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#i.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#i.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1){if(this.#T!==t&&!(this.#P&&(await this.#P.promise,!this.#P))){if(this.#P=Promise.withResolvers(),this.#o?.commitOrRemove(),this.#T=t,t===Wt.NONE){this.setEditingState(!1),this.#ct(),this._editorUndoBar?.hide(),this.#P.resolve();return}t===Wt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ut(),this.unselectAll();for(const r of this.#i.values())r.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),this.#P.resolve();return}for(const r of this.#n.values())r.annotationElementId===e||r.id===e?(this.setSelected(r),a&&r.enterInEditMode()):r.unselect();this.#P.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#p){switch(t){case Ee.CREATE:this.currentLayer.addNewEditor(e);return;case Ee.HIGHLIGHT_DEFAULT_COLOR:this.#N?.updateColor(e);break;case Ee.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#I||=new Map).set(t,e),this.showAllEditors("highlight",e);break}for(const n of this.#b)n.updateParams(t,e);for(const n of this.#p)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const r of this.#n.values())r.editorType===t&&r.show(e);(this.#I?.get(Ee.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ee.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const e of this.#i.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ut(){if(!this.#E){this.#E=!0;const t=[];for(const e of this.#i.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#ct(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#i.values())t.disable();for(const t of this.#n.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#n.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#c.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#c.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#c.has(t)}removeDeletedAnnotationElement(t){this.#c.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const e=this.#i.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#ht(){let t=null;for(t of this.#b);return t}updateUI(t){this.#ht===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#b.has(t)){this.#b.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#b.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#o?.commitOrRemove();for(const e of this.#b)e!==t&&e.unselect();this.#b.clear(),this.#b.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#b.has(t)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(t){t.unselect(),this.#b.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#D({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#r.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#r.cleanType(t)}#Y(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#b],n=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const r of e)r.remove()},a=()=>{for(const r of e)this.#tt(r)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const e of this.#b)e.unselect();this.#b.clear();for(const e of t)e.isEmpty()||(this.#b.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#b)t.commit();this.#et(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Wt.NONE))&&!this.#o?.commitOrRemove()&&this.hasSelection){for(const t of this.#b)t.unselect();this.#b.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[a,r]=this.#j,u=[...this.#b],d=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const f of u)this.#n.has(f.id)&&(f.translateInPage(a,r),f.translationDone())},undo:()=>{for(const f of u)this.#n.has(f.id)&&(f.translateInPage(-a,-r),f.translationDone())},mustExec:!1})},d);for(const f of u)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#b)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let e=!1;for(const[{x:a,y:r,pageIndex:u},d]of t)d.newX=a,d.newY=r,d.newPageIndex=u,e||=a!==d.savedX||r!==d.savedY||u!==d.savedPageIndex;if(!e)return!1;const n=(a,r,u,d)=>{if(this.#n.has(a.id)){const f=this.#i.get(d);f?a._setParentAndPosition(f,r,u):(a.pageIndex=d,a.x=r,a.y=u)}};return this.addCommands({cmd:()=>{for(const[a,{newX:r,newY:u,newPageIndex:d}]of t)n(a,r,u,d)},undo:()=>{for(const[a,{savedX:r,savedY:u,savedPageIndex:d}]of t)n(a,r,u,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#f)for(const n of this.#f.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}get imageManager(){return Se(this,"imageManager",new iy)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let g=0,y=e.rangeCount;g<y;g++)if(!t.contains(e.getRangeAt(g).commonAncestorContainer))return null;const{x:n,y:a,width:r,height:u}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(g,y,S,_)=>({x:(y-a)/u,y:1-(g+S-n)/r,width:_/u,height:S/r});break;case"180":d=(g,y,S,_)=>({x:1-(g+S-n)/r,y:1-(y+_-a)/u,width:S/r,height:_/u});break;case"270":d=(g,y,S,_)=>({x:1-(y+_-a)/u,y:(g-n)/r,width:_/u,height:S/r});break;default:d=(g,y,S,_)=>({x:(g-n)/r,y:(y-a)/u,width:S/r,height:_/u});break}const f=[];for(let g=0,y=e.rangeCount;g<y;g++){const S=e.getRangeAt(g);if(!S.collapsed)for(const{x:_,y:x,width:T,height:w}of S.getClientRects())T===0||w===0||f.push(d(_,x,T,w))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#l||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const e=this.#l?.get(t.data.id);if(!e)return;const n=this.#a.getRawValue(e);n&&(this.#T===Wt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const a=this.#L?.get(t);a&&(a.setCanvas(e,n),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class Lr{#t=null;#e=!1;#n=null;#i=null;#s=null;#a=null;#l=!1;#r=null;#h=null;#o=null;#d=null;#c=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#c=t._uiManager.useNewAltTextFlow,Lr.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Lr._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#c?(t.classList.add("new"),t.setAttribute("data-l10n-id",Lr.#f.missing),e.setAttribute("data-l10n-id",Lr.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#h._uiManager._signal;t.addEventListener("contextmenu",rs,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const a=r=>{r.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#c&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#l=!0,a(r))},{signal:n}),await this.#g(),t}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#c?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#c?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#d=await Lr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#c||this.#t){this.#r?.remove(),this.#r=null;return}if(!this.#r){const e=this.#r=document.createElement("div");e.className="noAltTextBadge",this.#h.div.append(e)}this.#r.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#o===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:r=!1}){n&&(this.#o=n,this.#d=a),!(this.#t===t&&this.#e===e)&&(r||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#n.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#s=null,this.#r?.remove(),this.#r=null}async#g(){const t=this.#n;if(!t)return;if(this.#c){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Lr.#f[this.#p]),this.#i?.setAttribute("data-l10n-id",Lr.#f[`${this.#p}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#s?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#s;if(!e){this.#s=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#h.id}`;const a=100,r=this.#h._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#s.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:r}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s?.classList.remove("show")},{signal:r})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#h.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class lp{#t;#e=!1;#n=null;#i;#s;#a;#l;#r=null;#h;#o=null;#d;#c=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:r=null,onPinchEnd:u=null,signal:d}){this.#t=t,this.#n=n,this.#i=e,this.#s=a,this.#a=r,this.#l=u,this.#d=new AbortController,this.#h=AbortSignal.any([d,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Us.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#r)return;const a=this.#r=new AbortController,r=AbortSignal.any([this.#h,a.signal]),u=this.#t,d={capture:!0,signal:r,passive:!1},f=g=>{g.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};u.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(Hn(g),f(g))},d),u.addEventListener("pointerup",f,d),u.addEventListener("pointercancel",f,d);return}if(!this.#c){this.#c=new AbortController;const a=AbortSignal.any([this.#h,this.#c.signal]),r=this.#t,u={signal:a,capture:!1,passive:!1};r.addEventListener("touchmove",this.#p.bind(this),u);const d=this.#g.bind(this);r.addEventListener("touchend",d,u),r.addEventListener("touchcancel",d,u),u.capture=!0,r.addEventListener("pointerdown",Hn,u),r.addEventListener("pointermove",Hn,u),r.addEventListener("pointercancel",Hn,u),r.addEventListener("pointerup",Hn,u),this.#s?.()}if(Hn(t),t.touches.length!==2||this.#n?.()){this.#o=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#o={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#p(t){if(!this.#o||t.touches.length!==2)return;Hn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:r}=e,{screenX:u,screenY:d}=n,f=this.#o,{touch0X:g,touch0Y:y,touch1X:S,touch1Y:_}=f,x=S-g,T=_-y,w=u-a,R=d-r,M=Math.hypot(w,R)||1,O=Math.hypot(x,T)||1;if(!this.#e&&Math.abs(O-M)<=lp.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=a,f.touch0Y=r,f.touch1X=u,f.touch1Y=d,!this.#e){this.#e=!0;return}const N=[(a+u)/2,(r+d)/2];this.#a?.(N,O,M)}#g(t){t.touches.length>=2||(this.#c&&(this.#c.abort(),this.#c=null,this.#l?.()),this.#o&&(Hn(t),this.#o=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#r?.abort(),this.#r=null}}class qt{#t=null;#e=null;#n=null;#i=!1;#s=null;#a="";#l=!1;#r=null;#h=null;#o=null;#d=null;#c="";#f=!1;#p=null;#g=!1;#u=!1;#m=!1;#y=null;#v=0;#S=0;#_=null;#A=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#w=qt._zIndex++;static _borderLineWidth=-1;static _colorManager=new ay;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=qt.prototype._resizeWithKeyboard,e=El.TRANSLATE_SMALL,n=El.TRANSLATE_BIG;return Se(this,"_resizerKeyboardManager",new rp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],qt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:r,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[r,u];const[d,f]=this.parentDimensions;this.x=t.x/d,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new u4({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(qt._l10n??=t,qt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),qt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);qt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Je("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[r,u]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/r,this.y=(e+a)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}#M([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[a,r]}=this;if(this.x+=t/a,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:S,y:_}=this.div.getBoundingClientRect();this.parent.findNewParent(this,S,_)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:d}=this;const[f,g]=this.getBaseTranslation();u+=f,d+=g;const{style:y}=n;y.left=`${(100*u).toFixed(2)}%`,y.top=`${(100*d).toFixed(2)}%`,this._onTranslating(u,d),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=qt,a=n/t,r=n/e;switch(this.rotation){case 90:return[-a,r];case 180:return[a,r];case 270:return[a,-r];default:return[-a,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:r,y:u,width:d,height:f}=this;if(d*=n,f*=a,r*=n,u*=a,this._mustFixPosition)switch(t){case 0:r=Hi(r,0,n-d),u=Hi(u,0,a-f);break;case 90:r=Hi(r,0,n-f),u=Hi(u,d,a);break;case 180:r=Hi(r,d,n),u=Hi(u,f,a);break;case 270:r=Hi(r,f,n),u=Hi(u,0,a-d);break}this.x=r/=n,this.y=u/=a;const[g,y]=this.getBaseTranslation();r+=g,u+=y,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}static#E(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return qt.#E(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return qt.#E(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,a]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,this.#l||(r.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,a=n.endsWith("%"),r=!this.#l&&e.endsWith("%");if(a&&r)return;const[u,d]=this.parentDimensions;a||(t.width=`${(100*parseFloat(n)/u).toFixed(2)}%`),!this.#l&&!r&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#C(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");this.#r.append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",this.#O.bind(this,n),{signal:e}),a.addEventListener("contextmenu",rs,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#r)}#O(t,e){e.preventDefault();const{isMac:n}=di.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#h=[e.screenX,e.screenY];const r=new AbortController,u=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Hn,{passive:!1,signal:u}),window.addEventListener("contextmenu",rs,{signal:u}),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const g=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=d,this.div.style.cursor=f,this.#L()};window.addEventListener("pointerup",g,{signal:u}),window.addEventListener("blur",g,{signal:u})}#N(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e;const[r,u]=this.parentDimensions;this.setDims(r*n,u*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#o)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=this.#o;this.#o=null;const r=this.x,u=this.y,d=this.width,f=this.height;r===t&&u===e&&d===n&&f===a||this.addCommands({cmd:this.#N.bind(this,r,u,d,f),undo:this.#N.bind(this,t,e,n,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#k(t,e){const[n,a]=this.parentDimensions,r=this.x,u=this.y,d=this.width,f=this.height,g=qt.MIN_SIZE/n,y=qt.MIN_SIZE/a,S=this.#R(this.rotation),_=(H,Z)=>[S[0]*H+S[2]*Z,S[1]*H+S[3]*Z],x=this.#R(360-this.rotation),T=(H,Z)=>[x[0]*H+x[2]*Z,x[1]*H+x[3]*Z];let w,R,M=!1,O=!1;switch(t){case"topLeft":M=!0,w=(H,Z)=>[0,0],R=(H,Z)=>[H,Z];break;case"topMiddle":w=(H,Z)=>[H/2,0],R=(H,Z)=>[H/2,Z];break;case"topRight":M=!0,w=(H,Z)=>[H,0],R=(H,Z)=>[0,Z];break;case"middleRight":O=!0,w=(H,Z)=>[H,Z/2],R=(H,Z)=>[0,Z/2];break;case"bottomRight":M=!0,w=(H,Z)=>[H,Z],R=(H,Z)=>[0,0];break;case"bottomMiddle":w=(H,Z)=>[H/2,Z],R=(H,Z)=>[H/2,0];break;case"bottomLeft":M=!0,w=(H,Z)=>[0,Z],R=(H,Z)=>[H,0];break;case"middleLeft":O=!0,w=(H,Z)=>[0,Z/2],R=(H,Z)=>[H,Z/2];break}const N=w(d,f),z=R(d,f);let P=_(...z);const j=qt._round(r+P[0]),k=qt._round(u+P[1]);let Y=1,J=1,lt,ct;if(e.fromKeyboard)({deltaX:lt,deltaY:ct}=e);else{const{screenX:H,screenY:Z}=e,[ot,Ct]=this.#h;[lt,ct]=this.screenToPageTranslation(H-ot,Z-Ct),this.#h[0]=H,this.#h[1]=Z}if([lt,ct]=T(lt/n,ct/a),M){const H=Math.hypot(d,f);Y=J=Math.max(Math.min(Math.hypot(z[0]-N[0]-lt,z[1]-N[1]-ct)/H,1/d,1/f),g/d,y/f)}else O?Y=Hi(Math.abs(z[0]-N[0]-lt),g,1)/d:J=Hi(Math.abs(z[1]-N[1]-ct),y,1)/f;const gt=qt._round(d*Y),St=qt._round(f*J);P=_(...R(gt,St));const dt=j-P[0],vt=k-P[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=gt,this.height=St,this.x=dt,this.y=vt,this.setDims(n*gt,a*St),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#u)return this._editToolbar;this._editToolbar=new kf(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Lr.initialize(qt._l10n),this.#n=new Lr(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#I();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,r]=this.getInitialTranslation();return this.translate(a,r),Hb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#A||=new lp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#T.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#H.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#T(){this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const u=this.#R(this.rotation),d=(j,k)=>[u[0]*j+u[2]*k,u[1]*j+u[3]*k],[f,g]=this.parentDimensions,y=this.x,S=this.y,_=this.width,x=this.height,T=qt.MIN_SIZE/f,w=qt.MIN_SIZE/g;r=Math.max(Math.min(r,1/_,1/x),T/_,w/x);const R=qt._round(_*r),M=qt._round(x*r);if(R===_&&M===x)return;this.#p||=[y,S,_,x];const O=d(_/2,x/2),N=qt._round(y+O[0]),z=qt._round(S+O[1]),P=d(R/2,M/2);this.x=N-P[0],this.y=z-P[1],this.width=R,this.height=M,this.setDims(f*R,g*M),this.fixAndSetPosition(),this._onResizing()}#H(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#q(t);return}this.#U(t)}#U(t){const{isMac:e}=di.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#q(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,r=this._uiManager.combinedSignal(a),u={capture:!0,passive:!1,signal:r},d=g=>{a.abort(),this.#s=null,this.#f=!1,this._uiManager.endDragSession()||this.#U(g),n&&this._onStopDragging()};e&&(this.#v=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",g=>{n||(n=!0,this._onStartDragging());const{clientX:y,clientY:S,pointerId:_}=g;if(_!==this.#s){Hn(g);return}const[x,T]=this.screenToPageTranslation(y-this.#v,S-this.#S);this.#v=y,this.#S=S,this._uiManager.dragSelectedEditors(x,T)},u),window.addEventListener("touchmove",Hn,u),window.addEventListener("pointerdown",g=>{g.pointerType===this.#a&&(this.#A||g.isPrimary)&&d(g),Hn(g)},u));const f=g=>{if(!this.#s||this.#s===g.pointerId){d(g);return}Hn(g)};window.addEventListener("pointerup",f,{signal:r}),window.addEventListener("blur",f,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[r,u]=this.pageDimensions,[d,f]=this.pageTranslation,g=t/a,y=e/a,S=this.x*r,_=this.y*u,x=this.width*r,T=this.height*u;switch(n){case 0:return[S+g+d,u-_-y-T+f,S+g+x+d,u-_-y+f];case 90:return[S+y+d,u-_+g+f,S+y+T+d,u-_+g+x+f];case 180:return[S-g-x+d,u-_+y+f,S-g+d,u-_+y+T+f];case 270:return[S-y-T+d,u-_-g-x+f,S-y+d,u-_-g+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,r,u]=t,d=r-n,f=u-a;switch(this.rotation){case 0:return[n,e-u,d,f];case 90:return[n,e-a,f,d];case 180:return[r,e-a,d,f];case 270:return[r,e-u,f,d];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#u=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#u=!1,!0):!1}isInEditMode(){return this.#u}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:r,innerWidth:u}=window;return e<u&&a>0&&t<r&&n>0}#I(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#I()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Je("An editor must be serializable")}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[r,u]=a.pageDimensions,[d,f,g,y]=a.getRectInCurrentCoords(t.rect,u);return a.x=d/r,a.y=f/u,a.width=g/r,a.height=y/u,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#F(),this.removeEditToolbar(),this.#_){for(const t of this.#_.values())clearTimeout(t);this.#_=null}this.parent=null,this.#A?.destroy(),this.#A=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#C(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#r.children;if(!this.#e){this.#e=Array.from(e);const u=this.#V.bind(this),d=this.#j.bind(this),f=this._uiManager._signal;for(const g of this.#e){const y=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",u,{signal:f}),g.addEventListener("blur",d,{signal:f}),g.addEventListener("focus",this.#z.bind(this,y),{signal:f}),g.setAttribute("data-l10n-id",qt._l10nResizer[y])}}const n=this.#e[0];let a=0;for(const u of e){if(u===n)break;a++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(r!==a){if(r<a)for(let d=0;d<a-r;d++)this.#r.append(this.#r.firstChild);else if(r>a)for(let d=0;d<r-a;d++)this.#r.firstChild.before(this.#r.lastChild);let u=0;for(const d of e){const g=this.#e[u++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",qt._l10nResizer[g])}}this.#B(0),this.#m=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){qt._resizerKeyboardManager.exec(this,t)}#j(t){this.#m&&t.relatedTarget?.parentNode!==this.#r&&this.#F()}#z(t){this.#c=this.#m?t:""}#B(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#m&&this.#k(this.#c,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#m=!1,this.#B(-1),this.#L()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#l=!0;const n=t/e,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#_||=new Map;const{action:n}=t;let a=this.#_.get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#_.delete(n),this.#_.size===0&&(this.#_=null)},qt._telemetryTimeout),this.#_.set(n,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class u4 extends qt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const F2=3285377520,ns=4294901760,Or=65535;class Ub{constructor(t){this.h1=t?t&4294967295:F2,this.h2=t?t&4294967295:F2}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,R=t.length;w<R;w++){const M=t.charCodeAt(w);M<=255?e[n++]=M:(e[n++]=M>>>8,e[n++]=M&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,r=n-a*4,u=new Uint32Array(e.buffer,0,a);let d=0,f=0,g=this.h1,y=this.h2;const S=3432918353,_=461845907,x=S&Or,T=_&Or;for(let w=0;w<a;w++)w&1?(d=u[w],d=d*S&ns|d*x&Or,d=d<<15|d>>>17,d=d*_&ns|d*T&Or,g^=d,g=g<<13|g>>>19,g=g*5+3864292196):(f=u[w],f=f*S&ns|f*x&Or,f=f<<15|f>>>17,f=f*_&ns|f*T&Or,y^=f,y=y<<13|y>>>19,y=y*5+3864292196);switch(d=0,r){case 3:d^=e[a*4+2]<<16;case 2:d^=e[a*4+1]<<8;case 1:d^=e[a*4],d=d*S&ns|d*x&Or,d=d<<15|d>>>17,d=d*_&ns|d*T&Or,a&1?g^=d:y^=d}this.h1=g,this.h2=y}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ns|t*36045&Or,e=e*4283543511&ns|((e<<16|t>>>16)*2950163797&ns)>>>16,t^=e>>>1,t=t*444984403&ns|t*60499&Or,e=e*3301882366&ns|((e<<16|t>>>16)*3120437893&ns)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const E1=Object.freeze({map:null,hash:"",transfer:void 0});class sy{#t=!1;#e=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of this.#n.values())if(e instanceof qt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let a=!1;if(n!==void 0)for(const[r,u]of Object.entries(e))n[r]!==u&&(a=!0,n[r]=u);else a=!0,this.#n.set(t,e);a&&this.#i(),e instanceof qt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#i(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Gb(this)}get serializable(){if(this.#n.size===0)return E1;const t=new Map,e=new Ub,n=[],a=Object.create(null);let r=!1;for(const[u,d]of this.#n){const f=d instanceof qt?d.serialize(!1,a):d;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),r||=!!f.bitmap)}if(r)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:E1}get editorStats(){let t=null;const e=new Map;for(const n of this.#n.values()){if(!(n instanceof qt))continue;const a=n.telemetryFinalData;if(!a)continue;const{type:r}=a;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const u=t[r]||=new Map;for(const[d,f]of Object.entries(a)){if(d==="type")continue;let g=u.get(d);g||(g=new Map,u.set(d,g));const y=g.get(f)??0;g.set(f,y+1)}}for(const[n,a]of e)t[n]=a.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const e of this.#n.values())!(e instanceof qt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Gb extends sy{#t;constructor(t){super();const{map:e,hash:n,transfer:a}=t.serializable,r=structuredClone(e,a?{transfer:a}:null);this.#t={map:r,hash:n,transfer:a}}get print(){Je("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Se(this,"modifiedIds",{ids:new Set,hash:""})}}class c4{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Vn(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:r,style:u}=t,d=new FontFace(a,r,u);this.addNativeFontFace(d);try{await d.load(),this.#t.add(a),n?.(t)}catch{te(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}Je("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw te(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Se(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Se(this,"isSyncFontLoadingSupported",Ji||di.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Vn(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Se(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(z,P){return z.charCodeAt(P)<<24|z.charCodeAt(P+1)<<16|z.charCodeAt(P+2)<<8|z.charCodeAt(P+3)&255}function a(z,P,j,k){const Y=z.substring(0,P),J=z.substring(P+j);return Y+k+J}let r,u;const d=this._document.createElement("canvas");d.width=1,d.height=1;const f=d.getContext("2d");let g=0;function y(z,P){if(++g>30){te("Load test font never loaded."),P();return}if(f.font="30px "+z,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(y.bind(null,z,P))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=a(_,976,S.length,S);const T=16,w=1482184792;let R=n(_,T);for(r=0,u=S.length-3;r<u;r+=4)R=R-w+n(S,r)|0;r<S.length&&(R=R-w+n(S+"XXX",r)|0),_=a(_,T,4,JA(R));const M=`url(data:font/opentype;base64,${btoa(_)});`,O=`@font-face {font-family:"${S}";src:${M}}`;this.insertRule(O);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const z of[t.loadedName,S]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=z,N.append(P)}this._document.body.append(N),y(S,()=>{N.remove(),e.complete()})}}class h4{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Lb(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(u){te(`getPathGenerator - ignoring character: "${u}".`)}const r=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}function d4(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(Ji)return l;const t=URL.parse(l,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function f4(l){if(Ji&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return ip(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Qg(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const T1=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,p4=l=>typeof l=="object"&&typeof l?.name=="string",kb=n4.bind(null,T1,p4);class g4{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if(n?.signal instanceof AbortSignal){const{signal:r}=n;if(r.aborted){te("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);a=()=>r.removeEventListener("abort",u),r.addEventListener("abort",u)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Zg={DATA:1,ERROR:2},In={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q2(){}function ha(l){if(l instanceof Al||l instanceof E0||l instanceof G2||l instanceof Yf||l instanceof Km)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||Je('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Al(l.message);case"InvalidPDFException":return new E0(l.message);case"PasswordException":return new G2(l.message,l.code);case"ResponseException":return new Yf(l.message,l.status,l.missing);case"UnknownErrorException":return new Km(l.message,l.details)}return new Km(l.message,l.toString())}class Of{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Zg.DATA)a.resolve(t.data);else if(t.callback===Zg.ERROR)a.reject(ha(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(u){r.postMessage({sourceName:n,targetName:a,callback:Zg.DATA,callbackId:t.callbackId,data:u})},function(u){r.postMessage({sourceName:n,targetName:a,callback:Zg.ERROR,callbackId:t.callbackId,reason:ha(u)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[a]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(u){r.reject(u)}return r.promise}sendWithStream(t,e,n,a){const r=this.streamId++,u=this.sourceName,d=this.targetName,f=this.comObj;return new ReadableStream({start:g=>{const y=Promise.withResolvers();return this.streamControllers[r]={controller:g,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:d,action:t,streamId:r,data:e,desiredSize:g.desiredSize},a),y.promise},pull:g=>{const y=Promise.withResolvers();return this.streamControllers[r].pullCall=y,f.postMessage({sourceName:u,targetName:d,stream:In.PULL,streamId:r,desiredSize:g.desiredSize}),y.promise},cancel:g=>{Vn(g instanceof Error,"cancel must have a valid reason");const y=Promise.withResolvers();return this.streamControllers[r].cancelCall=y,this.streamControllers[r].isClosed=!0,f.postMessage({sourceName:u,targetName:d,stream:In.CANCEL,streamId:r,reason:ha(g)}),y.promise}},n)}#n(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,r=this.comObj,u=this,d=this.actionHandler[t.action],f={enqueue(g,y=1,S){if(this.isCancelled)return;const _=this.desiredSize;this.desiredSize-=y,_>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:a,stream:In.ENQUEUE,streamId:e,chunk:g},S)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:a,stream:In.CLOSE,streamId:e}),delete u.streamSinks[e])},error(g){Vn(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:a,stream:In.ERROR,streamId:e,reason:ha(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(d,t.data,f).then(function(){r.postMessage({sourceName:n,targetName:a,stream:In.START_COMPLETE,streamId:e,success:!0})},function(g){r.postMessage({sourceName:n,targetName:a,stream:In.START_COMPLETE,streamId:e,reason:ha(g)})})}#i(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,r=this.comObj,u=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case In.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(ha(t.reason));break;case In.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(ha(t.reason));break;case In.PULL:if(!d){r.postMessage({sourceName:n,targetName:a,stream:In.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||q2).then(function(){r.postMessage({sourceName:n,targetName:a,stream:In.PULL_COMPLETE,streamId:e,success:!0})},function(g){r.postMessage({sourceName:n,targetName:a,stream:In.PULL_COMPLETE,streamId:e,reason:ha(g)})});break;case In.ENQUEUE:if(Vn(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case In.CLOSE:if(Vn(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),this.#s(u,e);break;case In.ERROR:Vn(u,"error should have stream controller"),u.controller.error(ha(t.reason)),this.#s(u,e);break;case In.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(ha(t.reason)),this.#s(u,e);break;case In.CANCEL:if(!d)break;const f=ha(t.reason);Promise.try(d.onCancel||q2,f).then(function(){r.postMessage({sourceName:n,targetName:a,stream:In.CANCEL_COMPLETE,streamId:e,success:!0})},function(g){r.postMessage({sourceName:n,targetName:a,stream:In.CANCEL_COMPLETE,streamId:e,reason:ha(g)})}),d.sinkCapability.reject(f),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#s(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class jb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Je("Abstract method `_createCanvas` called.")}}class m4 extends jb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Fb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Je("Abstract method `_fetch` called.")}}class I2 extends Fb{async _fetch(t){const e=await jh(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):ip(e)}}class qb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,r){return"none"}destroy(t=!1){}}class y4 extends qb{#t;#e;#n;#i;#s;#a;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#s=e}get#r(){return this.#e||=new Map}get#h(){return this.#a||=new Map}get#o(){if(!this.#n){const t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#s.createElementNS(vl,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#n=this.#s.createElementNS(vl,"defs"),t.append(n),n.append(this.#n),this.#s.body.append(t)}return this.#n}#d(t){if(t.length===1){const f=t[0],g=new Array(256);for(let S=0;S<256;S++)g[S]=f[S]/255;const y=g.join(",");return[y,y,y]}const[e,n,a]=t,r=new Array(256),u=new Array(256),d=new Array(256);for(let f=0;f<256;f++)r[f]=e[f]/255,u[f]=n[f]/255,d[f]=a[f]/255;return[r.join(","),u.join(","),d.join(",")]}#c(t){if(this.#t===void 0){this.#t="";const e=this.#s.URL;e!==this.#s.baseURI&&(sp(e)?te('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=J1(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#r.get(t);if(e)return e;const[n,a,r]=this.#d(t),u=t.length===1?n:`${n}${a}${r}`;if(e=this.#r.get(u),e)return this.#r.set(t,e),e;const d=`g_${this.#i}_transfer_map_${this.#l++}`,f=this.#c(d);this.#r.set(t,f),this.#r.set(u,f);const g=this.#g(d);return this.#m(n,a,r,g),f}addHCMFilter(t,e){const n=`${t}-${e}`,a="base";let r=this.#h.get(a);if(r?.key===n||(r?(r.filter?.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},this.#h.set(a,r)),!t||!e))return r.url;const u=this.#v(t);t=Ut.makeHexColor(...u);const d=this.#v(e);if(e=Ut.makeHexColor(...d),this.#o.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return r.url;const f=new Array(256);for(let x=0;x<=255;x++){const T=x/255;f[x]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const g=f.join(","),y=`g_${this.#i}_hcm_filter`,S=r.filter=this.#g(y);this.#m(g,g,g,S),this.#p(S);const _=(x,T)=>{const w=u[x]/255,R=d[x]/255,M=new Array(T+1);for(let O=0;O<=T;O++)M[O]=w+O/T*(R-w);return M.join(",")};return this.#m(_(0,5),_(1,5),_(2,5),S),r.url=this.#c(y),r.url}addAlphaFilter(t){let e=this.#r.get(t);if(e)return e;const[n]=this.#d([t]),a=`alpha_${n}`;if(e=this.#r.get(a),e)return this.#r.set(t,e),e;const r=`g_${this.#i}_alpha_map_${this.#l++}`,u=this.#c(r);this.#r.set(t,u),this.#r.set(a,u);const d=this.#g(r);return this.#y(n,d),u}addLuminosityFilter(t){let e=this.#r.get(t||"luminosity");if(e)return e;let n,a;if(t?([n]=this.#d([t]),a=`luminosity_${n}`):a="luminosity",e=this.#r.get(a),e)return this.#r.set(t,e),e;const r=`g_${this.#i}_luminosity_map_${this.#l++}`,u=this.#c(r);this.#r.set(t,u),this.#r.set(a,u);const d=this.#g(r);return this.#f(d),t&&this.#y(n,d),u}addHighlightHCMFilter(t,e,n,a,r){const u=`${e}-${n}-${a}-${r}`;let d=this.#h.get(t);if(d?.key===u||(d?(d.filter?.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},this.#h.set(t,d)),!e||!n))return d.url;const[f,g]=[e,n].map(this.#v.bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),S=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[_,x]=[a,r].map(this.#v.bind(this));S<y&&([y,S,_,x]=[S,y,x,_]),this.#o.style.color="";const T=(M,O,N)=>{const z=new Array(256),P=(S-y)/N,j=M/255,k=(O-M)/(255*N);let Y=0;for(let J=0;J<=N;J++){const lt=Math.round(y+J*P),ct=j+J*k;for(let gt=Y;gt<=lt;gt++)z[gt]=ct;Y=lt+1}for(let J=Y;J<256;J++)z[J]=z[Y-1];return z.join(",")},w=`g_${this.#i}_hcm_${t}_filter`,R=d.filter=this.#g(w);return this.#p(R),this.#m(T(_[0],x[0],5),T(_[1],x[1],5),T(_[2],x[2],5),R),d.url=this.#c(w),d.url}destroy(t=!1){t&&this.#a?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#l=0)}#f(t){const e=this.#s.createElementNS(vl,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){const e=this.#s.createElementNS(vl,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#s.createElementNS(vl,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#o.append(e),e}#u(t,e,n){const a=this.#s.createElementNS(vl,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",n),t.append(a)}#m(t,e,n,a){const r=this.#s.createElementNS(vl,"feComponentTransfer");a.append(r),this.#u(r,"feFuncR",t),this.#u(r,"feFuncG",e),this.#u(r,"feFuncB",n)}#y(t,e){const n=this.#s.createElementNS(vl,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#v(t){return this.#o.style.color=t,ny(getComputedStyle(this.#o).getPropertyValue("color"))}}class Ib{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Je("Abstract method `_fetch` called.")}}class V2 extends Ib{async _fetch(t){const e=await jh(t,"arraybuffer");return new Uint8Array(e)}}class Vb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Je("Abstract method `_fetch` called.")}}class Y2 extends Vb{async _fetch(t){const e=await jh(t,"arraybuffer");return new Uint8Array(e)}}Ji&&te("Please use the `legacy` build in Node.js environments.");async function ry(l){const e=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(e)}class v4 extends qb{}class b4 extends jb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class S4 extends Fb{async _fetch(t){return ry(t)}}class _4 extends Ib{async _fetch(t){return ry(t)}}class A4 extends Vb{async _fetch(t){return ry(t)}}const Ti={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function x1(l,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),l.clip(a)}class ly{isModifyingCurrentTransform(){return!1}getPattern(){Je("Abstract method `getPattern` called.")}}class E4 extends ly{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let r;if(a===Ti.STROKE||a===Ti.FILL){const u=e.current.getClippedPathBoundingBox(a,An(t))||[0,0,0,0],d=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,g=e.cachedCanvases.getCanvas("pattern",d,f),y=g.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-u[0],-u[1]),n=Ut.transform(n,[1,0,0,1,u[0],u[1]]),y.transform(...e.baseTransform),this.matrix&&y.transform(...this.matrix),x1(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),r=t.createPattern(g.canvas,"no-repeat");const S=new DOMMatrix(n);r.setTransform(S)}else x1(t,this._bbox),r=this._createGradient(t);return r}}function Wm(l,t,e,n,a,r,u,d){const f=t.coords,g=t.colors,y=l.data,S=l.width*4;let _;f[e+1]>f[n+1]&&(_=e,e=n,n=_,_=r,r=u,u=_),f[n+1]>f[a+1]&&(_=n,n=a,a=_,_=u,u=d,d=_),f[e+1]>f[n+1]&&(_=e,e=n,n=_,_=r,r=u,u=_);const x=(f[e]+t.offsetX)*t.scaleX,T=(f[e+1]+t.offsetY)*t.scaleY,w=(f[n]+t.offsetX)*t.scaleX,R=(f[n+1]+t.offsetY)*t.scaleY,M=(f[a]+t.offsetX)*t.scaleX,O=(f[a+1]+t.offsetY)*t.scaleY;if(T>=O)return;const N=g[r],z=g[r+1],P=g[r+2],j=g[u],k=g[u+1],Y=g[u+2],J=g[d],lt=g[d+1],ct=g[d+2],gt=Math.round(T),St=Math.round(O);let dt,vt,H,Z,ot,Ct,U,$;for(let ht=gt;ht<=St;ht++){if(ht<R){const jt=ht<T?0:(T-ht)/(T-R);dt=x-(x-w)*jt,vt=N-(N-j)*jt,H=z-(z-k)*jt,Z=P-(P-Y)*jt}else{let jt;ht>O?jt=1:R===O?jt=0:jt=(R-ht)/(R-O),dt=w-(w-M)*jt,vt=j-(j-J)*jt,H=k-(k-lt)*jt,Z=Y-(Y-ct)*jt}let ft;ht<T?ft=0:ht>O?ft=1:ft=(T-ht)/(T-O),ot=x-(x-M)*ft,Ct=N-(N-J)*ft,U=z-(z-lt)*ft,$=P-(P-ct)*ft;const Mt=Math.round(Math.min(dt,ot)),Ht=Math.round(Math.max(dt,ot));let Nt=S*ht+Mt*4;for(let jt=Mt;jt<=Ht;jt++)ft=(dt-jt)/(dt-ot),ft<0?ft=0:ft>1&&(ft=1),y[Nt++]=vt-(vt-Ct)*ft|0,y[Nt++]=H-(H-U)*ft|0,y[Nt++]=Z-(Z-$)*ft|0,y[Nt++]=255}}function T4(l,t,e){const n=t.coords,a=t.colors;let r,u;switch(t.type){case"lattice":const d=t.verticesPerRow,f=Math.floor(n.length/d)-1,g=d-1;for(r=0;r<f;r++){let y=r*d;for(let S=0;S<g;S++,y++)Wm(l,e,n[y],n[y+1],n[y+d],a[y],a[y+1],a[y+d]),Wm(l,e,n[y+d+1],n[y+1],n[y+d],a[y+d+1],a[y+1],a[y+d])}break;case"triangles":for(r=0,u=n.length;r<u;r+=3)Wm(l,e,n[r],n[r+1],n[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}class x4 extends ly{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const d=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-d,y=Math.ceil(this._bounds[3])-f,S=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(y*t[1]*1.1)),3e3),x=g/S,T=y/_,w={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-f,scaleX:1/x,scaleY:1/T},R=S+4,M=_+4,O=n.getCanvas("mesh",R,M),N=O.context,z=N.createImageData(S,_);if(e){const j=z.data;for(let k=0,Y=j.length;k<Y;k+=4)j[k]=e[0],j[k+1]=e[1],j[k+2]=e[2],j[k+3]=255}for(const j of this._figures)T4(z,j,w);return N.putImageData(z,2,2),{canvas:O.canvas,offsetX:d-2*x,offsetY:f-2*T,scaleX:x,scaleY:T}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){x1(t,this._bbox);const r=new Float32Array(2);if(a===Ti.SHADING)Ut.singularValueDecompose2dScale(An(t),r);else if(this.matrix){Ut.singularValueDecompose2dScale(this.matrix,r);const[d,f]=r;Ut.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=d,r[1]*=f}else Ut.singularValueDecompose2dScale(e.baseTransform,r);const u=this._createMeshCanvas(r,a===Ti.SHADING?null:this._background,e.cachedCanvases);return a!==Ti.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class C4 extends ly{getPattern(){return"hotpink"}}function w4(l){switch(l[0]){case"RadialAxial":return new E4(l);case"Mesh":return new x4(l);case"Dummy":return new C4}throw new Error(`Unknown IR type: ${l[0]}`)}const X2={COLORED:1,UNCOLORED:2};class oy{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:a,tilingType:r,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),P0("TilingType: "+r);const y=e[0],S=e[1],_=e[2],x=e[3],T=_-y,w=x-S,R=new Float32Array(2);Ut.singularValueDecompose2dScale(this.matrix,R);const[M,O]=R;Ut.singularValueDecompose2dScale(this.baseTransform,R);const N=M*R[0],z=O*R[1];let P=T,j=w,k=!1,Y=!1;const J=Math.ceil(f*N),lt=Math.ceil(g*z),ct=Math.ceil(T*N),gt=Math.ceil(w*z);J>=ct?P=f:k=!0,lt>=gt?j=g:Y=!0;const St=this.getSizeAndScale(P,this.ctx.canvas.width,N),dt=this.getSizeAndScale(j,this.ctx.canvas.height,z),vt=t.cachedCanvases.getCanvas("pattern",St.size,dt.size),H=vt.context,Z=d.createCanvasGraphics(H);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,a,u),H.translate(-St.scale*y,-dt.scale*S),Z.transform(St.scale,0,0,dt.scale,0,0),H.save(),this.clipBbox(Z,y,S,_,x),Z.baseTransform=An(Z.ctx),Z.executeOperatorList(n),Z.endDrawing(),H.restore(),k||Y){const ot=vt.canvas;k&&(P=f),Y&&(j=g);const Ct=this.getSizeAndScale(P,this.ctx.canvas.width,N),U=this.getSizeAndScale(j,this.ctx.canvas.height,z),$=Ct.size,ht=U.size,ft=t.cachedCanvases.getCanvas("pattern-workaround",$,ht),Mt=ft.context,Ht=k?Math.floor(T/f):0,Nt=Y?Math.floor(w/g):0;for(let jt=0;jt<=Ht;jt++)for(let he=0;he<=Nt;he++)Mt.drawImage(ot,$*jt,ht*he,$,ht,0,0,$,ht);return{canvas:ft.canvas,scaleX:Ct.scale,scaleY:U.scale,offsetX:y,offsetY:S}}return{canvas:vt.canvas,scaleX:St.scale,scaleY:dt.scale,offsetX:y,offsetY:S}}getSizeAndScale(t,e,n){const a=Math.max(oy.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=a?r=a:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,a,r){const u=a-e,d=r-n;t.ctx.rect(e,n,u,d),Ut.axialAlignedBoundingBox([e,n,a,r],An(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,r=t.current;switch(e){case X2.COLORED:const{fillStyle:u,strokeStyle:d}=this.ctx;a.fillStyle=r.fillColor=u,a.strokeStyle=r.strokeColor=d;break;case X2.UNCOLORED:a.fillStyle=a.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new WA(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a){let r=n;a!==Ti.SHADING&&(r=Ut.transform(r,e.baseTransform),this.matrix&&(r=Ut.transform(r,this.matrix)));const u=this.createPatternCanvas(e);let d=new DOMMatrix(r);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function R4({src:l,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:r=4294967295,inverseDecode:u=!1}){const d=di.isLittleEndian?4278190080:255,[f,g]=u?[r,d]:[d,r],y=n>>3,S=n&7,_=l.length;e=new Uint32Array(e.buffer);let x=0;for(let T=0;T<a;T++){for(const R=t+y;t<R;t++){const M=t<_?l[t]:255;e[x++]=M&128?g:f,e[x++]=M&64?g:f,e[x++]=M&32?g:f,e[x++]=M&16?g:f,e[x++]=M&8?g:f,e[x++]=M&4?g:f,e[x++]=M&2?g:f,e[x++]=M&1?g:f}if(S===0)continue;const w=t<_?l[t++]:255;for(let R=0;R<S;R++)e[x++]=w&1<<7-R?g:f}return{srcPos:t,destPos:x}}const K2=16,Q2=100,M4=15,Z2=10,da=16,Jm=new DOMMatrix,wa=new Float32Array(2),Ch=new Float32Array([1/0,1/0,-1/0,-1/0]);function D4(l,t){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){t.save(),this.__originalSave()},l.restore=function(){t.restore(),this.__originalRestore()},l.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},l.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},l.transform=function(e,n,a,r,u,d){t.transform(e,n,a,r,u,d),this.__originalTransform(e,n,a,r,u,d)},l.setTransform=function(e,n,a,r,u,d){t.setTransform(e,n,a,r,u,d),this.__originalSetTransform(e,n,a,r,u,d)},l.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},l.rotate=function(e){t.rotate(e),this.__originalRotate(e)},l.clip=function(e){t.clip(e),this.__originalClip(e)},l.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},l.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},l.bezierCurveTo=function(e,n,a,r,u,d){t.bezierCurveTo(e,n,a,r,u,d),this.__originalBezierCurveTo(e,n,a,r,u,d)},l.rect=function(e,n,a,r){t.rect(e,n,a,r),this.__originalRect(e,n,a,r)},l.closePath=function(){t.closePath(),this.__originalClosePath()},l.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class O4{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Wg(l,t,e,n,a,r,u,d,f,g){const[y,S,_,x,T,w]=An(l);if(S===0&&_===0){const O=u*y+T,N=Math.round(O),z=d*x+w,P=Math.round(z),j=(u+f)*y+T,k=Math.abs(Math.round(j)-N)||1,Y=(d+g)*x+w,J=Math.abs(Math.round(Y)-P)||1;return l.setTransform(Math.sign(y),0,0,Math.sign(x),N,P),l.drawImage(t,e,n,a,r,0,0,k,J),l.setTransform(y,S,_,x,T,w),[k,J]}if(y===0&&x===0){const O=d*_+T,N=Math.round(O),z=u*S+w,P=Math.round(z),j=(d+g)*_+T,k=Math.abs(Math.round(j)-N)||1,Y=(u+f)*S+w,J=Math.abs(Math.round(Y)-P)||1;return l.setTransform(0,Math.sign(S),Math.sign(_),0,N,P),l.drawImage(t,e,n,a,r,0,0,J,k),l.setTransform(y,S,_,x,T,w),[J,k]}l.drawImage(t,e,n,a,r,u,d,f,g);const R=Math.hypot(y,S),M=Math.hypot(_,x);return[R*f,M*g]}class W2{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=A1;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Pi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e){this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ch.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ti.FILL,e=null){const n=this.minMax.slice();if(t===Ti.STROKE){e||Je("Stroke bounding box must include transform."),Ut.singularValueDecompose2dScale(e,wa);const a=wa[0]*this.lineWidth/2,r=wa[1]*this.lineWidth/2;n[0]-=a,n[1]-=r,n[2]+=a,n[3]+=r}return n}updateClipFromPath(){const t=Ut.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ch,0)}getClippedPathBoundingBox(t=Ti.FILL,e=null){return Ut.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function J2(l,t){if(t instanceof ImageData){l.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%da,r=(e-a)/da,u=a===0?r:r+1,d=l.createImageData(n,da);let f=0,g;const y=t.data,S=d.data;let _,x,T,w;if(t.kind===Gf.GRAYSCALE_1BPP){const R=y.byteLength,M=new Uint32Array(S.buffer,0,S.byteLength>>2),O=M.length,N=n+7>>3,z=4294967295,P=di.isLittleEndian?4278190080:255;for(_=0;_<u;_++){for(T=_<r?da:a,g=0,x=0;x<T;x++){const j=R-f;let k=0;const Y=j>N?n:j*8-7,J=Y&-8;let lt=0,ct=0;for(;k<J;k+=8)ct=y[f++],M[g++]=ct&128?z:P,M[g++]=ct&64?z:P,M[g++]=ct&32?z:P,M[g++]=ct&16?z:P,M[g++]=ct&8?z:P,M[g++]=ct&4?z:P,M[g++]=ct&2?z:P,M[g++]=ct&1?z:P;for(;k<Y;k++)lt===0&&(ct=y[f++],lt=128),M[g++]=ct&lt?z:P,lt>>=1}for(;g<O;)M[g++]=0;l.putImageData(d,0,_*da)}}else if(t.kind===Gf.RGBA_32BPP){for(x=0,w=n*da*4,_=0;_<r;_++)S.set(y.subarray(f,f+w)),f+=w,l.putImageData(d,0,x),x+=da;_<u&&(w=n*a*4,S.set(y.subarray(f,f+w)),l.putImageData(d,0,x))}else if(t.kind===Gf.RGB_24BPP)for(T=da,w=n*T,_=0;_<u;_++){for(_>=r&&(T=a,w=n*T),g=0,x=w;x--;)S[g++]=y[f++],S[g++]=y[f++],S[g++]=y[f++],S[g++]=255;l.putImageData(d,0,_*da)}else throw new Error(`bad image kind: ${t.kind}`)}function $2(l,t){if(t.bitmap){l.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%da,r=(e-a)/da,u=a===0?r:r+1,d=l.createImageData(n,da);let f=0;const g=t.data,y=d.data;for(let S=0;S<u;S++){const _=S<r?da:a;({srcPos:f}=R4({src:g,srcPos:f,dest:y,width:n,height:_,nonBlackColor:0})),l.putImageData(d,0,S*da)}}function Af(l,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)l[n]!==void 0&&(t[n]=l[n]);l.setLineDash!==void 0&&(t.setLineDash(l.getLineDash()),t.lineDashOffset=l.lineDashOffset)}function Jg(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:t}=l;t!=="none"&&t!==""&&(l.filter="none")}function tv(l,t){if(t)return!0;Ut.singularValueDecompose2dScale(l,wa);const e=Math.fround(Us.pixelRatio*Xu.PDF_TO_CSS_UNITS);return wa[0]<=e&&wa[1]<=e}const N4=["butt","round","square"],L4=["miter","round","bevel"],z4={},ev={};class Mh{constructor(t,e,n,a,r,{optionalContentConfig:u,markedContentStack:d=null},f,g){this.ctx=t,this.current=new W2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=u,this.cachedCanvases=new O4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const r=this.ctx.canvas.width,u=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,r,u),this.ctx.fillStyle=d,n){const f=this.cachedCanvases.getCanvas("transparent",r,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...An(this.compositeCtx))}this.ctx.save(),Jg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=An(this.ctx)}executeOperatorList(t,e,n,a){const r=t.argsArray,u=t.fnArray;let d=e||0;const f=r.length;if(f===d)return d;const g=f-d>Z2&&typeof n=="function",y=g?Date.now()+M4:0;let S=0;const _=this.commonObjs,x=this.objs;let T;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(T=u[d],T!==Vf.dependency)this[T].apply(this,r[d]);else for(const w of r[d]){const R=w.startsWith("g_")?_:x;if(!R.has(w))return R.get(w,n),d}if(d++,d===f)return d;if(g&&++S>Z2){if(Date.now()>y)return n(),d;S=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),d=n,f=a,g="prescale1",y,S;for(;r>2&&d>1||u>2&&f>1;){let _=d,x=f;r>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),r/=d/_),u>2&&f>1&&(x=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/x),y=this.cachedCanvases.getCanvas(g,_,x),S=y.context,S.clearRect(0,0,_,x),S.drawImage(t,0,0,d,f,0,0,_,x),t=y.canvas,d=_,f=x,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:a}=t,r=this.current.fillColor,u=this.current.patternFill,d=An(e);let f,g,y,S;if((t.bitmap||t.data)&&t.count>1){const J=t.bitmap||t.data.buffer;g=JSON.stringify(u?d:[d.slice(0,4),r]),f=this._cachedBitmapsMap.get(J),f||(f=new Map,this._cachedBitmapsMap.set(J,f));const lt=f.get(g);if(lt&&!u){const ct=Math.round(Math.min(d[0],d[2])+d[4]),gt=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:lt,offsetX:ct,offsetY:gt}}y=lt}y||(S=this.cachedCanvases.getCanvas("maskCanvas",n,a),$2(S.context,t));let _=Ut.transform(d,[1/n,0,0,-1/a,0,0]);_=Ut.transform(_,[1,0,0,1,0,-a]);const x=Ch.slice();Ut.axialAlignedBoundingBox([0,0,n,a],_,x);const[T,w,R,M]=x,O=Math.round(R-T)||1,N=Math.round(M-w)||1,z=this.cachedCanvases.getCanvas("fillCanvas",O,N),P=z.context,j=T,k=w;P.translate(-j,-k),P.transform(..._),y||(y=this._scaleImage(S.canvas,Dr(P)),y=y.img,f&&u&&f.set(g,y)),P.imageSmoothingEnabled=tv(An(P),t.interpolate),Wg(P,y,0,0,y.width,y.height,0,0,n,a),P.globalCompositeOperation="source-in";const Y=Ut.transform(Dr(P),[1,0,0,1,-j,-k]);return P.fillStyle=u?r.getPattern(e,this,Y,Ti.FILL):r,P.fillRect(0,0,n,a),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,z.canvas)),{canvas:z.canvas,offsetX:Math.round(j),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=N4[t]}setLineJoin(t){this.ctx.lineJoin=L4[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=a.context;r.setTransform(this.suspendedCtx.getTransform()),Af(this.suspendedCtx,r),D4(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Af(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const r=a[0],u=a[1],d=a[2]-r,f=a[3]-u;d===0||f===0||(this.genericComposeSMask(e.context,n,d,f,e.subtype,e.backdrop,e.transferMap,r,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,r,u,d,f,g,y,S){let _=t.canvas,x=f-y,T=g-S;if(u)if(x<0||T<0||x+n>_.width||T+a>_.height){const R=this.cachedCanvases.getCanvas("maskExtension",n,a),M=R.context;M.drawImage(_,-x,-T),M.globalCompositeOperation="destination-atop",M.fillStyle=u,M.fillRect(0,0,n,a),M.globalCompositeOperation="source-over",_=R.canvas,x=T=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const R=new Path2D;R.rect(x,T,n,a),t.clip(R),t.globalCompositeOperation="destination-atop",t.fillStyle=u,t.fillRect(x,T,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const w=new Path2D;w.rect(f,g,n,a),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(_,x,T,n,a,f,g,n,a),e.restore()}save(){this.inSMaskMode&&Af(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Af(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,r,u){this.ctx.transform(t,e,n,a,r,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[a]=e;if(!n){a||=e[0]=new Path2D,this[t](a);return}if(!(a instanceof Path2D)){const r=e[0]=new Path2D;for(let u=0,d=a.length;u<d;)switch(a[u++]){case Kg.moveTo:r.moveTo(a[u++],a[u++]);break;case Kg.lineTo:r.lineTo(a[u++],a[u++]);break;case Kg.curveTo:r.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case Kg.closePath:r.closePath();break;default:te(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=r}Ut.axialAlignedBoundingBox(n,An(this.ctx),this.current.minMax),this[t](a)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,a=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const r=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=a.getPattern(n,this,Dr(n),Ti.STROKE),r){const u=new Path2D;u.addPath(t,n.getTransform().invertSelf().multiplySelf(r)),t=u}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ti.STROKE,An(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,a=this.current.fillColor,r=this.current.patternFill;let u=!1;if(r){const f=a.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=a.getPattern(n,this,Dr(n),Ti.FILL),f){const g=new Path2D;g.addPath(t,n.getTransform().invertSelf().multiplySelf(f)),t=g}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),u&&n.restore(),e&&this.consumePath(t,d)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=z4}eoClip(){this.pendingClip=ev}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,a=e.getTransform().invertSelf();for(const{transform:r,x:u,y:d,fontSize:f,path:g}of t)n.addPath(g,new DOMMatrix(r).preMultiplySelf(a).translate(u,d).scale(f,-f));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),a=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=n.fontMatrix||A1,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&te("Invalid font matrix for font "+t),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",u=n.systemFontInfo?.css||`"${r}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const f=n.italic?"italic":"normal";let g=e;e<K2?g=K2:e>Q2&&(g=Q2),this.current.fontSizeScale=e/g,this.ctx.font=`${f} ${d} ${g}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a}paintChar(t,e,n,a,r){const u=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,S=g&Pi.FILL_STROKE_MASK,_=!!(g&Pi.ADD_TO_PATH_FLAG),x=d.patternFill&&!f.missingFile,T=d.patternStroke&&!f.missingFile;let w;if((f.disableFontFace||_||x||T)&&(w=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||x||T){u.save(),u.translate(e,n),u.scale(y,-y);let R;if((S===Pi.FILL||S===Pi.FILL_STROKE)&&(a?(R=u.getTransform(),u.setTransform(...a),u.fill(this.#n(w,R,a))):u.fill(w)),S===Pi.STROKE||S===Pi.FILL_STROKE)if(r){R||=u.getTransform(),u.setTransform(...r);const{a:M,b:O,c:N,d:z}=R,P=Ut.inverseTransform(r),j=Ut.transform([M,O,N,z,0,0],P);Ut.singularValueDecompose2dScale(j,wa),u.lineWidth*=Math.max(wa[0],wa[1])/y,u.stroke(this.#n(w,R,r))}else u.lineWidth/=y,u.stroke(w);u.restore()}else(S===Pi.FILL||S===Pi.FILL_STROKE)&&u.fillText(t,e,n),(S===Pi.STROKE||S===Pi.FILL_STROKE)&&u.strokeText(t,e,n);_&&(this.pendingTextPaths||=[]).push({transform:An(u),x:e,y:n,fontSize:y,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Se(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const a=e.fontSize;if(a===0)return;const r=this.ctx,u=e.fontSizeScale,d=e.charSpacing,f=e.wordSpacing,g=e.fontDirection,y=e.textHScale*g,S=t.length,_=n.vertical,x=_?1:-1,T=n.defaultVMetrics,w=a*e.fontMatrix[0],R=e.textRenderingMode===Pi.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),g>0?r.scale(y,-1):r.scale(y,1);let M,O;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,Dr(r),Ti.FILL);M=An(r),r.restore(),r.fillStyle=k}if(e.patternStroke){r.save();const k=e.strokeColor.getPattern(r,this,Dr(r),Ti.STROKE);O=An(r),r.restore(),r.strokeStyle=k}let N=e.lineWidth;const z=e.textMatrixScale;if(z===0||N===0){const k=e.textRenderingMode&Pi.FILL_STROKE_MASK;(k===Pi.STROKE||k===Pi.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=z;if(u!==1&&(r.scale(u,u),N/=u),r.lineWidth=N,n.isInvalidPDFjsFont){const k=[];let Y=0;for(const J of t)k.push(J.unicode),Y+=J.width;r.fillText(k.join(""),0,0),e.x+=Y*w*y,r.restore(),this.compose();return}let P=0,j;for(j=0;j<S;++j){const k=t[j];if(typeof k=="number"){P+=x*k*a/1e3;continue}let Y=!1;const J=(k.isSpace?f:0)+d,lt=k.fontChar,ct=k.accent;let gt,St,dt=k.width;if(_){const H=k.vmetric||T,Z=-(k.vmetric?H[1]:dt*.5)*w,ot=H[2]*w;dt=H?-H[0]:dt,gt=Z/u,St=(P+ot)/u}else gt=P/u,St=0;if(n.remeasure&&dt>0){const H=r.measureText(lt).width*1e3/a*u;if(dt<H&&this.isFontSubpixelAAEnabled){const Z=dt/H;Y=!0,r.save(),r.scale(Z,1),gt/=Z}else dt!==H&&(gt+=(dt-H)/2e3*a/u)}if(this.contentVisible&&(k.isInFont||n.missingFile)){if(R&&!ct)r.fillText(lt,gt,St);else if(this.paintChar(lt,gt,St,M,O),ct){const H=gt+a*ct.offset.x/u,Z=St-a*ct.offset.y/u;this.paintChar(ct.fontChar,H,Z,M,O)}}const vt=_?dt*w-J*g:dt*w+J*g;P+=vt,Y&&r.restore()}_?e.y-=P:e.x+=P*y,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,a=n.font,r=n.fontSize,u=n.fontDirection,d=a.vertical?1:-1,f=n.charSpacing,g=n.wordSpacing,y=n.textHScale*u,S=n.fontMatrix||A1,_=t.length,x=n.textRenderingMode===Pi.INVISIBLE;let T,w,R,M;if(!(x||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(y,u),T=0;T<_;++T){if(w=t[T],typeof w=="number"){M=d*w*r/1e3,this.ctx.translate(M,0),n.x+=M*y;continue}const O=(w.isSpace?g:0)+f,N=a.charProcOperatorList[w.operatorListId];N?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...S),this.executeOperatorList(N),this.restore()):te(`Type3 character "${w.operatorListId}" is not available.`);const z=[w.width,0];Ut.applyTransform(z,S),R=z[0]*r+O,e.translate(R,0),n.x+=R*y}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,a,r,u){const d=new Path2D;d.rect(n,a,r-n,u-a),this.ctx.clip(d),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||An(this.ctx),a={createCanvasGraphics:r=>new Mh(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new oy(t,this.ctx,a,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=w4(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,Dr(e),Ti.SHADING);const a=Dr(e);if(a){const{width:r,height:u}=e.canvas,d=Ch.slice();Ut.axialAlignedBoundingBox([0,0,r,u],a,d);const[f,g,y,S]=d;this.ctx.fillRect(f,g,y-f,S-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Je("Should not call beginInlineImage")}beginImageData(){Je("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=An(this.ctx),e)){Ut.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,a,r,u]=e,d=new Path2D;d.rect(n,a,r-n,u-a),this.ctx.clip(d),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||P0("TODO: Support non-isolated groups."),t.knockout&&te("Knockout groups not supported.");const n=An(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Ch.slice();Ut.axialAlignedBoundingBox(t.bbox,An(e),a);const r=[0,0,e.canvas.width,e.canvas.height];a=Ut.intersect(a,r)||[0,0,0,0];const u=Math.floor(a[0]),d=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-u,1),g=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);const S=this.cachedCanvases.getCanvas(y,f,g),_=S.context;_.translate(-u,-d),_.transform(...n);let x=new Path2D;const[T,w,R,M]=t.bbox;if(x.rect(T,w,R-T,M-w),t.matrix){const O=new Path2D;O.addPath(x,new DOMMatrix(t.matrix)),x=O}_.clip(x),t.smask?this.smaskStack.push({canvas:S.canvas,context:_,offsetX:u,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,d),e.save()),Af(e,_),this.ctx=_,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=An(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const r=Ch.slice();Ut.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,a,r){if(this.#t(),Jg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],d=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=d,Ut.singularValueDecompose2dScale(An(this.ctx),wa);const{viewportScale:f}=this,g=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:S,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(t,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(wa[0],0,0,-wa[1],0,d*wa[1]),Jg(this.ctx)}else{Jg(this.ctx),this.endPath();const f=new Path2D;f.rect(e[0],e[1],u,d),this.ctx.clip(f)}}this.current=new W2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,a=this._createMaskCanvas(t),r=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,a=0,r,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const f=An(d);d.transform(e,n,a,r,0,0);const g=this._createMaskCanvas(t);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]);for(let y=0,S=u.length;y<S;y+=2){const _=Ut.transform(f,[e,n,a,r,u[y],u[y+1]]);d.drawImage(g.canvas,_[4],_[5])}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const r of t){const{data:u,width:d,height:f,transform:g}=r,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),S=y.context;S.save();const _=this.getObject(u,r);$2(S,_),S.globalCompositeOperation="source-in",S.fillStyle=a?n.getPattern(S,this,Dr(e),Ti.FILL):n,S.fillRect(0,0,d,f),S.restore(),e.save(),e.transform(...g),e.scale(1,-1),Wg(e,y.canvas,0,0,d,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){te("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,a){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){te("Dependent image isn't ready yet");return}const u=r.width,d=r.height,f=[];for(let g=0,y=a.length;g<y;g+=2)f.push({transform:[e,0,0,n,a[g],a[g+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(r,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,a),u=r.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,a=this.ctx;this.save();const{filter:r}=a;r!=="none"&&r!==""&&(a.filter="none"),a.scale(1/e,-1/n);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",e,n).context;J2(g,t),u=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(u,Dr(a));a.imageSmoothingEnabled=tv(An(a),t.interpolate),Wg(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const r=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",r,u).context;J2(f,t),a=this.applyTransferMapsToCanvas(f)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Wg(n,a,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const a=this.ctx;this.pendingClip&&(n||(this.pendingClip===ev?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=An(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:r}=this.ctx.getTransform();let u,d;if(n===0&&a===0){const f=Math.abs(e),g=Math.abs(r);if(f===g)if(t===0)u=d=1/f;else{const y=f*t;u=d=y<1?1/y:1}else if(t===0)u=1/f,d=1/g;else{const y=f*t,S=g*t;u=y<1?1/y:1,d=S<1?1/S:1}}else{const f=Math.abs(e*r-n*a),g=Math.hypot(e,n),y=Math.hypot(a,r);if(t===0)u=y/f,d=g/f;else{const S=t*f;u=y>S?y/S:1,d=g>S?g/S:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[r,u]=this.getScaleForStroking();if(r===u){n.lineWidth=(a||1)*r,n.stroke(t);return}const d=n.getLineDash();e&&n.save(),n.scale(r,u),Jm.a=1/r,Jm.d=1/u;const f=new Path2D;if(f.addPath(t,Jm),d.length>0){const g=Math.max(r,u);n.setLineDash(d.map(y=>y/g)),n.lineDashOffset/=g}n.lineWidth=a||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const l in Vf)Mh.prototype[l]!==void 0&&(Mh.prototype[Vf[l]]=Mh.prototype[l]);class wo{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class B4{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Th=Symbol("INTERNAL");class P4{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:n,usage:a,rbGroups:r}){this.#t=!!(t&xa.DISPLAY),this.#e=!!(t&xa.PRINT),this.name=e,this.intent=n,this.usage=a,this.rbGroups=r}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Th&&Je("Internal method `_setVisible` called."),this.#n=n,this.#i=e}}class H4{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=xa.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new P4(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Th,!1);for(const n of t.on)this.#e.get(n)._setVisible(Th,!0);for(const n of t.off)this.#e.get(n)._setVisible(Th,!1);this.#n=this.getHash()}}#s(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const r=t[a];let u;if(Array.isArray(r))u=this.#s(r);else if(this.#e.has(r))u=this.#e.get(r).visible;else return te(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return P0("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(te(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return te(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return te(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return te(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return te(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return te(`Unknown optional content policy ${t.policy}.`),!0}return te(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const a=this.#e.get(t);if(!a){te(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const r of a.rbGroups)for(const u of r)u!==t&&this.#e.get(u)?._setVisible(Th,!1,!0);a._setVisible(Th,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const r=this.#e.get(a);if(r)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!r.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Ub;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class U4{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Vn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:r,progressiveDone:u,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=d,r?.length>0){const f=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,g)=>{this._onReceiveData({begin:f,chunk:g})}),t.addProgressListener((f,g)=>{this._onProgress({loaded:f,total:g})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});Vn(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Vn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new G4(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new k4(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class G4{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=U0(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class k4{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function j4(l){let t=!0,e=n("filename\\*","i").exec(l);if(e){e=e[1];let y=d(e);return y=unescape(y),y=f(y),y=g(y),r(y)}if(e=u(l),e){const y=g(e);return r(y)}if(e=n("filename","i").exec(l),e){e=e[1];let y=d(e);return y=g(y),r(y)}function n(y,S){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',S)}function a(y,S){if(y){if(!/^[\x00-\xFF]+$/.test(S))return S;try{const _=new TextDecoder(y,{fatal:!0}),x=ip(S);S=_.decode(x),t=!1}catch{}}return S}function r(y){return t&&/[\x80-\xff]/.test(y)&&(y=a("utf-8",y),t&&(y=a("iso-8859-1",y))),y}function u(y){const S=[];let _;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=x.exec(y))!==null;){let[,w,R,M]=_;if(w=parseInt(w,10),w in S){if(w===0)break;continue}S[w]=[R,M]}const T=[];for(let w=0;w<S.length&&w in S;++w){let[R,M]=S[w];M=d(M),R&&(M=unescape(M),w===0&&(M=f(M))),T.push(M)}return T.join("")}function d(y){if(y.startsWith('"')){const S=y.slice(1).split('\\"');for(let _=0;_<S.length;++_){const x=S[_].indexOf('"');x!==-1&&(S[_]=S[_].slice(0,x),S.length=_+1),S[_]=S[_].replaceAll(/\\(.)/g,"$1")}y=S.join('"')}return y}function f(y){const S=y.indexOf("'");if(S===-1)return y;const _=y.slice(0,S),T=y.slice(S+1).replace(/^[^']*'/,"");return a(_,T)}function g(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(S,_,x,T){if(x==="q"||x==="Q")return T=T.replaceAll("_"," "),T=T.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,R){return String.fromCharCode(parseInt(R,16))}),a(_,T);try{T=atob(T)}catch{}return a(_,T)})}return""}function Yb(l,t){const e=new Headers;if(!l||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function G0(l){return URL.parse(l)?.origin??null}function Xb({responseHeaders:l,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(l.get("Content-Length"),10);return!Number.isInteger(r)||(a.suggestedLength=r,r<=2*e)||n||!t||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Kb(l){const t=l.get("Content-Disposition");if(t){let e=j4(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(U0(e))return e}return null}function op(l,t){return new Yf(`Unexpected server response (${l}) while retrieving PDF "${t}".`,l,l===404||l===0&&t.startsWith("file:"))}function Qb(l){return l===200||l===206}function Zb(l,t,e){return{method:"GET",headers:l,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Wb(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(te(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class F4{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Yb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Vn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new q4(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new I4(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class q4{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,Zb(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=G0(r.url),!Qb(r.status))throw op(r.status,a);this._reader=r.body.getReader(),this._headersCapability.resolve();const u=r.headers,{allowRangeRequests:d,suggestedLength:f}=Xb({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=Kb(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Al("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Wb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class I4{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const u=a.url;fetch(u,Zb(r,this._withCredentials,this._abortController)).then(d=>{const f=G0(d.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!Qb(d.status))throw op(d.status,u);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Wb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const $m=200,t1=206;function V4(l){const t=l.response;return typeof t!="string"?t:ip(t).buffer}class Y4{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Yb(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,u]of this.headers)e.setRequestHeader(r,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=t1):a.expectedStatus=$m,e.responseType="arraybuffer",Vn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const r=a.status||$m;if(!(r===$m&&n.expectedStatus===t1)&&r!==n.expectedStatus){n.onError(a.status);return}const d=V4(a);if(r===t1){const f=a.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);g?n.onDone({begin:parseInt(g[1],10),chunk:d}):(te('Missing or invalid "Content-Range" header.'),n.onError(0))}else d?n.onDone({begin:0,chunk:d}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class X4{constructor(t){this._source=t,this._manager=new Y4(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Vn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new K4(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new Q4(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class K4{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=G0(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[f,...g]=d.split(": ");return[f,g.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:u}=Xb({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=Kb(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=op(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Q4{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=G0(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=op(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Z4=/^[a-z][a-z0-9\-+.]+:/i;function W4(l){if(Z4.test(l))return new URL(l);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(l))}class J4{constructor(t){this.source=t,this.url=W4(t.url),Vn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Vn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new $4(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new tE(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class $4{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=op(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Al("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class tE{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ef=Symbol("INITIAL_DATA");class Jb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ef}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const n=this.#t[t];if(!n||n.data===Ef)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ef}delete(t){const e=this.#t[t];return!e||e.data===Ef?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ef&&(yield[t,e])}}}const eE=1e5,nv=30;let Xf=class is{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#s=null;#a=null;#l=0;#r=0;#h=null;#o=null;#d=0;#c=0;#f=Object.create(null);#p=[];#g=null;#u=[];#m=new WeakMap;#y=null;static#v=new Map;static#S=new Map;static#_=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(f){f.enqueue(t),f.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=e,this.#c=n.scale*Us.pixelRatio,this.#d=n.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:r,pageX:u,pageY:d}=n.rawDims;this.#y=[1,0,0,-1,-u,d+r],this.#r=a,this.#l=r,is.#O(),Ro(e,n),this.#t.promise.finally(()=>{is.#x.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=di.platform;return Se(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#w(e.items),t()},this.#t.reject)};return this.#h=this.#g.getReader(),is.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Us.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ro(this.#o,{rotation:a})),n!==this.#c){e?.(),this.#c=n;const r={div:null,properties:null,ctx:is.#R(this.#s)};for(const u of this.#u)r.properties=this.#m.get(u),r.div=u,this.#E(r)}}cancel(){const t=new Al("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#p}#w(t){if(this.#n)return;this.#a.ctx??=is.#R(this.#s);const e=this.#u,n=this.#p;for(const a of t){if(e.length>eE){te("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const r=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id!==null&&this.#e.setAttribute("id",`${a.id}`),r.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(a.str),this.#M(a)}}#M(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=Ut.transform(this.#y,t.transform);let r=Math.atan2(a[1],a[0]);const u=this.#f[t.fontName];u.vertical&&(r+=Math.PI/2);let d=this.#i&&u.fontSubstitution||u.fontFamily;d=is.fontFamilyMap.get(d)||d;const f=Math.hypot(a[2],a[3]),g=f*is.#N(d,u,this.#s);let y,S;r===0?(y=a[4],S=a[5]-g):(y=a[4]+g*Math.sin(r),S=a[5]-g*Math.cos(r));const _="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#o?(x.left=`${(100*y/this.#r).toFixed(2)}%`,x.top=`${(100*S/this.#l).toFixed(2)}%`):(x.left=`${_}${y.toFixed(2)}px)`,x.top=`${_}${S.toFixed(2)}px)`),x.fontSize=`${_}${(is.#A*f).toFixed(2)}px)`,x.fontFamily=d,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let T=!1;if(t.str.length>1)T=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),R=Math.abs(t.transform[3]);w!==R&&Math.max(w,R)/Math.min(w,R)>1.5&&(T=!0)}if(T&&(n.canvasWidth=u.vertical?t.height:t.width),this.#m.set(e,n),this.#a.div=e,this.#a.properties=n,this.#E(this.#a),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:n,ctx:a}=t,{style:r}=e;let u="";if(is.#A>1&&(u=`scale(${1/is.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=r,{canvasWidth:f,fontSize:g}=n;is.#C(a,g*this.#c,d);const{width:y}=a.measureText(e.textContent);y>0&&(u=`scaleX(${f*this.#c/y}) ${u}`)}n.angle!==0&&(u=`rotate(${n.angle}deg) ${u}`),u.length>0&&(r.transform=u)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(const{canvas:t}of this.#S.values())t.remove();this.#S.clear()}}static#R(t=null){let e=this.#S.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#S.set(t,e),this.#_.set(e,{size:0,family:""})}return e}static#C(t,e,n){const a=this.#_.get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)}static#O(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#N(t,e,n){const a=this.#v.get(t);if(a)return a;const r=this.#R(n);r.canvas.width=r.canvas.height=nv,this.#C(r,nv,t);const u=r.measureText(""),d=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let g=.8;return d?g=d/(d+f):(di.platform.isFirefox&&te("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?g=e.ascent:e.descent&&(g=1+e.descent)),this.#v.set(t,g),g}};class Kf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(r){if(!r)return;let u=null;const d=r.name;if(d==="#text")u=r.value;else if(Kf.shouldBuildText(d))r?.attributes?.textContent?u=r.attributes.textContent:r.value&&(u=r.value);else return;if(u!==null&&e.push({str:u}),!!r.children)for(const f of r.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const nE=100;function uy(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const t=new cy,{docId:e}=t,n=l.url?d4(l.url):null,a=l.data?f4(l.data):null,r=l.httpHeaders||null,u=l.withCredentials===!0,d=l.password??null,f=l.range instanceof hy?l.range:null,g=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let y=l.worker instanceof zh?l.worker:null;const S=l.verbosity,_=typeof l.docBaseUrl=="string"&&!sp(l.docBaseUrl)?l.docBaseUrl:null,x=Qg(l.cMapUrl),T=l.cMapPacked!==!1,w=l.CMapReaderFactory||(Ji?S4:I2),R=Qg(l.iccUrl),M=Qg(l.standardFontDataUrl),O=l.StandardFontDataFactory||(Ji?_4:V2),N=Qg(l.wasmUrl),z=l.WasmFactory||(Ji?A4:Y2),P=l.stopAtErrors!==!0,j=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,k=l.isEvalSupported!==!1,Y=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!Ji,J=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!Ji&&(di.platform.isFirefox||!globalThis.chrome),lt=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ct=typeof l.disableFontFace=="boolean"?l.disableFontFace:Ji,gt=l.fontExtraProperties===!0,St=l.enableXfa===!0,dt=l.ownerDocument||globalThis.document,vt=l.disableRange===!0,H=l.disableStream===!0,Z=l.disableAutoFetch===!0,ot=l.pdfBug===!0,Ct=l.CanvasFactory||(Ji?b4:m4),U=l.FilterFactory||(Ji?v4:y4),$=l.enableHWA===!0,ht=l.useWasm!==!1,ft=f?f.length:l.length??NaN,Mt=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!Ji&&!ct,Ht=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(w===I2&&O===V2&&z===Y2&&x&&M&&N&&Df(x,document.baseURI)&&Df(M,document.baseURI)&&Df(N,document.baseURI)),Nt=null;KA(S);const jt={canvasFactory:new Ct({ownerDocument:dt,enableHWA:$}),filterFactory:new U({docId:e,ownerDocument:dt}),cMapReaderFactory:Ht?null:new w({baseUrl:x,isCompressed:T}),standardFontDataFactory:Ht?null:new O({baseUrl:M}),wasmFactory:Ht?null:new z({baseUrl:N})};y||(y=zh.create({verbosity:S,port:wo.workerPort}),t._worker=y);const he={docId:e,apiVersion:"5.3.93",data:a,password:d,disableAutoFetch:Z,rangeChunkSize:g,length:ft,docBaseUrl:_,enableXfa:St,evaluatorOptions:{maxImageSize:j,disableFontFace:ct,ignoreErrors:P,isEvalSupported:k,isOffscreenCanvasSupported:Y,isImageDecoderSupported:J,canvasMaxAreaInBytes:lt,fontExtraProperties:gt,useSystemFonts:Mt,useWasm:ht,useWorkerFetch:Ht,cMapUrl:x,iccUrl:R,standardFontDataUrl:M,wasmUrl:N}},un={ownerDocument:dt,pdfBug:ot,styleElement:Nt,loadingParams:{disableAutoFetch:Z,enableXfa:St}};return y.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const Te=y.messageHandler.sendWithPromise("GetDocRequest",he,a?[a.buffer]:null);let Tn;if(f)Tn=new U4(f,{disableRange:vt,disableStream:H});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Yn=Df(n)?F4:Ji?J4:X4;Tn=new Yn({url:n,length:ft,httpHeaders:r,withCredentials:u,rangeChunkSize:g,disableRange:vt,disableStream:H})}return Te.then(Yn=>{if(t.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const ee=new Of(e,Yn,y.port),Pe=new sE(ee,t,Tn,un,jt);t._transport=Pe,ee.send("Ready",null)})}).catch(t._capability.reject),t}class cy{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${cy.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let hy=class{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#s=[];constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){this.#s.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#s)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#i)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Je("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class iE{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class aE{#t=!1;constructor(t,e,n,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new j2:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new Jb,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:r=!1}={}){return new ap({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:a=Br.ENABLE,transform:r=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:S=!1}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(n,a,y,S),{renderingIntent:x,cacheKey:T}=_;this.#t=!1,d||=this._transport.getOptionalContentConfig(x);let w=this._intentStates.get(T);w||(w=Object.create(null),this._intentStates.set(T,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const R=!!(x&xa.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const M=z=>{w.renderTasks.delete(O),R&&(this.#t=!0),this.#e(),z?(O.capability.reject(z),this._abortOperatorList({intentState:w,reason:z instanceof Error?z:new Error(z)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new wh({callback:M,params:{canvasContext:t,viewport:e,transform:r,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:g});(w.renderTasks||=new Set).add(O);const N=O.task;return Promise.all([w.displayReadyCapability.promise,d]).then(([z,P])=>{if(this.destroyed){M();return}if(this._stats?.time("Rendering"),!(P.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:z,optionalContentConfig:P}),O.operatorListChanged()}).catch(M),N}getOperatorList({intent:t="display",annotationMode:e=Br.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){function r(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,n,a,!0);let d=this._intentStates.get(u.cacheKey);d||(d=Object.create(null),this._intentStates.set(u.cacheKey,d));let f;return d.opListReadCapability||(f=Object.create(null),f.operatorListChanged=r,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||=new Set).add(f),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Kf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function r(){u.read().then(function({value:f,done:g}){if(g){n(d);return}d.lang??=f.lang,Object.assign(d.styles,f.styles),d.items.push(...f.items),r()},a)}const u=e.getReader(),d={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new j2),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:r,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:a},u).getReader(),g=this._intentStates.get(e);g.streamReader=f;const y=()=>{f.read().then(({value:S,done:_})=>{if(_){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,g),y())},S=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const _ of g.renderTasks)_.operatorListChanged();this.#e()}if(g.displayReadyCapability)g.displayReadyCapability.reject(S);else if(g.opListReadCapability)g.opListReadCapability.reject(S);else throw S}})};y()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof H0){let a=nE;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Al(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,r]of this._intentStates)if(r===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Co,Hs,Sl,Fu,R0,qu,Iu,$i,m0,$b,tS,Nf,Nh,y0;const mn=class mn{constructor({name:t=null,port:e=null,verbosity:n=QA()}={}){wr(this,$i);wr(this,Co,Promise.withResolvers());wr(this,Hs,null);wr(this,Sl,null);wr(this,Fu,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(gn(mn,Iu).has(e))throw new Error("Cannot use more than one PDFWorker per port.");gn(mn,Iu).set(e,this),Rr(this,$i,$b).call(this,e)}else Rr(this,$i,tS).call(this)}get promise(){return gn(this,Co).promise}get port(){return gn(this,Sl)}get messageHandler(){return gn(this,Hs)}destroy(){this.destroyed=!0,gn(this,Fu)?.terminate(),ca(this,Fu,null),gn(mn,Iu).delete(gn(this,Sl)),ca(this,Sl,null),gn(this,Hs)?.destroy(),ca(this,Hs,null)}static create(t){const e=gn(this,Iu).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new mn(t)}static get workerSrc(){if(wo.workerSrc)return wo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Se(this,"_setupFakeWorkerGlobal",(async()=>gn(this,Nh,y0)?gn(this,Nh,y0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Co=new WeakMap,Hs=new WeakMap,Sl=new WeakMap,Fu=new WeakMap,R0=new WeakMap,qu=new WeakMap,Iu=new WeakMap,$i=new WeakSet,m0=function(){gn(this,Co).resolve(),gn(this,Hs).send("configure",{verbosity:this.verbosity})},$b=function(t){ca(this,Sl,t),ca(this,Hs,new Of("main","worker",t)),gn(this,Hs).on("ready",()=>{}),Rr(this,$i,m0).call(this)},tS=function(){if(gn(mn,qu)||gn(mn,Nh,y0)){Rr(this,$i,Nf).call(this);return}let{workerSrc:t}=mn;try{mn._isSameOrigin(window.location,t)||(t=mn._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Of("main","worker",e),a=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?gn(this,Co).reject(new Error("Worker was destroyed")):Rr(this,$i,Nf).call(this)},r=new AbortController;e.addEventListener("error",()=>{gn(this,Fu)||a()},{signal:r.signal}),n.on("test",d=>{if(r.abort(),this.destroyed||!d){a();return}ca(this,Hs,n),ca(this,Sl,e),ca(this,Fu,e),Rr(this,$i,m0).call(this)}),n.on("ready",d=>{if(r.abort(),this.destroyed){a();return}try{u()}catch{Rr(this,$i,Nf).call(this)}});const u=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};u();return}catch{P0("The worker has been disabled.")}Rr(this,$i,Nf).call(this)},Nf=function(){gn(mn,qu)||(te("Setting up fake worker."),ca(mn,qu,!0)),mn._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){gn(this,Co).reject(new Error("Worker was destroyed"));return}const e=new g4;ca(this,Sl,e);const n=`fake${d2(mn,R0)._++}`,a=new Of(n+"_worker",n,e);t.setup(a,e),ca(this,Hs,new Of(n,n+"_worker",e)),Rr(this,$i,m0).call(this)}).catch(t=>{gn(this,Co).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Nh=new WeakSet,y0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},wr(mn,Nh),wr(mn,R0,0),wr(mn,qu,!1),wr(mn,Iu,new WeakMap),Ji&&(ca(mn,qu,!0),wo.workerSrc||="./pdf.worker.mjs"),mn._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},mn._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},mn.fromPort=t=>{if(a4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return mn.create(t)};let zh=mn;class sE{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#s=null;constructor(t,e,n,a,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Jb,this.fontLoader=new c4({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#a(t,e=null){const n=this.#t.get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Se(this,"annotationStorage",new sy)}getRenderingIntent(t,e=Br.ENABLE,n=null,a=!1,r=!1){let u=xa.DISPLAY,d=E1;switch(t){case"any":u=xa.ANY;break;case"display":break;case"print":u=xa.PRINT;break;default:te(`getRenderingIntent - invalid intent: ${t}`)}const f=u&xa.PRINT&&n instanceof Gb?n:this.annotationStorage;switch(e){case Br.DISABLE:u+=xa.ANNOTATIONS_DISABLE;break;case Br.ENABLE:break;case Br.ENABLE_FORMS:u+=xa.ANNOTATIONS_FORMS;break;case Br.ENABLE_STORAGE:u+=xa.ANNOTATIONS_STORAGE,d=f.serializable;break;default:te(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(u+=xa.IS_EDITING),r&&(u+=xa.OPLIST);const{ids:g,hash:y}=f.modifiedIds,S=[u,d.hash,y];return{renderingIntent:u,cacheKey:S.join("_"),annotationStorageSerializable:d,modifiedIds:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Xf.cleanup(),this._networkStream?.cancelAllRequests(new Al("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Vn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},a.onPull=()=>{this._fullReader.read().then(function({value:r,done:u}){if(u){a.close();return}Vn(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{a.error(r)})},a.onCancel=r=>{this._fullReader.cancel(r),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:r,contentLength:u}=this._fullReader;return(!a||!r)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=d=>{e.onProgress?.({loaded:d.loaded,total:d.total})}),{isStreamingSupported:a,isRangeSupported:r,contentLength:u}}),t.on("GetRangeReader",(n,a)=>{Vn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){a.close();return}a.onPull=()=>{r.read().then(function({value:u,done:d}){if(d){a.close();return}Vn(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{a.error(u)})},a.onCancel=u=>{r.cancel(u),a.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new iE(n,this))}),t.on("DocException",n=>{e._capability.reject(ha(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw ha(n);const a=r=>{r instanceof Error?this.#s.reject(r):this.#s.resolve({password:r})};e.onPassword(a,n.code)}catch(a){this.#s.reject(a)}return this.#s.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,r])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in r){const g=r.error;te(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,d=new h4(r,u);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Vn(f,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,y]of g.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,r,u])=>{if(this.destroyed)return;const d=this.#e.get(a);if(!d.objs.has(n)){if(d._intentStates.size===0){u?.bitmap?.close();return}switch(r){case"Image":case"Pattern":d.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&te("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#n.get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#i.set(r.refStr,t);const u=new aE(e,r,this,this._params.pdfBug);return this.#e.set(e,u),u});return this.#n.set(e,a),a}getPageIndex(t){return T1(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new H4(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new B4(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Xf.cleanup()}}cachedPageNumber(t){if(!T1(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class rE{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class wh{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:r,operatorList:u,pageIndex:d,canvasFactory:f,filterFactory:g,useRequestAnimationFrame:y=!1,pdfBug:S=!1,pageColors:_=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=d,this.canvasFactory=f,this.filterFactory=g,this._pdfBug=S,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=y===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(wh.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");wh.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:a,transform:r,background:u}=this.params;this.gfx=new Mh(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:a,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),wh.#e.delete(this._canvas),t||=new H0(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),wh.#e.delete(this._canvas),this.callback())))}}const eS="5.3.93",nS="cbeef3233";function iv(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function Tf(l){return Math.max(0,Math.min(255,255*l))}class av{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Tf(t),[t,t,t]}static G_HTML([t]){const e=iv(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Tf)}static RGB_HTML(t){return`#${t.map(iv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Tf(1-Math.min(1,t+a)),Tf(1-Math.min(1,n+a)),Tf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,r=1-e,u=1-n,d=Math.min(a,r,u);return["CMYK",a,r,u,d]}}class lE{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Je("Abstract method `_createSVG` called.")}}class Qf extends lE{_createSVG(t){return document.createElementNS(vl,t)}}class dy{static setupStorage(t,e,n,a,r){const u=a.getValue(e,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),r==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",d=>{a.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),r==="print")break;t.addEventListener("input",d=>{a.setValue(e,{value:d.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const d of n.children)d.attributes.value===u.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const f=d.target.options,g=f.selectedIndex===-1?"":f[f.selectedIndex].value;a.setValue(e,{value:g})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:r}){const{attributes:u}=e,d=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${a}`);for(const[f,g]of Object.entries(u))if(g!=null)switch(f){case"class":g.length&&t.setAttribute(f,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!d||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,g)}d&&r.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,r=t.intent||"display",u=document.createElement(a.name);a.attributes&&this.setAttributes({html:u,element:a,intent:r,linkService:n});const d=r!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}d&&f.setAttribute("class","xfaLayer xfaFont");const g=[];if(a.children.length===0){if(a.value){const S=document.createTextNode(a.value);u.append(S),d&&Kf.shouldBuildText(a.name)&&g.push(S)}return{textDivs:g}}const y=[[a,-1,u]];for(;y.length>0;){const[S,_,x]=y.at(-1);if(_+1===S.children.length){y.pop();continue}const T=S.children[++y.at(-1)[1]];if(T===null)continue;const{name:w}=T;if(w==="#text"){const M=document.createTextNode(T.value);g.push(M),x.append(M);continue}const R=T?.attributes?.xmlns?document.createElementNS(T.attributes.xmlns,w):document.createElement(w);if(x.append(R),T.attributes&&this.setAttributes({html:R,element:T,storage:e,intent:r,linkService:n}),T.children?.length>0)y.push([T,-1,R]);else if(T.value){const M=document.createTextNode(T.value);d&&Kf.shouldBuildText(w)&&g.push(M),R.append(M)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const oE=9,Ku=new WeakSet;class sv{static create(t){switch(t.data.annotationType){case Bn.LINK:return new iS(t);case Bn.TEXT:return new uE(t);case Bn.WIDGET:switch(t.data.fieldType){case"Tx":return new cE(t);case"Btn":return t.data.radioButton?new aS(t):t.data.checkBox?new dE(t):new fE(t);case"Ch":return new pE(t);case"Sig":return new hE(t)}return new Wu(t);case Bn.POPUP:return new C1(t);case Bn.FREETEXT:return new sS(t);case Bn.LINE:return new mE(t);case Bn.SQUARE:return new yE(t);case Bn.CIRCLE:return new vE(t);case Bn.POLYLINE:return new rS(t);case Bn.CARET:return new SE(t);case Bn.INK:return new fy(t);case Bn.POLYGON:return new bE(t);case Bn.HIGHLIGHT:return new lS(t);case Bn.UNDERLINE:return new _E(t);case Bn.SQUIGGLY:return new AE(t);case Bn.STRIKEOUT:return new EE(t);case Bn.STAMP:return new oS(t);case Bn.FILEATTACHMENT:return new TE(t);default:return new Gn(t)}}}class Gn{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Gn._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:e}=t;e&&this.#i(e),this.#n?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:u,pageX:d,pageY:f}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-d)/r}%`,e.top=`${100*(u-t[3]+f)/u}%`,a===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Wu||(r.tabIndex=0);const{style:u}=r;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof C1){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:d,height:f}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,R=e.borderStyle.verticalCornerRadius;if(w>0||R>0){const O=`calc(${w}px * var(--total-scale-factor)) / calc(${R}px * var(--total-scale-factor))`;u.borderRadius=O}else if(this instanceof aS){const O=`calc(${d}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=O}switch(e.borderStyle.style){case Eh.SOLID:u.borderStyle="solid";break;case Eh.DASHED:u.borderStyle="dashed";break;case Eh.BEVELED:te("Unimplemented border style: beveled");break;case Eh.INSET:te("Unimplemented border style: inset");break;case Eh.UNDERLINE:u.borderBottomStyle="solid";break}const M=e.borderColor||null;M?(this.#e=!0,u.borderColor=Ut.makeHexColor(M[0]|0,M[1]|0,M[2]|0)):u.borderWidth=0}const g=Ut.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:y,pageHeight:S,pageX:_,pageY:x}=a.rawDims;u.left=`${100*(g[0]-_)/y}%`,u.top=`${100*(g[1]-x)/S}%`;const{rotation:T}=e;return e.hasOwnCanvas||T===0?(u.width=`${100*d/y}%`,u.height=`${100*f/S}%`):this.setRotation(T,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:r,height:u}=this;t%180!==0&&([r,u]=[u,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*u/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const r=a.detail[e],u=r[0],d=r.slice(1);a.target.style[n]=av[`${u}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:av[`${u}_rgb`](d)})};return Se(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||n[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,r]of Object.entries(e)){const u=n[a];if(u){const d={detail:{[a]:r},target:t};u(d),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,r]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,R,M,O]=t.subarray(2,6);if(a===w&&r===R&&e===M&&n===O)return}const{style:u}=this.container;let d;if(this.#e){const{borderColor:w,borderWidth:R}=u;u.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const f=a-e,g=r-n,{svgFactory:y}=this,S=y.createElement("svg");S.classList.add("quadrilateralsContainer"),S.setAttribute("width",0),S.setAttribute("height",0),S.role="none";const _=y.createElement("defs");S.append(_);const x=y.createElement("clipPath"),T=`clippath_${this.data.id}`;x.setAttribute("id",T),x.setAttribute("clipPathUnits","objectBoundingBox"),_.append(x);for(let w=2,R=t.length;w<R;w+=8){const M=t[w],O=t[w+1],N=t[w+2],z=t[w+3],P=y.createElement("rect"),j=(N-e)/f,k=(r-O)/g,Y=(M-N)/f,J=(O-z)/g;P.setAttribute("x",j),P.setAttribute("y",k),P.setAttribute("width",Y),P.setAttribute("height",J),x.append(P),d?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${k}" width="${Y}" height="${J}"/>`)}this.#e&&(d.push("</g></svg>')"),u.backgroundImage=d.join("")),this.container.append(S),this.container.style.clipPath=`url(#${T})`}_createPopup(){const{data:t}=this,e=this.#n=new C1({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Je("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:r,id:u,exportValues:d}of a){if(r===-1||u===e)continue;const f=typeof d=="string"?d:null,g=document.querySelector(`[data-element-id="${u}"]`);if(g&&!Ku.has(g)){te(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:g})}return n}for(const a of document.getElementsByName(t)){const{exportValue:r}=a,u=a.getAttribute("data-element-id");u!==e&&Ku.has(a)&&n.push({id:u,exportValue:r,domElement:a})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class iS extends Gn{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(n,t.action),a=!0):t.attachment?(this.#e(n,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(this.#n(n,t.setOCGState),a=!0):t.dest?(this._bindLink(n,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),a=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(n,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,n=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#t()}#n(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const r=n.get(a);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){te('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:a,refs:r,include:u}=e,d=[];if(a.length!==0||r.length!==0){const y=new Set(r);for(const S of a){const _=this._fieldObjects[S]||[];for(const{id:x}of _)y.add(x)}for(const S of Object.values(this._fieldObjects))for(const _ of S)y.has(_.id)===u&&d.push(_)}else for(const y of Object.values(this._fieldObjects))d.push(...y);const f=this.annotationStorage,g=[];for(const y of d){const{id:S}=y;switch(g.push(S),y.type){case"text":{const x=y.defaultValue||"";f.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=y.defaultValue===y.exportValues;f.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=y.defaultValue||"";f.setValue(S,{value:x});break}default:continue}const _=document.querySelector(`[data-element-id="${S}"]`);if(_){if(!Ku.has(_)){te(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}}),!1}}}class uE extends Gn{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Wu extends Gn{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return di.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,r){n.includes("mouse")?t.addEventListener(n,u=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:r(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{if(n==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:r(u)}})})}_setEventListeners(t,e,n,a){for(const[r,u]of n)(u==="Action"||this.data.actions?.[u])&&((u==="Focus"||u==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,r,u,a),u==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Ut.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||oE,r=t.style;let u;const d=2,f=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d),y=Math.round(g/(Xm*a))||1,S=g/y;u=Math.min(a,f(S/Xm))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-d);u=Math.min(a,f(g/Xm))}r.fontSize=`calc(${u}px * var(--total-scale-factor))`,r.color=Ut.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class cE extends Wu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const r=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=n),r.setValue(u.id,{[a]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let r=a.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&r.length>u&&(r=r.slice(0,u));let d=a.formattedValue||this.data.textContent?.join(`
`)||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const f={userValue:r,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ku.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const g=this.data.dateFormat||this.data.timeFormat;g&&(n.title=g),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),f.formattedValue=null}),n.addEventListener("resetform",S=>{const _=this.data.defaultFieldValue??"";n.value=f.userValue=_,f.formattedValue=null});let y=S=>{const{formattedValue:_}=f;_!=null&&(S.target.value=_),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{if(f.focused)return;const{target:x}=_;f.userValue&&(x.value=f.userValue),f.lastCommittedValue=x.value,f.commitKey=1,this.data.actions?.Focus||(f.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const x={value(T){f.userValue=T.detail.value??"",t.setValue(e,{value:f.userValue.toString()}),T.target.value=f.userValue},formattedValue(T){const{formattedValue:w}=T.detail;f.formattedValue=w,w!=null&&T.target!==document.activeElement&&(T.target.value=w),t.setValue(e,{formattedValue:w})},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:w}=T.detail,{target:R}=T;if(w===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",w);let M=f.userValue;!M||M.length<=w||(M=M.slice(0,w),R.value=f.userValue=M,t.setValue(e,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(x,_)}),n.addEventListener("keydown",_=>{f.commitKey=1;let x=-1;if(_.key==="Escape"?x=0:_.key==="Enter"&&!this.data.multiLine?x=2:_.key==="Tab"&&(f.commitKey=3),x===-1)return;const{value:T}=_.target;f.lastCommittedValue!==T&&(f.lastCommittedValue=T,f.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:x,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const S=y;y=null,n.addEventListener("blur",_=>{if(!f.focused||!_.relatedTarget)return;this.data.actions?.Blur||(f.focused=!1);const{value:x}=_.target;f.userValue=x,f.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:f.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),S(_)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",_=>{f.lastCommittedValue=null;const{data:x,target:T}=_,{value:w,selectionStart:R,selectionEnd:M}=T;let O=R,N=M;switch(_.inputType){case"deleteWordBackward":{const z=w.substring(0,R).match(/\w*[^\w]*$/);z&&(O-=z[0].length);break}case"deleteWordForward":{const z=w.substring(R).match(/^[^\w]*\w*/);z&&(N+=z[0].length);break}case"deleteContentBackward":R===M&&(O-=1);break;case"deleteContentForward":R===M&&(N+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,change:x||"",willCommit:!1,selStart:O,selEnd:N}})}),this._setEventListeners(n,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class hE extends Wu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class dE extends Wu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ku.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,a&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",u=>{const{name:d,checked:f}=u.target;for(const g of this._getElementsByName(d,n)){const y=f&&g.exportValue===e.exportValue;g.domElement&&(g.domElement.checked=y),t.setValue(g.id,{value:y})}t.setValue(n,{value:f})}),r.addEventListener("resetform",u=>{const d=e.defaultFieldValue||"Off";u.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",u=>{const d={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class aS extends Wu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const u of this._getElementsByName(e.fieldName,n))t.setValue(u.id,{value:!1});const r=document.createElement("input");if(Ku.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,a&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",u=>{const{name:d,checked:f}=u.target;for(const g of this._getElementsByName(d,n))t.setValue(g.id,{value:!1});t.setValue(n,{value:f})}),r.addEventListener("resetform",u=>{const d=e.defaultFieldValue;u.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;r.addEventListener("updatefromsandbox",d=>{const f={value:g=>{const y=u===g.detail.value;for(const S of this._getElementsByName(g.target.name)){const _=y&&S.id===n;S.domElement&&(S.domElement.checked=_),t.setValue(S.id,{value:_})}}};this._dispatchEventFromSandbox(f,d)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class fE extends iS{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class pE extends Wu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Ku.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",y=>{const S=this.data.defaultFieldValue;for(const _ of a.options)_.selected=_.value===S});for(const y of this.data.options){const S=document.createElement("option");S.textContent=y.displayValue,S.value=y.exportValue,n.value.includes(y.exportValue)&&(S.setAttribute("selected",!0),r=!1),a.append(S)}let u=null;if(r){const y=document.createElement("option");y.value=" ",y.setAttribute("hidden",!0),y.setAttribute("selected",!0),a.prepend(y),u=()=>{y.remove(),a.removeEventListener("input",u),u=null},a.addEventListener("input",u)}const d=y=>{const S=y?"value":"textContent",{options:_,multiple:x}=a;return x?Array.prototype.filter.call(_,T=>T.selected).map(T=>T[S]):_.selectedIndex===-1?null:_[_.selectedIndex][S]};let f=d(!1);const g=y=>{const S=y.target.options;return Array.prototype.map.call(S,_=>({displayValue:_.textContent,exportValue:_.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",y=>{const S={value(_){u?.();const x=_.detail.value,T=new Set(Array.isArray(x)?x:[x]);for(const w of a.options)w.selected=T.has(w.value);t.setValue(e,{value:d(!0)}),f=d(!1)},multipleSelection(_){a.multiple=!0},remove(_){const x=a.options,T=_.detail.remove;x[T].selected=!1,a.remove(T),x.length>0&&Array.prototype.findIndex.call(x,R=>R.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:d(!0),items:g(_)}),f=d(!1)},clear(_){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),f=d(!1)},insert(_){const{index:x,displayValue:T,exportValue:w}=_.detail.insert,R=a.children[x],M=document.createElement("option");M.textContent=T,M.value=w,R?R.before(M):a.append(M),t.setValue(e,{value:d(!0),items:g(_)}),f=d(!1)},items(_){const{items:x}=_.detail;for(;a.length!==0;)a.remove(0);for(const T of x){const{displayValue:w,exportValue:R}=T,M=document.createElement("option");M.textContent=w,M.value=R,a.append(M)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:d(!0),items:g(_)}),f=d(!1)},indices(_){const x=new Set(_.detail.indices);for(const T of _.target.options)T.selected=x.has(T.index);t.setValue(e,{value:d(!0)}),f=d(!1)},editable(_){_.target.disabled=!_.detail.editable}};this._dispatchEventFromSandbox(S,y)}),a.addEventListener("input",y=>{const S=d(!0),_=d(!1);t.setValue(e,{value:S}),y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:_,changeEx:S,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],y=>y.target.value)):a.addEventListener("input",function(y){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class C1 extends Gn{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Gn._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new gE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",n.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(a=>`${ty}${a}`).join(",")),this.container}}class gE{#t=this.#w.bind(this);#e=this.#C.bind(this);#n=this.#R.bind(this);#i=this.#E.bind(this);#s=null;#a=null;#l=null;#r=null;#h=null;#o=null;#d=null;#c=!1;#f=null;#p=null;#g=null;#u=null;#m=null;#y=null;#v=!1;constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:r,contentsObj:u,richText:d,parent:f,rect:g,parentRect:y,open:S}){this.#a=t,this.#m=a,this.#l=u,this.#u=d,this.#o=f,this.#s=e,this.#g=g,this.#d=y,this.#h=n,this.#r=ey.toDateObject(r),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",this.#i),_.addEventListener("mouseenter",this.#n),_.addEventListener("mouseleave",this.#e),_.classList.add("popupTriggerArea");for(const _ of n)_.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,S&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#s){const r=t.style.outlineColor=Ut.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=this.#m,t.append(e),this.#r){const r=document.createElement("time");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),r.dateTime=this.#r.toISOString(),e.append(r)}const a=this.#S;if(a)dy.render({xfaHtml:a,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#l);t.append(r)}this.#a.append(t)}get#S(){const t=this.#u,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#u.html||null}get#_(){return this.#S?.attributes?.style?.fontSize||0}get#A(){return this.#S?.attributes?.style?.color||null}#x(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#A,fontSize:this.#_?`calc(${this.#_}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:a});return n}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const a=t.split(/(?:\r\n?|\n)/);for(let r=0,u=a.length;r<u;++r){const d=a[r];n.append(document.createTextNode(d)),r<u-1&&n.append(document.createElement("br"))}return n}#w(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#c)&&this.#E()}updateEdited({rect:t,popupContent:e}){this.#y||={contentsObj:this.#l,richText:this.#u},t&&(this.#p=null),e&&(this.#u=this.#x(e),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#u}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#p=null)}#M(){if(this.#p!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:r}}}=this.#o;let u=!!this.#d,d=u?this.#d:this.#g;for(const T of this.#h)if(!d||Ut.intersect(T.data.rect,d)!==null){d=T.data.rect,u=!0;break}const f=Ut.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),y=u?d[2]-d[0]+5:0,S=f[0]+y,_=f[1];this.#p=[100*(S-a)/e,100*(_-r)/n];const{style:x}=this.#a;x.left=`${this.#p[0]}%`,x.top=`${this.#p[1]}%`}#E(){this.#c=!this.#c,this.#c?(this.#R(),this.#a.addEventListener("click",this.#i),this.#a.addEventListener("keydown",this.#t)):(this.#C(),this.#a.removeEventListener("click",this.#i),this.#a.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#c&&this.#a.classList.add("focused"):(this.#M(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#C(){this.#a.classList.remove("focused"),!(this.#c||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#a.hidden=!0)}maybeShow(){this.#v&&(this.#f||this.#R(),this.#v=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class sS extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Wt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class mE extends Gn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),r=this.#t=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yE extends Gn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,u=this.#t=this.svgFactory.createElement("svg:rect");return u.setAttribute("x",r/2),u.setAttribute("y",r/2),u.setAttribute("width",e-r),u.setAttribute("height",n-r),u.setAttribute("stroke-width",r||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vE extends Gn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,u=this.#t=this.svgFactory.createElement("svg:ellipse");return u.setAttribute("cx",e/2),u.setAttribute("cy",n/2),u.setAttribute("rx",e/2-r/2),u.setAttribute("ry",n/2-r/2),u.setAttribute("stroke-width",r||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rS extends Gn{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:a},width:r,height:u}=this;if(!e)return this.container;const d=this.svgFactory.create(r,u,!0);let f=[];for(let y=0,S=e.length;y<S;y+=2){const _=e[y]-t[0],x=t[3]-e[y+1];f.push(`${_},${x}`)}f=f.join(" ");const g=this.#t=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",f),g.setAttribute("stroke-width",n.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class bE extends rS{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class SE extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class fy extends Gn{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Wt.HIGHLIGHT:Wt.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:a,popupRef:r}}=this,{transform:u,width:d,height:f}=this.#n(e,t),g=this.svgFactory.create(d,f,!0),y=this.#t=this.svgFactory.createElement("svg:g");g.append(y),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",u);for(let S=0,_=n.length;S<_;S++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",n[S].join(",")),y.append(x)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:a}=t,r=this.#t;if(e>=0&&r.setAttribute("stroke-width",e||1),n)for(let u=0,d=this.#e.length;u<d;u++)this.#e[u].setAttribute("points",n[u].join(","));if(a){const{transform:u,width:d,height:f}=this.#n(this.data.rotation,a);r.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),r.setAttribute("transform",u)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class lS extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Wt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _E extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class AE extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class EE extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oS extends Gn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Wt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class TE extends Gn{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:a}=di.platform;return t.addEventListener("keydown",r=>{r.key==="Enter"&&(a?r.metaKey:r.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let py=class uS{#t=null;#e=null;#n=new Map;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:r,viewport:u,structTreeLayer:d}){this.div=t,this.#t=e,this.#e=n,this.#i=d||null,this.page=r,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}async#s(t,e,n){const a=t.firstChild||t,r=a.id=`${ty}${e}`,u=await this.#i?.getAriaAttributes(r);if(u)for(const[d,f]of u)a.setAttribute(d,f);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,n=this.div;Ro(n,this.viewport);const a=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Qf,annotationStorage:t.annotationStorage||new sy,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const d=u.annotationType===Bn.POPUP;if(d){const y=a.get(u.id);if(!y)continue;r.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const f=sv.create(r);if(!f.isRenderable)continue;if(!d&&u.popupRef){const y=a.get(u.popupRef);y?y.push(f):a.set(u.popupRef,[f])}const g=f.render();u.hidden&&(g.style.visibility="hidden"),await this.#s(g,u.id,r.elements),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}this.#a()}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new Qf,parent:this};for(const a of t){a.borderStyle||=uS._defaultBorderStyle,n.data=a;const r=sv.create(n);if(!r.isRenderable)continue;const u=r.render();await this.#s(u,a.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Ro(e,{rotation:t.rotation}),this.#a(),e.hidden=!1}#a(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:r}=a;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):a.append(n);const u=this.#n.get(e);u&&(u._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,n),u._hasNoCanvas=!1):u.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Se(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Eh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const $g=/\r\n?|\n/g;class Wn extends qt{#t;#e="";#n=`${this.id}-editor`;#i=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Wn.prototype,e=r=>r.isEmpty(),n=El.TRANSLATE_SMALL,a=El.TRANSLATE_BIG;return Se(this,"_keyboardManager",new rp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=Wt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||Wn._defaultColor||qt._defaultLineColor,this.#s=t.fontSize||Wn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){qt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ee.FREETEXT_SIZE:Wn._defaultFontSize=e;break;case Ee.FREETEXT_COLOR:Wn._defaultColor=e;break}}updateParams(t,e){switch(t){case Ee.FREETEXT_SIZE:this.#a(e);break;case Ee.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[Ee.FREETEXT_SIZE,Wn._defaultFontSize],[Ee.FREETEXT_COLOR,Wn._defaultColor||qt._defaultLineColor]]}get propertiesToUpdate(){return[[Ee.FREETEXT_SIZE,this.#s],[Ee.FREETEXT_COLOR,this.#t]]}#a(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#s)*this.parentScale),this.#s=a,this.#h()},n=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ee.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){const e=a=>{this.#t=this.editorDiv.style.color=a},n=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ee.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Wn._internalPadding*t,-(Wn._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(Wn.#o(n)),e=n);return t.join(`
`)}#h(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:a,div:r}=this,u=r.style.display,d=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",a.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=u,r.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,e=this.#e=this.#r().trimEnd();if(t===e)return;const n=a=>{if(this.#e=a,!a){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Wn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,r]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[g,y]=this.pageDimensions,[S,_]=this.pageTranslation;let x,T;switch(this.rotation){case 0:x=t+(u[0]-S)/g,T=e+this.height-(u[1]-_)/y;break;case 90:x=t+(u[0]-S)/g,T=e-(u[1]-_)/y,[d,f]=[f,-d];break;case 180:x=t-this.width+(u[0]-S)/g,T=e-(u[1]-_)/y,[d,f]=[-d,-f];break;case 270:x=t+(u[0]-S-this.height*y)/g,T=e+(u[1]-_-this.width*g)/y,[d,f]=[-f,d];break}this.setAt(x*a,T*r,d,f)}else this._moveAfterPaste(t,e);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll($g,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const a=Wn.#f(e.getData("text")||"").replaceAll($g,`
`);if(!a)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const u=r.getRangeAt(0);if(!a.includes(`
`)){u.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:d,startOffset:f}=u,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const x=d.parentElement;if(y.push(d.nodeValue.slice(f).replaceAll($g,"")),x!==this.editorDiv){let T=g;for(const w of this.editorDiv.childNodes){if(w===x){T=y;continue}T.push(Wn.#o(w))}}g.push(d.nodeValue.slice(0,f).replaceAll($g,""))}else if(d===this.editorDiv){let x=g,T=0;for(const w of this.editorDiv.childNodes)T++===f&&(x=y),x.push(Wn.#o(w))}this.#e=`${g.join(`
`)}${a}${y.join(`
`)}`,this.#d();const S=new Range;let _=Math.sumPrecise(g.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const T=x.nodeValue.length;if(_<=T){S.setStart(x,_),S.setEnd(x,_);break}_-=T}r.removeAllRanges(),r.addRange(S)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#c(){return this.#e.replaceAll(""," ")}static#f(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(t,e,n){let a=null;if(t instanceof sS){const{data:{defaultAppearanceData:{fontSize:u,fontColor:d},rect:f,rotation:g,id:y,popupRef:S},textContent:_,textPosition:x,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;a=t={annotationType:Wt.FREETEXT,color:Array.from(d),fontSize:u,value:_.join(`
`),position:x,pageIndex:T-1,rect:f.slice(0),rotation:g,annotationElementId:y,id:y,deleted:!1,popupRef:S}}const r=await super.deserialize(t,e,n);return r.#s=t.fontSize,r.#t=Ut.makeHexColor(...t.color),r.#e=Wn.#f(t.value),r._initialData=a,r}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Wn._internalPadding*this.parentScale,n=this.getRect(e,e),a=qt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),r={annotationType:Wt.FREETEXT,color:a,fontSize:this.#s,value:this.#c(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(r.isCopy=!0,r):this.annotationElementId&&!this.#p(r)?null:(r.id=this.annotationElementId,r)}#p(t){const{value:e,fontSize:n,color:a,pageIndex:r}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((u,d)=>u!==a[d])||t.pageIndex!==r}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(this.deleted)return e;const{style:n}=e;n.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,n.color=this.#t,e.replaceChildren();for(const r of this.#e.split(`
`)){const u=document.createElement("div");u.append(r?document.createTextNode(r):document.createElement("br")),e.append(u)}const a=Wn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class zt{static PRECISION=1e-4;toSVGPath(){Je("Abstract method `toSVGPath` must be implemented.")}get box(){Je("Abstract getter `box` must be implemented.")}serialize(t,e){Je("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,r,u){u||=new Float32Array(t.length);for(let d=0,f=t.length;d<f;d+=2)u[d]=e+t[d]*a,u[d+1]=n+t[d+1]*r;return u}static _rescaleAndSwap(t,e,n,a,r,u){u||=new Float32Array(t.length);for(let d=0,f=t.length;d<f;d+=2)u[d]=e+t[d+1]*a,u[d+1]=n+t[d]*r;return u}static _translate(t,e,n,a){a||=new Float32Array(t.length);for(let r=0,u=t.length;r<u;r+=2)a[r]=e+t[r],a[r+1]=n+t[r+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,r){switch(r){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,r,u){return[(t+5*n)/6,(e+5*a)/6,(5*n+r)/6,(5*a+u)/6,(n+r)/2,(a+u)/2]}}class ku{#t;#e=[];#n;#i;#s=[];#a=new Float32Array(18);#l;#r;#h;#o;#d;#c;#f=[];static#p=8;static#g=2;static#u=ku.#p+ku.#g;constructor({x:t,y:e},n,a,r,u,d=0){this.#t=n,this.#c=r*a,this.#i=u,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=d,this.#o=ku.#p*a,this.#h=ku.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#m(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[n,a,r,u]=this.#t;return[(this.#l+(t[0]-e[0])/2-n)/r,(this.#r+(t[1]-e[1])/2-a)/u,(this.#l+(e[0]-t[0])/2-n)/r,(this.#r+(e[1]-t[1])/2-a)/u]}add({x:t,y:e}){this.#l=t,this.#r=e;const[n,a,r,u]=this.#t;let[d,f,g,y]=this.#a.subarray(8,12);const S=t-g,_=e-y,x=Math.hypot(S,_);if(x<this.#h)return!1;const T=x-this.#o,w=T/x,R=w*S,M=w*_;let O=d,N=f;d=g,f=y,g+=R,y+=M,this.#f?.push(t,e);const z=-M/T,P=R/T,j=z*this.#c,k=P*this.#c;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([g+j,y+k],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([g-j,y-k],16),isNaN(this.#a[6])?(this.#s.length===0&&(this.#a.set([d+j,f+k],2),this.#s.push(NaN,NaN,NaN,NaN,(d+j-n)/r,(f+k-a)/u),this.#a.set([d-j,f-k],14),this.#e.push(NaN,NaN,NaN,NaN,(d-j-n)/r,(f-k-a)/u)),this.#a.set([O,N,d,f,g,y],6),!this.isEmpty()):(this.#a.set([O,N,d,f,g,y],6),Math.abs(Math.atan2(N-f,O-d)-Math.atan2(M,R))<Math.PI/2?([d,f,g,y]=this.#a.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((d+g)/2-n)/r,((f+y)/2-a)/u),[d,f,O,N]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((O+d)/2-n)/r,((N+f)/2-a)/u),!0):([O,N,d,f,g,y]=this.#a.subarray(0,6),this.#s.push(((O+5*d)/6-n)/r,((N+5*f)/6-a)/u,((5*d+g)/6-n)/r,((5*f+y)/6-a)/u,((d+g)/2-n)/r,((f+y)/2-a)/u),[g,y,d,f,O,N]=this.#a.subarray(12,18),this.#e.push(((O+5*d)/6-n)/r,((N+5*f)/6-a)/u,((5*d+g)/6-n)/r,((5*f+y)/6-a)/u,((d+g)/2-n)/r,((f+y)/2-a)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#s,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#S(n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(n),n.join(" ")}#y(){const[t,e,n,a]=this.#t,[r,u,d,f]=this.#m();return`M${(this.#a[2]-t)/n} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/n} ${(this.#a[5]-e)/a} L${r} ${u} L${d} ${f} L${(this.#a[16]-t)/n} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/n} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#S(t){const[e,n,a,r]=this.#t,u=this.#a.subarray(4,6),d=this.#a.subarray(16,18),[f,g,y,S]=this.#m();t.push(`L${(u[0]-e)/a} ${(u[1]-n)/r} L${f} ${g} L${y} ${S} L${(d[0]-e)/a} ${(d[1]-n)/r}`)}newFreeDrawOutline(t,e,n,a,r,u){return new cS(t,e,n,a,r,u)}getOutlines(){const t=this.#s,e=this.#e,n=this.#a,[a,r,u,d]=this.#t,f=new Float32Array((this.#f?.length??0)+2);for(let S=0,_=f.length-2;S<_;S+=2)f[S]=(this.#f[S]-a)/u,f[S+1]=(this.#f[S+1]-r)/d;if(f[f.length-2]=(this.#l-a)/u,f[f.length-1]=(this.#r-r)/d,isNaN(n[6])&&!this.isEmpty())return this.#_(f);const g=new Float32Array(this.#s.length+24+this.#e.length);let y=t.length;for(let S=0;S<y;S+=2){if(isNaN(t[S])){g[S]=g[S+1]=NaN;continue}g[S]=t[S],g[S+1]=t[S+1]}y=this.#x(g,y);for(let S=e.length-6;S>=6;S-=6)for(let _=0;_<6;_+=2){if(isNaN(e[S+_])){g[y]=g[y+1]=NaN,y+=2;continue}g[y]=e[S+_],g[y+1]=e[S+_+1],y+=2}return this.#A(g,y),this.newFreeDrawOutline(g,f,this.#t,this.#d,this.#n,this.#i)}#_(t){const e=this.#a,[n,a,r,u]=this.#t,[d,f,g,y]=this.#m(),S=new Float32Array(36);return S.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-a)/u,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-a)/u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-a)/u,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-a)/u],0),this.newFreeDrawOutline(S,t,this.#t,this.#d,this.#n,this.#i)}#A(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){const n=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[r,u,d,f]=this.#t,[g,y,S,_]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/d,(n[1]-u)/f,NaN,NaN,NaN,NaN,g,y,NaN,NaN,NaN,NaN,S,_,NaN,NaN,NaN,NaN,(a[0]-r)/d,(a[1]-u)/f],e),e+=24}}class cS extends zt{#t;#e=new Float32Array(4);#n;#i;#s;#a;#l;constructor(t,e,n,a,r,u){super(),this.#l=t,this.#s=e,this.#t=n,this.#a=a,this.#n=r,this.#i=u,this.lastPoint=[NaN,NaN],this.#r(u);const[d,f,g,y]=this.#e;for(let S=0,_=t.length;S<_;S+=2)t[S]=(t[S]-d)/g,t[S+1]=(t[S+1]-f)/y;for(let S=0,_=e.length;S<_;S+=2)e[S]=(e[S]-d)/g,e[S+1]=(e[S+1]-f)/y}toSVGPath(){const t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,n=this.#l.length;e<n;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,a],r){const u=n-t,d=a-e;let f,g;switch(r){case 0:f=zt._rescale(this.#l,t,a,u,-d),g=zt._rescale(this.#s,t,a,u,-d);break;case 90:f=zt._rescaleAndSwap(this.#l,t,e,u,d),g=zt._rescaleAndSwap(this.#s,t,e,u,d);break;case 180:f=zt._rescale(this.#l,n,e,-u,d),g=zt._rescale(this.#s,n,e,-u,d);break;case 270:f=zt._rescaleAndSwap(this.#l,n,a,-u,-d),g=zt._rescaleAndSwap(this.#s,n,a,-u,-d);break}return{outline:Array.from(f),points:[Array.from(g)]}}#r(t){const e=this.#l;let n=e[4],a=e[5];const r=[n,a,n,a];let u=n,d=a;const f=t?Math.max:Math.min;for(let y=6,S=e.length;y<S;y+=6){const _=e[y+4],x=e[y+5];if(isNaN(e[y]))Ut.pointBoundingBox(_,x,r),d<x?(u=_,d=x):d===x&&(u=f(u,_));else{const T=[1/0,1/0,-1/0,-1/0];Ut.bezierBoundingBox(n,a,...e.slice(y,y+6),T),Ut.rectBoundingBox(...T,r),d<T[3]?(u=T[2],d=T[3]):d===T[3]&&(u=f(u,T[2]))}n=_,a=x}const g=this.#e;g[0]=r[0]-this.#n,g[1]=r[1]-this.#n,g[2]=r[2]-r[0]+2*this.#n,g[3]=r[3]-r[1]+2*this.#n,this.lastPoint=[u,d]}get box(){return this.#e}newOutliner(t,e,n,a,r,u=0){return new ku(t,e,n,a,r,u)}getNewOutline(t,e){const[n,a,r,u]=this.#e,[d,f,g,y]=this.#t,S=r*g,_=u*y,x=n*g+d,T=a*y+f,w=this.newOutliner({x:this.#s[0]*S+x,y:this.#s[1]*_+T},this.#t,this.#a,t,this.#i,e??this.#n);for(let R=2;R<this.#s.length;R+=2)w.add({x:this.#s[R]*S+x,y:this.#s[R+1]*_+T});return w.getOutlines()}}class w1{#t;#e;#n=[];#i=[];constructor(t,e=0,n=0,a=!0){const r=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x,y:T,width:w,height:R}of t){const M=Math.floor((x-e)/u)*u,O=Math.ceil((x+w+e)/u)*u,N=Math.floor((T-e)/u)*u,z=Math.ceil((T+R+e)/u)*u,P=[M,N,z,!0],j=[O,N,z,!1];this.#n.push(P,j),Ut.rectBoundingBox(M,N,O,z,r)}const d=r[2]-r[0]+2*n,f=r[3]-r[1]+2*n,g=r[0]-n,y=r[1]-n,S=this.#n.at(a?-1:-2),_=[S[0],S[2]];for(const x of this.#n){const[T,w,R]=x;x[0]=(T-g)/d,x[1]=(w-y)/f,x[2]=(R-y)/f}this.#t=new Float32Array([g,y,d,f]),this.#e=_}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#h(e)),this.#l(e)):(this.#r(e),t.push(...this.#h(e)));return this.#s(t)}#s(t){const e=[],n=new Set;for(const u of t){const[d,f,g]=u;e.push([d,f,u],[d,g,u])}e.sort((u,d)=>u[1]-d[1]||u[0]-d[0]);for(let u=0,d=e.length;u<d;u+=2){const f=e[u][2],g=e[u+1][2];f.push(g),g.push(f),n.add(f),n.add(g)}const a=[];let r;for(;n.size>0;){const u=n.values().next().value;let[d,f,g,y,S]=u;n.delete(u);let _=d,x=f;for(r=[d,g],a.push(r);;){let T;if(n.has(y))T=y;else if(n.has(S))T=S;else break;n.delete(T),[d,f,g,y,S]=T,_!==d&&(r.push(_,x,d,x===f?f:g),_=d),x=x===f?g:f}r.push(_,x)}return new xE(a,this.#t,this.#e)}#a(t){const e=this.#i;let n=0,a=e.length-1;for(;n<=a;){const r=n+a>>1,u=e[r][0];if(u===t)return r;u<t?n=r+1:a=r-1}return a+1}#l([,t,e]){const n=this.#a(t);this.#i.splice(n,0,[t,e])}#r([,t,e]){const n=this.#a(t);for(let a=n;a<this.#i.length;a++){const[r,u]=this.#i[a];if(r!==t)break;if(r===t&&u===e){this.#i.splice(a,1);return}}for(let a=n-1;a>=0;a--){const[r,u]=this.#i[a];if(r!==t)break;if(r===t&&u===e){this.#i.splice(a,1);return}}}#h(t){const[e,n,a]=t,r=[[e,n,a]],u=this.#a(a);for(let d=0;d<u;d++){const[f,g]=this.#i[d];for(let y=0,S=r.length;y<S;y++){const[,_,x]=r[y];if(!(g<=_||x<=f)){if(_>=f){if(x>g)r[y][1]=g;else{if(S===1)return[];r.splice(y,1),y--,S--}continue}r[y][2]=f,x>g&&r.push([e,g,x])}}}return r}}class xE extends zt{#t;#e;constructor(t,e,n){super(),this.#e=t,this.#t=e,this.lastPoint=n}toSVGPath(){const t=[];for(const e of this.#e){let[n,a]=e;t.push(`M${n} ${a}`);for(let r=2;r<e.length;r+=2){const u=e[r],d=e[r+1];u===n?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${u}`),n=u)}t.push("Z")}return t.join(" ")}serialize([t,e,n,a],r){const u=[],d=n-t,f=a-e;for(const g of this.#e){const y=new Array(g.length);for(let S=0;S<g.length;S+=2)y[S]=t+g[S]*d,y[S+1]=a-g[S+1]*f;u.push(y)}return u}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class R1 extends ku{newFreeDrawOutline(t,e,n,a,r,u){return new CE(t,e,n,a,r,u)}}class CE extends cS{newOutliner(t,e,n,a,r,u=0){return new R1(t,e,n,a,r,u)}}class Ca{#t=null;#e=null;#n;#i=null;#s=!1;#a=!1;#l=null;#r;#h=null;#o=null;#d;static#c=null;static get _keyboardManager(){return Se(this,"_keyboardManager",new rp([[["Escape","mac+Escape"],Ca.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ca.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ca.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ca.prototype._moveToPrevious],[["Home","mac+Home"],Ca.prototype._moveToBeginning],[["End","mac+End"],Ca.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#d=Ee.HIGHLIGHT_COLOR,this.#l=t):(this.#a=!0,this.#d=Ee.HIGHLIGHT_DEFAULT_COLOR),this.#o=t?._uiManager||e,this.#r=this.#o._eventBus,this.#n=t?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",Ca.#c||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#l&&(t.ariaControls=`${this.#l.id}_colorpicker_dropdown`);const e=this.#o._signal;t.addEventListener("click",this.#u.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#n,t.append(n),t}renderMainDropdown(){const t=this.#i=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),e=this.#o._signal;t.addEventListener("contextmenu",rs,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#l&&(t.id=`${this.#l.id}_colorpicker_dropdown`);for(const[n,a]of this.#o.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",a),r.title=n,r.setAttribute("data-l10n-id",Ca.#c[n]);const u=document.createElement("span");r.append(u),u.className="swatch",u.style.backgroundColor=a,r.ariaSelected=a===this.#n,r.addEventListener("click",this.#p.bind(this,a),{signal:e}),t.append(r)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#u(t);return}const e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#y){this.#u(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#u(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#u(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#u(t);return}this.#i.lastChild?.focus()}#g(t){Ca._keyboardManager.exec(this,t)}#u(t){if(this.#y){this.hideDropdown();return}if(this.#s=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#o.combinedSignal(this.#h)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#f();this.#t.append(e)}#m(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#o.highlightColors.values();for(const n of this.#i.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Pn extends qt{#t=null;#e=0;#n;#i=null;#s=null;#a=null;#l=null;#r=0;#h=null;#o=null;#d=null;#c=!1;#f=null;#p;#g=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Wt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Pn.prototype;return Se(this,"_keyboardManager",new rp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Pn._defaultColor,this.#m=t.thickness||Pn._defaultThickness,this.#p=t.opacity||Pn._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#c=!0,this.#S(t),this.#M()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#r=t.focusOffset,this.#v(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#c?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new w1(this.#n,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const e=new w1(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{lastPoint:n}=this.#a;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#S({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#o=t;const a=1.5;if(this.#a=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#i=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Pn.#E(this.#o.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:Pn.#E(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[r,u,d,f]=t.box;switch(this.rotation){case 0:this.x=r,this.y=u,this.width=d,this.height=f;break;case 90:{const[y,S]=this.parentDimensions;this.x=u,this.y=1-r,this.width=d*S/y,this.height=f*y/S;break}case 180:this.x=1-r,this.y=1-u,this.width=d,this.height=f;break;case 270:{const[y,S]=this.parentDimensions;this.x=1-u,this.y=r,this.width=d*S/y,this.height=f*y/S;break}}const{lastPoint:g}=this.#a;this.#f=[(g[0]-r)/d,(g[1]-u)/f]}static initialize(t,e){qt.initialize(t,e),Pn._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ee.HIGHLIGHT_DEFAULT_COLOR:Pn._defaultColor=e;break;case Ee.HIGHLIGHT_THICKNESS:Pn._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Ee.HIGHLIGHT_COLOR:this.#_(e);break;case Ee.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Ee.HIGHLIGHT_DEFAULT_COLOR,Pn._defaultColor],[Ee.HIGHLIGHT_THICKNESS,Pn._defaultThickness]]}get propertiesToUpdate(){return[[Ee.HIGHLIGHT_COLOR,this.color||Pn._defaultColor],[Ee.HIGHLIGHT_THICKNESS,this.#m||Pn._defaultThickness],[Ee.HIGHLIGHT_FREE,this.#c]]}#_(t){const e=(r,u)=>{this.color=r,this.#p=u,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:r,"fill-opacity":u}}),this.#s?.updateColor(r)},n=this.color,a=this.#p;this.addCommands({cmd:e.bind(this,t,Pn._defaultOpacity),undo:e.bind(this,n,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ee.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#A(t){const e=this.#m,n=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ee.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Ca({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#O())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#w(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#w():t&&(this.#M(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#c)return;this.#S({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}#w(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#p},rootClass:{highlight:!0,free:this.#c},path:{d:this.#o.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#c},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#c),this.#h&&(this.#h.style.clipPath=this.#i))}static#E([t,e,n,a],r){switch(r){case 90:return[1-e-a,t,a,n];case 180:return[1-t-n,1-e-a,n,a];case 270:return[e,1-t-n,a,n]}return[t,e,n,a]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#c?(t=(t-this.rotation+360)%360,n=Pn.#E(this.#o.box,t)):n=Pn.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:Pn.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#c?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#h=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i;const[n,a]=this.parentDimensions;return this.setDims(this.width*n,this.height*a),Hb(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(t){Pn._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#l,this.#r)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#c||this.#C(!1))}get _mustFixPosition(){return!this.#c}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#O(){return this.#c?this.rotation:0}#N(){if(this.#c)return null;const[t,e]=this.pageDimensions,[n,a]=this.pageTranslation,r=this.#n,u=new Float32Array(r.length*8);let d=0;for(const{x:f,y:g,width:y,height:S}of r){const _=f*t+n,x=(1-g)*e+a;u[d]=u[d+4]=_,u[d+1]=u[d+3]=x,u[d+2]=u[d+6]=_+y*t,u[d+5]=u[d+7]=x-S*e,d+=8}return u}#L(t){return this.#o.serialize(t,this.#O())}static startHighlighting(t,e,{target:n,x:a,y:r}){const{x:u,y:d,width:f,height:g}=n.getBoundingClientRect(),y=new AbortController,S=t.combinedSignal(y),_=x=>{y.abort(),this.#T(t,x)};window.addEventListener("blur",_,{signal:S}),window.addEventListener("pointerup",_,{signal:S}),window.addEventListener("pointerdown",Hn,{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",rs,{signal:S}),n.addEventListener("pointermove",this.#k.bind(this,t),{signal:S}),this._freeHighlight=new R1({x:a,y:r},[u,d,f,g],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#k(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#T(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let a=null;if(t instanceof lS){const{data:{quadPoints:T,rect:w,rotation:R,id:M,color:O,opacity:N,popupRef:z},parent:{page:{pageNumber:P}}}=t;a=t={annotationType:Wt.HIGHLIGHT,color:Array.from(O),opacity:N,quadPoints:T,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:R,annotationElementId:M,id:M,deleted:!1,popupRef:z}}else if(t instanceof fy){const{data:{inkLists:T,rect:w,rotation:R,id:M,color:O,borderStyle:{rawWidth:N},popupRef:z},parent:{page:{pageNumber:P}}}=t;a=t={annotationType:Wt.HIGHLIGHT,color:Array.from(O),thickness:N,inkLists:T,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:R,annotationElementId:M,id:M,deleted:!1,popupRef:z}}const{color:r,quadPoints:u,inkLists:d,opacity:f}=t,g=await super.deserialize(t,e,n);g.color=Ut.makeHexColor(...r),g.#p=f||1,d&&(g.#m=t.thickness),g._initialData=a;const[y,S]=g.pageDimensions,[_,x]=g.pageTranslation;if(u){const T=g.#n=[];for(let w=0;w<u.length;w+=8)T.push({x:(u[w]-_)/y,y:1-(u[w+1]-x)/S,width:(u[w+2]-u[w])/y,height:(u[w+1]-u[w+5])/S});g.#v(),g.#M(),g.rotate(g.rotation)}else if(d){g.#c=!0;const T=d[0],w={x:T[0]-_,y:S-(T[1]-x)},R=new R1(w,[0,0,y,S],1,g.#m/2,!0,.001);for(let N=0,z=T.length;N<z;N+=2)w.x=T[N]-_,w.y=S-(T[N+1]-x),R.add(w);const{id:M,clipPathId:O}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:R.toSVGPath()}},!0,!0);g.#S({highlightOutlines:R.getOutlines(),highlightId:M,clipPathId:O}),g.#M(),g.rotate(g.parentRotation)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),n=qt._colorManager.convert(this.color),a={annotationType:Wt.HIGHLIGHT,color:n,opacity:this.#p,thickness:this.#m,quadPoints:this.#N(),outlines:this.#L(e),pageIndex:this.pageIndex,rect:e,rotation:this.#O(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(a)?null:(a.id=this.annotationElementId,a)}#b(t){const{color:e}=this._initialData;return t.color.some((n,a)=>n!==e[a])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class hS{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Je("Not implemented")}}class Xt extends qt{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#s=null;static#a=NaN;static#l=null;static#r=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#o(t),this.#f())}#o({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:n}=e.drawLayer.draw(Xt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[a,r]of Object.entries(e))n.has(a)?Object.assign(t[a],r):t[a]=r;return t}static getDefaultDrawingOptions(t){Je("Not implemented")}static get typesMap(){Je("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Xt.#n.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,a]of this.typesMap)t.push([n,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,a]of this.constructor.typesMap)t.push([n,e[a]]);return t}_updateProperty(t,e,n){const a=this._drawingOptions,r=a[e],u=d=>{a.updateProperty(e,d);const f=this.#t.updateProperty(e,d);f&&this.#u(f),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:u.bind(this,n),undo:u.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Xt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Xt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Xt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#c(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#c()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#c(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#p([t,e,n,a]){const{parentDimensions:[r,u],rotation:d}=this;switch(d){case 90:return[e,1-t,n*(u/r),a*(r/u)];case 180:return[1-t,1-e,n,a];case 270:return[1-e,t,n*(u/r),a*(r/u)];default:return[t,e,n,a]}}#g(){const{x:t,y:e,width:n,height:a,parentDimensions:[r,u],rotation:d}=this;switch(d){case 90:return[1-e,t,n*(r/u),a*(u/r)];case 180:return[1-t,1-e,n,a];case 270:return[e,1-t,n*(r/u),a*(u/r)];default:return[t,e,n,a]}}#u(t){if([this.x,this.y,this.width,this.height]=this.#p(t),this.div){this.fixAndSetPosition();const[e,n]=this.parentDimensions;this.setDims(this.width*e,this.height*n)}this._onResized()}#m(){const{x:t,y:e,width:n,height:a,rotation:r,parentRotation:u,parentDimensions:[d,f]}=this;switch((r*4+u)/90){case 1:return[1-e-a,t,a,n];case 2:return[1-t-n,1-e-a,n,a];case 3:return[e,1-t-n,a,n];case 4:return[t,e-n*(d/f),a*(f/d),n*(d/f)];case 5:return[1-e,t,n*(d/f),a*(f/d)];case 6:return[1-t-a*(f/d),1-e,a*(f/d),n*(d/f)];case 7:return[e-n*(d/f),1-t-a*(f/d),n*(d/f),a*(f/d)];case 8:return[t-n,e-a,n,a];case 9:return[1-e,t-n,a,n];case 10:return[1-t,1-e,n,a];case 11:return[e-a,1-t,a,n];case 12:return[t-a*(f/d),e,a*(f/d),n*(d/f)];case 13:return[1-e-n*(d/f),t-a*(f/d),n*(d/f),a*(f/d)];case 14:return[1-t,1-e-n*(d/f),a*(f/d),n*(d/f)];case 15:return[e,1-t,n*(d/f),a*(f/d)];default:return[t,e,n,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Xt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const a=document.createElement("div");n.append(a),a.setAttribute("aria-hidden","true"),a.className="internal";const[r,u]=this.parentDimensions;return this.setDims(this.width*r,this.height*u),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,a,r){Je("Not implemented")}static startDrawing(t,e,n,a){const{target:r,offsetX:u,offsetY:d,pointerId:f,pointerType:g}=a;if(Xt.#l&&Xt.#l!==g)return;const{viewport:{rotation:y}}=t,{width:S,height:_}=r.getBoundingClientRect(),x=Xt.#i=new AbortController,T=t.combinedSignal(x);if(Xt.#a||=f,Xt.#l??=g,window.addEventListener("pointerup",w=>{Xt.#a===w.pointerId?this._endDraw(w):Xt.#r?.delete(w.pointerId)},{signal:T}),window.addEventListener("pointercancel",w=>{Xt.#a===w.pointerId?this._currentParent.endDrawingSession():Xt.#r?.delete(w.pointerId)},{signal:T}),window.addEventListener("pointerdown",w=>{Xt.#l===w.pointerType&&((Xt.#r||=new Set).add(w.pointerId),Xt.#n.isCancellable()&&(Xt.#n.removeLastElement(),Xt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:T}),window.addEventListener("contextmenu",rs,{signal:T}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:T}),r.addEventListener("touchmove",w=>{w.timeStamp===Xt.#h&&Hn(w)},{signal:T}),t.toggleDrawing(),e._editorUndoBar?.hide(),Xt.#n){t.drawLayer.updateProperties(this._currentDrawId,Xt.#n.startNew(u,d,S,_,y));return}e.updateUIForDefaultProperties(this),Xt.#n=this.createDrawerInstance(u,d,S,_,y),Xt.#s=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Xt.#s.toSVGProperties(),Xt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Xt.#h=-1,!Xt.#n)return;const{offsetX:e,offsetY:n,pointerId:a}=t;if(Xt.#a===a){if(Xt.#r?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Xt.#n.add(e,n)),Xt.#h=t.timeStamp,Hn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Xt.#n=null,Xt.#s=null,Xt.#l=null,Xt.#h=NaN),Xt.#i&&(Xt.#i.abort(),Xt.#i=null,Xt.#a=NaN,Xt.#r=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Xt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Xt.#n,a=this._currentDrawId,r=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,n.setLastElement(r))},undo:()=>{e.drawLayer.updateProperties(a,n.removeLastElement())},mustExec:!1,type:Ee.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ee.DRAW_STEP),!Xt.#n.isEmpty()){const{pageDimensions:[n,a],scale:r}=e,u=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Xt.#n.getOutlines(n*r,a*r,r,this._INNER_MARGIN),drawingOptions:Xt.#s,mustBeCommitted:!t});return this._cleanup(!0),u}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,a,r,u){Je("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:a,pageHeight:r,pageX:u,pageY:d}}=e.viewport,f=this.deserializeDraw(u,d,a,r,this._INNER_MARGIN,t),g=await super.deserialize(t,e,n);return g.createDrawingOptions(t),g.#o({drawOutlines:f}),g.#f(),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[e,n]=this.pageTranslation,[a,r]=this.pageDimensions;return this.#t.serialize([e,n,a,r],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class wE{#t=new Float64Array(6);#e;#n;#i;#s;#a;#l="";#r=0;#h=new up;#o;#d;constructor(t,e,n,a,r,u){this.#o=n,this.#d=a,this.#i=r,this.#s=u,[t,e]=this.#c(t,e);const d=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#n=[{line:d,points:this.#a}],this.#t.set(d,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#c(t,e){return zt._normalizePoint(t,e,this.#o,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#c(t,e);const[n,a,r,u]=this.#t.subarray(2,6),d=t-r,f=e-u;return Math.hypot(this.#o*d,this.#d*f)<=2?null:(this.#a.push(t,e),isNaN(n)?(this.#t.set([r,u,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,a,r,u,t,e],0),this.#e.push(...zt.createBezierPoints(n,a,r,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,r){this.#o=n,this.#d=a,this.#i=r,[t,e]=this.#c(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const d=this.#n.at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),this.#n.push({line:u,points:this.#a}),this.#t.set(u,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#a=t.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#h.removeLastElement();this.#n.pop(),this.#l="";for(let t=0,e=this.#n.length;t<e;t++){const{line:n,points:a}=this.#n[t];this.#e=n,this.#a=a,this.#r=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const t=zt.svgRound(this.#e[4]),e=zt.svgRound(this.#e[5]);if(this.#a.length===2)return this.#l=`${this.#l} M ${t} ${e} Z`,this.#l;if(this.#a.length<=6){const a=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,a)} M ${t} ${e}`,this.#r=6}if(this.#a.length===4){const a=zt.svgRound(this.#e[10]),r=zt.svgRound(this.#e[11]);return this.#l=`${this.#l} L ${a} ${r}`,this.#r=12,this.#l}const n=[];this.#r===0&&(n.push(`M ${t} ${e}`),this.#r=6);for(let a=this.#r,r=this.#e.length;a<r;a+=6){const[u,d,f,g,y,S]=this.#e.slice(a,a+6).map(zt.svgRound);n.push(`C${u} ${d} ${f} ${g} ${y} ${S}`)}return this.#l+=n.join(" "),this.#r=this.#e.length,this.#l}getOutlines(t,e,n,a){const r=this.#n.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#h.build(this.#n,t,e,n,this.#i,this.#s,a),this.#t=null,this.#e=null,this.#n=null,this.#l=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class up extends zt{#t;#e=0;#n;#i;#s;#a;#l;#r;#h;build(t,e,n,a,r,u,d){this.#s=e,this.#a=n,this.#l=a,this.#r=r,this.#h=u,this.#n=d??0,this.#i=t,this.#c()}get thickness(){return this.#h}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${zt.svgRound(e[4])} ${zt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${zt.svgRound(e[10])} ${zt.svgRound(e[11])}`);continue}for(let n=6,a=e.length;n<a;n+=6){const[r,u,d,f,g,y]=e.subarray(n,n+6).map(zt.svgRound);t.push(`C${r} ${u} ${d} ${f} ${g} ${y}`)}}return t.join("")}serialize([t,e,n,a],r){const u=[],d=[],[f,g,y,S]=this.#d();let _,x,T,w,R,M,O,N,z;switch(this.#r){case 0:z=zt._rescale,_=t,x=e+a,T=n,w=-a,R=t+f*n,M=e+(1-g-S)*a,O=t+(f+y)*n,N=e+(1-g)*a;break;case 90:z=zt._rescaleAndSwap,_=t,x=e,T=n,w=a,R=t+g*n,M=e+f*a,O=t+(g+S)*n,N=e+(f+y)*a;break;case 180:z=zt._rescale,_=t+n,x=e,T=-n,w=a,R=t+(1-f-y)*n,M=e+g*a,O=t+(1-f)*n,N=e+(g+S)*a;break;case 270:z=zt._rescaleAndSwap,_=t+n,x=e+a,T=-n,w=-a,R=t+(1-g-S)*n,M=e+(1-f-y)*a,O=t+(1-g)*n,N=e+(1-f)*a;break}for(const{line:P,points:j}of this.#i)u.push(z(P,_,x,T,w,r?new Array(P.length):null)),d.push(z(j,_,x,T,w,r?new Array(j.length):null));return{lines:u,points:d,rect:[R,M,O,N]}}static deserialize(t,e,n,a,r,{paths:{lines:u,points:d},rotation:f,thickness:g}){const y=[];let S,_,x,T,w;switch(f){case 0:w=zt._rescale,S=-t/n,_=e/a+1,x=1/n,T=-1/a;break;case 90:w=zt._rescaleAndSwap,S=-e/a,_=-t/n,x=1/a,T=1/n;break;case 180:w=zt._rescale,S=t/n+1,_=-e/a,x=-1/n,T=1/a;break;case 270:w=zt._rescaleAndSwap,S=e/a+1,_=t/n+1,x=-1/a,T=-1/n;break}if(!u){u=[];for(const M of d){const O=M.length;if(O===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(O===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const N=new Float32Array(3*(O-2));u.push(N);let[z,P,j,k]=M.subarray(0,4);N.set([NaN,NaN,NaN,NaN,z,P],0);for(let Y=4;Y<O;Y+=2){const J=M[Y],lt=M[Y+1];N.set(zt.createBezierPoints(z,P,j,k,J,lt),(Y-2)*3),[z,P,j,k]=[j,k,J,lt]}}}for(let M=0,O=u.length;M<O;M++)y.push({line:w(u[M].map(N=>N??NaN),S,_,x,T),points:w(d[M].map(N=>N??NaN),S,_,x,T)});const R=new this.prototype.constructor;return R.build(y,n,a,1,f,g,r),R}#o(t=this.#h){const e=this.#n+t/2*this.#l;return this.#r%180===0?[e/this.#s,e/this.#a]:[e/this.#a,e/this.#s]}#d(){const[t,e,n,a]=this.#t,[r,u]=this.#o(0);return[t+r,e+u,n-2*r,a-2*u]}#c(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#i){if(a.length<=12){for(let d=4,f=a.length;d<f;d+=6)Ut.pointBoundingBox(a[d],a[d+1],t);continue}let r=a[4],u=a[5];for(let d=6,f=a.length;d<f;d+=6){const[g,y,S,_,x,T]=a.subarray(d,d+6);Ut.bezierBoundingBox(r,u,g,y,S,_,x,T,t),r=x,u=T}}const[e,n]=this.#o();t[0]=Hi(t[0]-e,0,1),t[1]=Hi(t[1]-n,0,1),t[2]=Hi(t[2]+e,0,1),t[3]=Hi(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#o();this.#h=t;const[a,r]=this.#o(),[u,d]=[a-e,r-n],f=this.#t;return f[0]-=u,f[1]-=d,f[2]+=2*u,f[3]+=2*d,f}updateParentDimensions([t,e],n){const[a,r]=this.#o();this.#s=t,this.#a=e,this.#l=n;const[u,d]=this.#o(),f=u-a,g=d-r,y=this.#t;return y[0]-=f,y[1]-=g,y[2]+=2*f,y[3]+=2*g,y}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(zt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${zt.svgRound(t)} ${zt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,a=0,r=0,u=0,d=0,f=0;switch(this.#e){case 90:a=e/t,r=-t/e,d=t;break;case 180:n=-1,u=-1,d=t,f=e;break;case 270:a=-e/t,r=t/e,f=e;break;default:return""}return`matrix(${n} ${a} ${r} ${u} ${zt.svgRound(d)} ${zt.svgRound(f)})`}getPathResizingSVGProperties([t,e,n,a]){const[r,u]=this.#o(),[d,f,g,y]=this.#t;if(Math.abs(g-r)<=zt.PRECISION||Math.abs(y-u)<=zt.PRECISION){const w=t+n/2-(d+g/2),R=e+a/2-(f+y/2);return{path:{"transform-origin":`${zt.svgRound(t)} ${zt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${R})`}}}const S=(n-2*r)/(g-2*r),_=(a-2*u)/(y-2*u),x=g/n,T=y/a;return{path:{"transform-origin":`${zt.svgRound(d)} ${zt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${x} ${T}) translate(${zt.svgRound(r)} ${zt.svgRound(u)}) scale(${S} ${_}) translate(${zt.svgRound(-r)} ${zt.svgRound(-u)})`}}}getPathResizedSVGProperties([t,e,n,a]){const[r,u]=this.#o(),d=this.#t,[f,g,y,S]=d;if(d[0]=t,d[1]=e,d[2]=n,d[3]=a,Math.abs(y-r)<=zt.PRECISION||Math.abs(S-u)<=zt.PRECISION){const R=t+n/2-(f+y/2),M=e+a/2-(g+S/2);for(const{line:O,points:N}of this.#i)zt._translate(O,R,M,O),zt._translate(N,R,M,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${zt.svgRound(t)} ${zt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _=(n-2*r)/(y-2*r),x=(a-2*u)/(S-2*u),T=-_*(f+r)+t+r,w=-x*(g+u)+e+u;if(_!==1||x!==1||T!==0||w!==0)for(const{line:R,points:M}of this.#i)zt._rescale(R,T,w,_,x,R),zt._rescale(M,T,w,_,x,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${zt.svgRound(t)} ${zt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[a,r]=n,u=this.#t,d=t-u[0],f=e-u[1];if(this.#s===a&&this.#a===r)for(const{line:g,points:y}of this.#i)zt._translate(g,d,f,g),zt._translate(y,d,f,y);else{const g=this.#s/a,y=this.#a/r;this.#s=a,this.#a=r;for(const{line:S,points:_}of this.#i)zt._rescale(S,d,f,g,y,S),zt._rescale(_,d,f,g,y,_);u[2]*=g,u[3]*=y}return u[0]=t,u[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${zt.svgRound(t)} ${zt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${zt.svgRound(t[0])} ${zt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class k0 extends hS{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:qt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new k0(this._viewParameters);return t.updateAll(this),t}}class gy extends Xt{static _type="ink";static _editorType=Wt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){qt.initialize(t,e),this._defaultDrawingOptions=new k0(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Se(this,"typesMap",new Map([[Ee.INK_THICKNESS,"stroke-width"],[Ee.INK_COLOR,"stroke"],[Ee.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,a,r){return new wE(t,e,n,a,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,a,r,u){return up.deserialize(t,e,n,a,r,u)}static async deserialize(t,e,n){let a=null;if(t instanceof fy){const{data:{inkLists:u,rect:d,rotation:f,id:g,color:y,opacity:S,borderStyle:{rawWidth:_},popupRef:x},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:Wt.INK,color:Array.from(y),thickness:_,opacity:S,paths:{points:u},boxes:null,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:x}}const r=await super.deserialize(t,e,n);return r._initialData=a,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=gy.getDefaultDrawingOptions({stroke:Ut.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":u,"stroke-width":d}}=this,f={annotationType:Wt.INK,color:qt._colorManager.convert(r),opacity:u,thickness:d,paths:{lines:e,points:n},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(f.isCopy=!0,f):this.annotationElementId&&!this.#t(f)?null:(f.id=this.annotationElementId,f)}#t(t){const{color:e,thickness:n,opacity:a,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((u,d)=>u!==e[d])||t.thickness!==n||t.opacity!==a||t.pageIndex!==r}renderAnnotationElement(t){const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class M1 extends up{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const t0=8,xf=3;class Uu{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,n,a,r,u,d){const f=this.#e(n,a,r,u);for(let g=0;g<8;g++){const y=(-g+f-d+16)%8,S=this.#n[2*y],_=this.#n[2*y+1];if(t[(n+S)*e+(a+_)]!==0)return y}return-1}static#s(t,e,n,a,r,u,d){const f=this.#e(n,a,r,u);for(let g=0;g<8;g++){const y=(g+f+d+16)%8,S=this.#n[2*y],_=this.#n[2*y+1];if(t[(n+S)*e+(a+_)]!==0)return y}return-1}static#a(t,e,n,a){const r=t.length,u=new Int32Array(r);for(let y=0;y<r;y++)u[y]=t[y]<=a?1:0;for(let y=1;y<n-1;y++)u[y*e]=u[y*e+e-1]=0;for(let y=0;y<e;y++)u[y]=u[e*n-1-y]=0;let d=1,f;const g=[];for(let y=1;y<n-1;y++){f=1;for(let S=1;S<e-1;S++){const _=y*e+S,x=u[_];if(x===0)continue;let T=y,w=S;if(x===1&&u[_-1]===0)d+=1,w-=1;else if(x>=1&&u[_+1]===0)d+=1,w+=1,x>1&&(f=x);else{x!==1&&(f=Math.abs(x));continue}const R=[S,y],M=w===S+1,O={isHole:M,points:R,id:d,parent:0};g.push(O);let N;for(const ct of g)if(ct.id===f){N=ct;break}N?N.isHole?O.parent=M?N.parent:f:O.parent=M?f:N.parent:O.parent=M?f:0;const z=this.#i(u,e,y,S,T,w,0);if(z===-1){u[_]=-d,u[_]!==1&&(f=Math.abs(u[_]));continue}let P=this.#n[2*z],j=this.#n[2*z+1];const k=y+P,Y=S+j;T=k,w=Y;let J=y,lt=S;for(;;){const ct=this.#s(u,e,J,lt,T,w,1);P=this.#n[2*ct],j=this.#n[2*ct+1];const gt=J+P,St=lt+j;R.push(St,gt);const dt=J*e+lt;if(u[dt+1]===0?u[dt]=-d:u[dt]===1&&(u[dt]=d),gt===y&&St===S&&J===k&&lt===Y){u[_]!==1&&(f=Math.abs(u[_]));break}else T=J,w=lt,J=gt,lt=St}}}return g}static#l(t,e,n,a){if(n-e<=4){for(let k=e;k<n-2;k+=2)a.push(t[k],t[k+1]);return}const r=t[e],u=t[e+1],d=t[n-4]-r,f=t[n-3]-u,g=Math.hypot(d,f),y=d/g,S=f/g,_=y*u-S*r,x=f/d,T=1/g,w=Math.atan(x),R=Math.cos(w),M=Math.sin(w),O=T*(Math.abs(R)+Math.abs(M)),N=T*(1-O+O**2),z=Math.max(Math.atan(Math.abs(M+R)*N),Math.atan(Math.abs(M-R)*N));let P=0,j=e;for(let k=e+2;k<n-2;k+=2){const Y=Math.abs(_-y*t[k+1]+S*t[k]);Y>P&&(j=k,P=Y)}P>(g*z)**2?(this.#l(t,e,j+2,a),this.#l(t,j,n,a)):a.push(r,u)}static#r(t){const e=[],n=t.length;return this.#l(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#h(t,e,n,a,r,u){const d=new Float32Array(u**2),f=-2*a**2,g=u>>1;for(let w=0;w<u;w++){const R=(w-g)**2;for(let M=0;M<u;M++)d[w*u+M]=Math.exp((R+(M-g)**2)/f)}const y=new Float32Array(256),S=-2*r**2;for(let w=0;w<256;w++)y[w]=Math.exp(w**2/S);const _=t.length,x=new Uint8Array(_),T=new Uint32Array(256);for(let w=0;w<n;w++)for(let R=0;R<e;R++){const M=w*e+R,O=t[M];let N=0,z=0;for(let j=0;j<u;j++){const k=w+j-g;if(!(k<0||k>=n))for(let Y=0;Y<u;Y++){const J=R+Y-g;if(J<0||J>=e)continue;const lt=t[k*e+J],ct=d[j*u+Y]*y[Math.abs(lt-O)];N+=lt*ct,z+=ct}}const P=x[M]=Math.round(N/z);T[P]++}return[x,T]}static#o(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,r=1/0;for(let d=0,f=n.length;d<f;d++){if(t[(d<<2)+3]===0){a=n[d]=255;continue}const y=n[d]=t[d<<2];y>a&&(a=y),y<r&&(r=y)}const u=255/(a-r);for(let d=0;d<e;d++)n[d]=(n[d]-r)*u;return n}static#c(t){let e,n=-1/0,a=-1/0;const r=t.findIndex(f=>f!==0);let u=r,d=r;for(e=r;e<256;e++){const f=t[e];f>n&&(e-u>a&&(a=e-u,d=e-1),n=f,u=e)}for(e=d-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:a}=t,{maxDim:r}=this.#t;let u=n,d=a;if(n>r||a>r){let _=n,x=a,T=Math.log2(Math.max(n,a)/r);const w=Math.floor(T);T=T===w?w-1:w;for(let M=0;M<T;M++){u=Math.ceil(_/2),d=Math.ceil(x/2);const O=new OffscreenCanvas(u,d);O.getContext("2d").drawImage(t,0,0,_,x,0,0,u,d),_=u,x=d,t!==e&&t.close(),t=O.transferToImageBitmap()}const R=Math.min(r/u,r/d);u=Math.round(u*R),d=Math.round(d*R)}const g=new OffscreenCanvas(u,d).getContext("2d",{willReadFrequently:!0});g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,u,d);const y=g.getImageData(0,0,u,d).data;return[this.#d(y),u,d]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},r,u,d,f){let g=new OffscreenCanvas(1,1),y=g.getContext("2d",{alpha:!1});const S=200,_=y.font=`${n} ${a} ${S}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:T,actualBoundingBoxAscent:w,actualBoundingBoxDescent:R,fontBoundingBoxAscent:M,fontBoundingBoxDescent:O,width:N}=y.measureText(t),z=1.5,P=Math.ceil(Math.max(Math.abs(x)+Math.abs(T)||0,N)*z),j=Math.ceil(Math.max(Math.abs(w)+Math.abs(R)||S,Math.abs(M)+Math.abs(O)||S)*z);g=new OffscreenCanvas(P,j),y=g.getContext("2d",{alpha:!0,willReadFrequently:!0}),y.font=_,y.filter="grayscale(1)",y.fillStyle="white",y.fillRect(0,0,P,j),y.fillStyle="black",y.fillText(t,P*(z-1)/2,j*(3-z)/2);const k=this.#d(y.getImageData(0,0,P,j).data),Y=this.#o(k),J=this.#c(Y),lt=this.#a(k,P,j,J);return this.processDrawnLines({lines:{curves:lt,width:P,height:j},pageWidth:r,pageHeight:u,rotation:d,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,r){const[u,d,f]=this.#f(t),[g,y]=this.#h(u,d,f,Math.hypot(d,f)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),S=this.#c(y),_=this.#a(g,d,f,S);return this.processDrawnLines({lines:{curves:_,width:d,height:f},pageWidth:e,pageHeight:n,rotation:a,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:r,mustSmooth:u,areContours:d}){a%180!==0&&([e,n]=[n,e]);const{curves:f,width:g,height:y}=t,S=t.thickness??0,_=[],x=Math.min(e/g,n/y),T=x/e,w=x/n,R=[];for(const{points:O}of f){const N=u?this.#r(O):O;if(!N)continue;R.push(N);const z=N.length,P=new Float32Array(z),j=new Float32Array(3*(z===2?2:z-2));if(_.push({line:j,points:P}),z===2){P[0]=N[0]*T,P[1]=N[1]*w,j.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[k,Y,J,lt]=N;k*=T,Y*=w,J*=T,lt*=w,P.set([k,Y,J,lt],0),j.set([NaN,NaN,NaN,NaN,k,Y],0);for(let ct=4;ct<z;ct+=2){const gt=P[ct]=N[ct]*T,St=P[ct+1]=N[ct+1]*w;j.set(zt.createBezierPoints(k,Y,J,lt,gt,St),(ct-2)*3),[k,Y,J,lt]=[J,lt,gt,St]}}if(_.length===0)return null;const M=d?new M1:new up;return M.build(_,e,n,1,a,d?0:S,r),{outline:M,newCurves:R,areContours:d,thickness:S,width:g,height:y}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:r}){let u=1/0,d=-1/0,f=0;for(const N of t){f+=N.length;for(let z=2,P=N.length;z<P;z++){const j=N[z]-N[z-2];u=Math.min(u,j),d=Math.max(d,j)}}let g;u>=-128&&d<=127?g=Int8Array:u>=-32768&&d<=32767?g=Int16Array:g=Int32Array;const y=t.length,S=t0+xf*y,_=new Uint32Array(S);let x=0;_[x++]=S*Uint32Array.BYTES_PER_ELEMENT+(f-2*y)*g.BYTES_PER_ELEMENT,_[x++]=0,_[x++]=a,_[x++]=r,_[x++]=e?0:1,_[x++]=Math.max(0,Math.floor(n??0)),_[x++]=y,_[x++]=g.BYTES_PER_ELEMENT;for(const N of t)_[x++]=N.length-2,_[x++]=N[0],_[x++]=N[1];const T=new CompressionStream("deflate-raw"),w=T.writable.getWriter();await w.ready,w.write(_);const R=g.prototype.constructor;for(const N of t){const z=new R(N.length-2);for(let P=2,j=N.length;P<j;P++)z[P-2]=N[P]-N[P-2];w.write(z)}w.close();const M=await new Response(T.readable).arrayBuffer(),O=new Uint8Array(M);return Lb(O)}static async decompressSignature(t){try{const e=i4(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),r=a.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let u=null,d=0;for await(const N of n)u||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),u.set(N,d),d+=N.length;const f=new Uint32Array(u.buffer,0,u.length>>2),g=f[1];if(g!==0)throw new Error(`Invalid version: ${g}`);const y=f[2],S=f[3],_=f[4]===0,x=f[5],T=f[6],w=f[7],R=[],M=(t0+xf*T)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(w){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(u.buffer,M);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(u.buffer,M);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(u.buffer,M);break}d=0;for(let N=0;N<T;N++){const z=f[xf*N+t0],P=new Float32Array(z+2);R.push(P);for(let j=0;j<xf-1;j++)P[j]=f[xf*N+t0+j+1];for(let j=0;j<z;j++)P[j+2]=P[j]+O[d++]}return{areContours:_,thickness:x,outlines:R,width:y,height:S}}catch(e){return te(`decompressSignature: ${e}`),null}}}class my extends hS{constructor(){super(),super.updateProperties({fill:qt._defaultLineColor,"stroke-width":0})}clone(){const t=new my;return t.updateAll(this),t}}class yy extends k0{constructor(t){super(t),super.updateProperties({stroke:qt._defaultLineColor,"stroke-width":1})}clone(){const t=new yy(this._viewParameters);return t.updateAll(this),t}}class Nr extends Xt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=Wt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){qt.initialize(t,e),this._defaultDrawingOptions=new my,this._defaultDrawnSignatureOptions=new yy(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Se(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:a,mustSmooth:r,areContours:u,description:d,uuid:f,heightInPage:g}=this.#n,{rawDims:{pageWidth:y,pageHeight:S},rotation:_}=this.parent.viewport,x=Uu.processDrawnLines({lines:a,pageWidth:y,pageHeight:S,rotation:_,innerMargin:Nr._INNER_MARGIN,mustSmooth:r,areContours:u});this.addSignature(x,g,d,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:a,height:r}=this.#n,u=Math.max(a,r),d=Uu.processDrawnLines({lines:{curves:t.map(f=>({points:f})),thickness:n,width:a,height:r},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,a){const{x:r,y:u}=this,{outline:d}=this.#n=t;this.#t=d instanceof M1,this.description=n,this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let f;this.#t?f=Nr.getDefaultDrawingOptions():(f=Nr._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:f});const[g,y]=this.parentDimensions,[,S]=this.pageDimensions;let _=e/S;_=_>=1?.5:_,this.width*=_/this.height,this.width>=1&&(_*=.9/this.width,this.width=.9),this.height=_,this.setDims(g*this.width,y*this.height),this.x=r,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Uu.process(t,e,n,a,Nr._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:r}=this.parent.viewport;return Uu.extractContoursFromText(t,e,n,a,r,Nr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Uu.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:Nr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Nr.getDefaultDrawingOptions():(this._drawingOptions=Nr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n,rect:a}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,u={annotationType:Wt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r,pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(u.paths={lines:e,points:n},u.uuid=this.#i,u.isCopy=!0):u.lines=e,this.#e&&(u.accessibilityData={type:"Figure",alt:this.#e}),u}static deserializeDraw(t,e,n,a,r,u){return u.areContours?M1.deserialize(t,e,n,a,r,u):up.deserialize(t,e,n,a,r,u)}static async deserialize(t,e,n){const a=await super.deserialize(t,e,n);return a.#t=t.areContours,a.#e=t.accessibilityData?.alt||"",a.#i=t.uuid,a}}class RE extends qt{#t=null;#e=null;#n=null;#i=null;#s=null;#a="";#l=null;#r=!1;#h=null;#o=!1;#d=!1;static _type="stamp";static _editorType=Wt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){qt.initialize(t,e)}static isHandlingMimeForPasting(t){return T0.includes(t)}static paste(t,e){e.pasteEditor({mode:Wt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#c(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:r,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await n.guess({name:"altText",request:{data:a,width:r,height:u,channels:a.length/(r*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),e&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#c(n,!0)).finally(()=>this.#f());return}if(this.#i){const n=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(n).then(a=>this.#c(a)).finally(()=>this.#f());return}if(this.#s){const n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(n).then(a=>this.#c(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=T0.join(",");const e=this._uiManager._signal;this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#c(a)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#s||this.#e||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#t?this.#g():this.#p()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,a&&(this.#t=a),this.#r=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#m()},t)}#g(){const{div:t}=this;let{width:e,height:n}=this.#t;const[a,r]=this.pageDimensions,u=.75;if(this.width)e=this.width*a,n=this.height*r;else if(e>u*a||n>u*r){const y=Math.min(u*a/e,u*r/n);e*=y,n*=y}const[d,f]=this.parentDimensions;this.setDims(e*d/a,n*f/r),this._uiManager.enableWaiting(!1);const g=this.#l=document.createElement("canvas");g.setAttribute("role","img"),this.addContainer(g),this.width=e/a,this.height=n/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:a,height:r}=this.#t,u=new Us;let d=this.#t,f=a,g=r,y=null;if(e){if(a>e||r>e){const j=Math.min(e/a,e/r);f=Math.floor(a*j),g=Math.floor(r*j)}y=document.createElement("canvas");const _=y.width=Math.ceil(f*u.sx),x=y.height=Math.ceil(g*u.sy);this.#o||(d=this.#u(_,x));const T=y.getContext("2d");T.filter=this._uiManager.hcmFilter;let w="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",R="#42414d");const M=15,O=M*u.sx,N=M*u.sy,z=new OffscreenCanvas(O*2,N*2),P=z.getContext("2d");P.fillStyle=w,P.fillRect(0,0,O*2,N*2),P.fillStyle=R,P.fillRect(0,0,O,N),P.fillRect(O,N,O,N),T.fillStyle=T.createPattern(z,"repeat"),T.fillRect(0,0,_,x),T.drawImage(d,0,0,d.width,d.height,0,0,_,x)}let S=null;if(n){let _,x;if(u.symmetric&&d.width<t&&d.height<t)_=d.width,x=d.height;else if(d=this.#t,a>t||r>t){const R=Math.min(t/a,t/r);_=Math.floor(a*R),x=Math.floor(r*R),this.#o||(d=this.#u(_,x))}const w=new OffscreenCanvas(_,x).getContext("2d",{willReadFrequently:!0});w.drawImage(d,0,0,d.width,d.height,0,0,_,x),S={width:_,height:x,data:w.getImageData(0,0,_,x).data}}return{canvas:y,width:f,height:g,imageData:S}}#u(t,e){const{width:n,height:a}=this.#t;let r=n,u=a,d=this.#t;for(;r>2*t||u>2*e;){const f=r,g=u;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(r,u);y.getContext("2d").drawImage(d,0,0,f,g,0,0,r,u),d=y.transferToImageBitmap()}return d}#m(){const[t,e]=this.parentDimensions,{width:n,height:a}=this,r=new Us,u=Math.ceil(n*t*r.sx),d=Math.ceil(a*e*r.sy),f=this.#l;if(!f||f.width===u&&f.height===d)return;f.width=u,f.height=d;const g=this.#o?this.#t:this.#u(u,d),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,u,d)}#y(t){if(t){if(this.#o){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#o){const[e,n]=this.pageDimensions,a=Math.round(this.width*e*Xu.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*Xu.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(a,r);return u.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,r),u.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let a=null,r=!1;if(t instanceof oS){const{data:{rect:w,rotation:R,id:M,structParent:O,popupRef:N},container:z,parent:{page:{pageNumber:P}},canvas:j}=t;let k,Y;j?(delete t.canvas,{id:k,bitmap:Y}=n.imageManager.getFromCanvas(z.id,j),j.remove()):(r=!0,t._hasNoCanvas=!0);const J=(await e._structTree.getAriaAttributes(`${ty}${M}`))?.get("aria-label")||"";a=t={annotationType:Wt.STAMP,bitmapId:k,bitmap:Y,pageIndex:P-1,rect:w.slice(0),rotation:R,annotationElementId:M,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:J},isSvg:!1,structParent:O,popupRef:N}}const u=await super.deserialize(t,e,n),{rect:d,bitmap:f,bitmapUrl:g,bitmapId:y,isSvg:S,accessibilityData:_}=t;r?(n.addMissingCanvas(t.id,u),u.#r=!0):y&&n.imageManager.isValidId(y)?(u.#e=y,f&&(u.#t=f)):u.#i=g,u.#o=S;const[x,T]=u.pageDimensions;return u.width=(d[2]-d[0])/x,u.height=(d[3]-d[1])/T,_&&(u.altTextData=_),u._initialData=a,u.#d=!!a,u}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Wt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:a,altText:r}=this.serializeAltText(!1);if(!a&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const d=this.#v(n);if(d.isSame)return null;d.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,e===null)return n;e.stamps||=new Map;const u=this.#o?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:u,serialized:n}),n.bitmap=this.#y(!1);else if(this.#o){const d=e.stamps.get(this.#e);u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=this.#y(!1))}return n}#v(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,a=t.pageIndex===e,r=(t.accessibilityData?.alt||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&r,isSameAltText:r}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class zr{#t;#e=!1;#n=null;#i=null;#s=null;#a=new Map;#l=!1;#r=!1;#h=!1;#o=null;#d=null;#c=null;#f=null;#p=null;#g=-1;#u;static _initialized=!1;static#m=new Map([Wn,gy,RE,Pn,Nr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:r,annotationLayer:u,drawLayer:d,textLayer:f,viewport:g,l10n:y}){const S=[...zr.#m.values()];if(!zr._initialized){zr._initialized=!0;for(const _ of S)_.initialize(y,t)}t.registerEditorTypes(S),this.#u=t,this.pageIndex=e,this.div=n,this.#t=r,this.#n=u,this.viewport=g,this.#c=f,this.drawLayer=d,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Wt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Wt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Wt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Wt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of zr.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#c?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#p?.abort(),this.#p=null;const t=new Set;for(const n of this.#a.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#n){this.#h=!1;return}const e=this.#n.getEditableAnnotations();for(const n of e){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}this.#h=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#c&&!this.#p){this.#p=new AbortController;const a=this.#u.combinedSignal(this.#p);this.#c.div.addEventListener("pointerdown",r=>{const{clientX:d,clientY:f,timeStamp:g}=r,y=this.#g;if(g-y>500){this.#g=g;return}this.#g=-1;const{classList:S}=this.div;S.toggle("getElements",!0);const _=document.elementsFromPoint(d,f);if(S.toggle("getElements",!1),!this.div.contains(_[0]))return;let x;const T=new RegExp(`^${Rb}[0-9]+$`);for(const R of _)if(T.test(R.id)){x=R.id;break}if(!x)return;const w=this.#a.get(x);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick())},{signal:a,capture:!0})}const t=new Map,e=new Map;for(const a of this.#a.values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);this.getEditableAnnotation(a.annotationElementId)?.show(),a.remove()}if(this.#n){const a=this.#n.getEditableAnnotations();for(const r of a){const{id:u}=r.data;if(this.#u.isDeletedAnnotationElement(u))continue;let d=e.get(u);if(d){d.resetAnnotationElement(r),d.show(!1),r.show();continue}d=t.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(r)&&d.show(!1)),r.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const a of zr.#m.values())n.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#c?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#c.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#c.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#c?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#c.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#c.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#c.div.contains(e)){const{isMac:n}=di.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#c.div.classList.add("free"),this.toggleDrawing(),Pn.startHighlighting(this,this.#u.direction==="ltr",{target:this.#c.div,x:t.x,y:t.y}),this.#c.div.addEventListener("pointerup",()=>{this.#c.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#r&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),qt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#s&&(t._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return this.#u.getId()}get#v(){return zr.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#S(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:a}=this.#_(),r=this.getNextId(),u=this.#S({parent:this,id:r,x:n,y:a,uiManager:this.#u,isCentered:!0,...e});u&&this.add(u)}async deserialize(t){return await zr.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),r=this.#S({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return r&&this.add(r),r}#_(){const{x:t,y:e,width:n,height:a}=this.div.getBoundingClientRect(),r=Math.max(0,t),u=Math.max(0,e),d=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+a),g=(r+d)/2-t,y=(u+f)/2-e,[S,_]=this.viewport.rotation%180===0?[g,y]:[y,g];return{offsetX:S,offsetY:_}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#l||(this.#l=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Wt.STAMP||n===Wt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Wt.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:e}=di.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#l=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#o){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#o=new AbortController;const e=this.#u.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#o?(this.#u.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const a=this.#u.findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ro(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Ro(this.div,{rotation:n}),e!==n)for(const a of this.#a.values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class hi{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Se(this,"_svgFactory",new Qf)}static#s(t,[e,n,a,r]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*e}%`,u.width=`${100*a}%`,u.height=`${100*r}%`}#a(){const t=hi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#l(t,e){const n=hi._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const r=hi._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),a}#r(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)}draw(t,e=!1,n=!1){const a=hi.#i++,r=this.#a(),u=hi._svgFactory.createElement("defs");r.append(u);const d=hi._svgFactory.createElement("path");u.append(d);const f=`path_p${this.pageIndex}_${a}`;d.setAttribute("id",f),d.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(a,d);const g=n?this.#l(u,f):null,y=hi._svgFactory.createElement("use");return r.append(y),y.setAttribute("href",`#${f}`),this.updateProperties(r,t),this.#e.set(a,r),{id:a,clipPathId:`url(#${g})`}}drawOutline(t,e){const n=hi.#i++,a=this.#a(),r=hi._svgFactory.createElement("defs");a.append(r);const u=hi._svgFactory.createElement("path");r.append(u);const d=`path_p${this.pageIndex}_${n}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const S=hi._svgFactory.createElement("mask");r.append(S),f=`mask_p${this.pageIndex}_${n}`,S.setAttribute("id",f),S.setAttribute("maskUnits","objectBoundingBox");const _=hi._svgFactory.createElement("rect");S.append(_),_.setAttribute("width","1"),_.setAttribute("height","1"),_.setAttribute("fill","white");const x=hi._svgFactory.createElement("use");S.append(x),x.setAttribute("href",`#${d}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const g=hi._svgFactory.createElement("use");a.append(g),g.setAttribute("href",`#${d}`),f&&g.setAttribute("mask",`url(#${f})`);const y=g.cloneNode();return a.append(y),g.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(n,a),n}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:a,rootClass:r,path:u}=e,d=typeof t=="number"?this.#e.get(t):t;if(d){if(n&&this.#r(d,n),a&&hi.#s(d,a),r){const{classList:f}=d;for(const[g,y]of Object.entries(r))f.toggle(g,y)}if(u){const g=d.firstChild.firstChild;this.#r(g,u)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:w1};globalThis.pdfjsLib={AbortException:Al,AnnotationEditorLayer:zr,AnnotationEditorParamsType:Ee,AnnotationEditorType:Wt,AnnotationEditorUIManager:El,AnnotationLayer:py,AnnotationMode:Br,AnnotationType:Bn,build:nS,ColorPicker:Ca,createValidAbsoluteUrl:W1,DOMSVGFactory:Qf,DrawLayer:hi,FeatureTest:di,fetchData:jh,getDocument:uy,getFilenameFromUrl:zb,getPdfFilenameFromUrl:Bb,getUuid:$1,getXfaPageViewport:Pb,GlobalWorkerOptions:wo,ImageKind:Gf,InvalidPDFException:E0,isDataScheme:sp,isPdfFile:U0,isValidExplicitDest:kb,MathClamp:Hi,noContextMenu:rs,normalizeUnicode:Nb,OPS:Vf,OutputScale:Us,PasswordResponses:Db,PDFDataRangeTransport:hy,PDFDateString:ey,PDFWorker:zh,PermissionFlag:Mb,PixelsPerInch:Xu,RenderingCancelledException:H0,ResponseException:Yf,setLayerDimensions:Ro,shadow:Se,SignatureExtractor:Uu,stopEvent:Hn,SupportedImageMimeTypes:T0,TextLayer:Xf,TouchManager:lp,updateUrlHash:J1,Util:Ut,VerbosityLevel:np,version:eS,XfaLayer:dy};const ME=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Al,AnnotationEditorLayer:zr,AnnotationEditorParamsType:Ee,AnnotationEditorType:Wt,AnnotationEditorUIManager:El,AnnotationLayer:py,AnnotationMode:Br,AnnotationType:Bn,ColorPicker:Ca,DOMSVGFactory:Qf,DrawLayer:hi,FeatureTest:di,GlobalWorkerOptions:wo,ImageKind:Gf,InvalidPDFException:E0,MathClamp:Hi,OPS:Vf,OutputScale:Us,PDFDataRangeTransport:hy,PDFDateString:ey,PDFWorker:zh,PasswordResponses:Db,PermissionFlag:Mb,PixelsPerInch:Xu,RenderingCancelledException:H0,ResponseException:Yf,SignatureExtractor:Uu,SupportedImageMimeTypes:T0,TextLayer:Xf,TouchManager:lp,Util:Ut,VerbosityLevel:np,XfaLayer:dy,build:nS,createValidAbsoluteUrl:W1,fetchData:jh,getDocument:uy,getFilenameFromUrl:zb,getPdfFilenameFromUrl:Bb,getUuid:$1,getXfaPageViewport:Pb,isDataScheme:sp,isPdfFile:U0,isValidExplicitDest:kb,noContextMenu:rs,normalizeUnicode:Nb,setLayerDimensions:Ro,shadow:Se,stopEvent:Hn,updateUrlHash:J1,version:eS},Symbol.toStringTag,{value:"Module"}));function dS(l){var t,e,n="";if(typeof l=="string"||typeof l=="number")n+=l;else if(typeof l=="object")if(Array.isArray(l)){var a=l.length;for(t=0;t<a;t++)l[t]&&(e=dS(l[t]))&&(n&&(n+=" "),n+=e)}else for(e in l)l[e]&&(n&&(n+=" "),n+=e);return n}function j0(){for(var l,t,e=0,n="",a=arguments.length;e<a;e++)(l=arguments[e])&&(t=dS(l))&&(n&&(n+=" "),n+=t);return n}var rv=Object.prototype.hasOwnProperty;function lv(l,t,e){for(e of l.keys())if(Dh(e,t))return e}function Dh(l,t){var e,n,a;if(l===t)return!0;if(l&&t&&(e=l.constructor)===t.constructor){if(e===Date)return l.getTime()===t.getTime();if(e===RegExp)return l.toString()===t.toString();if(e===Array){if((n=l.length)===t.length)for(;n--&&Dh(l[n],t[n]););return n===-1}if(e===Set){if(l.size!==t.size)return!1;for(n of l)if(a=n,a&&typeof a=="object"&&(a=lv(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(l.size!==t.size)return!1;for(n of l)if(a=n[0],a&&typeof a=="object"&&(a=lv(t,a),!a)||!Dh(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)l=new Uint8Array(l),t=new Uint8Array(t);else if(e===DataView){if((n=l.byteLength)===t.byteLength)for(;n--&&l.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(l)){if((n=l.byteLength)===t.byteLength)for(;n--&&l[n]===t[n];);return n===-1}if(!e||typeof l=="object"){n=0;for(e in l)if(rv.call(l,e)&&++n&&!rv.call(t,e)||!(e in t)||!Dh(l[e],t[e]))return!1;return Object.keys(t).length===n}}return l!==l&&t!==t}function cp(l){let t=!1;return{promise:new Promise((n,a)=>{l.then(r=>!t&&n(r)).catch(r=>!t&&a(r))}),cancel(){t=!0}}}const DE=["onCopy","onCut","onPaste"],OE=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],NE=["onFocus","onBlur"],LE=["onInput","onInvalid","onReset","onSubmit"],zE=["onLoad","onError"],BE=["onKeyDown","onKeyPress","onKeyUp"],PE=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],HE=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],UE=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],GE=["onSelect"],kE=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],jE=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],FE=["onScroll"],qE=["onWheel"],IE=["onAnimationStart","onAnimationEnd","onAnimationIteration"],VE=["onTransitionEnd"],YE=["onToggle"],XE=["onChange"],KE=[...DE,...OE,...NE,...LE,...zE,...BE,...PE,...HE,...UE,...GE,...kE,...jE,...FE,...qE,...IE,...VE,...XE,...YE];function fS(l,t){const e={};for(const n of KE){const a=l[n];a&&(t?e[n]=(r=>a(r,t(n))):e[n]=a)}return e}var QE="Invariant failed";function nn(l,t){if(!l)throw new Error(QE)}var e1,ov;function ZE(){if(ov)return e1;ov=1;var l=function(){};return e1=l,e1}var WE=ZE();const Gi=Y1(WE),pS=q.createContext(null),JE="noopener noreferrer nofollow";class $E{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return nn(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){nn(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{nn(this.pdfDocument),nn(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{nn(Array.isArray(e));const n=e[0];new Promise(a=>{nn(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{a(r)}).catch(()=>{nn(!1)}):typeof n=="number"?a(n):nn(!1)}).then(a=>{const r=a+1;nn(this.pdfViewer),nn(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;nn(this.pdfViewer),nn(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||JE,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Oh({children:l,type:t}){return ut.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:l})}const uv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function t5(l,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return l}}function Bh(){return q.useReducer(t5,{value:void 0,error:void 0})}const F0=typeof window<"u",gS=F0&&window.location.protocol==="file:";function e5(l){return typeof l<"u"}function Pu(l){return e5(l)&&l!==null}function n5(l){return typeof l=="string"}function i5(l){return l instanceof ArrayBuffer}function a5(l){return nn(F0),l instanceof Blob}function D1(l){return n5(l)&&/^data:/.test(l)}function cv(l){nn(D1(l));const[t="",e=""]=l.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function s5(){return F0&&window.devicePixelRatio||1}const mS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function hv(){Gi(!gS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${mS}`)}function r5(){Gi(!gS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${mS}`)}function Qu(l){l?.cancel&&l.cancel()}function O1(l,t){return Object.defineProperty(l,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(l,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(l,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(l,"originalHeight",{get(){return this.view[3]},configurable:!0}),l}function l5(l){return l.name==="RenderingCancelledException"}function o5(l){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:r}=a.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(l)})}const{PDFDataRangeTransport:u5}=ME,c5=(l,t)=>{switch(t){case uv.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");l(e);break}case uv.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");l(e);break}}};function dv(l){return typeof l=="object"&&l!==null&&("data"in l||"range"in l||"url"in l)}const h5=q.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:r,file:u,inputRef:d,imageResourcesPath:f,loading:g="Loading PDF",noData:y="No PDF file specified.",onItemClick:S,onLoadError:_,onLoadProgress:x,onLoadSuccess:T,onPassword:w=c5,onSourceError:R,onSourceSuccess:M,options:O,renderMode:N,rotate:z,scale:P,...j},k){const[Y,J]=Bh(),{value:lt,error:ct}=Y,[gt,St]=Bh(),{value:dt,error:vt}=gt,H=q.useRef(new $E),Z=q.useRef([]),ot=q.useRef(void 0),Ct=q.useRef(void 0);u&&u!==ot.current&&dv(u)&&(Gi(!Dh(u,ot.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),ot.current=u),O&&O!==Ct.current&&(Gi(!Dh(O,Ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ct.current=O);const U=q.useRef({scrollPageIntoView:ee=>{const{dest:Pe,pageNumber:de,pageIndex:Et=de-1}=ee;if(S){S({dest:Pe,pageIndex:Et,pageNumber:de});return}const Gt=Z.current[Et];if(Gt){Gt.scrollIntoView();return}Gi(!1,`An internal link leading to page ${de} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});q.useImperativeHandle(k,()=>({linkService:H,pages:Z,viewer:U}),[]);function $(){M&&M()}function ht(){ct&&(Gi(!1,ct.toString()),R&&R(ct))}function ft(){J({type:"RESET"})}q.useEffect(ft,[u,J]);const Mt=q.useCallback(async()=>{if(!u)return null;if(typeof u=="string")return D1(u)?{data:cv(u)}:(hv(),{url:u});if(u instanceof u5)return{range:u};if(i5(u))return{data:u};if(F0&&a5(u))return{data:await o5(u)};if(nn(typeof u=="object"),nn(dv(u)),"url"in u&&typeof u.url=="string"){if(D1(u.url)){const{url:ee,...Pe}=u;return{data:cv(ee),...Pe}}hv()}return u},[u]);q.useEffect(()=>{const ee=cp(Mt());return ee.promise.then(Pe=>{J({type:"RESOLVE",value:Pe})}).catch(Pe=>{J({type:"REJECT",error:Pe})}),()=>{Qu(ee)}},[Mt,J]),q.useEffect(()=>{if(!(typeof lt>"u")){if(lt===!1){ht();return}$()}},[lt]);function Ht(){dt&&(T&&T(dt),Z.current=new Array(dt.numPages),H.current.setDocument(dt))}function Nt(){vt&&(Gi(!1,vt.toString()),_&&_(vt))}q.useEffect(function(){St({type:"RESET"})},[St,lt]),q.useEffect(function(){if(!lt)return;const Pe=O?{...lt,...O}:lt,de=uy(Pe);x&&(de.onProgress=x),w&&(de.onPassword=w);const Et=de,Gt=Et.promise.then(ne=>{St({type:"RESOLVE",value:ne})}).catch(ne=>{Et.destroyed||St({type:"REJECT",error:ne})});return()=>{Gt.finally(()=>Et.destroy())}},[O,St,lt]),q.useEffect(()=>{if(!(typeof dt>"u")){if(dt===!1){Nt();return}Ht()}},[dt]),q.useEffect(function(){H.current.setViewer(U.current),H.current.setExternalLinkRel(a),H.current.setExternalLinkTarget(r)},[a,r]);const jt=q.useCallback((ee,Pe)=>{Z.current[ee]=Pe},[]),he=q.useCallback(ee=>{delete Z.current[ee]},[]),un=q.useMemo(()=>({imageResourcesPath:f,linkService:H.current,onItemClick:S,pdf:dt,registerPage:jt,renderMode:N,rotate:z,scale:P,unregisterPage:he}),[f,S,dt,jt,N,z,P,he]),Te=q.useMemo(()=>fS(j,()=>dt),[j,dt]);function Tn(){function ee(de){return!!de?.pdf}if(!ee(un))throw new Error("pdf is undefined");const Pe=typeof t=="function"?t(un):t;return ut.jsx(pS.Provider,{value:un,children:Pe})}function Yn(){return u?dt==null?ut.jsx(Oh,{type:"loading",children:typeof g=="function"?g():g}):dt===!1?ut.jsx(Oh,{type:"error",children:typeof n=="function"?n():n}):Tn():ut.jsx(Oh,{type:"no-data",children:typeof y=="function"?y():y})}return ut.jsx("div",{className:j0("react-pdf__Document",e),ref:d,...Te,children:Yn()})});function yS(){return q.useContext(pS)}function vS(){for(var l=[],t=0;t<arguments.length;t++)l[t]=arguments[t];var e=l.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){for(var u=0,d=e;u<d.length;u++){var f=d[u];typeof f=="function"?f(r):f&&(f.current=r)}}}const bS=q.createContext(null);function q0(){return q.useContext(bS)}function d5(){const l=yS(),t=q0();nn(t);const e={...l,...t},{imageResourcesPath:n,linkService:a,onGetAnnotationsError:r,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:f,page:g,pdf:y,renderForms:S,rotate:_,scale:x=1}=e;nn(y),nn(g),nn(a);const[T,w]=Bh(),{value:R,error:M}=T,O=q.useRef(null);Gi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){R&&u&&u(R)}function z(){M&&(Gi(!1,M.toString()),r&&r(M))}q.useEffect(function(){w({type:"RESET"})},[w,g]),q.useEffect(function(){if(!g)return;const J=cp(g.getAnnotations()),lt=J;return J.promise.then(ct=>{w({type:"RESOLVE",value:ct})}).catch(ct=>{w({type:"REJECT",error:ct})}),()=>{Qu(lt)}},[w,g]),q.useEffect(()=>{if(R!==void 0){if(R===!1){z();return}N()}},[R]);function P(){f&&f()}function j(Y){Gi(!1,`${Y}`),d&&d(Y)}const k=q.useMemo(()=>g.getViewport({scale:x,rotation:_}),[g,_,x]);return q.useEffect(function(){if(!y||!g||!a||!R)return;const{current:J}=O;if(!J)return;const lt=k.clone({dontFlip:!0}),ct={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:J,l10n:null,page:g,structTreeLayer:null,viewport:lt},gt={annotations:R,annotationStorage:y.annotationStorage,div:J,imageResourcesPath:n,linkService:a,page:g,renderForms:S,viewport:lt};J.innerHTML="";try{new py(ct).render(gt),P()}catch(St){j(St)}return()=>{}},[R,n,a,g,y,S,k]),ut.jsx("div",{className:j0("react-pdf__Page__annotations","annotationLayer"),ref:O})}const SS={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},f5=/^H(\d+)$/;function p5(l){return l in SS}function I0(l){return"children"in l}function _S(l){return I0(l)?l.children.length===1&&0 in l.children&&"id"in l.children[0]:!1}function g5(l){const t={};if(I0(l)){const{role:e}=l,n=e.match(f5);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(p5(e)){const a=SS[e];a&&(t.role=a)}}return t}function AS(l){const t={};if(I0(l)){if(l.alt!==void 0&&(t["aria-label"]=l.alt),l.lang!==void 0&&(t.lang=l.lang),_S(l)){const[e]=l.children;if(e){const n=AS(e);return{...t,...n}}}}else"id"in l&&(t["aria-owns"]=l.id);return t}function m5(l){return l?{...g5(l),...AS(l)}:null}function ES({className:l,node:t}){const e=q.useMemo(()=>m5(t),[t]),n=q.useMemo(()=>!I0(t)||_S(t)?null:t.children.map((a,r)=>ut.jsx(ES,{node:a},r)),[t]);return ut.jsx("span",{className:l,...e,children:n})}function y5(){const l=q0();nn(l);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=l,[n,a]=Bh(),{value:r,error:u}=n,{customTextRenderer:d,page:f}=l;function g(){r&&e&&e(r)}function y(){u&&(Gi(!1,u.toString()),t&&t(u))}return q.useEffect(function(){a({type:"RESET"})},[a,f]),q.useEffect(function(){if(d||!f)return;const _=cp(f.getStructTree()),x=_;return _.promise.then(T=>{a({type:"RESOLVE",value:T})}).catch(T=>{a({type:"REJECT",error:T})}),()=>Qu(x)},[d,f,a]),q.useEffect(()=>{if(r!==void 0){if(r===!1){y();return}g()}},[r]),r?ut.jsx(ES,{className:"react-pdf__Page__structTree structTree",node:r}):null}const fv=Br;function v5(l){const t=q0();nn(t);const e={...t,...l},{_className:n,canvasBackground:a,devicePixelRatio:r=s5(),onRenderError:u,onRenderSuccess:d,page:f,renderForms:g,renderTextLayer:y,rotate:S,scale:_}=e,{canvasRef:x}=l;nn(f);const T=q.useRef(null);function w(){f&&d&&d(O1(f,_))}function R(z){l5(z)||(Gi(!1,z.toString()),u&&u(z))}const M=q.useMemo(()=>f.getViewport({scale:_*r,rotation:S}),[r,f,S,_]),O=q.useMemo(()=>f.getViewport({scale:_,rotation:S}),[f,S,_]);q.useEffect(function(){if(!f)return;f.cleanup();const{current:P}=T;if(!P)return;P.width=M.width,P.height=M.height,P.style.width=`${Math.floor(O.width)}px`,P.style.height=`${Math.floor(O.height)}px`,P.style.visibility="hidden";const j={annotationMode:g?fv.ENABLE_FORMS:fv.ENABLE,canvasContext:P.getContext("2d",{alpha:!1}),viewport:M};a&&(j.background=a);const k=f.render(j),Y=k;return k.promise.then(()=>{P.style.visibility="",w()}).catch(R),()=>Qu(Y)},[a,f,g,M,O]);const N=q.useCallback(()=>{const{current:z}=T;z&&(z.width=0,z.height=0)},[]);return q.useEffect(()=>N,[N]),ut.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:vS(x,T),style:{display:"block",userSelect:"none"},children:y?ut.jsx(y5,{}):null})}function b5(l){return"str"in l}function S5(){const l=q0();nn(l);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:r,page:u,pageIndex:d,pageNumber:f,rotate:g,scale:y}=l;nn(u);const[S,_]=Bh(),{value:x,error:T}=S,w=q.useRef(null);Gi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function R(){x&&n&&n(x)}function M(){T&&(Gi(!1,T.toString()),e&&e(T))}q.useEffect(function(){_({type:"RESET"})},[u,_]),q.useEffect(function(){if(!u)return;const Y=cp(u.getTextContent()),J=Y;return Y.promise.then(lt=>{_({type:"RESOLVE",value:lt})}).catch(lt=>{_({type:"REJECT",error:lt})}),()=>Qu(J)},[u,_]),q.useEffect(()=>{if(x!==void 0){if(x===!1){M();return}R()}},[x]);const O=q.useCallback(()=>{r&&r()},[r]),N=q.useCallback(k=>{Gi(!1,k.toString()),a&&a(k)},[a]);function z(){const k=w.current;k&&k.classList.add("selecting")}function P(){const k=w.current;k&&k.classList.remove("selecting")}const j=q.useMemo(()=>u.getViewport({scale:y,rotation:g}),[u,g,y]);return q.useLayoutEffect(function(){if(!u||!x)return;const{current:Y}=w;if(!Y)return;Y.innerHTML="";const J=u.streamTextContent({includeMarkedContent:!0}),lt={container:Y,textContentSource:J,viewport:j},ct=new Xf(lt),gt=ct;return ct.render().then(()=>{const St=document.createElement("div");St.className="endOfContent",Y.append(St);const dt=Y.querySelectorAll('[role="presentation"]');if(t){let vt=0;x.items.forEach((H,Z)=>{if(!b5(H))return;const ot=dt[vt];if(!ot)return;const Ct=t({pageIndex:d,pageNumber:f,itemIndex:Z,...H});ot.innerHTML=Ct,vt+=H.str&&H.hasEOL?2:1})}O()}).catch(N),()=>Qu(gt)},[t,N,O,u,d,f,x,j]),ut.jsx("div",{className:j0("react-pdf__Page__textContent","textLayer"),onMouseUp:P,onMouseDown:z,ref:w})}const pv=1;function _5(l){const e={...yS(),...l},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:r,canvasRef:u,children:d,className:f,customRenderer:g,customTextRenderer:y,devicePixelRatio:S,error:_="Failed to load the page.",height:x,inputRef:T,loading:w="Loading page",noData:R="No page specified.",onGetAnnotationsError:M,onGetAnnotationsSuccess:O,onGetStructTreeError:N,onGetStructTreeSuccess:z,onGetTextError:P,onGetTextSuccess:j,onLoadError:k,onLoadSuccess:Y,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:lt,onRenderError:ct,onRenderSuccess:gt,onRenderTextLayerError:St,onRenderTextLayerSuccess:dt,pageIndex:vt,pageNumber:H,pdf:Z,registerPage:ot,renderAnnotationLayer:Ct=!0,renderForms:U=!1,renderMode:$="canvas",renderTextLayer:ht=!0,rotate:ft,scale:Mt=pv,unregisterPage:Ht,width:Nt,...jt}=e,[he,un]=Bh(),{value:Te,error:Tn}=he,Yn=q.useRef(null);nn(Z);const ee=Pu(H)?H-1:vt??null,Pe=H??(Pu(vt)?vt+1:null),de=ft??(Te?Te.rotate:null),Et=q.useMemo(()=>{if(!Te)return null;let Jt=1;const $e=Mt??pv;if(Nt||x){const tn=Te.getViewport({scale:1,rotation:de});Nt?Jt=Nt/tn.width:x&&(Jt=x/tn.height)}return $e*Jt},[x,Te,de,Mt,Nt]);q.useEffect(function(){return()=>{Pu(ee)&&a&&Ht&&Ht(ee)}},[a,Z,ee,Ht]);function Gt(){if(Y){if(!Te||!Et)return;Y(O1(Te,Et))}if(a&&ot){if(!Pu(ee)||!Yn.current)return;ot(ee,Yn.current)}}function ne(){Tn&&(Gi(!1,Tn.toString()),k&&k(Tn))}q.useEffect(function(){un({type:"RESET"})},[un,Z,ee]),q.useEffect(function(){if(!Z||!Pe)return;const $e=cp(Z.getPage(Pe)),tn=$e;return $e.promise.then(Rl=>{un({type:"RESOLVE",value:Rl})}).catch(Rl=>{un({type:"REJECT",error:Rl})}),()=>Qu(tn)},[un,Z,Pe]),q.useEffect(()=>{if(Te!==void 0){if(Te===!1){ne();return}Gt()}},[Te,Et]);const Oe=q.useMemo(()=>Pu(ee)&&Pe&&Pu(de)&&Pu(Et)?{_className:n,canvasBackground:r,customTextRenderer:y,devicePixelRatio:S,onGetAnnotationsError:M,onGetAnnotationsSuccess:O,onGetStructTreeError:N,onGetStructTreeSuccess:z,onGetTextError:P,onGetTextSuccess:j,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:lt,onRenderError:ct,onRenderSuccess:gt,onRenderTextLayerError:St,onRenderTextLayerSuccess:dt,page:Te,pageIndex:ee,pageNumber:Pe,renderForms:U,renderTextLayer:ht,rotate:de,scale:Et}:null,[n,r,y,S,M,O,N,z,P,j,J,lt,ct,gt,St,dt,Te,ee,Pe,U,ht,de,Et]),vn=q.useMemo(()=>fS(jt,()=>Te&&(Et?O1(Te,Et):void 0)),[jt,Te,Et]),xe=`${ee}@${Et}/${de}`;function He(){switch($){case"custom":return nn(g),ut.jsx(g,{},`${xe}_custom`);case"none":return null;case"canvas":default:return ut.jsx(v5,{canvasRef:u},`${xe}_canvas`)}}function ki(){return ht?ut.jsx(S5,{},`${xe}_text`):null}function ls(){return Ct?ut.jsx(d5,{},`${xe}_annotations`):null}function os(){function Jt(tn){return!!tn?.page}if(!Jt(Oe))throw new Error("page is undefined");const $e=typeof d=="function"?d(Oe):d;return ut.jsxs(bS.Provider,{value:Oe,children:[He(),ki(),ls(),$e]})}function _e(){return Pe?Z===null||Te===void 0||Te===null?ut.jsx(Oh,{type:"loading",children:typeof w=="function"?w():w}):Z===!1||Te===!1?ut.jsx(Oh,{type:"error",children:typeof _=="function"?_():_}):os():ut.jsx(Oh,{type:"no-data",children:typeof R=="function"?R():R})}return ut.jsx("div",{className:j0(n,f),"data-page-number":Pe,ref:vS(T,Yn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Et}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...vn,children:_e()})}r5();wo.workerSrc="pdf.worker.mjs";const A5="/static/assets/pdf.worker.min--PgD6g2g.mjs",E5=Math.PI/180;function T5(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const ju=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Rt={_global:ju,version:"10.0.1",isBrowser:T5(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle(l){return Rt.angleDeg?l*E5:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Rt.DD.isDragging},isTransforming(){var l,t;return(t=(l=Rt.Transformer)===null||l===void 0?void 0:l.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Rt.DD.node},releaseCanvasOnDestroy:!0,document:ju.document,_injectGlobal(l){typeof ju.Konva<"u"&&console.error("Severa Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),ju.Konva=l}},En=l=>{Rt[l.prototype.getClassName()]=l};Rt._injectGlobal(Rt);const x5=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,gv=()=>{if(typeof document>"u")throw new Error(x5)};class Ra{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Ra(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),a=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,u=this.m[0]*-n+this.m[2]*e,d=this.m[1]*-n+this.m[3]*e;return this.m[0]=a,this.m[1]=r,this.m[2]=u,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const n=this.m[0]+this.m[2]*e,a=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,u=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=a,this.m[2]=r,this.m[3]=u,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],u=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],d=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=r,this.m[4]=u,this.m[5]=d,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,a=-this.m[2]*t,r=this.m[0]*t,u=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=a,this.m[3]=r,this.m[4]=u,this.m[5]=d,this}getMatrix(){return this.m}decompose(){const t=this.m[0],e=this.m[1],n=this.m[2],a=this.m[3],r=this.m[4],u=this.m[5],d=t*a-e*n,f={x:r,y:u,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||e!=0){const g=Math.sqrt(t*t+e*e);f.rotation=e>0?Math.acos(t/g):-Math.acos(t/g),f.scaleX=g,f.scaleY=d/g,f.skewX=(t*n+e*a)/d,f.skewY=0}else if(n!=0||a!=0){const g=Math.sqrt(n*n+a*a);f.rotation=Math.PI/2-(a>0?Math.acos(-n/g):-Math.acos(n/g)),f.scaleX=d/g,f.scaleY=g,f.skewX=0,f.skewY=(t*n+e*a)/d}return f.rotation=W._getRotation(f.rotation),f}}const C5="[object Array]",w5="[object Number]",R5="[object String]",M5="[object Boolean]",D5=Math.PI/180,O5=180/Math.PI,n1="#",N5="",L5="0",z5="Konva warning: ",mv="Konva error: ",B5="rgb(",i1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},P5=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let e0=[];const H5=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(l){setTimeout(l,60)},W={_isElement(l){return!!(l&&l.nodeType==1)},_isFunction(l){return!!(l&&l.constructor&&l.call&&l.apply)},_isPlainObject(l){return!!l&&l.constructor===Object},_isArray(l){return Object.prototype.toString.call(l)===C5},_isNumber(l){return Object.prototype.toString.call(l)===w5&&!isNaN(l)&&isFinite(l)},_isString(l){return Object.prototype.toString.call(l)===R5},_isBoolean(l){return Object.prototype.toString.call(l)===M5},isObject(l){return l instanceof Object},isValidSelector(l){if(typeof l!="string")return!1;const t=l[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(l){return l===0||l>0?1:-1},requestAnimFrame(l){e0.push(l),e0.length===1&&H5(function(){const t=e0;e0=[],t.forEach(function(e){e()})})},createCanvasElement(){gv();const l=document.createElement("canvas");try{l.style=l.style||{}}catch{}return l},createImageElement(){return gv(),document.createElement("img")},_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,t){const e=W.createImageElement();e.onload=function(){t(e)},e.src=l},_rgbToHex(l,t,e){return((1<<24)+(l<<16)+(t<<8)+e).toString(16).slice(1)},_hexToRgb(l){l=l.replace(n1,N5);const t=parseInt(l,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let l=(Math.random()*16777215<<0).toString(16);for(;l.length<6;)l=L5+l;return n1+l},getRGB(l){let t;return l in i1?(t=i1[l],{r:t[0],g:t[1],b:t[2]}):l[0]===n1?this._hexToRgb(l.substring(1)):l.substr(0,4)===B5?(t=P5.exec(l.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(l){return l=l||"black",W._namedColorToRBA(l)||W._hex3ColorToRGBA(l)||W._hex4ColorToRGBA(l)||W._hex6ColorToRGBA(l)||W._hex8ColorToRGBA(l)||W._rgbColorToRGBA(l)||W._rgbaColorToRGBA(l)||W._hslColorToRGBA(l)},_namedColorToRBA(l){const t=i1[l.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){l=l.match(/rgb\(([^)]+)\)/)[1];const t=l.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){l=l.match(/rgba\(([^)]+)\)/)[1];const t=l.split(/ *, */).map((e,n)=>e.slice(-1)==="%"?n===3?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(l){if(l[0]==="#"&&l.length===9)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:parseInt(l.slice(7,9),16)/255}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex4ColorToRGBA(l){if(l[0]==="#"&&l.length===5)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:parseInt(l[4]+l[4],16)/255}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[t,...e]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),n=Number(e[0])/360,a=Number(e[1])/100,r=Number(e[2])/100;let u,d,f;if(a===0)return f=r*255,{r:Math.round(f),g:Math.round(f),b:Math.round(f),a:1};r<.5?u=r*(1+a):u=r+a-r*a;const g=2*r-u,y=[0,0,0];for(let S=0;S<3;S++)d=n+1/3*-(S-1),d<0&&d++,d>1&&d--,6*d<1?f=g+(u-g)*6*d:2*d<1?f=u:3*d<2?f=g+(u-g)*(2/3-d)*6:f=g,y[S]=f*255;return{r:Math.round(y[0]),g:Math.round(y[1]),b:Math.round(y[2]),a:1}}},haveIntersection(l,t){return!(t.x>l.x+l.width||t.x+t.width<l.x||t.y>l.y+l.height||t.y+t.height<l.y)},cloneObject(l){const t={};for(const e in l)this._isPlainObject(l[e])?t[e]=this.cloneObject(l[e]):this._isArray(l[e])?t[e]=this.cloneArray(l[e]):t[e]=l[e];return t},cloneArray(l){return l.slice(0)},degToRad(l){return l*D5},radToDeg(l){return l*O5},_degToRad(l){return W.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),W.degToRad(l)},_radToDeg(l){return W.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),W.radToDeg(l)},_getRotation(l){return Rt.angleDeg?W.radToDeg(l):l},_capitalize(l){return l.charAt(0).toUpperCase()+l.slice(1)},throw(l){throw new Error(mv+l)},error(l){console.error(mv+l)},warn(l){Rt.showWarnings&&console.warn(z5+l)},each(l,t){for(const e in l)t(e,l[e])},_inRange(l,t,e){return t<=l&&l<e},_getProjectionToSegment(l,t,e,n,a,r){let u,d,f;const g=(l-e)*(l-e)+(t-n)*(t-n);if(g==0)u=l,d=t,f=(a-e)*(a-e)+(r-n)*(r-n);else{const y=((a-l)*(e-l)+(r-t)*(n-t))/g;y<0?(u=l,d=t,f=(l-a)*(l-a)+(t-r)*(t-r)):y>1?(u=e,d=n,f=(e-a)*(e-a)+(n-r)*(n-r)):(u=l+y*(e-l),d=t+y*(n-t),f=(u-a)*(u-a)+(d-r)*(d-r))}return[u,d,f]},_getProjectionToLine(l,t,e){const n=W.cloneObject(l);let a=Number.MAX_VALUE;return t.forEach(function(r,u){if(!e&&u===t.length-1)return;const d=t[(u+1)%t.length],f=W._getProjectionToSegment(r.x,r.y,d.x,d.y,l.x,l.y),g=f[0],y=f[1],S=f[2];S<a&&(n.x=g,n.y=y,a=S)}),n},_prepareArrayForTween(l,t,e){const n=[],a=[];if(l.length>t.length){const u=t;t=l,l=u}for(let u=0;u<l.length;u+=2)n.push({x:l[u],y:l[u+1]});for(let u=0;u<t.length;u+=2)a.push({x:t[u],y:t[u+1]});const r=[];return a.forEach(function(u){const d=W._getProjectionToLine(u,n,e);r.push(d.x),r.push(d.y)}),r},_prepareToStringify(l){let t;l.visitedByCircularReferenceRemoval=!0;for(const e in l)if(l.hasOwnProperty(e)&&l[e]&&typeof l[e]=="object"){if(t=Object.getOwnPropertyDescriptor(l,e),l[e].visitedByCircularReferenceRemoval||W._isElement(l[e]))if(t.configurable)delete l[e];else return null;else if(W._prepareToStringify(l[e])===null)if(t.configurable)delete l[e];else return null}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,t){for(const e in t)l[e]=t[e];return l},_getFirstPointerId(l){return l.touches?l.changedTouches[0].identifier:l.pointerId||999},releaseCanvas(...l){Rt.releaseCanvasOnDestroy&&l.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(l,t,e,n){let a=t<0?t:0,r=e<0?e:0;t=Math.abs(t),e=Math.abs(e);let u=0,d=0,f=0,g=0;typeof n=="number"?u=d=f=g=Math.min(n,t/2,e/2):(u=Math.min(n[0]||0,t/2,e/2),d=Math.min(n[1]||0,t/2,e/2),g=Math.min(n[2]||0,t/2,e/2),f=Math.min(n[3]||0,t/2,e/2)),l.moveTo(a+u,r),l.lineTo(a+t-d,r),l.arc(a+t-d,r+d,d,Math.PI*3/2,0,!1),l.lineTo(a+t,r+e-g),l.arc(a+t-g,r+e-g,g,0,Math.PI/2,!1),l.lineTo(a+f,r+e),l.arc(a+f,r+e-f,f,Math.PI/2,Math.PI,!1),l.lineTo(a,r+u),l.arc(a+u,r+u,u,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(l,t,e,n,a){n=Math.abs(n);for(let r=0;r<e;r++){const u=t[(r-1+e)%e],d=t[r],f=t[(r+1)%e],g={x:d.x-u.x,y:d.y-u.y},y={x:f.x-d.x,y:f.y-d.y},S=Math.hypot(g.x,g.y),_=Math.hypot(y.x,y.y);let x;typeof a=="number"?x=a:x=r<a.length?a[r]:0,x=n*Math.cos(Math.PI/e)*Math.min(1,x/n*2);const w={x:g.x/S,y:g.y/S},R={x:y.x/_,y:y.y/_},M={x:d.x-w.x*x,y:d.y-w.y*x},O={x:d.x+R.x*x,y:d.y+R.y*x};r===0?l.moveTo(M.x,M.y):l.lineTo(M.x,M.y),l.arcTo(d.x,d.y,O.x,O.y,x)}}};function U5(l){const t=[],e=l.length,n=W;for(let a=0;a<e;a++){let r=l[a];n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r)}return t}const yv=",",G5="(",k5=")",j5="([",F5="])",q5=";",I5="()",V5="=",vv=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Y5=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],X5=100;let n0=null;function bv(){if(n0!==null)return n0;try{const t=W.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(n0=!1,!1)}catch{return n0=!1,!1}}class V0{constructor(t){this.canvas=t,Rt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let n=this.traceArr,a=n.length,r="",u,d,f,g;for(u=0;u<a;u++)d=n[u],f=d.method,f?(g=d.args,r+=f,t?r+=I5:W._isArray(g[0])?r+=j5+g.join(yv)+F5:(e&&(g=g.map(y=>typeof y=="number"?Math.floor(y):y)),r+=G5+g.join(yv)+k5)):(r+=d.property,t||(r+=V5+d.val)),r+=q5;return r}clearTrace(){this.traceArr=[]}_trace(t){let e=this.traceArr,n;e.push(t),n=e.length,n>=X5&&e.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();e!==1&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}_applyMiterLimit(t){const e=t.attrs.miterLimit;e!=null&&this.setAttr("miterLimit",e)}setAttr(t,e){this._context[t]=e}arc(t,e,n,a,r,u){this._context.arc(t,e,n,a,r,u)}arcTo(t,e,n,a,r){this._context.arcTo(t,e,n,a,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,n,a,r,u){this._context.bezierCurveTo(t,e,n,a,r,u)}clearRect(t,e,n,a){this._context.clearRect(t,e,n,a)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const n=arguments;if(n.length===2)return this._context.createImageData(t,e);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,e,n,a){return this._context.createLinearGradient(t,e,n,a)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,n,a,r,u){return this._context.createRadialGradient(t,e,n,a,r,u)}drawImage(t,e,n,a,r,u,d,f,g){const y=arguments,S=this._context;y.length===3?S.drawImage(t,e,n):y.length===5?S.drawImage(t,e,n,a,r):y.length===9&&S.drawImage(t,e,n,a,r,u,d,f,g)}ellipse(t,e,n,a,r,u,d,f){this._context.ellipse(t,e,n,a,r,u,d,f)}isPointInPath(t,e,n,a){return n?this._context.isPointInPath(n,t,e,a):this._context.isPointInPath(t,e,a)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,n,a){this._context.fillRect(t,e,n,a)}strokeRect(t,e,n,a){this._context.strokeRect(t,e,n,a)}fillText(t,e,n,a){a?this._context.fillText(t,e,n,a):this._context.fillText(t,e,n)}measureText(t){return this._context.measureText(t)}getImageData(t,e,n,a){return this._context.getImageData(t,e,n,a)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,n,a){this._context.rect(t,e,n,a)}roundRect(t,e,n,a,r){this._context.roundRect(t,e,n,a,r)}putImageData(t,e,n){this._context.putImageData(t,e,n)}quadraticCurveTo(t,e,n,a){this._context.quadraticCurveTo(t,e,n,a)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,n,a,r,u){this._context.setTransform(t,e,n,a,r,u)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,n,a){this._context.strokeText(t,e,n,a)}transform(t,e,n,a,r,u){this._context.transform(t,e,n,a,r,u)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t=this,e=vv.length,n=this.setAttr,a,r;const u=function(d){let f=t[d],g;t[d]=function(){return r=U5(Array.prototype.slice.call(arguments,0)),g=f.apply(t,arguments),t._trace({method:d,args:r}),g}};for(a=0;a<e;a++)u(vv[a]);t.setAttr=function(){n.apply(t,arguments);const d=arguments[0];let f=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),t._trace({property:d,val:f})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||e==="source-over"||this.setAttr("globalCompositeOperation",e)}}Y5.forEach(function(l){Object.defineProperty(V0.prototype,l,{get(){return this._context[l]},set(t){this._context[l]=t}})});class K5 extends V0{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),n=t.getFillPriority();if(e&&n==="color"){this._fillColor(t);return}const a=t.getFillPatternImage();if(a&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const u=t.getFillRadialGradientColorStops();if(u&&n==="radial-gradient"){this._fillRadialGradient(t);return}e?this._fillColor(t):a?this._fillPattern(t):r?this._fillLinearGradient(t):u&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),a=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(a){for(let u=0;u<a.length;u+=2)r.addColorStop(a[u],a[u+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var e,n,a;const r=(e=t.getShadowRGBA())!==null&&e!==void 0?e:"black",u=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,d=(a=t.getShadowOffset())!==null&&a!==void 0?a:{x:0,y:0},f=t.getAbsoluteScale(),g=this.canvas.getPixelRatio(),y=f.x*g,S=f.y*g;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",u*Math.min(Math.abs(y),Math.abs(S))),this.setAttr("shadowOffsetX",d.x*y),this.setAttr("shadowOffsetY",d.y*S)}}class Q5 extends V0{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),a=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",a),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let i0;function Z5(){if(i0)return i0;const l=W.createCanvasElement(),t=l.getContext("2d");return i0=(function(){const e=Rt._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/n})(),W.releaseCanvas(l),i0}class vy{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||Rt.pixelRatio||Z5();this.pixelRatio=n,this._canvas=W.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch{try{return this._canvas.toDataURL()}catch(a){return W.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class xo extends vy{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new K5(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}function Sv(){const l=W.createCanvasElement();l.width=1,l.height=1;const t=l.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,1,1),t.fillStyle="rgba(255,0,255,1)",t.fillRect(0,0,1,1);const e=t.getImageData(0,0,1,1).data;return!(e[0]===255&&e[1]===0&&e[2]===255&&e[3]===255)}function _v(){var l,t;return typeof navigator>"u"?!1:(t=(l=navigator.brave)===null||l===void 0?void 0:l.isBrave())!==null&&t!==void 0?t:!1}let Av=!1;function W5(){return _v()&&Sv()&&!Av&&(Av=!0,W.error('Looks like you have "Brave shield" enabled in your browser. It breaks KonvaJS internals. Please disable it. You may need to ask your users to do the same.')),_v()&&Sv()}class by extends vy{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Q5(this),this.setSize(t.width,t.height),W5()}}const ke={get isDragging(){let l=!1;return ke._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(l=!0)}),l},justDragged:!1,get node(){let l;return ke._dragElements.forEach(t=>{l=t.node}),l},_dragElements:new Map,_drag(l){const t=[];ke._dragElements.forEach((e,n)=>{const{node:a}=e,r=a.getStage();r.setPointersPositions(l),e.pointerId===void 0&&(e.pointerId=W._getFirstPointerId(l));const u=r._changedPointerPositions.find(d=>d.id===e.pointerId);if(u){if(e.dragStatus!=="dragging"){const d=a.dragDistance();if(Math.max(Math.abs(u.x-e.startPointerPos.x),Math.abs(u.y-e.startPointerPos.y))<d||(a.startDrag({evt:l}),!a.isDragging()))return}a._setDragPosition(l,e),t.push(a)}}),t.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:l},!0)})},_endDragBefore(l){const t=[];ke._dragElements.forEach(e=>{const{node:n}=e,a=n.getStage();if(l&&a.setPointersPositions(l),!a._changedPointerPositions.find(d=>d.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(ke.justDragged=!0,Rt._mouseListenClick=!1,Rt._touchListenClick=!1,Rt._pointerListenClick=!1,e.dragStatus="stopped");const u=e.node.getLayer()||e.node instanceof Rt.Stage&&e.node;u&&t.indexOf(u)===-1&&t.push(u)}),t.forEach(e=>{e.draw()})},_endDragAfter(l){ke._dragElements.forEach((t,e)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:l},!0),t.dragStatus!=="dragging"&&ke._dragElements.delete(e)})}};Rt.isBrowser&&(window.addEventListener("mouseup",ke._endDragBefore,!0),window.addEventListener("touchend",ke._endDragBefore,!0),window.addEventListener("touchcancel",ke._endDragBefore,!0),window.addEventListener("mousemove",ke._drag),window.addEventListener("touchmove",ke._drag),window.addEventListener("mouseup",ke._endDragAfter,!1),window.addEventListener("touchend",ke._endDragAfter,!1),window.addEventListener("touchcancel",ke._endDragAfter,!1));function Mo(l){return W._isString(l)?'"'+l+'"':Object.prototype.toString.call(l)==="[object Number]"||W._isBoolean(l)?l:Object.prototype.toString.call(l)}function TS(l){return l>255?255:l<0?0:Math.round(l)}function xt(){if(Rt.isUnminified)return function(l,t){return W._isNumber(l)||W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),l}}function Y0(l){if(Rt.isUnminified)return function(t,e){let n=W._isNumber(t),a=W._isArray(t)&&t.length==l;return!n&&!a&&W.warn(Mo(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or Array<number>('+l+")"),t}}function Sy(){if(Rt.isUnminified)return function(l,t){return W._isNumber(l)||l==="auto"||W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),l}}function Ju(){if(Rt.isUnminified)return function(l,t){return W._isString(l)||W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),l}}function xS(){if(Rt.isUnminified)return function(l,t){const e=W._isString(l),n=Object.prototype.toString.call(l)==="[object CanvasGradient]"||l&&l.addColorStop;return e||n||W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),l}}function J5(){if(Rt.isUnminified)return function(l,t){const e=Int8Array?Object.getPrototypeOf(Int8Array):null;return e&&l instanceof e||(W._isArray(l)?l.forEach(function(n){W._isNumber(n)||W.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),l}}function js(){if(Rt.isUnminified)return function(l,t){return l===!0||l===!1||W.warn(Mo(l)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),l}}function $5(l){if(Rt.isUnminified)return function(t,e){return t==null||W.isObject(t)||W.warn(Mo(t)+' is a not valid value for "'+e+'" attribute. The value should be an object with properties '+l),t}}const Cf="get",wf="set",G={addGetterSetter(l,t,e,n,a){G.addGetter(l,t,e),G.addSetter(l,t,n,a),G.addOverloadedGetterSetter(l,t)},addGetter(l,t,e){const n=Cf+W._capitalize(t);l.prototype[n]=l.prototype[n]||function(){const a=this.attrs[t];return a===void 0?e:a}},addSetter(l,t,e,n){const a=wf+W._capitalize(t);l.prototype[a]||G.overWriteSetter(l,t,e,n)},overWriteSetter(l,t,e,n){const a=wf+W._capitalize(t);l.prototype[a]=function(r){return e&&r!==void 0&&r!==null&&(r=e.call(this,r,t)),this._setAttr(t,r),n&&n.call(this),this}},addComponentsGetterSetter(l,t,e,n,a){const r=e.length,u=W._capitalize,d=Cf+u(t),f=wf+u(t);l.prototype[d]=function(){const y={};for(let S=0;S<r;S++){const _=e[S];y[_]=this.getAttr(t+u(_))}return y};const g=$5(e);l.prototype[f]=function(y){const S=this.attrs[t];n&&(y=n.call(this,y,t)),g&&g.call(this,y,t);for(const _ in y)y.hasOwnProperty(_)&&this._setAttr(t+u(_),y[_]);return y||e.forEach(_=>{this._setAttr(t+u(_),void 0)}),this._fireChangeEvent(t,S,y),a&&a.call(this),this},G.addOverloadedGetterSetter(l,t)},addOverloadedGetterSetter(l,t){const e=W._capitalize(t),n=wf+e,a=Cf+e;l.prototype[t]=function(){return arguments.length?(this[n](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(l,t,e,n){W.error("Adding deprecated "+t);const a=Cf+W._capitalize(t),r=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[a]=function(){W.error(r);const u=this.attrs[t];return u===void 0?e:u},G.addSetter(l,t,n,function(){W.error(r)}),G.addOverloadedGetterSetter(l,t)},backCompat(l,t){W.each(t,function(e,n){const a=l.prototype[n],r=Cf+W._capitalize(e),u=wf+W._capitalize(e);function d(){a.apply(this,arguments),W.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}l.prototype[e]=d,l.prototype[r]=d,l.prototype[u]=d})},afterSetFilter(){this._filterUpToDate=!1}};function t6(l){const t=/(\w+)\(([^)]+)\)/g;let e;for(;(e=t.exec(l))!==null;){const[,n,a]=e;switch(n){case"blur":{const r=parseFloat(a.replace("px",""));return function(u){this.blurRadius(r*.5);const d=Rt.Filters;d&&d.Blur&&d.Blur.call(this,u)}}case"brightness":{const r=a.includes("%")?parseFloat(a)/100:parseFloat(a);return function(u){this.brightness(r);const d=Rt.Filters;d&&d.Brightness&&d.Brightness.call(this,u)}}case"contrast":{const r=parseFloat(a);return function(u){const d=100*(Math.sqrt(r)-1);this.contrast(d);const f=Rt.Filters;f&&f.Contrast&&f.Contrast.call(this,u)}}case"grayscale":return function(r){const u=Rt.Filters;u&&u.Grayscale&&u.Grayscale.call(this,r)};case"sepia":return function(r){const u=Rt.Filters;u&&u.Sepia&&u.Sepia.call(this,r)};case"invert":return function(r){const u=Rt.Filters;u&&u.Invert&&u.Invert.call(this,r)};default:W.warn(`CSS filter "${n}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const v0="absoluteOpacity",a0="allEventListeners",bl="absoluteTransform",Ev="absoluteScale",Hu="canvas",e6="Change",n6="children",i6="konva",N1="listening",a6="mouseenter",s6="mouseleave",r6="pointerenter",l6="pointerleave",o6="touchenter",u6="touchleave",Tv="set",xv="Shape",b0=" ",Cv="stage",Eo="transform",c6="Stage",L1="visible",h6=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(b0);let d6=1,wt=class z1{constructor(t){this._id=d6++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Eo||t===bl)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,e){let n=this._cache.get(t);return(n===void 0||(t===Eo||t===bl)&&n.dirty===!0)&&(n=e.call(this),this._cache.set(t,n)),n}_calculate(t,e,n){if(!this._attachedDepsListeners.get(t)){const a=e.map(r=>r+"Change.konva").join(b0);this.on(a,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(Hu)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===bl&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Hu)){const{scene:t,filter:e,hit:n,buffer:a}=this._cache.get(Hu);W.releaseCanvas(t,e,n,a),this._cache.delete(Hu)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let n={};(e.x===void 0||e.y===void 0||e.width===void 0||e.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let a=Math.ceil(e.width||n.width),r=Math.ceil(e.height||n.height),u=e.pixelRatio,d=e.x===void 0?Math.floor(n.x):e.x,f=e.y===void 0?Math.floor(n.y):e.y,g=e.offset||0,y=e.drawBorder||!1,S=e.hitCanvasPixelRatio||1;if(!a||!r){W.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const _=Math.abs(Math.round(n.x)-d)>.5?1:0,x=Math.abs(Math.round(n.y)-f)>.5?1:0;a+=g*2+_,r+=g*2+x,d-=g,f-=g;const T=new xo({pixelRatio:u,width:a,height:r}),w=new xo({pixelRatio:u,width:0,height:0,willReadFrequently:!0}),R=new by({pixelRatio:S,width:a,height:r}),M=T.getContext(),O=R.getContext(),N=new xo({width:T.width/T.pixelRatio+Math.abs(d),height:T.height/T.pixelRatio+Math.abs(f),pixelRatio:T.pixelRatio}),z=N.getContext();return R.isCache=!0,T.isCache=!0,this._cache.delete(Hu),this._filterUpToDate=!1,e.imageSmoothingEnabled===!1&&(T.getContext()._context.imageSmoothingEnabled=!1,w.getContext()._context.imageSmoothingEnabled=!1),M.save(),O.save(),z.save(),M.translate(-d,-f),O.translate(-d,-f),z.translate(-d,-f),N.x=d,N.y=f,this._isUnderCache=!0,this._clearSelfAndDescendantCache(v0),this._clearSelfAndDescendantCache(Ev),this.drawScene(T,this,N),this.drawHit(R,this),this._isUnderCache=!1,M.restore(),O.restore(),y&&(M.save(),M.beginPath(),M.rect(0,0,a,r),M.closePath(),M.setAttr("strokeStyle","red"),M.setAttr("lineWidth",5),M.stroke(),M.restore()),this._cache.set(Hu,{scene:T,filter:w,hit:R,buffer:N,x:d,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(Hu)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let a=1/0,r=1/0,u=-1/0,d=-1/0;const f=this.getAbsoluteTransform(e);return n.forEach(function(g){const y=f.point(g);a===void 0&&(a=u=y.x,r=d=y.y),a=Math.min(a,y.x),r=Math.min(r,y.y),u=Math.max(u,y.x),d=Math.max(d,y.y)}),{x:a,y:r,width:u-a,height:d-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const n=this._getCachedSceneCanvas(),a=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/a,n.height/a),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),e=this._getCanvasCache(),n=e.scene,a=e.filter,r=a.getContext(),u,d,f,g;if(!t||t.length===0)return n;if(this._filterUpToDate)return a;let y=!0;for(let _=0;_<t.length;_++)if(typeof t[_]=="string"&&bv(),typeof t[_]!="string"||!bv()){y=!1;break}const S=n.pixelRatio;if(a.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio),y){const _=t.join(" ");return r.save(),r.setAttr("filter",_),r.drawImage(n._canvas,0,0,n.getWidth()/S,n.getHeight()/S),r.restore(),this._filterUpToDate=!0,a}try{for(u=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/S,n.getHeight()/S),d=r.getImageData(0,0,a.getWidth(),a.getHeight()),f=0;f<u;f++)g=t[f],typeof g=="string"&&(g=t6(g)),g.call(this,d),r.putImageData(d,0,0)}catch(_){W.error("Unable to apply filter. "+_.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,a}on(t,e){if(this._cache&&this._cache.delete(a0),arguments.length===3)return this._delegate.apply(this,arguments);const n=t.split(b0);for(let a=0;a<n.length;a++){const u=n[a].split("."),d=u[0],f=u[1]||"";this.eventListeners[d]||(this.eventListeners[d]=[]),this.eventListeners[d].push({name:f,handler:e})}return this}off(t,e){let n=(t||"").split(b0),a=n.length,r,u,d,f,g,y;if(this._cache&&this._cache.delete(a0),!t)for(u in this.eventListeners)this._off(u);for(r=0;r<a;r++)if(d=n[r],f=d.split("."),g=f[0],y=f[1],g)this.eventListeners[g]&&this._off(g,y,e);else for(u in this.eventListeners)this._off(u,y,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,function(n){e.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,n){const a=this;this.on(t,function(r){const u=r.target.findAncestors(e,!0,a);for(let d=0;d<u.length;d++)r=W.cloneObject(r),r.currentTarget=u[d],n.call(u[d],r)})}remove(){return this.isDragging()&&this.stopDrag(),ke._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(bl),this._clearSelfAndDescendantCache(v0),this._clearSelfAndDescendantCache(Ev),this._clearSelfAndDescendantCache(Cv),this._clearSelfAndDescendantCache(L1),this._clearSelfAndDescendantCache(N1)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+W._capitalize(t);return W._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];for(;t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let e,n;if(!t)return this;for(e in t)e!==n6&&(n=Tv+W._capitalize(e),W._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(N1,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(L1,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let a=!1;ke._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(u.node.nodeType==="Stage"||u.node.getLayer()===n)&&(a=!0)});const r=!e&&!Rt.hitOnDragEnabled&&(a||Rt.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),e=this,n=0,a,r,u,d;function f(y){for(a=[],r=y.length,u=0;u<r;u++)d=y[u],n++,d.nodeType!==xv&&(a=a.concat(d.getChildren().slice())),d._id===e._id&&(u=r);a.length>0&&a[0].getDepth()<=t&&f(a)}const g=this.getStage();return e.nodeType!==c6&&g&&f(g.getChildren()),n}getDepth(){let t=0,e=this.parent;for(;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Eo),this._clearSelfAndDescendantCache(bl)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(t){let e=!1,n=this.parent;for(;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);const a=this.getAbsoluteTransform(t).getMatrix(),r=new Ra,u=this.offset();return r.m=a.slice(),r.translate(u.x,u.y),r.getTranslation()}setAbsolutePosition(t){const{x:e,y:n,...a}=this._clearTransform();this.attrs.x=e,this.attrs.y=n,this._clearCache(Eo);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(a),this.setPosition({x:t.x,y:t.y}),this._clearCache(Eo),this._clearSelfAndDescendantCache(bl),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,n=t.y,a=this.x(),r=this.y();return e!==void 0&&(a+=e),n!==void 0&&(r+=n),this.setPosition({x:a,y:r}),this}_eachAncestorReverse(t,e){let n=[],a=this.getParent(),r,u;if(!(e&&e._id===this._id)){for(n.unshift(this);a&&(!e||a._id!==e._id);)n.unshift(a),a=a.parent;for(r=n.length,u=0;u<r;u++)t(n[u])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return W.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return W.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return W.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return W.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return W.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&W.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(v0,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),e,n,a,r,u;const d={attrs:{},className:this.getClassName()};for(e in t)n=t[e],u=W.isObject(n)&&!W._isPlainObject(n)&&!W._isArray(n),!u&&(a=typeof this[e]=="function"&&this[e],delete t[e],r=a?a.call(this):null,t[e]=n,r!==n&&(d.attrs[e]=n));return W._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,n){const a=[];e&&this._isMatch(t)&&a.push(this);let r=this.parent;for(;r;){if(r===n)return a;r._isMatch(t)&&a.push(r),r=r.parent}return a}isAncestorOf(t){return!1}findAncestor(t,e,n){return this.findAncestors(t,e,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let e=t.replace(/ /g,"").split(","),n=e.length,a,r;for(a=0;a<n;a++)if(r=e[a],W.isValidSelector(r)||(W.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),W.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),W.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Cv,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},n){return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(bl,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new Ra,this._eachAncestorReverse(function(n){const a=n.transformsEnabled();a==="all"?e.multiply(n.getTransform()):a==="position"&&e.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),e;{e=this._cache.get(bl)||new Ra,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const n=this.transformsEnabled();if(n==="all")e.multiply(this.getTransform());else if(n==="position"){const a=this.attrs.x||0,r=this.attrs.y||0,u=this.attrs.offsetX||0,d=this.attrs.offsetY||0;e.translate(a-u,r-d)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;for(;e;)e._isUnderCache&&(t=e),e=e.getParent();const a=this.getAbsoluteTransform(t).decompose();return{x:a.scaleX,y:a.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Eo,this._getTransform)}_getTransform(){var t,e;const n=this._cache.get(Eo)||new Ra;n.reset();const a=this.x(),r=this.y(),u=Rt.getAngle(this.rotation()),d=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,f=(e=this.attrs.scaleY)!==null&&e!==void 0?e:1,g=this.attrs.skewX||0,y=this.attrs.skewY||0,S=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(a!==0||r!==0)&&n.translate(a,r),u!==0&&n.rotate(u),(g!==0||y!==0)&&n.skew(g,y),(d!==1||f!==1)&&n.scale(d,f),(S!==0||_!==0)&&n.translate(-1*S,-1*_),n.dirty=!1,n}clone(t){let e=W.cloneObject(this.attrs),n,a,r,u,d;for(n in t)e[n]=t[n];const f=new this.constructor(e);for(n in this.eventListeners)for(a=this.eventListeners[n],r=a.length,u=0;u<r;u++)d=a[u],d.name.indexOf(i6)<0&&(f.eventListeners[n]||(f.eventListeners[n]=[]),f.eventListeners[n].push(d));return f}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),n=this.getStage(),a=t.x!==void 0?t.x:Math.floor(e.x),r=t.y!==void 0?t.y:Math.floor(e.y),u=t.pixelRatio||1,d=new xo({width:t.width||Math.ceil(e.width)||(n?n.width():0),height:t.height||Math.ceil(e.height)||(n?n.height():0),pixelRatio:u}),f=d.getContext(),g=new xo({width:d.width/d.pixelRatio+Math.abs(a),height:d.height/d.pixelRatio+Math.abs(r),pixelRatio:d.pixelRatio});return t.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(a||r)&&f.translate(-1*a,-1*r),this.drawScene(d,void 0,g),f.restore(),d}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,n=t.quality||null,a=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(a),a}toImage(t){return new Promise((e,n)=>{try{const a=t?.callback;a&&delete t.callback,W._urlToImage(this.toDataURL(t),function(r){e(r),a?.(r)})}catch(a){n(a)}})}toBlob(t){return new Promise((e,n)=>{try{const a=t?.callback;a&&delete t.callback,this.toCanvas(t).toBlob(r=>{e(r),a?.(r)},t?.mimeType,t?.quality)}catch(a){n(a)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Rt.dragDistance}_off(t,e,n){let a=this.eventListeners[t],r,u,d;for(r=0;r<a.length;r++)if(u=a[r].name,d=a[r].handler,(u!=="konva"||e==="konva")&&(!e||u===e)&&(!n||n===d)){if(a.splice(r,1),a.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,e,n){this._fire(t+e6,{oldVal:e,newVal:n})}addName(t){if(!this.hasName(t)){const e=this.name(),n=e?e+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const e=this.name();return e?(e||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return n!==-1&&(e.splice(n,1),this.name(e.join(" "))),this}setAttr(t,e){const n=this[Tv+W._capitalize(t)];return W._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Rt.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,e){const n=this.attrs[t];n===e&&!W.isObject(e)||(e==null?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}_setComponentAttr(t,e,n){let a;n!==void 0&&(a=this.attrs[t],a||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,a,n))}_fireAndBubble(t,e,n){e&&this.nodeType===xv&&(e.target=this);const a=[a6,s6,r6,l6,o6,u6];if(!(a.indexOf(t)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,e);const u=a.indexOf(t)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!u&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,n,a;const r=(e=this._cache.get(a0))!==null&&e!==void 0?e:{};let u=r?.[t];if(u===void 0){u=[];let d=Object.getPrototypeOf(this);for(;d;){const f=(a=(n=d.eventListeners)===null||n===void 0?void 0:n[t])!==null&&a!==void 0?a:[];u.push(...f),d=Object.getPrototypeOf(d)}r[t]=u,this._cache.set(a0,r)}return u}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const n=this._getProtoListeners(t);if(n)for(let r=0;r<n.length;r++)n[r].handler.call(this,e);const a=this.eventListeners[t];if(a)for(let r=0;r<a.length;r++)a[r].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,n=this.getStage(),a=this.getAbsolutePosition();if(!n)return;const r=n._getPointerById(e)||n._changedPointerPositions[0]||a;ke._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-a.x,y:r.y-a.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){ke._dragElements.has(this._id)||this._createDragElement(t);const n=ke._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const n=this.getStage()._getPointerById(e.pointerId);if(!n)return;let a={x:n.x-e.offset.x,y:n.y-e.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const u=r.call(this,a,t);u?a=u:W.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==a.x||this._lastPos.y!==a.y)&&(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}stopDrag(t){const e=ke._dragElements.get(this._id);e&&(e.dragStatus="stopped"),ke._endDragBefore(t),ke._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ke._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Rt.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let a=!1;ke._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(a=!0)}),a||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=ke._dragElements.get(this._id),n=e&&e.dragStatus==="dragging",a=e&&e.dragStatus==="ready";n?this.stopDrag():a&&ke._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const n={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return W.haveIntersection(n,this.getClientRect())}static create(t,e){return W._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let n=z1.prototype.getClassName.call(t),a=t.children,r,u,d;e&&(t.attrs.container=e),Rt[n]||(W.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const f=Rt[n];if(r=new f(t.attrs),a)for(u=a.length,d=0;d<u;d++)r.add(z1._createNode(a[d]));return r}};wt.prototype.nodeType="Node";wt.prototype._attrsAffectingSize=[];wt.prototype.eventListeners={};wt.prototype.on.call(wt.prototype,h6,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Eo),this._clearSelfAndDescendantCache(bl)});wt.prototype.on.call(wt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L1)});wt.prototype.on.call(wt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(N1)});wt.prototype.on.call(wt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(v0)});const an=G.addGetterSetter;an(wt,"zIndex");an(wt,"absolutePosition");an(wt,"position");an(wt,"x",0,xt());an(wt,"y",0,xt());an(wt,"globalCompositeOperation","source-over",Ju());an(wt,"opacity",1,xt());an(wt,"name","",Ju());an(wt,"id","",Ju());an(wt,"rotation",0,xt());G.addComponentsGetterSetter(wt,"scale",["x","y"]);an(wt,"scaleX",1,xt());an(wt,"scaleY",1,xt());G.addComponentsGetterSetter(wt,"skew",["x","y"]);an(wt,"skewX",0,xt());an(wt,"skewY",0,xt());G.addComponentsGetterSetter(wt,"offset",["x","y"]);an(wt,"offsetX",0,xt());an(wt,"offsetY",0,xt());an(wt,"dragDistance",void 0,xt());an(wt,"width",0,xt());an(wt,"height",0,xt());an(wt,"listening",!0,js());an(wt,"preventDefault",!0,js());an(wt,"filters",void 0,function(l){return this._filterUpToDate=!1,l});an(wt,"visible",!0,js());an(wt,"transformsEnabled","all",Ju());an(wt,"size");an(wt,"dragBoundFunc");an(wt,"draggable",!1,js());G.backCompat(wt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ma extends wt{constructor(){super(...arguments),this.children=[]}getChildren(t){const e=this.children||[];return t?e.filter(t):e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const n=[];return this._descendants(a=>{const r=a._isMatch(t);return r&&n.push(a),!!(r&&e)}),n}_descendants(t){let e=!1;const n=this.getChildren();for(const a of n){if(e=t(a),e)return!0;if(a.hasChildren()&&(e=a._descendants(t),e))return!0}return!1}toObject(){const t=wt.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){let e=t.getParent();for(;e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=wt.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){e.add(n.clone())}),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&e.push(n)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),!this.isCached()&&((e=this.children)===null||e===void 0||e.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(e,n){e.index=n}),this._requestDraw()}drawScene(t,e,n){const a=this.getLayer(),r=t||a&&a.getCanvas(),u=r&&r.getContext(),d=this._getCanvasCache(),f=d&&d.scene,g=r&&r.isCache;if(!this.isVisible()&&!g)return this;if(f){u.save();const y=this.getAbsoluteTransform(e).getMatrix();u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedSceneCanvas(u),u.restore()}else this._drawChildren("drawScene",r,e,n);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const n=this.getLayer(),a=t||n&&n.hitCanvas,r=a&&a.getContext(),u=this._getCanvasCache();if(u&&u.hit){r.save();const f=this.getAbsoluteTransform(e).getMatrix();r.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",a,e);return this}_drawChildren(t,e,n,a){var r;const u=e&&e.getContext(),d=this.clipWidth(),f=this.clipHeight(),g=this.clipFunc(),y=typeof d=="number"&&typeof f=="number"||g,S=n===this;if(y){u.save();const x=this.getAbsoluteTransform(n);let T=x.getMatrix();u.transform(T[0],T[1],T[2],T[3],T[4],T[5]),u.beginPath();let w;if(g)w=g.call(this,u,this);else{const R=this.clipX(),M=this.clipY();u.rect(R||0,M||0,d,f)}u.clip.apply(u,w),T=x.copy().invert().getMatrix(),u.transform(T[0],T[1],T[2],T[3],T[4],T[5])}const _=!S&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";_&&(u.save(),u._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(x){x[t](e,n,a)}),_&&u.restore(),y&&u.restore()}getClientRect(t={}){var e;const n=t.skipTransform,a=t.relativeTo;let r,u,d,f,g={x:1/0,y:1/0,width:0,height:0};const y=this;(e=this.children)===null||e===void 0||e.forEach(function(x){if(!x.visible())return;const T=x.getClientRect({relativeTo:y,skipShadow:t.skipShadow,skipStroke:t.skipStroke});T.width===0&&T.height===0||(r===void 0?(r=T.x,u=T.y,d=T.x+T.width,f=T.y+T.height):(r=Math.min(r,T.x),u=Math.min(u,T.y),d=Math.max(d,T.x+T.width),f=Math.max(f,T.y+T.height)))});const S=this.find("Shape");let _=!1;for(let x=0;x<S.length;x++)if(S[x]._isVisible(this)){_=!0;break}return _&&r!==void 0?g={x:r,y:u,width:d-r,height:f-u}:g={x:0,y:0,width:0,height:0},n?g:this._transformedRect(g,a)}}G.addComponentsGetterSetter(Ma,"clip",["x","y","width","height"]);G.addGetterSetter(Ma,"clipX",void 0,xt());G.addGetterSetter(Ma,"clipY",void 0,xt());G.addGetterSetter(Ma,"clipWidth",void 0,xt());G.addGetterSetter(Ma,"clipHeight",void 0,xt());G.addGetterSetter(Ma,"clipFunc");const Zf=new Map,CS=Rt._global.PointerEvent!==void 0;function a1(l){return Zf.get(l)}function _y(l){return{evt:l,pointerId:l.pointerId}}function wS(l,t){return Zf.get(l)===t}function RS(l,t){jf(l),t.getStage()&&(Zf.set(l,t),CS&&t._fire("gotpointercapture",_y(new PointerEvent("gotpointercapture"))))}function jf(l,t){const e=Zf.get(l);if(!e)return;const n=e.getStage();n&&n.content,Zf.delete(l),CS&&e._fire("lostpointercapture",_y(new PointerEvent("lostpointercapture")))}const f6="Stage",p6="string",wv="px",g6="mouseout",MS="mouseleave",DS="mouseover",OS="mouseenter",NS="mousemove",LS="mousedown",zS="mouseup",Lf="pointermove",zf="pointerdown",Rh="pointerup",Bf="pointercancel",m6="lostpointercapture",s0="pointerout",Pf="pointerleave",r0="pointerover",l0="pointerenter",B1="contextmenu",BS="touchstart",PS="touchend",HS="touchmove",US="touchcancel",P1="wheel",y6=5,v6=[[OS,"_pointerenter"],[LS,"_pointerdown"],[NS,"_pointermove"],[zS,"_pointerup"],[MS,"_pointerleave"],[BS,"_pointerdown"],[HS,"_pointermove"],[PS,"_pointerup"],[US,"_pointercancel"],[DS,"_pointerover"],[P1,"_wheel"],[B1,"_contextmenu"],[zf,"_pointerdown"],[Lf,"_pointermove"],[Rh,"_pointerup"],[Bf,"_pointercancel"],[Pf,"_pointerleave"],[m6,"_lostpointercapture"]],s1={mouse:{[s0]:g6,[Pf]:MS,[r0]:DS,[l0]:OS,[Lf]:NS,[zf]:LS,[Rh]:zS,[Bf]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[s0]:"touchout",[Pf]:"touchleave",[r0]:"touchover",[l0]:"touchenter",[Lf]:HS,[zf]:BS,[Rh]:PS,[Bf]:US,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[s0]:s0,[Pf]:Pf,[r0]:r0,[l0]:l0,[Lf]:Lf,[zf]:zf,[Rh]:Rh,[Bf]:Bf,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Hf=l=>l.indexOf("pointer")>=0?"pointer":l.indexOf("touch")>=0?"touch":"mouse",Sh=l=>{const t=Hf(l);if(t==="pointer")return Rt.pointerEventsEnabled&&s1.pointer;if(t==="touch")return s1.touch;if(t==="mouse")return s1.mouse};function Rv(l={}){return(l.clipFunc||l.clipWidth||l.clipHeight)&&W.warn("Stage does not support clipping. Please use clip for Layers or Groups."),l}const b6="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Ff=[];let X0=class extends Ma{constructor(t){super(Rv(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Ff.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Rv(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e=t.getType()==="Layer",n=t.getType()==="FastLayer";e||n||W.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===p6){let e;if(t.charAt(0)==="."){const n=t.slice(1);t=document.getElementsByClassName(n)[0]}else t.charAt(0)!=="#"?e=t:e=t.slice(1),t=document.getElementById(e);if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let n=0;n<e;n++)t[n].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Ma.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&W._isInDocument(t)&&this.container().removeChild(t);const e=Ff.indexOf(this);return e>-1&&Ff.splice(e,1),W.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(W.warn(b6),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new xo({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,a=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),a.forEach(function(r){if(!r.isVisible())return;const u=r._toKonvaCanvas(t);n.drawImage(u._canvas,t.x,t.y,u.getWidth()/u.getPixelRatio(),u.getHeight()/u.getPixelRatio())}),e}getIntersection(t){if(!t)return null;const e=this.children,n=e.length,a=n-1;for(let r=a;r>=0;r--){const u=e[r].getIntersection(t);if(u)return u}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+wv,this.content.style.height=e+wv),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(n=>{n.setSize({width:t,height:e}),n.draw()})}add(t,...e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(t);const n=this.children.length;return n>y6&&W.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Rt.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return wS(t,this)}setPointerCapture(t){RS(t,this)}releaseCapture(t){jf(t)}getLayers(){return this.children}_bindContentEvents(){Rt.isBrowser&&v6.forEach(([t,e])=>{this.content.addEventListener(t,n=>{this[e](n)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const e=Sh(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=Sh(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=Sh(t.type),n=Hf(t.type);if(!e)return;this.setPointersPositions(t);const a=this._getTargetShape(n),r=!(Rt.isDragging()||Rt.isTransforming())||Rt.hitOnDragEnabled;a&&r?(a._fireAndBubble(e.pointerout,{evt:t}),a._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=Sh(t.type),n=Hf(t.type);if(!e)return;this.setPointersPositions(t);let a=!1;this._changedPointerPositions.forEach(r=>{const u=this.getIntersection(r);if(ke.justDragged=!1,Rt["_"+n+"ListenClick"]=!0,!u||!u.isListening()){this[n+"ClickStartShape"]=void 0;return}Rt.capturePointerEventsEnabled&&u.setPointerCapture(r.id),this[n+"ClickStartShape"]=u,u._fireAndBubble(e.pointerdown,{evt:t,pointerId:r.id}),a=!0;const d=t.type.indexOf("touch")>=0;u.preventDefault()&&t.cancelable&&d&&t.preventDefault()}),a||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=Sh(t.type),n=Hf(t.type);if(!e)return;const a=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Rt.isDragging()&&ke.node.preventDefault()&&t.cancelable&&a&&t.preventDefault(),this.setPointersPositions(t),!(!(Rt.isDragging()||Rt.isTransforming())||Rt.hitOnDragEnabled))return;const u={};let d=!1;const f=this._getTargetShape(n);this._changedPointerPositions.forEach(g=>{const y=a1(g.id)||this.getIntersection(g),S=g.id,_={evt:t,pointerId:S},x=f!==y;if(x&&f&&(f._fireAndBubble(e.pointerout,{..._},y),f._fireAndBubble(e.pointerleave,{..._},y)),y){if(u[y._id])return;u[y._id]=!0}y&&y.isListening()?(d=!0,x&&(y._fireAndBubble(e.pointerover,{..._},f),y._fireAndBubble(e.pointerenter,{..._},f),this[n+"targetShape"]=y),y._fireAndBubble(e.pointermove,{..._})):f&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:S}),this[n+"targetShape"]=null)}),d||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=Sh(t.type),n=Hf(t.type);if(!e)return;this.setPointersPositions(t);const a=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"],u={};let d=!1;this._changedPointerPositions.forEach(f=>{const g=a1(f.id)||this.getIntersection(f);if(g){if(g.releaseCapture(f.id),u[g._id])return;u[g._id]=!0}const y=f.id,S={evt:t,pointerId:y};let _=!1;Rt["_"+n+"InDblClickWindow"]?(_=!0,clearTimeout(this[n+"DblTimeout"])):ke.justDragged||(Rt["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){Rt["_"+n+"InDblClickWindow"]=!1},Rt.dblClickWindow),g&&g.isListening()?(d=!0,this[n+"ClickEndShape"]=g,g._fireAndBubble(e.pointerup,{...S}),Rt["_"+n+"ListenClick"]&&a&&a===g&&(g._fireAndBubble(e.pointerclick,{...S}),_&&r&&r===g&&g._fireAndBubble(e.pointerdblclick,{...S}))):(this[n+"ClickEndShape"]=null,d||(this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),d=!0),Rt["_"+n+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:y}),_&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:y}))}),d||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Rt["_"+n+"ListenClick"]=!1,t.cancelable&&n!=="touch"&&n!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(B1,{evt:t}):this._fire(B1,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(P1,{evt:t}):this._fire(P1,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=a1(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(Rh,_y(t)),jf(t.pointerId)}_lostpointercapture(t){jf(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let n=null,a=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,r=>{this._pointerPositions.push({id:r.identifier,x:(r.clientX-e.left)/e.scaleX,y:(r.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,r=>{this._changedPointerPositions.push({id:r.identifier,x:(r.clientX-e.left)/e.scaleX,y:(r.clientY-e.top)/e.scaleY})})):(n=(t.clientX-e.left)/e.scaleX,a=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:n,y:a},this._pointerPositions=[{x:n,y:a,id:W._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:a,id:W._getFirstPointerId(t)}])}_setPointerPosition(t){W.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new xo({width:this.width(),height:this.height()}),this.bufferHitCanvas=new by({pixelRatio:1,width:this.width(),height:this.height()}),!Rt.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return W.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};X0.prototype.nodeType=f6;En(X0);G.addGetterSetter(X0,"container");Rt.isBrowser&&document.addEventListener("visibilitychange",()=>{Ff.forEach(l=>{l.batchDraw()})});const GS="hasShadow",kS="shadowRGBA",jS="patternImage",FS="linearGradient",qS="radialGradient";let o0;function r1(){return o0||(o0=W.createCanvasElement().getContext("2d"),o0)}const qf={};function S6(l){const t=this.attrs.fillRule;t?l.fill(t):l.fill()}function _6(l){l.stroke()}function A6(l){const t=this.attrs.fillRule;t?l.fill(t):l.fill()}function E6(l){l.stroke()}function T6(){this._clearCache(GS)}function x6(){this._clearCache(kS)}function C6(){this._clearCache(jS)}function w6(){this._clearCache(FS)}function R6(){this._clearCache(qS)}class At extends wt{constructor(t){super(t);let e;for(;e=W.getRandomColor(),!(e&&!(e in qf)););this.colorKey=e,qf[e]=this}getContext(){return W.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return W.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(GS,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(jS,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=r1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const n=new Ra;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(Rt.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const a=n.getMatrix(),r=typeof DOMMatrix>"u"?{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}:new DOMMatrix(a);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(FS,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=r1(),n=this.fillLinearGradientStartPoint(),a=this.fillLinearGradientEndPoint(),r=e.createLinearGradient(n.x,n.y,a.x,a.y);for(let u=0;u<t.length;u+=2)r.addColorStop(t[u],t[u+1]);return r}}_getRadialGradient(){return this._getCache(qS,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=r1(),n=this.fillRadialGradientStartPoint(),a=this.fillRadialGradientEndPoint(),r=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),a.x,a.y,this.fillRadialGradientEndRadius());for(let u=0;u<t.length;u+=2)r.addColorStop(t[u],t[u+1]);return r}}getShadowRGBA(){return this._getCache(kS,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=W.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const n=e.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return wt.prototype.destroy.call(this),delete qf[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!((e=this.attrs.perfectDrawEnabled)!==null&&e!==void 0?e:!0))return!1;const a=t||this.hasFill(),r=this.hasStroke(),u=this.getAbsoluteOpacity()!==1;if(a&&r&&u)return!0;const d=this.hasShadow(),f=this.shadowForStrokeEnabled();return!!(a&&r&&d&&f)}setStrokeHitEnabled(t){W.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,n=this.getParent();for(;n;){if(n.isCached()){e=!0;break}n=n.getParent()}const a=t.skipTransform,r=t.relativeTo||e&&this.getStage()||void 0,u=this.getSelfRect(),f=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,g=u.width+f,y=u.height+f,S=!t.skipShadow&&this.hasShadow(),_=S?this.shadowOffsetX():0,x=S?this.shadowOffsetY():0,T=g+Math.abs(_),w=y+Math.abs(x),R=S&&this.shadowBlur()||0,M=T+R*2,O=w+R*2,N={width:M,height:O,x:-(f/2+R)+Math.min(_,0)+u.x,y:-(f/2+R)+Math.min(x,0)+u.y};return a?N:this._transformedRect(N,r)}drawScene(t,e,n){const a=this.getLayer(),r=t||a.getCanvas(),u=r.getContext(),d=this._getCanvasCache(),f=this.getSceneFunc(),g=this.hasShadow();let y;const S=e===this;if(!this.isVisible()&&!S)return this;if(d){u.save();const _=this.getAbsoluteTransform(e).getMatrix();return u.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(u),u.restore(),this}if(!f)return this;if(u.save(),this._useBufferCanvas()){y=this.getStage();const _=n||y.bufferCanvas,x=_.getContext();x.clear(),x.save(),x._applyLineJoin(this),x._applyMiterLimit(this);const T=this.getAbsoluteTransform(e).getMatrix();x.transform(T[0],T[1],T[2],T[3],T[4],T[5]),f.call(this,x,this),x.restore();const w=_.pixelRatio;g&&u._applyShadow(this),u._applyOpacity(this),u._applyGlobalCompositeOperation(this),u.drawImage(_._canvas,_.x||0,_.y||0,_.width/w,_.height/w)}else{if(u._applyLineJoin(this),u._applyMiterLimit(this),!S){const _=this.getAbsoluteTransform(e).getMatrix();u.transform(_[0],_[1],_[2],_[3],_[4],_[5]),u._applyOpacity(this),u._applyGlobalCompositeOperation(this)}g&&u._applyShadow(this),f.call(this,u,this)}return u.restore(),this}drawHit(t,e,n=!1){if(!this.shouldDrawHit(e,n))return this;const a=this.getLayer(),r=t||a.hitCanvas,u=r&&r.getContext(),d=this.hitFunc()||this.sceneFunc(),f=this._getCanvasCache(),g=f&&f.hit;if(this.colorKey||W.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),g){u.save();const S=this.getAbsoluteTransform(e).getMatrix();return u.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedHitCanvas(u),u.restore(),this}if(!d)return this;if(u.save(),u._applyLineJoin(this),u._applyMiterLimit(this),!(this===e)){const S=this.getAbsoluteTransform(e).getMatrix();u.transform(S[0],S[1],S[2],S[3],S[4],S[5])}return d.call(this,u,this),u.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),n=this._getCachedSceneCanvas(),a=e.hit,r=a.getContext(),u=a.getWidth(),d=a.getHeight();r.clear(),r.drawImage(n._canvas,0,0,u,d);try{const f=r.getImageData(0,0,u,d),g=f.data,y=g.length,S=W._hexToRgb(this.colorKey);for(let _=0;_<y;_+=4)g[_+3]>t?(g[_]=S.r,g[_+1]=S.g,g[_+2]=S.b,g[_+3]=255):g[_+3]=0;r.putImageData(f,0,0)}catch(f){W.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this}hasPointerCapture(t){return wS(t,this)}setPointerCapture(t){RS(t,this)}releaseCapture(t){jf(t)}}At.prototype._fillFunc=S6;At.prototype._strokeFunc=_6;At.prototype._fillFuncHit=A6;At.prototype._strokeFuncHit=E6;At.prototype._centroid=!1;At.prototype.nodeType="Shape";En(At);At.prototype.eventListeners={};At.prototype.on.call(At.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T6);At.prototype.on.call(At.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",x6);At.prototype.on.call(At.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C6);At.prototype.on.call(At.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",w6);At.prototype.on.call(At.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",R6);G.addGetterSetter(At,"stroke",void 0,xS());G.addGetterSetter(At,"strokeWidth",2,xt());G.addGetterSetter(At,"fillAfterStrokeEnabled",!1);G.addGetterSetter(At,"hitStrokeWidth","auto",Sy());G.addGetterSetter(At,"strokeHitEnabled",!0,js());G.addGetterSetter(At,"perfectDrawEnabled",!0,js());G.addGetterSetter(At,"shadowForStrokeEnabled",!0,js());G.addGetterSetter(At,"lineJoin");G.addGetterSetter(At,"lineCap");G.addGetterSetter(At,"miterLimit");G.addGetterSetter(At,"sceneFunc");G.addGetterSetter(At,"hitFunc");G.addGetterSetter(At,"dash");G.addGetterSetter(At,"dashOffset",0,xt());G.addGetterSetter(At,"shadowColor",void 0,Ju());G.addGetterSetter(At,"shadowBlur",0,xt());G.addGetterSetter(At,"shadowOpacity",1,xt());G.addComponentsGetterSetter(At,"shadowOffset",["x","y"]);G.addGetterSetter(At,"shadowOffsetX",0,xt());G.addGetterSetter(At,"shadowOffsetY",0,xt());G.addGetterSetter(At,"fillPatternImage");G.addGetterSetter(At,"fill",void 0,xS());G.addGetterSetter(At,"fillPatternX",0,xt());G.addGetterSetter(At,"fillPatternY",0,xt());G.addGetterSetter(At,"fillLinearGradientColorStops");G.addGetterSetter(At,"strokeLinearGradientColorStops");G.addGetterSetter(At,"fillRadialGradientStartRadius",0);G.addGetterSetter(At,"fillRadialGradientEndRadius",0);G.addGetterSetter(At,"fillRadialGradientColorStops");G.addGetterSetter(At,"fillPatternRepeat","repeat");G.addGetterSetter(At,"fillEnabled",!0);G.addGetterSetter(At,"strokeEnabled",!0);G.addGetterSetter(At,"shadowEnabled",!0);G.addGetterSetter(At,"dashEnabled",!0);G.addGetterSetter(At,"strokeScaleEnabled",!0);G.addGetterSetter(At,"fillPriority","color");G.addComponentsGetterSetter(At,"fillPatternOffset",["x","y"]);G.addGetterSetter(At,"fillPatternOffsetX",0,xt());G.addGetterSetter(At,"fillPatternOffsetY",0,xt());G.addComponentsGetterSetter(At,"fillPatternScale",["x","y"]);G.addGetterSetter(At,"fillPatternScaleX",1,xt());G.addGetterSetter(At,"fillPatternScaleY",1,xt());G.addComponentsGetterSetter(At,"fillLinearGradientStartPoint",["x","y"]);G.addComponentsGetterSetter(At,"strokeLinearGradientStartPoint",["x","y"]);G.addGetterSetter(At,"fillLinearGradientStartPointX",0);G.addGetterSetter(At,"strokeLinearGradientStartPointX",0);G.addGetterSetter(At,"fillLinearGradientStartPointY",0);G.addGetterSetter(At,"strokeLinearGradientStartPointY",0);G.addComponentsGetterSetter(At,"fillLinearGradientEndPoint",["x","y"]);G.addComponentsGetterSetter(At,"strokeLinearGradientEndPoint",["x","y"]);G.addGetterSetter(At,"fillLinearGradientEndPointX",0);G.addGetterSetter(At,"strokeLinearGradientEndPointX",0);G.addGetterSetter(At,"fillLinearGradientEndPointY",0);G.addGetterSetter(At,"strokeLinearGradientEndPointY",0);G.addComponentsGetterSetter(At,"fillRadialGradientStartPoint",["x","y"]);G.addGetterSetter(At,"fillRadialGradientStartPointX",0);G.addGetterSetter(At,"fillRadialGradientStartPointY",0);G.addComponentsGetterSetter(At,"fillRadialGradientEndPoint",["x","y"]);G.addGetterSetter(At,"fillRadialGradientEndPointX",0);G.addGetterSetter(At,"fillRadialGradientEndPointY",0);G.addGetterSetter(At,"fillPatternRotation",0);G.addGetterSetter(At,"fillRule",void 0,Ju());G.backCompat(At,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const M6="#",D6="beforeDraw",O6="draw",IS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],N6=IS.length;let $u=class extends Ma{constructor(t){super(t),this.canvas=new xo,this.hitCanvas=new by({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){wt.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!wt.prototype.moveUp.call(this))return!1;const e=this.getStage();return!e||!e.content?!1:(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(wt.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(wt.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return wt.prototype.remove.call(this),t&&t.parentNode&&W._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&W.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),wt.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){W.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){W.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,W.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,n=!1;for(;;){for(let a=0;a<N6;a++){const r=IS[a],u=this._getIntersection({x:t.x+r.x*e,y:t.y+r.y*e}),d=u.shape;if(d)return d;if(n=!!u.antialiased,!u.antialiased)break}if(n)e+=1;else return null}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,a=n[3];if(a===255){const r=W._rgbToHex(n[0],n[1],n[2]),u=qf[M6+r];return u?{shape:u}:{antialiased:!0}}else if(a>0)return{antialiased:!0};return{}}drawScene(t,e,n){const a=this.getLayer(),r=t||a&&a.getCanvas();return this._fire(D6,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),Ma.prototype.drawScene.call(this,r,e,n),this._fire(O6,{node:this}),this}drawHit(t,e){const n=this.getLayer(),a=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Ma.prototype.drawHit.call(this,a,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){W.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return W.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return W.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};$u.prototype.nodeType="Layer";En($u);G.addGetterSetter($u,"imageSmoothingEnabled",!0);G.addGetterSetter($u,"clearBeforeDraw",!0);G.addGetterSetter($u,"hitGraphEnabled",!0,js());class Ay extends $u{constructor(t){super(t),this.listening(!1),W.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ay.prototype.nodeType="FastLayer";En(Ay);class Ph extends Ma{_validateAdd(t){const e=t.getType();e!=="Group"&&e!=="Shape"&&W.throw("You may only add groups and shapes to groups.")}}Ph.prototype.nodeType="Group";En(Ph);const l1=(function(){return ju.performance&&ju.performance.now?function(){return ju.performance.now()}:function(){return new Date().getTime()}})();class ss{constructor(t,e){this.id=ss.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:l1(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,n=e.length;for(let a=0;a<n;a++)if(e[a]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const e=ss.animations,n=e.length;for(let a=0;a<n;a++)if(e[a].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=l1(),ss._addAnimation(this),this}stop(){return ss._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,n=this.animations,a=n.length;for(let r=0;r<a;r++)if(n[r].id===e){this.animations.splice(r,1);break}}static _runFrames(){const t={},e=this.animations;for(let n=0;n<e.length;n++){const a=e[n],r=a.layers,u=a.func;a._updateFrameObject(l1());const d=r.length;let f;if(u?f=u.call(a,a.frame)!==!1:f=!0,!!f)for(let g=0;g<d;g++){const y=r[g];y._id!==void 0&&(t[y._id]=y)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=ss;t.animations.length?(t._runFrames(),W.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,W.requestAnimFrame(this._animationLoop))}}ss.animations=[];ss.animIdCounter=0;ss.animRunning=!1;const L6={node:1,duration:1,easing:1,onFinish:1,yoyo:1},z6=1,Mv=2,Dv=3,Ov=["fill","stroke","shadowColor"];let B6=0;class P6{constructor(t,e,n,a,r,u,d){this.prop=t,this.propFunc=e,this.begin=a,this._pos=a,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Mv,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Dv,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Mv?this.setTime(t):this.state===Dv&&this.setTime(this.duration-t)}pause(){this.state=z6,this.fire("onPause")}getTimer(){return new Date().getTime()}}class ln{constructor(t){const e=this,n=t.node,a=n._id,r=t.easing||If.Linear,u=!!t.yoyo;let d,f;typeof t.duration>"u"?d=.3:t.duration===0?d=.001:d=t.duration,this.node=n,this._id=B6++;const g=n.getLayer()||(n instanceof Rt.Stage?n.getLayers():null);g||W.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ss(function(){e.tween.onEnterFrame()},g),this.tween=new P6(f,function(y){e._tweenFunc(y)},r,0,1,d*1e3,u),this._addListeners(),ln.attrs[a]||(ln.attrs[a]={}),ln.attrs[a][this._id]||(ln.attrs[a][this._id]={}),ln.tweens[a]||(ln.tweens[a]={});for(f in t)L6[f]===void 0&&this._addAttr(f,t[f]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const n=this.node,a=n._id;let r,u,d,f,g;const y=ln.tweens[a][t];y&&delete ln.attrs[a][y][t];let S=n.getAttr(t);if(W._isArray(e))if(r=[],u=Math.max(e.length,S.length),t==="points"&&e.length!==S.length&&(e.length>S.length?(f=S,S=W._prepareArrayForTween(S,e,n.closed())):(d=e,e=W._prepareArrayForTween(e,S,n.closed()))),t.indexOf("fill")===0)for(let _=0;_<u;_++)if(_%2===0)r.push(e[_]-S[_]);else{const x=W.colorToRGBA(S[_]);g=W.colorToRGBA(e[_]),S[_]=x,r.push({r:g.r-x.r,g:g.g-x.g,b:g.b-x.b,a:g.a-x.a})}else for(let _=0;_<u;_++)r.push(e[_]-S[_]);else Ov.indexOf(t)!==-1?(S=W.colorToRGBA(S),g=W.colorToRGBA(e),r={r:g.r-S.r,g:g.g-S.g,b:g.b-S.b,a:g.a-S.a}):r=e-S;ln.attrs[a][this._id][t]={start:S,diff:r,end:e,trueEnd:d,trueStart:f},ln.tweens[a][t]=this._id}_tweenFunc(t){const e=this.node,n=ln.attrs[e._id][this._id];let a,r,u,d,f,g,y,S;for(a in n){if(r=n[a],u=r.start,d=r.diff,S=r.end,W._isArray(u))if(f=[],y=Math.max(u.length,S.length),a.indexOf("fill")===0)for(g=0;g<y;g++)g%2===0?f.push((u[g]||0)+d[g]*t):f.push("rgba("+Math.round(u[g].r+d[g].r*t)+","+Math.round(u[g].g+d[g].g*t)+","+Math.round(u[g].b+d[g].b*t)+","+(u[g].a+d[g].a*t)+")");else for(g=0;g<y;g++)f.push((u[g]||0)+d[g]*t);else Ov.indexOf(a)!==-1?f="rgba("+Math.round(u.r+d.r*t)+","+Math.round(u.g+d.g*t)+","+Math.round(u.b+d.b*t)+","+(u.a+d.a*t)+")":f=u+d*t;e.setAttr(a,f)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=ln.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=ln.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,n=ln.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const a in n)delete ln.tweens[t][a];delete ln.attrs[t][e],ln.tweens[t]&&(Object.keys(ln.tweens[t]).length===0&&delete ln.tweens[t],Object.keys(ln.attrs[t]).length===0&&delete ln.attrs[t])}}ln.attrs={};ln.tweens={};wt.prototype.to=function(l){const t=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),t&&t()},new ln(l).play()};const If={BackEaseIn(l,t,e,n){return e*(l/=n)*l*((1.70158+1)*l-1.70158)+t},BackEaseOut(l,t,e,n){return e*((l=l/n-1)*l*((1.70158+1)*l+1.70158)+1)+t},BackEaseInOut(l,t,e,n){let a=1.70158;return(l/=n/2)<1?e/2*(l*l*(((a*=1.525)+1)*l-a))+t:e/2*((l-=2)*l*(((a*=1.525)+1)*l+a)+2)+t},ElasticEaseIn(l,t,e,n,a,r){let u=0;return l===0?t:(l/=n)===1?t+e:(r||(r=n*.3),!a||a<Math.abs(e)?(a=e,u=r/4):u=r/(2*Math.PI)*Math.asin(e/a),-(a*Math.pow(2,10*(l-=1))*Math.sin((l*n-u)*(2*Math.PI)/r))+t)},ElasticEaseOut(l,t,e,n,a,r){let u=0;return l===0?t:(l/=n)===1?t+e:(r||(r=n*.3),!a||a<Math.abs(e)?(a=e,u=r/4):u=r/(2*Math.PI)*Math.asin(e/a),a*Math.pow(2,-10*l)*Math.sin((l*n-u)*(2*Math.PI)/r)+e+t)},ElasticEaseInOut(l,t,e,n,a,r){let u=0;return l===0?t:(l/=n/2)===2?t+e:(r||(r=n*(.3*1.5)),!a||a<Math.abs(e)?(a=e,u=r/4):u=r/(2*Math.PI)*Math.asin(e/a),l<1?-.5*(a*Math.pow(2,10*(l-=1))*Math.sin((l*n-u)*(2*Math.PI)/r))+t:a*Math.pow(2,-10*(l-=1))*Math.sin((l*n-u)*(2*Math.PI)/r)*.5+e+t)},BounceEaseOut(l,t,e,n){return(l/=n)<1/2.75?e*(7.5625*l*l)+t:l<2/2.75?e*(7.5625*(l-=1.5/2.75)*l+.75)+t:l<2.5/2.75?e*(7.5625*(l-=2.25/2.75)*l+.9375)+t:e*(7.5625*(l-=2.625/2.75)*l+.984375)+t},BounceEaseIn(l,t,e,n){return e-If.BounceEaseOut(n-l,0,e,n)+t},BounceEaseInOut(l,t,e,n){return l<n/2?If.BounceEaseIn(l*2,0,e,n)*.5+t:If.BounceEaseOut(l*2-n,0,e,n)*.5+e*.5+t},EaseIn(l,t,e,n){return e*(l/=n)*l+t},EaseOut(l,t,e,n){return-e*(l/=n)*(l-2)+t},EaseInOut(l,t,e,n){return(l/=n/2)<1?e/2*l*l+t:-e/2*(--l*(l-2)-1)+t},StrongEaseIn(l,t,e,n){return e*(l/=n)*l*l*l*l+t},StrongEaseOut(l,t,e,n){return e*((l=l/n-1)*l*l*l*l+1)+t},StrongEaseInOut(l,t,e,n){return(l/=n/2)<1?e/2*l*l*l*l*l+t:e/2*((l-=2)*l*l*l*l+2)+t},Linear(l,t,e,n){return e*l/n+t}},Hh=W._assign(Rt,{Util:W,Transform:Ra,Node:wt,Container:Ma,Stage:X0,stages:Ff,Layer:$u,FastLayer:Ay,Group:Ph,DD:ke,Shape:At,shapes:qf,Animation:ss,Tween:ln,Easings:If,Context:V0,Canvas:vy});class xl extends At{_sceneFunc(t){const e=Rt.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),n=this.clockwise(),a=Rt.getAngle(n?360-this.angle():this.angle()),r=Math.cos(Math.min(a,Math.PI)),u=1,d=Math.sin(Math.min(Math.max(Math.PI,a),3*Math.PI/2)),f=Math.sin(Math.min(a,Math.PI/2)),g=r*(r>0?t:e),y=u*e,S=d*(d>0?t:e),_=f*(f>0?e:t);return{x:g,y:n?-1*_:S,width:y-g,height:_-S}}}xl.prototype._centroid=!0;xl.prototype.className="Arc";xl.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];En(xl);G.addGetterSetter(xl,"innerRadius",0,xt());G.addGetterSetter(xl,"outerRadius",0,xt());G.addGetterSetter(xl,"angle",0,xt());G.addGetterSetter(xl,"clockwise",!1,js());function H1(l,t,e,n,a,r,u){const d=Math.sqrt(Math.pow(e-l,2)+Math.pow(n-t,2)),f=Math.sqrt(Math.pow(a-e,2)+Math.pow(r-n,2)),g=u*d/(d+f),y=u*f/(d+f),S=e-g*(a-l),_=n-g*(r-t),x=e+y*(a-l),T=n+y*(r-t);return[S,_,x,T]}function Nv(l,t){const e=l.length,n=[];for(let a=2;a<e-2;a+=2){const r=H1(l[a-2],l[a-1],l[a],l[a+1],l[a+2],l[a+3],t);isNaN(r[0])||(n.push(r[0]),n.push(r[1]),n.push(l[a]),n.push(l[a+1]),n.push(r[2]),n.push(r[3]))}return n}let Cl=class extends At{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const e=this.points(),n=e.length,a=this.tension(),r=this.closed(),u=this.bezier();if(!n)return;let d=0;if(t.beginPath(),t.moveTo(e[0],e[1]),a!==0&&n>4){const f=this.getTensionPoints(),g=f.length;for(d=r?0:4,r||t.quadraticCurveTo(f[0],f[1],f[2],f[3]);d<g-2;)t.bezierCurveTo(f[d++],f[d++],f[d++],f[d++],f[d++],f[d++]);r||t.quadraticCurveTo(f[g-2],f[g-1],e[n-2],e[n-1])}else if(u)for(d=2;d<n;)t.bezierCurveTo(e[d++],e[d++],e[d++],e[d++],e[d++],e[d++]);else for(d=2;d<n;d+=2)t.lineTo(e[d],e[d+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Nv(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,n=this.tension(),a=H1(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=H1(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),u=Nv(t,n);return[a[2],a[3]].concat(u).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],a[0],a[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let e=t[0],n=t[0],a=t[1],r=t[1],u,d;for(let f=0;f<t.length/2;f++)u=t[f*2],d=t[f*2+1],e=Math.min(e,u),n=Math.max(n,u),a=Math.min(a,d),r=Math.max(r,d);return{x:e,y:a,width:n-e,height:r-a}}};Cl.prototype.className="Line";Cl.prototype._attrsAffectingSize=["points","bezier","tension"];En(Cl);G.addGetterSetter(Cl,"closed",!1);G.addGetterSetter(Cl,"bezier",!1);G.addGetterSetter(Cl,"tension",0,xt());G.addGetterSetter(Cl,"points",[],J5());const H6=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],U6=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],G6=[[1],[1,1],[1,2,1],[1,3,3,1]],Lv=(l,t,e)=>{let n,a;const u=e/2;n=0;for(let d=0;d<20;d++)a=u*H6[20][d]+u,n+=U6[20][d]*k6(l,t,a);return u*n},zv=(l,t,e)=>{e===void 0&&(e=1);const n=l[0]-2*l[1]+l[2],a=t[0]-2*t[1]+t[2],r=2*l[1]-2*l[0],u=2*t[1]-2*t[0],d=4*(n*n+a*a),f=4*(n*r+a*u),g=r*r+u*u;if(d===0)return e*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(t[2]-t[0],2));const y=f/(2*d),S=g/d,_=e+y,x=S-y*y,T=_*_+x>0?Math.sqrt(_*_+x):0,w=y*y+x>0?Math.sqrt(y*y+x):0,R=y+Math.sqrt(y*y+x)!==0?x*Math.log(Math.abs((_+T)/(y+w))):0;return Math.sqrt(d)/2*(_*T-y*w+R)};function k6(l,t,e){const n=U1(1,e,l),a=U1(1,e,t),r=n*n+a*a;return Math.sqrt(r)}const U1=(l,t,e)=>{const n=e.length-1;let a,r;if(n===0)return 0;if(l===0){r=0;for(let u=0;u<=n;u++)r+=G6[n][u]*Math.pow(1-t,n-u)*Math.pow(t,u)*e[u];return r}else{a=new Array(n);for(let u=0;u<n;u++)a[u]=n*(e[u+1]-e[u]);return U1(l-1,t,a)}},Bv=(l,t,e)=>{let n=1,a=l/t,r=(l-e(a))/t,u=0;for(;n>.001;){const d=e(a+r),f=Math.abs(l-d)/t;if(f<n)n=f,a+=r;else{const g=e(a-r),y=Math.abs(l-g)/t;y<n?(n=y,a-=r):r/=2}if(u++,u>500)break}return a};class on extends At{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=on.parsePathData(this.data()),this.pathLength=on.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let n=!1;for(let a=0;a<e.length;a++){const r=e[a].command,u=e[a].points;switch(r){case"L":t.lineTo(u[0],u[1]);break;case"M":t.moveTo(u[0],u[1]);break;case"C":t.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"Q":t.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case"A":const d=u[0],f=u[1],g=u[2],y=u[3],S=u[4],_=u[5],x=u[6],T=u[7],w=g>y?g:y,R=g>y?1:g/y,M=g>y?y/g:1;t.translate(d,f),t.rotate(x),t.scale(R,M),t.arc(0,0,w,S,S+_,1-T),t.scale(1/R,1/M),t.rotate(-x),t.translate(-d,-f);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(f){if(f.command==="A"){const g=f.points[4],y=f.points[5],S=f.points[4]+y;let _=Math.PI/180;if(Math.abs(g-S)<_&&(_=Math.abs(g-S)),y<0)for(let x=g-_;x>S;x-=_){const T=on.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],x,0);t.push(T.x,T.y)}else for(let x=g+_;x<S;x+=_){const T=on.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],x,0);t.push(T.x,T.y)}}else if(f.command==="C")for(let g=0;g<=1;g+=.01){const y=on.getPointOnCubicBezier(g,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(y.x,y.y)}else t=t.concat(f.points)});let e=t[0],n=t[0],a=t[1],r=t[1],u,d;for(let f=0;f<t.length/2;f++)u=t[f*2],d=t[f*2+1],isNaN(u)||(e=Math.min(e,u),n=Math.max(n,u)),isNaN(d)||(a=Math.min(a,d),r=Math.max(r,d));return{x:e,y:a,width:n-e,height:r-a}}getLength(){return this.pathLength}getPointAtLength(t){return on.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,n,a){return Math.sqrt((n-t)*(n-t)+(a-e)*(a-e))}static getPathLength(t){let e=0;for(let n=0;n<t.length;++n)e+=t[n].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let n,a=0,r=e.length;if(!r)return null;for(;a<r&&t>e[a].pathLength;)t-=e[a].pathLength,++a;if(a===r)return n=e[a-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return e[a].command==="M"?(n=e[a].points.slice(0,2),{x:n[0],y:n[1]}):{x:e[a].start.x,y:e[a].start.y};const u=e[a],d=u.points;switch(u.command){case"L":return on.getPointOnLine(t,u.start.x,u.start.y,d[0],d[1]);case"C":return on.getPointOnCubicBezier(Bv(t,on.getPathLength(e),w=>Lv([u.start.x,d[0],d[2],d[4]],[u.start.y,d[1],d[3],d[5]],w)),u.start.x,u.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return on.getPointOnQuadraticBezier(Bv(t,on.getPathLength(e),w=>zv([u.start.x,d[0],d[2]],[u.start.y,d[1],d[3]],w)),u.start.x,u.start.y,d[0],d[1],d[2],d[3]);case"A":const f=d[0],g=d[1],y=d[2],S=d[3],_=d[5],x=d[6];let T=d[4];return T+=_*t/u.pathLength,on.getPointOnEllipticalArc(f,g,y,S,T,x)}return null}static getPointOnLine(t,e,n,a,r,u,d){u=u??e,d=d??n;const f=this.getLineLength(e,n,a,r);if(f<1e-10)return{x:e,y:n};if(a===e)return{x:u,y:d+(r>n?t:-t)};const g=(r-n)/(a-e),y=Math.sqrt(t*t/(1+g*g))*(a<e?-1:1),S=g*y;if(Math.abs(d-n-g*(u-e))<1e-10)return{x:u+y,y:d+S};const _=((u-e)*(a-e)+(d-n)*(r-n))/(f*f),x=e+_*(a-e),T=n+_*(r-n),w=this.getLineLength(u,d,x,T),R=Math.sqrt(t*t-w*w),M=Math.sqrt(R*R/(1+g*g))*(a<e?-1:1),O=g*M;return{x:x+M,y:T+O}}static getPointOnCubicBezier(t,e,n,a,r,u,d,f,g){function y(R){return R*R*R}function S(R){return 3*R*R*(1-R)}function _(R){return 3*R*(1-R)*(1-R)}function x(R){return(1-R)*(1-R)*(1-R)}const T=f*y(t)+u*S(t)+a*_(t)+e*x(t),w=g*y(t)+d*S(t)+r*_(t)+n*x(t);return{x:T,y:w}}static getPointOnQuadraticBezier(t,e,n,a,r,u,d){function f(x){return x*x}function g(x){return 2*x*(1-x)}function y(x){return(1-x)*(1-x)}const S=u*f(t)+a*g(t)+e*y(t),_=d*f(t)+r*g(t)+n*y(t);return{x:S,y:_}}static getPointOnEllipticalArc(t,e,n,a,r,u){const d=Math.cos(u),f=Math.sin(u),g={x:n*Math.cos(r),y:a*Math.sin(r)};return{x:t+(g.x*d-g.y*f),y:e+(g.x*f+g.y*d)}}static parsePathData(t){if(!t)return[];let e=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(let S=0;S<n.length;S++)e=e.replace(new RegExp(n[S],"g"),"|"+n[S]);const a=e.split("|"),r=[],u=[];let d=0,f=0;const g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let S=1;S<a.length;S++){let _=a[S],x=_.charAt(0);for(_=_.slice(1),u.length=0;y=g.exec(_);)u.push(y[0]);let T=[],w=x==="A"||x==="a"?0:-1;for(let R=0,M=u.length;R<M;R++){const O=u[R];if(O==="00"){T.push(0,0),w>=0&&(w+=2,w>=7&&(w-=7));continue}if(w>=0){if(w===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(O)){T.push(parseInt(O[0],10)),T.push(parseInt(O[1],10)),T.push(parseFloat(O.slice(2))),w+=3,w>=7&&(w-=7);continue}if(O==="11"||O==="10"||O==="01"){T.push(parseInt(O[0],10)),T.push(parseInt(O[1],10)),w+=2,w>=7&&(w-=7);continue}if(O==="0"||O==="1"){T.push(parseInt(O,10)),w+=1,w>=7&&(w-=7);continue}}else if(w===4){if(/^[01]\d+(?:\.\d+)?$/.test(O)){T.push(parseInt(O[0],10)),T.push(parseFloat(O.slice(1))),w+=2,w>=7&&(w-=7);continue}if(O==="0"||O==="1"){T.push(parseInt(O,10)),w+=1,w>=7&&(w-=7);continue}}const N=parseFloat(O);isNaN(N)?T.push(0):T.push(N),w+=1,w>=7&&(w-=7)}else{const N=parseFloat(O);isNaN(N)?T.push(0):T.push(N)}}for(;T.length>0&&!isNaN(T[0]);){let R="",M=[];const O=d,N=f;let z,P,j,k,Y,J,lt,ct,gt,St;switch(x){case"l":d+=T.shift(),f+=T.shift(),R="L",M.push(d,f);break;case"L":d=T.shift(),f=T.shift(),M.push(d,f);break;case"m":const dt=T.shift(),vt=T.shift();if(d+=dt,f+=vt,R="M",r.length>2&&r[r.length-1].command==="z"){for(let H=r.length-2;H>=0;H--)if(r[H].command==="M"){d=r[H].points[0]+dt,f=r[H].points[1]+vt;break}}M.push(d,f),x="l";break;case"M":d=T.shift(),f=T.shift(),R="M",M.push(d,f),x="L";break;case"h":d+=T.shift(),R="L",M.push(d,f);break;case"H":d=T.shift(),R="L",M.push(d,f);break;case"v":f+=T.shift(),R="L",M.push(d,f);break;case"V":f=T.shift(),R="L",M.push(d,f);break;case"C":M.push(T.shift(),T.shift(),T.shift(),T.shift()),d=T.shift(),f=T.shift(),M.push(d,f);break;case"c":M.push(d+T.shift(),f+T.shift(),d+T.shift(),f+T.shift()),d+=T.shift(),f+=T.shift(),R="C",M.push(d,f);break;case"S":P=d,j=f,z=r[r.length-1],z.command==="C"&&(P=d+(d-z.points[2]),j=f+(f-z.points[3])),M.push(P,j,T.shift(),T.shift()),d=T.shift(),f=T.shift(),R="C",M.push(d,f);break;case"s":P=d,j=f,z=r[r.length-1],z.command==="C"&&(P=d+(d-z.points[2]),j=f+(f-z.points[3])),M.push(P,j,d+T.shift(),f+T.shift()),d+=T.shift(),f+=T.shift(),R="C",M.push(d,f);break;case"Q":M.push(T.shift(),T.shift()),d=T.shift(),f=T.shift(),M.push(d,f);break;case"q":M.push(d+T.shift(),f+T.shift()),d+=T.shift(),f+=T.shift(),R="Q",M.push(d,f);break;case"T":P=d,j=f,z=r[r.length-1],z.command==="Q"&&(P=d+(d-z.points[0]),j=f+(f-z.points[1])),d=T.shift(),f=T.shift(),R="Q",M.push(P,j,d,f);break;case"t":P=d,j=f,z=r[r.length-1],z.command==="Q"&&(P=d+(d-z.points[0]),j=f+(f-z.points[1])),d+=T.shift(),f+=T.shift(),R="Q",M.push(P,j,d,f);break;case"A":k=T.shift(),Y=T.shift(),J=T.shift(),lt=T.shift(),ct=T.shift(),gt=d,St=f,d=T.shift(),f=T.shift(),R="A",M=this.convertEndpointToCenterParameterization(gt,St,d,f,lt,ct,k,Y,J);break;case"a":k=T.shift(),Y=T.shift(),J=T.shift(),lt=T.shift(),ct=T.shift(),gt=d,St=f,d+=T.shift(),f+=T.shift(),R="A",M=this.convertEndpointToCenterParameterization(gt,St,d,f,lt,ct,k,Y,J);break}r.push({command:R||x,points:M,start:{x:O,y:N},pathLength:this.calcLength(O,N,R||x,M)})}(x==="z"||x==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,e,n,a){let r,u,d,f;const g=on;switch(n){case"L":return g.getLineLength(t,e,a[0],a[1]);case"C":return Lv([t,a[0],a[2],a[4]],[e,a[1],a[3],a[5]],1);case"Q":return zv([t,a[0],a[2]],[e,a[1],a[3]],1);case"A":r=0;const y=a[4],S=a[5],_=a[4]+S;let x=Math.PI/180;if(Math.abs(y-_)<x&&(x=Math.abs(y-_)),u=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],y,0),S<0)for(f=y-x;f>_;f-=x)d=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),r+=g.getLineLength(u.x,u.y,d.x,d.y),u=d;else for(f=y+x;f<_;f+=x)d=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],f,0),r+=g.getLineLength(u.x,u.y,d.x,d.y),u=d;return d=g.getPointOnEllipticalArc(a[0],a[1],a[2],a[3],_,0),r+=g.getLineLength(u.x,u.y,d.x,d.y),r}return 0}static convertEndpointToCenterParameterization(t,e,n,a,r,u,d,f,g){const y=g*(Math.PI/180),S=Math.cos(y)*(t-n)/2+Math.sin(y)*(e-a)/2,_=-1*Math.sin(y)*(t-n)/2+Math.cos(y)*(e-a)/2,x=S*S/(d*d)+_*_/(f*f);x>1&&(d*=Math.sqrt(x),f*=Math.sqrt(x));let T=Math.sqrt((d*d*(f*f)-d*d*(_*_)-f*f*(S*S))/(d*d*(_*_)+f*f*(S*S)));r===u&&(T*=-1),isNaN(T)&&(T=0);const w=T*d*_/f,R=T*-f*S/d,M=(t+n)/2+Math.cos(y)*w-Math.sin(y)*R,O=(e+a)/2+Math.sin(y)*w+Math.cos(y)*R,N=function(lt){return Math.sqrt(lt[0]*lt[0]+lt[1]*lt[1])},z=function(lt,ct){return(lt[0]*ct[0]+lt[1]*ct[1])/(N(lt)*N(ct))},P=function(lt,ct){return(lt[0]*ct[1]<lt[1]*ct[0]?-1:1)*Math.acos(z(lt,ct))},j=P([1,0],[(S-w)/d,(_-R)/f]),k=[(S-w)/d,(_-R)/f],Y=[(-1*S-w)/d,(-1*_-R)/f];let J=P(k,Y);return z(k,Y)<=-1&&(J=Math.PI),z(k,Y)>=1&&(J=0),u===0&&J>0&&(J=J-2*Math.PI),u===1&&J<0&&(J=J+2*Math.PI),[M,O,d,f,j,J,y,u]}}on.prototype.className="Path";on.prototype._attrsAffectingSize=["data"];En(on);G.addGetterSetter(on,"data");class tc extends Cl{_sceneFunc(t){super._sceneFunc(t);const e=Math.PI*2,n=this.points();let a=n;const r=this.tension()!==0&&n.length>4;r&&(a=this.getTensionPoints());const u=this.pointerLength(),d=n.length;let f,g;if(r){const _=[a[a.length-4],a[a.length-3],a[a.length-2],a[a.length-1],n[d-2],n[d-1]],x=on.calcLength(a[a.length-4],a[a.length-3],"C",_),T=on.getPointOnQuadraticBezier(Math.min(1,1-u/x),_[0],_[1],_[2],_[3],_[4],_[5]);f=n[d-2]-T.x,g=n[d-1]-T.y}else f=n[d-2]-n[d-4],g=n[d-1]-n[d-3];const y=(Math.atan2(g,f)+e)%e,S=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[d-2],n[d-1]),t.rotate(y),t.moveTo(0,0),t.lineTo(-u,S/2),t.lineTo(-u,-S/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),r?(f=(a[0]+a[2])/2-n[0],g=(a[1]+a[3])/2-n[1]):(f=n[2]-n[0],g=n[3]-n[1]),t.rotate((Math.atan2(-g,-f)+e)%e),t.moveTo(0,0),t.lineTo(-u,S/2),t.lineTo(-u,-S/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+e*2}}}tc.prototype.className="Arrow";En(tc);G.addGetterSetter(tc,"pointerLength",10,xt());G.addGetterSetter(tc,"pointerWidth",10,xt());G.addGetterSetter(tc,"pointerAtBeginning",!1);G.addGetterSetter(tc,"pointerAtEnding",!0);class Fh extends At{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Fh.prototype._centroid=!0;Fh.prototype.className="Circle";Fh.prototype._attrsAffectingSize=["radius"];En(Fh);G.addGetterSetter(Fh,"radius",0,xt());class Do extends At{_sceneFunc(t){const e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Do.prototype.className="Ellipse";Do.prototype._centroid=!0;Do.prototype._attrsAffectingSize=["radiusX","radiusY"];En(Do);G.addComponentsGetterSetter(Do,"radius",["x","y"]);G.addGetterSetter(Do,"radiusX",0,xt());G.addGetterSetter(Do,"radiusY",0,xt());let Pr=class VS extends At{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",e=>{this._removeImageLoad(e.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return t&&e?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),n=this.getHeight(),a=this.cornerRadius(),r=this.attrs.image;let u;if(r){const d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?u=[r,this.cropX(),this.cropY(),d,f,0,0,e,n]:u=[r,0,0,e,n]}(this.hasFill()||this.hasStroke()||a)&&(t.beginPath(),a?W.drawRoundedRectPath(t,e,n,a):t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)),r&&(a&&t.clip(),t.drawImage.apply(t,u))}_hitFunc(t){const e=this.width(),n=this.height(),a=this.cornerRadius();t.beginPath(),a?W.drawRoundedRectPath(t,e,n,a):t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return(t=this.attrs.width)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.width}getHeight(){var t,e;return(t=this.attrs.height)!==null&&t!==void 0?t:(e=this.image())===null||e===void 0?void 0:e.height}static fromURL(t,e,n=null){const a=W.createImageElement();a.onload=function(){const r=new VS({image:a});e(r)},a.onerror=n,a.crossOrigin="Anonymous",a.src=t}};Pr.prototype.className="Image";En(Pr);G.addGetterSetter(Pr,"cornerRadius",0,Y0(4));G.addGetterSetter(Pr,"image");G.addComponentsGetterSetter(Pr,"crop",["x","y","width","height"]);G.addGetterSetter(Pr,"cropX",0,xt());G.addGetterSetter(Pr,"cropY",0,xt());G.addGetterSetter(Pr,"cropWidth",0,xt());G.addGetterSetter(Pr,"cropHeight",0,xt());const YS=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],j6="Change.konva",F6="none",G1="up",k1="right",j1="down",F1="left",q6=YS.length;class Ey extends Ph{constructor(t){super(t),this.on("add.konva",function(e){this._addListeners(e.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e=this,n;const a=function(){e._sync()};for(n=0;n<q6;n++)t.on(YS[n]+j6,a)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),e=this.getTag(),n,a,r,u,d,f,g;if(t&&e){switch(n=t.width(),a=t.height(),r=e.pointerDirection(),u=e.pointerWidth(),g=e.pointerHeight(),d=0,f=0,r){case G1:d=n/2,f=-1*g;break;case k1:d=n+u,f=a/2;break;case j1:d=n/2,f=a+g;break;case F1:d=-1*u,f=a/2;break}e.setAttrs({x:-1*d,y:-1*f,width:n,height:a}),t.setAttrs({x:-1*d,y:-1*f})}}}Ey.prototype.className="Label";En(Ey);class ec extends At{_sceneFunc(t){const e=this.width(),n=this.height(),a=this.pointerDirection(),r=this.pointerWidth(),u=this.pointerHeight(),d=this.cornerRadius();let f=0,g=0,y=0,S=0;typeof d=="number"?f=g=y=S=Math.min(d,e/2,n/2):(f=Math.min(d[0]||0,e/2,n/2),g=Math.min(d[1]||0,e/2,n/2),S=Math.min(d[2]||0,e/2,n/2),y=Math.min(d[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(f,0),a===G1&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*u),t.lineTo((e+r)/2,0)),t.lineTo(e-g,0),t.arc(e-g,g,g,Math.PI*3/2,0,!1),a===k1&&(t.lineTo(e,(n-u)/2),t.lineTo(e+r,n/2),t.lineTo(e,(n+u)/2)),t.lineTo(e,n-S),t.arc(e-S,n-S,S,0,Math.PI/2,!1),a===j1&&(t.lineTo((e+r)/2,n),t.lineTo(e/2,n+u),t.lineTo((e-r)/2,n)),t.lineTo(y,n),t.arc(y,n-y,y,Math.PI/2,Math.PI,!1),a===F1&&(t.lineTo(0,(n+u)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-u)/2)),t.lineTo(0,f),t.arc(f,f,f,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,n=this.pointerWidth(),a=this.pointerHeight(),r=this.pointerDirection(),u=this.width(),d=this.height();return r===G1?(e-=a,d+=a):r===j1?d+=a:r===F1?(t-=n*1.5,u+=n):r===k1&&(u+=n*1.5),{x:t,y:e,width:u,height:d}}}ec.prototype.className="Tag";En(ec);G.addGetterSetter(ec,"pointerDirection",F6);G.addGetterSetter(ec,"pointerWidth",0,xt());G.addGetterSetter(ec,"pointerHeight",0,xt());G.addGetterSetter(ec,"cornerRadius",0,Y0(4));class hp extends At{_sceneFunc(t){const e=this.cornerRadius(),n=this.width(),a=this.height();t.beginPath(),e?W.drawRoundedRectPath(t,n,a,e):t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)}}hp.prototype.className="Rect";En(hp);G.addGetterSetter(hp,"cornerRadius",0,Y0(4));class Oo extends At{_sceneFunc(t){const e=this._getPoints(),n=this.radius(),a=this.sides(),r=this.cornerRadius();if(t.beginPath(),r)W.drawRoundedPolygonPath(t,e,a,n,r);else{t.moveTo(e[0].x,e[0].y);for(let u=1;u<e.length;u++)t.lineTo(e[u].x,e[u].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,n=[];for(let a=0;a<t;a++)n.push({x:e*Math.sin(a*2*Math.PI/t),y:-1*e*Math.cos(a*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let e=t[0].x,n=t[0].y,a=t[0].x,r=t[0].y;return t.forEach(u=>{e=Math.min(e,u.x),n=Math.max(n,u.x),a=Math.min(a,u.y),r=Math.max(r,u.y)}),{x:e,y:a,width:n-e,height:r-a}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Oo.prototype.className="RegularPolygon";Oo.prototype._centroid=!0;Oo.prototype._attrsAffectingSize=["radius"];En(Oo);G.addGetterSetter(Oo,"radius",0,xt());G.addGetterSetter(Oo,"sides",0,xt());G.addGetterSetter(Oo,"cornerRadius",0,Y0(4));const Pv=Math.PI*2;class nc extends At{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Pv,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Pv,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}nc.prototype.className="Ring";nc.prototype._centroid=!0;nc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(nc);G.addGetterSetter(nc,"innerRadius",0,xt());G.addGetterSetter(nc,"outerRadius",0,xt());class Hr extends At{constructor(t){super(t),this._updated=!0,this.anim=new ss(()=>{const e=this._updated;return this._updated=!1,e}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const e=this.animation(),n=this.frameIndex(),a=n*4,r=this.animations()[e],u=this.frameOffsets(),d=r[a+0],f=r[a+1],g=r[a+2],y=r[a+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,g,y),t.closePath(),t.fillStrokeShape(this)),S)if(u){const _=u[e],x=n*2;t.drawImage(S,d,f,g,y,_[x+0],_[x+1],g,y)}else t.drawImage(S,d,f,g,y,0,0,g,y)}_hitFunc(t){const e=this.animation(),n=this.frameIndex(),a=n*4,r=this.animations()[e],u=this.frameOffsets(),d=r[a+2],f=r[a+3];if(t.beginPath(),u){const g=u[e],y=n*2;t.rect(g[y+0],g[y+1],d,f)}else t.rect(0,0,d,f);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),n=this.animations(),a=n[e],r=a.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}Hr.prototype.className="Sprite";En(Hr);G.addGetterSetter(Hr,"animation");G.addGetterSetter(Hr,"animations");G.addGetterSetter(Hr,"frameOffsets");G.addGetterSetter(Hr,"image");G.addGetterSetter(Hr,"frameIndex",0,xt());G.addGetterSetter(Hr,"frameRate",17,xt());G.backCompat(Hr,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class No extends At{_sceneFunc(t){const e=this.innerRadius(),n=this.outerRadius(),a=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let r=1;r<a*2;r++){const u=r%2===0?n:e,d=u*Math.sin(r*Math.PI/a),f=-1*u*Math.cos(r*Math.PI/a);t.lineTo(d,f)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}No.prototype.className="Star";No.prototype._centroid=!0;No.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(No);G.addGetterSetter(No,"numPoints",5,xt());G.addGetterSetter(No,"innerRadius",0,xt());G.addGetterSetter(No,"outerRadius",0,xt());function To(l){return[...l].reduce((t,e,n,a)=>{if(new RegExp("\\p{Emoji}","u").test(e)){const r=a[n+1];r&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(r)?(t.push(e+r),a[n+1]=""):t.push(e)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(e+(a[n+1]||""))?t.push(e+a[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(e)?t[t.length-1]+=e:e&&t.push(e);return t},[])}const _h="auto",I6="center",XS="inherit",Ah="justify",V6="Change.konva",Y6="2d",Hv="-",KS="left",X6="text",K6="Text",Q6="top",Z6="bottom",Uv="middle",QS="normal",W6="px ",u0=" ",J6="right",Gv="rtl",$6="word",t8="char",kv="none",o1="",ZS=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],e8=ZS.length;function n8(l){return l.split(",").map(t=>{t=t.trim();const e=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t=`"${t}"`),t}).join(", ")}let c0;function u1(){return c0||(c0=W.createCanvasElement().getContext(Y6),c0)}function i8(l){l.fillText(this._partialText,this._partialTextX,this._partialTextY)}function a8(l){l.setAttr("miterLimit",2),l.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function s8(l){return l=l||{},!l.fillLinearGradientColorStops&&!l.fillRadialGradientColorStops&&!l.fillPatternImage&&(l.fill=l.fill||"black"),l}let fn=class extends At{constructor(t){super(s8(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<e8;e++)this.on(ZS[e]+V6,this._setTextData);this._setTextData()}_sceneFunc(t){var e,n;const a=this.textArr,r=a.length;if(!this.text())return;let u=this.padding(),d=this.fontSize(),f=this.lineHeight()*d,g=this.verticalAlign(),y=this.direction(),S=0,_=this.align(),x=this.getWidth(),T=this.letterSpacing(),w=this.charRenderFunc(),R=this.fill(),M=this.textDecoration(),O=M.indexOf("underline")!==-1,N=M.indexOf("line-through")!==-1,z;y=y===XS?t.direction:y;let P=f/2,j=Uv;if(!Rt.legacyTextRendering){const k=this.measureSize("M");j="alphabetic";const Y=(e=k.fontBoundingBoxAscent)!==null&&e!==void 0?e:k.actualBoundingBoxAscent,J=(n=k.fontBoundingBoxDescent)!==null&&n!==void 0?n:k.actualBoundingBoxDescent;P=(Y-J)/2+f/2}for(y===Gv&&t.setAttr("direction",y),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",j),t.setAttr("textAlign",KS),g===Uv?S=(this.getHeight()-r*f-u*2)/2:g===Z6&&(S=this.getHeight()-r*f-u*2),t.translate(u,S+u),z=0;z<r;z++){let k=0,Y=0;const J=a[z],lt=J.text,ct=J.width,gt=J.lastInParagraph;if(t.save(),_===J6?k+=x-ct-u*2:_===I6&&(k+=(x-ct-u*2)/2),O){t.save(),t.beginPath();const St=Rt.legacyTextRendering?Math.round(d/2):Math.round(d/4),dt=k,vt=P+Y+St;t.moveTo(dt,vt);const H=_===Ah&&!gt?x-u*2:ct;t.lineTo(dt+Math.round(H),vt),t.lineWidth=d/15;const Z=this._getLinearGradient();t.strokeStyle=Z||R,t.stroke(),t.restore()}if(y!==Gv&&(T!==0||_===Ah||w)){const St=lt.split(" ").length-1,dt=To(lt);for(let vt=0;vt<dt.length;vt++){const H=dt[vt];if(H===" "&&!gt&&_===Ah&&(k+=(x-u*2-ct)/St),this._partialTextX=k,this._partialTextY=P+Y,this._partialText=H,w){t.save();const ot=a.slice(0,z).reduce((U,$)=>U+To($.text).length,0),Ct=vt+ot;w({char:H,index:Ct,x:k,y:P+Y,lineIndex:z,column:vt,isLastInLine:gt,width:this.measureSize(H).width,context:t})}t.fillStrokeShape(this),w&&t.restore(),k+=this.measureSize(H).width+T}}else T!==0&&t.setAttr("letterSpacing",`${T}px`),this._partialTextX=k,this._partialTextY=P+Y,this._partialText=lt,t.fillStrokeShape(this);if(N){t.save(),t.beginPath();const St=Rt.legacyTextRendering?0:-Math.round(d/4),dt=_===Ah?0:k;t.moveTo(dt,P+Y+St);const vt=_===Ah&&!gt?x-u*2:ct;t.lineTo(dt+Math.round(vt),P+Y+St),t.lineWidth=d/15;const H=this._getLinearGradient();t.strokeStyle=H||R,t.stroke(),t.restore()}t.restore(),r>1&&(P+=f)}}_hitFunc(t){const e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=W._isString(t)?t:t==null?"":t+"";return this._setAttr(X6,e),this}getWidth(){return this.attrs.width===_h||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===_h||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return W.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,n,a,r,u,d,f,g,y,S,_;let x=u1(),T=this.fontSize(),w;x.save(),x.font=this._getContextFont(),w=x.measureText(t),x.restore();const R=T/100;return{actualBoundingBoxAscent:(e=w.actualBoundingBoxAscent)!==null&&e!==void 0?e:71.58203125*R,actualBoundingBoxDescent:(n=w.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(a=w.actualBoundingBoxLeft)!==null&&a!==void 0?a:-7.421875*R,actualBoundingBoxRight:(r=w.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*R,alphabeticBaseline:(u=w.alphabeticBaseline)!==null&&u!==void 0?u:0,emHeightAscent:(d=w.emHeightAscent)!==null&&d!==void 0?d:100*R,emHeightDescent:(f=w.emHeightDescent)!==null&&f!==void 0?f:-20*R,fontBoundingBoxAscent:(g=w.fontBoundingBoxAscent)!==null&&g!==void 0?g:91*R,fontBoundingBoxDescent:(y=w.fontBoundingBoxDescent)!==null&&y!==void 0?y:21*R,hangingBaseline:(S=w.hangingBaseline)!==null&&S!==void 0?S:72.80000305175781*R,ideographicBaseline:(_=w.ideographicBaseline)!==null&&_!==void 0?_:-21*R,width:w.width,height:T}}_getContextFont(){return this.fontStyle()+u0+this.fontVariant()+u0+(this.fontSize()+W6)+n8(this.fontFamily())}_addTextLine(t){this.align()===Ah&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),n=t.length;return u1().measureText(t).width+e*n}_setTextData(){let t=this.text().split(`
`),e=+this.fontSize(),n=0,a=this.lineHeight()*e,r=this.attrs.width,u=this.attrs.height,d=r!==_h&&r!==void 0,f=u!==_h&&u!==void 0,g=this.padding(),y=r-g*2,S=u-g*2,_=0,x=this.wrap(),T=x!==kv,w=x!==t8&&T,R=this.ellipsis();this.textArr=[],u1().font=this._getContextFont();const M=R?this._getTextWidth(o1):0;for(let O=0,N=t.length;O<N;++O){let z=t[O],P=this._getTextWidth(z);if(d&&P>y)for(;z.length>0;){let j=0,k=To(z).length,Y="",J=0;for(;j<k;){const lt=j+k>>>1,ct=To(z),gt=ct.slice(0,lt+1).join(""),St=this._getTextWidth(gt);(R&&f&&_+a>S?St+M:St)<=y?(j=lt+1,Y=gt,J=St):k=lt}if(Y){if(w){const gt=To(z),St=To(Y),dt=gt[St.length],vt=dt===u0||dt===Hv;let H;if(vt&&J<=y)H=St.length;else{const Z=St.lastIndexOf(u0),ot=St.lastIndexOf(Hv);H=Math.max(Z,ot)+1}H>0&&(j=H,Y=gt.slice(0,j).join(""),J=this._getTextWidth(Y))}if(Y=Y.trimRight(),this._addTextLine(Y),n=Math.max(n,J),_+=a,this._shouldHandleEllipsis(_)){this._tryToAddEllipsisToLastLine();break}if(z=To(z).slice(j).join("").trimLeft(),z.length>0&&(P=this._getTextWidth(z),P<=y)){this._addTextLine(z),_+=a,n=Math.max(n,P);break}}else break}else this._addTextLine(z),_+=a,n=Math.max(n,P),this._shouldHandleEllipsis(_)&&O<N-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&_+a>S)break}this.textHeight=e,this.textWidth=n}_shouldHandleEllipsis(t){const e=+this.fontSize(),n=this.lineHeight()*e,a=this.attrs.height,r=a!==_h&&a!==void 0,u=this.padding(),d=a-u*2;return!(this.wrap()!==kv)||r&&t+n>d}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==_h&&t!==void 0,n=this.padding(),a=t-n*2,r=this.ellipsis(),u=this.textArr[this.textArr.length-1];!u||!r||(e&&(this._getTextWidth(u.text+o1)<a||(u.text=u.text.slice(0,u.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(u.text+o1))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,e=this.hasShadow();return t&&e?!0:super._useBufferCanvas()}};fn.prototype._fillFunc=i8;fn.prototype._strokeFunc=a8;fn.prototype.className=K6;fn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];En(fn);G.overWriteSetter(fn,"width",Sy());G.overWriteSetter(fn,"height",Sy());G.addGetterSetter(fn,"direction",XS);G.addGetterSetter(fn,"fontFamily","Arial");G.addGetterSetter(fn,"fontSize",12,xt());G.addGetterSetter(fn,"fontStyle",QS);G.addGetterSetter(fn,"fontVariant",QS);G.addGetterSetter(fn,"padding",0,xt());G.addGetterSetter(fn,"align",KS);G.addGetterSetter(fn,"verticalAlign",Q6);G.addGetterSetter(fn,"lineHeight",1,xt());G.addGetterSetter(fn,"wrap",$6);G.addGetterSetter(fn,"ellipsis",!1,js());G.addGetterSetter(fn,"letterSpacing",0,xt());G.addGetterSetter(fn,"text","",Ju());G.addGetterSetter(fn,"textDecoration","");G.addGetterSetter(fn,"charRenderFunc",void 0);const r8="",WS="normal";function JS(l){l.fillText(this.partialText,0,0)}function $S(l){l.strokeText(this.partialText,0,0)}class $n extends At{constructor(t){super(t),this.dummyCanvas=W.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return on.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t-1>e?null:on.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=on.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),n=this.fill(),a=this.fontSize(),r=this.glyphInfo;e==="underline"&&t.beginPath();for(let u=0;u<r.length;u++){t.save();const d=r[u].p0;t.translate(d.x,d.y),t.rotate(r[u].rotation),this.partialText=r[u].text,t.fillStrokeShape(this),e==="underline"&&(u===0&&t.moveTo(0,a/2+1),t.lineTo(a,a/2+1)),t.restore()}e==="underline"&&(t.strokeStyle=n,t.lineWidth=a/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const n=e[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<e.length;n++){const a=e[n].p1;t.lineTo(a.x,a.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return W.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return fn.prototype.setText.call(this,t)}_getContextFont(){return fn.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const a=n.measureText(t);return n.restore(),{width:a.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=To(this.text()),e=[];let n=0;for(let S=0;S<t.length;S++)e.push({char:t[S],width:this._getTextSize(t[S]).width}),n+=e[S].width;const{height:a}=this._getTextSize(this.attrs.text);if(this.textWidth=n,this.textHeight=a,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),u=this.align(),d=this.kerningFunc(),f=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let g=0;u==="center"&&(g=Math.max(0,this.pathLength/2-f/2)),u==="right"&&(g=Math.max(0,this.pathLength-f));let y=g;for(let S=0;S<e.length;S++){const _=this._getPointAtLength(y);if(!_)return;const x=e[S].char;let T=e[S].width+r;if(x===" "&&u==="justify"){const z=this.text().split(" ").length-1;T+=(this.pathLength-f)/z}const w=this._getPointAtLength(y+T);if(!w)return;const R=on.getLineLength(_.x,_.y,w.x,w.y);let M=0;if(d)try{M=d(e[S-1].char,x)*this.fontSize()}catch{M=0}_.x+=M,w.x+=M,this.textWidth+=M;const O=on.getPointOnLine(M+R/2,_.x,_.y,w.x,w.y),N=Math.atan2(w.y-_.y,w.x-_.x);this.glyphInfo.push({transposeX:O.x,transposeY:O.y,text:t[S],rotation:N,p0:_,p1:w}),y+=T}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(g){t.push(g.p0.x),t.push(g.p0.y),t.push(g.p1.x),t.push(g.p1.y)});let e=t[0]||0,n=t[0]||0,a=t[1]||0,r=t[1]||0,u,d;for(let g=0;g<t.length/2;g++)u=t[g*2],d=t[g*2+1],e=Math.min(e,u),n=Math.max(n,u),a=Math.min(a,d),r=Math.max(r,d);const f=this.fontSize();return{x:e-f/2,y:a-f/2,width:n-e+f,height:r-a+f}}destroy(){return W.releaseCanvas(this.dummyCanvas),super.destroy()}}$n.prototype._fillFunc=JS;$n.prototype._strokeFunc=$S;$n.prototype._fillFuncHit=JS;$n.prototype._strokeFuncHit=$S;$n.prototype.className="TextPath";$n.prototype._attrsAffectingSize=["text","fontSize","data"];En($n);G.addGetterSetter($n,"data");G.addGetterSetter($n,"fontFamily","Arial");G.addGetterSetter($n,"fontSize",12,xt());G.addGetterSetter($n,"fontStyle",WS);G.addGetterSetter($n,"align","left");G.addGetterSetter($n,"letterSpacing",0,xt());G.addGetterSetter($n,"textBaseline","middle");G.addGetterSetter($n,"fontVariant",WS);G.addGetterSetter($n,"text",r8);G.addGetterSetter($n,"textDecoration","");G.addGetterSetter($n,"kerningFunc",void 0);const t_="tr-konva",l8=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(l=>l+`.${t_}`).join(" "),jv="nodesRect",o8=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],u8={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},c8="ontouchstart"in Rt._global;function h8(l,t,e){if(l==="rotater")return e;t+=W.degToRad(u8[l]||0);const n=(W.radToDeg(t)%360+360)%360;return W._inRange(n,315+22.5,360)||W._inRange(n,0,22.5)?"ns-resize":W._inRange(n,45-22.5,45+22.5)?"nesw-resize":W._inRange(n,90-22.5,90+22.5)?"ew-resize":W._inRange(n,135-22.5,135+22.5)?"nwse-resize":W._inRange(n,180-22.5,180+22.5)?"ns-resize":W._inRange(n,225-22.5,225+22.5)?"nesw-resize":W._inRange(n,270-22.5,270+22.5)?"ew-resize":W._inRange(n,315-22.5,315+22.5)?"nwse-resize":(W.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const x0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function d8(l){return{x:l.x+l.width/2*Math.cos(l.rotation)+l.height/2*Math.sin(-l.rotation),y:l.y+l.height/2*Math.cos(l.rotation)+l.width/2*Math.sin(l.rotation)}}function e_(l,t,e){const n=e.x+(l.x-e.x)*Math.cos(t)-(l.y-e.y)*Math.sin(t),a=e.y+(l.x-e.x)*Math.sin(t)+(l.y-e.y)*Math.cos(t);return{...l,rotation:l.rotation+t,x:n,y:a}}function f8(l,t){const e=d8(l);return e_(l,t,e)}function p8(l,t,e){let n=t;for(let a=0;a<l.length;a++){const r=Rt.getAngle(l[a]),u=Math.abs(r-t)%(Math.PI*2);Math.min(u,Math.PI*2-u)<e&&(n=r)}return n}let q1=0;class De extends Ph{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(l8,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return W.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return t_+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter(a=>a.isAncestorOf(this)?(W.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=e,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(a._attrsAffectingSize.length){const u=a._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");a.on(u,r)}a.on(o8.map(u=>u+`.${this._getEventNamespace()}`).join(" "),r),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(a)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,n=>{e=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!e)return;const a=t.getAbsolutePosition(),r=a.x-e.x,u=a.y-e.y;this.nodes().forEach(d=>{if(d===t||d.isDragging())return;const f=d.getAbsolutePosition();d.setAbsolutePosition({x:f.x+r,y:f.y+u}),d.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(jv),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(jv,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){const a=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),u=t.getAbsolutePosition(n),d=a.x*r.x-t.offsetX()*r.x,f=a.y*r.y-t.offsetY()*r.y,g=(Rt.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),y={x:u.x+d*Math.cos(g)+f*Math.sin(-g),y:u.y+f*Math.cos(g)+d*Math.sin(g),width:a.width*r.x,height:a.height*r.y,rotation:g};return e_(y,-Rt.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const e=[];this.nodes().map(g=>{const y=g.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),S=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}],_=g.getAbsoluteTransform();S.forEach(function(x){const T=_.point(x);e.push(T)})});const n=new Ra;n.rotate(-Rt.getAngle(this.rotation()));let a=1/0,r=1/0,u=-1/0,d=-1/0;e.forEach(function(g){const y=n.point(g);a===void 0&&(a=u=y.x,r=d=y.y),a=Math.min(a,y.x),r=Math.min(r,y.y),u=Math.max(u,y.x),d=Math.max(d,y.y)}),n.invert();const f=n.point({x:a,y:r});return{x:f.x,y:f.y,width:u-a,height:d-r,rotation:Rt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),x0.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const e=new hp({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:c8?10:"auto"}),n=this;e.on("mousedown touchstart",function(a){n._handleMouseDown(a)}),e.on("dragstart",a=>{e.stopDrag(),a.cancelBubble=!0}),e.on("dragend",a=>{a.cancelBubble=!0}),e.on("mouseenter",()=>{const a=Rt.getAngle(this.rotation()),r=this.rotateAnchorCursor(),u=h8(t,a,r);e.getStage().content&&(e.getStage().content.style.cursor=u),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){const t=new At({name:"back",width:0,height:0,sceneFunc(e,n){const a=n.getParent(),r=a.padding();e.beginPath(),e.rect(-r,-r,n.width()+r*2,n.height()+r*2),e.moveTo(n.width()/2,-r),a.rotateEnabled()&&a.rotateLineVisible()&&e.lineTo(n.width()/2,-a.rotateAnchorOffset()*W._sign(n.height())-r),e.fillStrokeShape(n)},hitFunc:(e,n)=>{if(!this.shouldOverdrawWholeArea())return;const a=this.padding();e.beginPath(),e.rect(-a,-a,n.width()+a*2,n.height()+a*2),e.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",e=>{e.cancelBubble=!0}),t.on("dragmove",e=>{e.cancelBubble=!0}),t.on("dragend",e=>{e.cancelBubble=!0}),this.on("dragmove",e=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),n=e.width,a=e.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));this.sin=Math.abs(a/r),this.cos=Math.abs(n/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const u=t.target.getAbsolutePosition(),d=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-u.x,y:d.y-u.y},q1++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:t.evt,target:f})})}_handleMouseMove(t){let e,n,a;const r=this.findOne("."+this._movingAnchorName),u=r.getStage();u.setPointersPositions(t);const d=u.getPointerPosition();let f={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y};const g=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(g,f,t)),r.setAbsolutePosition(f);const y=r.getAbsolutePosition();if(g.x===y.x&&g.y===y.y)return;if(this._movingAnchorName==="rotater"){const O=this._getNodeRect();e=r.x()-O.width/2,n=-r.y()+O.height/2;let N=Math.atan2(-n,e)+Math.PI/2;O.height<0&&(N-=Math.PI);const P=Rt.getAngle(this.rotation())+N,j=Rt.getAngle(this.rotationSnapTolerance()),Y=p8(this.rotationSnaps(),P,j)-O.rotation,J=f8(O,Y);this._fitNodesInto(J,t);return}const S=this.shiftBehavior();let _;S==="inverted"?_=this.keepRatio()&&!t.shiftKey:S==="none"?_=this.keepRatio():_=this.keepRatio()||t.shiftKey;let x=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(_){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};a=Math.sqrt(Math.pow(O.x-r.x(),2)+Math.pow(O.y-r.y(),2));const N=this.findOne(".top-left").x()>O.x?-1:1,z=this.findOne(".top-left").y()>O.y?-1:1;e=a*this.cos*N,n=a*this.sin*z,this.findOne(".top-left").x(O.x-e),this.findOne(".top-left").y(O.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(_){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};a=Math.sqrt(Math.pow(r.x()-O.x,2)+Math.pow(O.y-r.y(),2));const N=this.findOne(".top-right").x()<O.x?-1:1,z=this.findOne(".top-right").y()>O.y?-1:1;e=a*this.cos*N,n=a*this.sin*z,this.findOne(".top-right").x(O.x+e),this.findOne(".top-right").y(O.y-n)}var T=r.position();this.findOne(".top-left").y(T.y),this.findOne(".bottom-right").x(T.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(_){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};a=Math.sqrt(Math.pow(O.x-r.x(),2)+Math.pow(r.y()-O.y,2));const N=O.x<r.x()?-1:1,z=r.y()<O.y?-1:1;e=a*this.cos*N,n=a*this.sin*z,r.x(O.x-e),r.y(O.y+n)}T=r.position(),this.findOne(".top-left").x(T.x),this.findOne(".bottom-right").y(T.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(_){const O=x?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};a=Math.sqrt(Math.pow(r.x()-O.x,2)+Math.pow(r.y()-O.y,2));const N=this.findOne(".bottom-right").x()<O.x?-1:1,z=this.findOne(".bottom-right").y()<O.y?-1:1;e=a*this.cos*N,n=a*this.sin*z,this.findOne(".bottom-right").x(O.x+e),this.findOne(".bottom-right").y(O.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(x=this.centeredScaling()||t.altKey,x){const O=this.findOne(".top-left"),N=this.findOne(".bottom-right"),z=O.x(),P=O.y(),j=this.getWidth()-N.x(),k=this.getHeight()-N.y();N.move({x:-z,y:-P}),O.move({x:j,y:k})}const w=this.findOne(".top-left").getAbsolutePosition();e=w.x,n=w.y;const R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),M=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:R,height:M,rotation:Rt.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();q1--,this._fire("transformend",{evt:t,target:n}),(e=this.getLayer())===null||e===void 0||e.batchDraw(),n&&this._nodes.forEach(a=>{var r;a._fire("transformend",{evt:t,target:a}),(r=a.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,e){const n=this._getNodeRect(),a=1;if(W._inRange(t.width,-this.padding()*2-a,a)){this.update();return}if(W._inRange(t.height,-this.padding()*2-a,a)){this.update();return}const r=new Ra;if(r.rotate(Rt.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const _=r.point({x:-this.padding()*2,y:0});t.x+=_.x,t.y+=_.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const _=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const _=r.point({x:0,y:-this.padding()*2});t.x+=_.x,t.y+=_.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const _=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const _=this.boundBoxFunc()(n,t);_?t=_:W.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const u=1e7,d=new Ra;d.translate(n.x,n.y),d.rotate(n.rotation),d.scale(n.width/u,n.height/u);const f=new Ra,g=t.width/u,y=t.height/u;this.flipEnabled()===!1?(f.translate(t.x,t.y),f.rotate(t.rotation),f.translate(t.width<0?t.width:0,t.height<0?t.height:0),f.scale(Math.abs(g),Math.abs(y))):(f.translate(t.x,t.y),f.rotate(t.rotation),f.scale(g,y));const S=f.multiply(d.invert());this._nodes.forEach(_=>{var x;if(!_.getStage())return;const T=_.getParent().getAbsoluteTransform(),w=_.getTransform().copy();w.translate(_.offsetX(),_.offsetY());const R=new Ra;R.multiply(T.copy().invert()).multiply(S).multiply(T).multiply(w);const M=R.decompose();_.setAttrs(M),(x=_.getLayer())===null||x===void 0||x.batchDraw()}),this.rotation(W._getRotation(t.rotation)),this._nodes.forEach(_=>{this._fire("transform",{evt:e,target:_}),_._fire("transform",{evt:e,target:_})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(W._getRotation(e.rotation));const n=e.width,a=e.height,r=this.enabledAnchors(),u=this.resizeEnabled(),d=this.padding(),f=this.anchorSize(),g=this.find("._anchor");g.forEach(S=>{S.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+d,offsetY:f/2+d,visible:u&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:f/2+d,visible:u&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:f/2-d,offsetY:f/2+d,visible:u&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:f/2+d,visible:u&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:a/2,offsetX:f/2-d,visible:u&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:f/2+d,offsetY:f/2-d,visible:u&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:a,offsetY:f/2-d,visible:u&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:a,offsetX:f/2-d,offsetY:f/2-d,visible:u&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*W._sign(a)-d,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(S=>S.draggable()),x:0,y:0});const y=this.anchorStyleFunc();y&&g.forEach(S=>{y(S)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ph.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return wt.prototype.toObject.call(this)}clone(t){return wt.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}De.isTransforming=()=>q1>0;function g8(l){return l instanceof Array||W.warn("enabledAnchors value should be an array"),l instanceof Array&&l.forEach(function(t){x0.indexOf(t)===-1&&W.warn("Unknown anchor name: "+t+". Available names are: "+x0.join(", "))}),l||[]}De.prototype.className="Transformer";En(De);G.addGetterSetter(De,"enabledAnchors",x0,g8);G.addGetterSetter(De,"flipEnabled",!0,js());G.addGetterSetter(De,"resizeEnabled",!0);G.addGetterSetter(De,"anchorSize",10,xt());G.addGetterSetter(De,"rotateEnabled",!0);G.addGetterSetter(De,"rotateLineVisible",!0);G.addGetterSetter(De,"rotationSnaps",[]);G.addGetterSetter(De,"rotateAnchorOffset",50,xt());G.addGetterSetter(De,"rotateAnchorCursor","crosshair");G.addGetterSetter(De,"rotationSnapTolerance",5,xt());G.addGetterSetter(De,"borderEnabled",!0);G.addGetterSetter(De,"anchorStroke","rgb(0, 161, 255)");G.addGetterSetter(De,"anchorStrokeWidth",1,xt());G.addGetterSetter(De,"anchorFill","white");G.addGetterSetter(De,"anchorCornerRadius",0,xt());G.addGetterSetter(De,"borderStroke","rgb(0, 161, 255)");G.addGetterSetter(De,"borderStrokeWidth",1,xt());G.addGetterSetter(De,"borderDash");G.addGetterSetter(De,"keepRatio",!0);G.addGetterSetter(De,"shiftBehavior","default");G.addGetterSetter(De,"centeredScaling",!1);G.addGetterSetter(De,"ignoreStroke",!1);G.addGetterSetter(De,"padding",0,xt());G.addGetterSetter(De,"nodes");G.addGetterSetter(De,"node");G.addGetterSetter(De,"boundBoxFunc");G.addGetterSetter(De,"anchorDragBoundFunc");G.addGetterSetter(De,"anchorStyleFunc");G.addGetterSetter(De,"shouldOverdrawWholeArea",!1);G.addGetterSetter(De,"useSingleNodeRotation",!0);G.backCompat(De,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class wl extends At{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Rt.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}wl.prototype.className="Wedge";wl.prototype._centroid=!0;wl.prototype._attrsAffectingSize=["radius"];En(wl);G.addGetterSetter(wl,"radius",0,xt());G.addGetterSetter(wl,"angle",0,xt());G.addGetterSetter(wl,"clockwise",!1);G.backCompat(wl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Fv(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const m8=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],y8=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function v8(l,t){const e=l.data,n=l.width,a=l.height;let r,u,d,f,g,y,S,_,x,T,w,R,M,O,N,z,P,j,k,Y;const J=t+t+1,lt=n-1,ct=a-1,gt=t+1,St=gt*(gt+1)/2,dt=new Fv,vt=m8[t],H=y8[t];let Z=null,ot=dt,Ct=null,U=null;for(let $=1;$<J;$++)ot=ot.next=new Fv,$===gt&&(Z=ot);ot.next=dt,d=u=0;for(let $=0;$<a;$++){R=M=O=N=f=g=y=S=0,_=gt*(z=e[u]),x=gt*(P=e[u+1]),T=gt*(j=e[u+2]),w=gt*(k=e[u+3]),f+=St*z,g+=St*P,y+=St*j,S+=St*k,ot=dt;for(let ht=0;ht<gt;ht++)ot.r=z,ot.g=P,ot.b=j,ot.a=k,ot=ot.next;for(let ht=1;ht<gt;ht++)r=u+((lt<ht?lt:ht)<<2),f+=(ot.r=z=e[r])*(Y=gt-ht),g+=(ot.g=P=e[r+1])*Y,y+=(ot.b=j=e[r+2])*Y,S+=(ot.a=k=e[r+3])*Y,R+=z,M+=P,O+=j,N+=k,ot=ot.next;Ct=dt,U=Z;for(let ht=0;ht<n;ht++)e[u+3]=k=S*vt>>H,k!==0?(k=255/k,e[u]=(f*vt>>H)*k,e[u+1]=(g*vt>>H)*k,e[u+2]=(y*vt>>H)*k):e[u]=e[u+1]=e[u+2]=0,f-=_,g-=x,y-=T,S-=w,_-=Ct.r,x-=Ct.g,T-=Ct.b,w-=Ct.a,r=d+((r=ht+t+1)<lt?r:lt)<<2,R+=Ct.r=e[r],M+=Ct.g=e[r+1],O+=Ct.b=e[r+2],N+=Ct.a=e[r+3],f+=R,g+=M,y+=O,S+=N,Ct=Ct.next,_+=z=U.r,x+=P=U.g,T+=j=U.b,w+=k=U.a,R-=z,M-=P,O-=j,N-=k,U=U.next,u+=4;d+=n}for(let $=0;$<n;$++){M=O=N=R=g=y=S=f=0,u=$<<2,_=gt*(z=e[u]),x=gt*(P=e[u+1]),T=gt*(j=e[u+2]),w=gt*(k=e[u+3]),f+=St*z,g+=St*P,y+=St*j,S+=St*k,ot=dt;for(let ft=0;ft<gt;ft++)ot.r=z,ot.g=P,ot.b=j,ot.a=k,ot=ot.next;let ht=n;for(let ft=1;ft<=t;ft++)u=ht+$<<2,f+=(ot.r=z=e[u])*(Y=gt-ft),g+=(ot.g=P=e[u+1])*Y,y+=(ot.b=j=e[u+2])*Y,S+=(ot.a=k=e[u+3])*Y,R+=z,M+=P,O+=j,N+=k,ot=ot.next,ft<ct&&(ht+=n);u=$,Ct=dt,U=Z;for(let ft=0;ft<a;ft++)r=u<<2,e[r+3]=k=S*vt>>H,k>0?(k=255/k,e[r]=(f*vt>>H)*k,e[r+1]=(g*vt>>H)*k,e[r+2]=(y*vt>>H)*k):e[r]=e[r+1]=e[r+2]=0,f-=_,g-=x,y-=T,S-=w,_-=Ct.r,x-=Ct.g,T-=Ct.b,w-=Ct.a,r=$+((r=ft+gt)<ct?r:ct)*n<<2,f+=R+=Ct.r=e[r],g+=M+=Ct.g=e[r+1],y+=O+=Ct.b=e[r+2],S+=N+=Ct.a=e[r+3],Ct=Ct.next,_+=z=U.r,x+=P=U.g,T+=j=U.b,w+=k=U.a,R-=z,M-=P,O-=j,N-=k,U=U.next,u+=n}}const b8=function(t){const e=Math.round(this.blurRadius());e>0&&v8(t,e)};G.addGetterSetter(wt,"blurRadius",0,xt(),G.afterSetFilter);const S8=function(l){const t=this.brightness()*255,e=l.data,n=e.length;for(let a=0;a<n;a+=4)e[a]+=t,e[a+1]+=t,e[a+2]+=t};G.addGetterSetter(wt,"brightness",0,xt(),G.afterSetFilter);const _8=function(l){const t=this.brightness(),e=l.data,n=e.length;for(let a=0;a<n;a+=4)e[a]=Math.min(255,e[a]*t),e[a+1]=Math.min(255,e[a+1]*t),e[a+2]=Math.min(255,e[a+2]*t)},A8=function(l){const t=Math.pow((this.contrast()+100)/100,2),e=l.data,n=e.length;let a=150,r=150,u=150;for(let d=0;d<n;d+=4)a=e[d],r=e[d+1],u=e[d+2],a/=255,a-=.5,a*=t,a+=.5,a*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,u/=255,u-=.5,u*=t,u+=.5,u*=255,a=a<0?0:a>255?255:a,r=r<0?0:r>255?255:r,u=u<0?0:u>255?255:u,e[d]=a,e[d+1]=r,e[d+2]=u};G.addGetterSetter(wt,"contrast",0,xt(),G.afterSetFilter);const E8=function(l){var t,e,n,a,r,u,d,f,g;const y=l.data,S=l.width,_=l.height,x=Math.min(1,Math.max(0,(e=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&e!==void 0?e:.5)),T=Math.min(1,Math.max(0,(a=(n=this.embossWhiteLevel)===null||n===void 0?void 0:n.call(this))!==null&&a!==void 0?a:.5)),R=(d={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(u=(r=this.embossDirection)===null||r===void 0?void 0:r.call(this))!==null&&u!==void 0?u:"top-left"])!==null&&d!==void 0?d:315,M=!!((g=(f=this.embossBlend)===null||f===void 0?void 0:f.call(this))!==null&&g!==void 0&&g),O=x*10,N=T*255,z=R*Math.PI/180,P=Math.cos(z),j=Math.sin(z),k=128/1020*O,Y=new Uint8ClampedArray(y),J=new Float32Array(S*_);for(let dt=0,vt=0;vt<y.length;vt+=4,dt++)J[dt]=.2126*Y[vt]+.7152*Y[vt+1]+.0722*Y[vt+2];const lt=[-1,0,1,-2,0,2,-1,0,1],ct=[-1,-2,-1,0,0,0,1,2,1],gt=[-S-1,-S,-S+1,-1,0,1,S-1,S,S+1],St=dt=>dt<0?0:dt>255?255:dt;for(let dt=1;dt<_-1;dt++)for(let vt=1;vt<S-1;vt++){const H=dt*S+vt;let Z=0,ot=0;Z+=J[H+gt[0]]*lt[0],ot+=J[H+gt[0]]*ct[0],Z+=J[H+gt[1]]*lt[1],ot+=J[H+gt[1]]*ct[1],Z+=J[H+gt[2]]*lt[2],ot+=J[H+gt[2]]*ct[2],Z+=J[H+gt[3]]*lt[3],ot+=J[H+gt[3]]*ct[3],Z+=J[H+gt[5]]*lt[5],ot+=J[H+gt[5]]*ct[5],Z+=J[H+gt[6]]*lt[6],ot+=J[H+gt[6]]*ct[6],Z+=J[H+gt[7]]*lt[7],ot+=J[H+gt[7]]*ct[7],Z+=J[H+gt[8]]*lt[8],ot+=J[H+gt[8]]*ct[8];const Ct=P*Z+j*ot,U=St(N+Ct*k),$=H*4;if(M){const ht=U-N;y[$]=St(Y[$]+ht),y[$+1]=St(Y[$+1]+ht),y[$+2]=St(Y[$+2]+ht),y[$+3]=Y[$+3]}else y[$]=y[$+1]=y[$+2]=U,y[$+3]=Y[$+3]}for(let dt=0;dt<S;dt++){let vt=dt*4,H=((_-1)*S+dt)*4;y[vt]=Y[vt],y[vt+1]=Y[vt+1],y[vt+2]=Y[vt+2],y[vt+3]=Y[vt+3],y[H]=Y[H],y[H+1]=Y[H+1],y[H+2]=Y[H+2],y[H+3]=Y[H+3]}for(let dt=1;dt<_-1;dt++){let vt=dt*S*4,H=(dt*S+(S-1))*4;y[vt]=Y[vt],y[vt+1]=Y[vt+1],y[vt+2]=Y[vt+2],y[vt+3]=Y[vt+3],y[H]=Y[H],y[H+1]=Y[H+1],y[H+2]=Y[H+2],y[H+3]=Y[H+3]}return l};G.addGetterSetter(wt,"embossStrength",.5,xt(),G.afterSetFilter);G.addGetterSetter(wt,"embossWhiteLevel",.5,xt(),G.afterSetFilter);G.addGetterSetter(wt,"embossDirection","top-left",void 0,G.afterSetFilter);G.addGetterSetter(wt,"embossBlend",!1,void 0,G.afterSetFilter);function c1(l,t,e,n,a){const r=e-t,u=a-n;if(r===0)return n+u/2;if(u===0)return n;let d=(l-t)/r;return d=u*d+n,d}const T8=function(l){const t=l.data,e=t.length;let n=t[0],a=n,r,u=t[1],d=u,f,g=t[2],y=g,S;const _=this.enhance();if(_===0)return;for(let N=0;N<e;N+=4)r=t[N+0],r<n?n=r:r>a&&(a=r),f=t[N+1],f<u?u=f:f>d&&(d=f),S=t[N+2],S<g?g=S:S>y&&(y=S);a===n&&(a=255,n=0),d===u&&(d=255,u=0),y===g&&(y=255,g=0);let x,T,w,R,M,O;if(_>0)x=a+_*(255-a),T=n-_*(n-0),w=d+_*(255-d),R=u-_*(u-0),M=y+_*(255-y),O=g-_*(g-0);else{const N=(a+n)*.5;x=a+_*(a-N),T=n+_*(n-N);const z=(d+u)*.5;w=d+_*(d-z),R=u+_*(u-z);const P=(y+g)*.5;M=y+_*(y-P),O=g+_*(g-P)}for(let N=0;N<e;N+=4)t[N+0]=c1(t[N+0],n,a,T,x),t[N+1]=c1(t[N+1],u,d,R,w),t[N+2]=c1(t[N+2],g,y,O,M)};G.addGetterSetter(wt,"enhance",0,xt(),G.afterSetFilter);const x8=function(l){const t=l.data,e=t.length;for(let n=0;n<e;n+=4){const a=.34*t[n]+.5*t[n+1]+.16*t[n+2];t[n]=a,t[n+1]=a,t[n+2]=a}};G.addGetterSetter(wt,"hue",0,xt(),G.afterSetFilter);G.addGetterSetter(wt,"saturation",0,xt(),G.afterSetFilter);G.addGetterSetter(wt,"luminance",0,xt(),G.afterSetFilter);const C8=function(l){const t=l.data,e=t.length,n=1,a=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,u=this.luminance()*127,d=n*a*Math.cos(r*Math.PI/180),f=n*a*Math.sin(r*Math.PI/180),g=.299*n+.701*d+.167*f,y=.587*n-.587*d+.33*f,S=.114*n-.114*d-.497*f,_=.299*n-.299*d-.328*f,x=.587*n+.413*d+.035*f,T=.114*n-.114*d+.293*f,w=.299*n-.3*d+1.25*f,R=.587*n-.586*d-1.05*f,M=.114*n+.886*d-.2*f;let O,N,z,P;for(let j=0;j<e;j+=4)O=t[j+0],N=t[j+1],z=t[j+2],P=t[j+3],t[j+0]=g*O+y*N+S*z+u,t[j+1]=_*O+x*N+T*z+u,t[j+2]=w*O+R*N+M*z+u,t[j+3]=P},w8=function(l){const t=l.data,e=t.length,n=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,u=n*a*Math.cos(r*Math.PI/180),d=n*a*Math.sin(r*Math.PI/180),f=.299*n+.701*u+.167*d,g=.587*n-.587*u+.33*d,y=.114*n-.114*u-.497*d,S=.299*n-.299*u-.328*d,_=.587*n+.413*u+.035*d,x=.114*n-.114*u+.293*d,T=.299*n-.3*u+1.25*d,w=.587*n-.586*u-1.05*d,R=.114*n+.886*u-.2*d;for(let M=0;M<e;M+=4){const O=t[M+0],N=t[M+1],z=t[M+2],P=t[M+3];t[M+0]=f*O+g*N+y*z,t[M+1]=S*O+_*N+x*z,t[M+2]=T*O+w*N+R*z,t[M+3]=P}};G.addGetterSetter(wt,"hue",0,xt(),G.afterSetFilter);G.addGetterSetter(wt,"saturation",0,xt(),G.afterSetFilter);G.addGetterSetter(wt,"value",0,xt(),G.afterSetFilter);const R8=function(l){const t=l.data,e=t.length;for(let n=0;n<e;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},M8=function(l,t,e){const n=l.data,a=t.data,r=l.width,u=l.height,d=e.polarCenterX||r/2,f=e.polarCenterY||u/2;let g=Math.sqrt(d*d+f*f),y=r-d,S=u-f;const _=Math.sqrt(y*y+S*S);g=_>g?_:g;const x=u,T=r,w=360/T*Math.PI/180;for(let R=0;R<T;R+=1){const M=Math.sin(R*w),O=Math.cos(R*w);for(let N=0;N<x;N+=1){y=Math.floor(d+g*N/x*O),S=Math.floor(f+g*N/x*M);let z=(S*r+y)*4;const P=n[z+0],j=n[z+1],k=n[z+2],Y=n[z+3];z=(R+N*r)*4,a[z+0]=P,a[z+1]=j,a[z+2]=k,a[z+3]=Y}}},D8=function(l,t,e){const n=l.data,a=t.data,r=l.width,u=l.height,d=e.polarCenterX||r/2,f=e.polarCenterY||u/2;let g=Math.sqrt(d*d+f*f),y=r-d,S=u-f;const _=Math.sqrt(y*y+S*S);g=_>g?_:g;const x=u,T=r,w=0;let R,M;for(y=0;y<r;y+=1)for(S=0;S<u;S+=1){const O=y-d,N=S-f,z=Math.sqrt(O*O+N*N)*x/g;let P=(Math.atan2(N,O)*180/Math.PI+360+w)%360;P=P*T/360,R=Math.floor(P),M=Math.floor(z);let j=(M*r+R)*4;const k=n[j+0],Y=n[j+1],J=n[j+2],lt=n[j+3];j=(S*r+y)*4,a[j+0]=k,a[j+1]=Y,a[j+2]=J,a[j+3]=lt}},O8=function(l){const t=l.width,e=l.height;let n,a,r,u,d,f,g,y,S,_,x=Math.round(this.kaleidoscopePower());const T=Math.round(this.kaleidoscopeAngle()),w=Math.floor(t*(T%360)/360);if(x<1)return;const R=W.createCanvasElement();R.width=t,R.height=e;const M=R.getContext("2d").getImageData(0,0,t,e);W.releaseCanvas(R),M8(l,M,{polarCenterX:t/2,polarCenterY:e/2});let O=t/Math.pow(2,x);for(;O<=8;)O=O*2,x-=1;O=Math.ceil(O);let N=O,z=0,P=N,j=1;for(w+O>t&&(z=N,P=0,j=-1),a=0;a<e;a+=1)for(n=z;n!==P;n+=j)r=Math.round(n+w)%t,S=(t*a+r)*4,d=M.data[S+0],f=M.data[S+1],g=M.data[S+2],y=M.data[S+3],_=(t*a+n)*4,M.data[_+0]=d,M.data[_+1]=f,M.data[_+2]=g,M.data[_+3]=y;for(a=0;a<e;a+=1)for(N=Math.floor(O),u=0;u<x;u+=1){for(n=0;n<N+1;n+=1)S=(t*a+n)*4,d=M.data[S+0],f=M.data[S+1],g=M.data[S+2],y=M.data[S+3],_=(t*a+N*2-n-1)*4,M.data[_+0]=d,M.data[_+1]=f,M.data[_+2]=g,M.data[_+3]=y;N*=2}D8(M,l,{})};G.addGetterSetter(wt,"kaleidoscopePower",2,xt(),G.afterSetFilter);G.addGetterSetter(wt,"kaleidoscopeAngle",0,xt(),G.afterSetFilter);function h0(l,t,e){let n=(e*l.width+t)*4;const a=[];return a.push(l.data[n++],l.data[n++],l.data[n++],l.data[n++]),a}function Rf(l,t){return Math.sqrt(Math.pow(l[0]-t[0],2)+Math.pow(l[1]-t[1],2)+Math.pow(l[2]-t[2],2))}function N8(l){const t=[0,0,0];for(let e=0;e<l.length;e++)t[0]+=l[e][0],t[1]+=l[e][1],t[2]+=l[e][2];return t[0]/=l.length,t[1]/=l.length,t[2]/=l.length,t}function L8(l,t){const e=h0(l,0,0),n=h0(l,l.width-1,0),a=h0(l,0,l.height-1),r=h0(l,l.width-1,l.height-1),u=t||10;if(Rf(e,n)<u&&Rf(n,r)<u&&Rf(r,a)<u&&Rf(a,e)<u){const d=N8([n,e,r,a]),f=[];for(let g=0;g<l.width*l.height;g++){const y=Rf(d,[l.data[g*4],l.data[g*4+1],l.data[g*4+2]]);f[g]=y<u?0:255}return f}}function z8(l,t){for(let e=0;e<l.width*l.height;e++)l.data[4*e+3]=t[e]}function B8(l,t,e){const n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),u=[];for(let d=0;d<e;d++)for(let f=0;f<t;f++){const g=d*t+f;let y=0;for(let S=0;S<a;S++)for(let _=0;_<a;_++){const x=d+S-r,T=f+_-r;if(x>=0&&x<e&&T>=0&&T<t){const w=x*t+T,R=n[S*a+_];y+=l[w]*R}}u[g]=y===2040?255:0}return u}function P8(l,t,e){const n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),u=[];for(let d=0;d<e;d++)for(let f=0;f<t;f++){const g=d*t+f;let y=0;for(let S=0;S<a;S++)for(let _=0;_<a;_++){const x=d+S-r,T=f+_-r;if(x>=0&&x<e&&T>=0&&T<t){const w=x*t+T,R=n[S*a+_];y+=l[w]*R}}u[g]=y>=1020?255:0}return u}function H8(l,t,e){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(n.length)),r=Math.floor(a/2),u=[];for(let d=0;d<e;d++)for(let f=0;f<t;f++){const g=d*t+f;let y=0;for(let S=0;S<a;S++)for(let _=0;_<a;_++){const x=d+S-r,T=f+_-r;if(x>=0&&x<e&&T>=0&&T<t){const w=x*t+T,R=n[S*a+_];y+=l[w]*R}}u[g]=y}return u}const U8=function(l){const t=this.threshold();let e=L8(l,t);return e&&(e=B8(e,l.width,l.height),e=P8(e,l.width,l.height),e=H8(e,l.width,l.height),z8(l,e)),l};G.addGetterSetter(wt,"threshold",0,xt(),G.afterSetFilter);const G8=function(l){const t=this.noise()*255,e=l.data,n=e.length,a=t/2;for(let r=0;r<n;r+=4)e[r+0]+=a-2*a*Math.random(),e[r+1]+=a-2*a*Math.random(),e[r+2]+=a-2*a*Math.random()};G.addGetterSetter(wt,"noise",.2,xt(),G.afterSetFilter);const k8=function(l){let t=Math.ceil(this.pixelSize()),e=l.width,n=l.height,a=Math.ceil(e/t),r=Math.ceil(n/t),u=l.data;if(t<=0){W.error("pixelSize value can not be <= 0");return}for(let d=0;d<a;d+=1)for(let f=0;f<r;f+=1){let g=0,y=0,S=0,_=0;const x=d*t,T=x+t,w=f*t,R=w+t;let M=0;for(let O=x;O<T;O+=1)if(!(O>=e))for(let N=w;N<R;N+=1){if(N>=n)continue;const z=(e*N+O)*4;g+=u[z+0],y+=u[z+1],S+=u[z+2],_+=u[z+3],M+=1}g=g/M,y=y/M,S=S/M,_=_/M;for(let O=x;O<T;O+=1)if(!(O>=e))for(let N=w;N<R;N+=1){if(N>=n)continue;const z=(e*N+O)*4;u[z+0]=g,u[z+1]=y,u[z+2]=S,u[z+3]=_}}};G.addGetterSetter(wt,"pixelSize",8,xt(),G.afterSetFilter);const j8=function(l){const t=Math.round(this.levels()*254)+1,e=l.data,n=e.length,a=255/t;for(let r=0;r<n;r+=1)e[r]=Math.floor(e[r]/a)*a};G.addGetterSetter(wt,"levels",.5,xt(),G.afterSetFilter);const F8=function(l){const t=l.data,e=t.length,n=this.red(),a=this.green(),r=this.blue();for(let u=0;u<e;u+=4){const d=(.34*t[u]+.5*t[u+1]+.16*t[u+2])/255;t[u]=d*n,t[u+1]=d*a,t[u+2]=d*r,t[u+3]=t[u+3]}};G.addGetterSetter(wt,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});G.addGetterSetter(wt,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});G.addGetterSetter(wt,"blue",0,TS,G.afterSetFilter);const q8=function(l){const t=l.data,e=t.length,n=this.red(),a=this.green(),r=this.blue(),u=this.alpha();for(let d=0;d<e;d+=4){const f=1-u;t[d]=n*u+t[d]*f,t[d+1]=a*u+t[d+1]*f,t[d+2]=r*u+t[d+2]*f}};G.addGetterSetter(wt,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});G.addGetterSetter(wt,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});G.addGetterSetter(wt,"blue",0,TS,G.afterSetFilter);G.addGetterSetter(wt,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l});const I8=function(l){const t=l.data,e=t.length;for(let n=0;n<e;n+=4){const a=t[n+0],r=t[n+1],u=t[n+2];t[n+0]=Math.min(255,a*.393+r*.769+u*.189),t[n+1]=Math.min(255,a*.349+r*.686+u*.168),t[n+2]=Math.min(255,a*.272+r*.534+u*.131)}},V8=function(l){const e=l.data;for(let n=0;n<e.length;n+=4){const a=e[n],r=e[n+1],u=e[n+2];.2126*a+.7152*r+.0722*u>=128&&(e[n]=255-a,e[n+1]=255-r,e[n+2]=255-u)}return l},Y8=function(l){const t=this.threshold()*255,e=l.data,n=e.length;for(let a=0;a<n;a+=1)e[a]=e[a]<t?0:255};G.addGetterSetter(wt,"threshold",.5,xt(),G.afterSetFilter);Hh.Util._assign(Hh,{Arc:xl,Arrow:tc,Circle:Fh,Ellipse:Do,Image:Pr,Label:Ey,Tag:ec,Line:Cl,Path:on,Rect:hp,RegularPolygon:Oo,Ring:nc,Sprite:Hr,Star:No,Text:fn,TextPath:$n,Transformer:De,Wedge:wl,Filters:{Blur:b8,Brightness:_8,Brighten:S8,Contrast:A8,Emboss:E8,Enhance:T8,Grayscale:x8,HSL:C8,HSV:w8,Invert:R8,Kaleidoscope:O8,Mask:U8,Noise:G8,Pixelate:k8,Posterize:j8,RGB:F8,RGBA:q8,Sepia:I8,Solarize:V8,Threshold:Y8}});var h1={exports:{}},d1={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function X8(){return qv||(qv=1,(function(l){l.exports=function(t){function e(o,c,m,b){return new rm(o,c,m,b)}function n(){}function a(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function u(o){if(r(o)!==o)throw Error(a(188))}function d(o){var c=o.alternate;if(!c){if(c=r(o),c===null)throw Error(a(188));return c!==o?null:o}for(var m=o,b=c;;){var E=m.return;if(E===null)break;var C=E.alternate;if(C===null){if(b=E.return,b!==null){m=b;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===m)return u(E),o;if(C===b)return u(E),c;C=C.sibling}throw Error(a(188))}if(m.return!==b.return)m=E,b=C;else{for(var B=!1,I=E.child;I;){if(I===m){B=!0,m=E,b=C;break}if(I===b){B=!0,b=E,m=C;break}I=I.sibling}if(!B){for(I=C.child;I;){if(I===m){B=!0,m=C,b=E;break}if(I===b){B=!0,b=C,m=E;break}I=I.sibling}if(!B)throw Error(a(189))}}if(m.alternate!==b)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}function g(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(o.tag!==4&&(c=g(o),c!==null))return c;o=o.sibling}return null}function y(o){return o===null||typeof o!="object"?null:(o=Kc&&o[Kc]||o["@@iterator"],typeof o=="function"?o:null)}function S(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===hu?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case rl:return"Fragment";case Xc:return"Profiler";case lu:return"StrictMode";case uu:return"Suspense";case cu:return"SuspenseList";case ll:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case ar:return"Portal";case Ts:return(o.displayName||"Context")+".Provider";case Md:return(o._context.displayName||"Context")+".Consumer";case qa:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ia:return c=o.displayName||null,c!==null?c:S(o.type)||"Memo";case mi:c=o._payload,o=o._init;try{return S(o(c))}catch{}}return null}function _(o){return{current:o}}function x(o){0>Ds||(o.current=Ms[Ds],Ms[Ds]=null,Ds--)}function T(o,c){Ds++,Ms[Ds]=o.current,o.current=c}function w(o){return o>>>=0,o===0?32:31-(Ag(o)/ih|0)|0}function R(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function M(o,c,m){var b=o.pendingLanes;if(b===0)return 0;var E=0,C=o.suspendedLanes,B=o.pingedLanes;o=o.warmLanes;var I=b&134217727;return I!==0?(b=I&~C,b!==0?E=R(b):(B&=I,B!==0?E=R(B):m||(m=I&~o,m!==0&&(E=R(m))))):(I=b&~C,I!==0?E=R(I):B!==0?E=R(B):m||(m=b&~o,m!==0&&(E=R(m)))),E===0?0:c!==0&&c!==E&&(c&C)===0&&(C=E&-E,m=c&-c,C>=m||C===32&&(m&4194048)!==0)?c:E}function O(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function N(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z(){var o=Eu;return Eu<<=1,(Eu&4194048)===0&&(Eu=256),o}function P(){var o=io;return io<<=1,(io&62914560)===0&&(io=4194304),o}function j(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function k(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Y(o,c,m,b,E,C){var B=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var I=o.entanglements,Q=o.expirationTimes,bt=o.hiddenUpdates;for(m=B&~m;0<m;){var Tt=31-Ni(m),Dt=1<<Tt;I[Tt]=0,Q[Tt]=-1;var Ot=bt[Tt];if(Ot!==null)for(bt[Tt]=null,Tt=0;Tt<Ot.length;Tt++){var ie=Ot[Tt];ie!==null&&(ie.lane&=-536870913)}m&=~Dt}b!==0&&J(o,b,0),C!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=C&~(B&~c))}function J(o,c,m){o.pendingLanes|=c,o.suspendedLanes&=~c;var b=31-Ni(c);o.entangledLanes|=c,o.entanglements[b]=o.entanglements[b]|1073741824|m&4194090}function lt(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var b=31-Ni(m),E=1<<b;E&c|o[b]&c&&(o[b]|=c),m&=~E}}function ct(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function gt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function St(o){if(typeof Cg=="function"&&wg(o),vi&&typeof vi.setStrictMode=="function")try{vi.setStrictMode(ur,o)}catch{}}function dt(o){if(rh===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);rh=c&&c[1]||"",ef=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rh+o+ef}function vt(o,c){if(!o||lh)return"";lh=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(c){var Dt=function(){throw Error()};if(Object.defineProperty(Dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Dt,[])}catch(ie){var Ot=ie}Reflect.construct(o,[],Dt)}else{try{Dt.call()}catch(ie){Ot=ie}o.call(Dt.prototype)}}else{try{throw Error()}catch(ie){Ot=ie}(Dt=o())&&typeof Dt.catch=="function"&&Dt.catch(function(){})}}catch(ie){if(ie&&Ot&&typeof ie.stack=="string")return[ie.stack,Ot.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=b.DetermineComponentFrameRoot(),B=C[0],I=C[1];if(B&&I){var Q=B.split(`
`),bt=I.split(`
`);for(E=b=0;b<Q.length&&!Q[b].includes("DetermineComponentFrameRoot");)b++;for(;E<bt.length&&!bt[E].includes("DetermineComponentFrameRoot");)E++;if(b===Q.length||E===bt.length)for(b=Q.length-1,E=bt.length-1;1<=b&&0<=E&&Q[b]!==bt[E];)E--;for(;1<=b&&0<=E;b--,E--)if(Q[b]!==bt[E]){if(b!==1||E!==1)do if(b--,E--,0>E||Q[b]!==bt[E]){var Tt=`
`+Q[b].replace(" at new "," at ");return o.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",o.displayName)),Tt}while(1<=b&&0<=E);break}}}finally{lh=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?dt(m):""}function H(o){switch(o.tag){case 26:case 27:case 5:return dt(o.type);case 16:return dt("Lazy");case 13:return dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return vt(o.type,!1);case 11:return vt(o.type.render,!1);case 1:return vt(o.type,!0);case 31:return dt("Activity");default:return""}}function Z(o){try{var c="";do c+=H(o),o=o.return;while(o);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ot(o,c){if(typeof o=="object"&&o!==null){var m=oh.get(o);return m!==void 0?m:(c={value:o,source:c,stack:Z(c)},oh.set(o,c),c)}return{value:o,source:c,stack:Z(c)}}function Ct(o,c){cr[hr++]=ao,cr[hr++]=xu,xu=o,ao=c}function U(o,c,m){bi[Li++]=ba,bi[Li++]=Ka,bi[Li++]=dr,dr=o;var b=ba;o=Ka;var E=32-Ni(b)-1;b&=~(1<<E),m+=1;var C=32-Ni(c)+E;if(30<C){var B=E-E%5;C=(b&(1<<B)-1).toString(32),b>>=B,E-=B,ba=1<<32-Ni(c)+E|m<<E|b,Ka=C+o}else ba=1<<C|m<<E|b,Ka=o}function $(o){o.return!==null&&(Ct(o,1),U(o,1,0))}function ht(o){for(;o===xu;)xu=cr[--hr],cr[hr]=null,ao=cr[--hr],cr[hr]=null;for(;o===dr;)dr=bi[--Li],bi[Li]=null,Ka=bi[--Li],bi[Li]=null,ba=bi[--Li],bi[Li]=null}function ft(o,c){T(fr,c),T(hl,o),T(en,null),o=Od(c),x(en),T(en,o)}function Mt(){x(en),x(hl),x(fr)}function Ht(o){o.memoizedState!==null&&T(Cu,o);var c=en.current,m=Nd(c,o.type);c!==m&&(T(hl,o),T(en,m))}function Nt(o){hl.current===o&&(x(en),x(hl)),Cu.current===o&&(x(Cu),Cs?Ya._currentValue=Oi:Ya._currentValue2=Oi)}function jt(o){var c=Error(a(418,""));throw ee(ot(c,o)),nf}function he(o,c){if(!Mi)throw Error(a(175));yg(o.stateNode,o.type,o.memoizedProps,c,o)||jt(o)}function un(o){for(hn=o.return;hn;)switch(hn.tag){case 5:case 13:Ne=!1;return;case 27:case 3:Ne=!0;return;default:hn=hn.return}}function Te(o){if(!Mi||o!==hn)return!1;if(!Ae)return un(o),Ae=!0,!1;var c=o.tag;if(pe?c!==3&&c!==27&&(c!==5||Qd(o.type)&&!xs(o.type,o.memoizedProps))&&wn&&jt(o):c!==3&&(c!==5||Qd(o.type)&&!xs(o.type,o.memoizedProps))&&wn&&jt(o),un(o),c===13){if(!Mi)throw Error(a(316));if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));wn=th(o)}else wn=pe&&c===27?Yd(o.type,wn):hn?dg(o.stateNode):null;return!0}function Tn(){Mi&&(wn=hn=null,Ae=!1)}function Yn(){var o=Sa;return o!==null&&(ui===null?ui=o:ui.push.apply(ui,o),Sa=null),o}function ee(o){Sa===null?Sa=[o]:Sa.push(o)}function Pe(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}function de(o,c,m){Cs?(T(wu,c._currentValue),c._currentValue=m):(T(wu,c._currentValue2),c._currentValue2=m)}function Et(o){var c=wu.current;Cs?o._currentValue=c:o._currentValue2=c,x(wu)}function Gt(o,c,m){for(;o!==null;){var b=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,b!==null&&(b.childLanes|=c)):b!==null&&(b.childLanes&c)!==c&&(b.childLanes|=c),o===m)break;o=o.return}}function ne(o,c,m,b){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var C=E.dependencies;if(C!==null){var B=E.child;C=C.firstContext;t:for(;C!==null;){var I=C;C=E;for(var Q=0;Q<c.length;Q++)if(I.context===c[Q]){C.lanes|=m,I=C.alternate,I!==null&&(I.lanes|=m),Gt(C.return,m,o),b||(B=null);break t}C=I.next}}else if(E.tag===18){if(B=E.return,B===null)throw Error(a(341));B.lanes|=m,C=B.alternate,C!==null&&(C.lanes|=m),Gt(B,m,o),B=null}else B=E.child;if(B!==null)B.return=E;else for(B=E;B!==null;){if(B===o){B=null;break}if(E=B.sibling,E!==null){E.return=B.return,B=E;break}B=B.return}E=B}}function Oe(o,c,m,b){o=null;for(var E=c,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var B=E.alternate;if(B===null)throw Error(a(387));if(B=B.memoizedProps,B!==null){var I=E.type;Xi(E.pendingProps.value,B.value)||(o!==null?o.push(I):o=[I])}}else if(E===Cu.current){if(B=E.alternate,B===null)throw Error(a(387));B.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(Ya):o=[Ya])}E=E.return}o!==null&&ne(c,o,m,b),c.flags|=262144}function vn(o){for(o=o.firstContext;o!==null;){var c=o.context;if(!Xi(Cs?c._currentValue:c._currentValue2,o.memoizedValue))return!0;o=o.next}return!1}function xe(o){_a=o,ri=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function He(o){return ls(_a,o)}function ki(o,c){return _a===null&&xe(o),ls(o,c)}function ls(o,c){var m=Cs?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:m,next:null},ri===null){if(o===null)throw Error(a(308));ri=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else ri=ri.next=c;return m}function os(){return{controller:new Rg,data:new Map,refCount:0}}function _e(o){o.refCount--,o.refCount===0&&Mg(Ru,function(){o.controller.abort()})}function Jt(o){o!==pr&&o.next===null&&(pr===null?Mu=pr=o:pr=pr.next=o),so=!0,uh||(uh=!0,ic())}function $e(o,c){if(!Du&&so){Du=!0;do for(var m=!1,b=Mu;b!==null;){if(o!==0){var E=b.pendingLanes;if(E===0)var C=0;else{var B=b.suspendedLanes,I=b.pingedLanes;C=(1<<31-Ni(42|o)+1)-1,C&=E&~(B&~I),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,Bo(b,C))}else C=ue,C=M(b,b===we?C:0,b.cancelPendingCommit!==null||b.timeoutHandle!==sa),(C&3)===0||O(b,C)||(m=!0,Bo(b,C));b=b.next}while(m);Du=!1}}function tn(){Rl()}function Rl(){so=uh=!1;var o=0;Os!==0&&(zd()&&(o=Os),Os=0);for(var c=Fe(),m=null,b=Mu;b!==null;){var E=b.next,C=pp(b,c);C===0?(b.next=null,m===null?Mu=E:m.next=E,E===null&&(pr=m)):(m=b,(o!==0||(C&3)!==0)&&(so=!0)),b=E}$e(o)}function pp(o,c){for(var m=o.suspendedLanes,b=o.pingedLanes,E=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var B=31-Ni(C),I=1<<B,Q=E[B];Q===-1?((I&m)===0||(I&b)!==0)&&(E[B]=N(I,c)):Q<=c&&(o.expiredLanes|=I),C&=~I}if(c=we,m=ue,m=M(o,o===c?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==sa),b=o.callbackNode,m===0||o===c&&(Be===2||Be===9)||o.cancelPendingCommit!==null)return b!==null&&b!==null&&ah(b),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||O(o,m)){if(c=m&-m,c===o.callbackPriority)return c;switch(b!==null&&ah(b),gt(m)){case 2:case 8:m=Tg;break;case 32:m=sh;break;case 268435456:m=xg;break;default:m=sh}return b=gp.bind(null,o),m=Tu(m,b),o.callbackPriority=c,o.callbackNode=m,c}return b!==null&&b!==null&&ah(b),o.callbackPriority=2,o.callbackNode=null,2}function gp(o,c){if(Ln!==0&&Ln!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(aa()&&o.callbackNode!==m)return null;var b=ue;return b=M(o,o===we?b:0,o.cancelPendingCommit!==null||o.timeoutHandle!==sa),b===0?null:(su(o,b,c),pp(o,Fe()),o.callbackNode!=null&&o.callbackNode===m?gp.bind(null,o):null)}function Bo(o,c){if(aa())return null;su(o,c,!0)}function ic(){Hd?Yp(function(){(Ft&6)!==0?Tu(qn,tn):Rl()}):Tu(qn,tn)}function us(){return Os===0&&(Os=z()),Os}function ac(o,c){if(ro===null){var m=ro=[];Aa=0,Xe=us(),gr={status:"pending",value:void 0,then:function(b){m.push(b)}}}return Aa++,c.then(Ml,Ml),c}function Ml(){if(--Aa===0&&ro!==null){gr!==null&&(gr.status="fulfilled");var o=ro;ro=null,Xe=0,gr=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function $0(o,c){var m=[],b={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return o.then(function(){b.status="fulfilled",b.value=c;for(var E=0;E<m.length;E++)(0,m[E])(c)},function(E){for(b.status="rejected",b.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),b}function sc(){var o=rn.current;return o!==null?o:we.pooledCache}function Po(o,c){c===null?T(rn,rn.current):T(rn,c.pool)}function rc(){var o=sc();return o===null?null:{parent:Cs?ze._currentValue:ze._currentValue2,pool:o}}function qs(o,c){if(Xi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),b=Object.keys(c);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var E=m[b];if(!dm.call(c,E)||!Xi(o[E],c[E]))return!1}return!0}function mp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ho(){}function Yh(o,c,m){switch(m=o[m],m===void 0?o.push(c):m!==c&&(c.then(Ho,Ho),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,oc(o),o;default:if(typeof c.status=="string")c.then(Ho,Ho);else{if(o=we,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=c,o.status="pending",o.then(function(b){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=b}},function(b){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=b}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,oc(o),o}throw zi=c,lo}}function lc(){if(zi===null)throw Error(a(459));var o=zi;return zi=null,o}function oc(o){if(o===lo||o===Ve)throw Error(a(483))}function Uo(){for(var o=dl,c=sf=dl=0;c<o;){var m=Ki[c];Ki[c++]=null;var b=Ki[c];Ki[c++]=null;var E=Ki[c];Ki[c++]=null;var C=Ki[c];if(Ki[c++]=null,b!==null&&E!==null){var B=b.pending;B===null?E.next=E:(E.next=B.next,B.next=E),b.pending=E}C!==0&&fi(m,E,C)}}function uc(o,c,m,b){Ki[dl++]=o,Ki[dl++]=c,Ki[dl++]=m,Ki[dl++]=b,sf|=b,o.lanes|=b,o=o.alternate,o!==null&&(o.lanes|=b)}function Da(o,c,m,b){return uc(o,c,m,b),cs(o)}function bn(o,c){return uc(o,null,null,c),cs(o)}function fi(o,c,m){o.lanes|=m;var b=o.alternate;b!==null&&(b.lanes|=m);for(var E=!1,C=o.return;C!==null;)C.childLanes|=m,b=C.alternate,b!==null&&(b.childLanes|=m),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(E=!0)),o=C,C=C.return;return o.tag===3?(C=o.stateNode,E&&c!==null&&(E=31-Ni(m),o=C.hiddenUpdates,b=o[E],b===null?o[E]=[c]:b.push(c),c.lane=m|536870912),C):null}function cs(o){if(50<xr)throw xr=0,gh=null,Error(a(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}function Go(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xh(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Is(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function hs(o,c,m){var b=o.updateQueue;if(b===null)return null;if(b=b.shared,(Ft&2)!==0){var E=b.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),b.pending=c,c=cs(o),fi(o,null,m),c}return uc(o,b,c,m),cs(o)}function ds(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var b=c.lanes;b&=o.pendingLanes,m|=b,c.lanes=m,lt(o,m)}}function ko(o,c){var m=o.updateQueue,b=o.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var E=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var B={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?E=C=B:C=C.next=B,m=m.next}while(m!==null);C===null?E=C=c:C=C.next=c}else E=C=c;m={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:b.shared,callbacks:b.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}function Oa(){if(Si){var o=gr;if(o!==null)throw o}}function Na(o,c,m,b){Si=!1;var E=o.updateQueue;Qa=!1;var C=E.firstBaseUpdate,B=E.lastBaseUpdate,I=E.shared.pending;if(I!==null){E.shared.pending=null;var Q=I,bt=Q.next;Q.next=null,B===null?C=bt:B.next=bt,B=Q;var Tt=o.alternate;Tt!==null&&(Tt=Tt.updateQueue,I=Tt.lastBaseUpdate,I!==B&&(I===null?Tt.firstBaseUpdate=bt:I.next=bt,Tt.lastBaseUpdate=Q))}if(C!==null){var Dt=E.baseState;B=0,Tt=bt=Q=null,I=C;do{var Ot=I.lane&-536870913,ie=Ot!==I.lane;if(ie?(ue&Ot)===Ot:(b&Ot)===Ot){Ot!==0&&Ot===Xe&&(Si=!0),Tt!==null&&(Tt=Tt.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var oa=o,Cr=I;Ot=c;var ua=m;switch(Cr.tag){case 1:if(oa=Cr.payload,typeof oa=="function"){Dt=oa.call(ua,Dt,Ot);break t}Dt=oa;break t;case 3:oa.flags=oa.flags&-65537|128;case 0:if(oa=Cr.payload,Ot=typeof oa=="function"?oa.call(ua,Dt,Ot):oa,Ot==null)break t;Dt=al({},Dt,Ot);break t;case 2:Qa=!0}}Ot=I.callback,Ot!==null&&(o.flags|=64,ie&&(o.flags|=8192),ie=E.callbacks,ie===null?E.callbacks=[Ot]:ie.push(Ot))}else ie={lane:Ot,tag:I.tag,payload:I.payload,callback:I.callback,next:null},Tt===null?(bt=Tt=ie,Q=Dt):Tt=Tt.next=ie,B|=Ot;if(I=I.next,I===null){if(I=E.shared.pending,I===null)break;ie=I,I=ie.next,ie.next=null,E.lastBaseUpdate=ie,E.shared.pending=null}}while(!0);Tt===null&&(Q=Dt),E.baseState=Q,E.firstBaseUpdate=bt,E.lastBaseUpdate=Tt,C===null&&(E.shared.lanes=0),Dn|=B,o.lanes=B,o.memoizedState=Dt}}function Dl(o,c){if(typeof o!="function")throw Error(a(191,o));o.call(c)}function Gr(o,c){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Dl(m[o],c)}function On(o,c){o=_n,T(Ou,o),T(li,c),_n=o|c.baseLanes}function cc(){T(Ou,_n),T(li,li.current)}function hc(){_n=Ou.current,x(li),x(Ou)}function Ie(){throw Error(a(321))}function Vs(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!Xi(o[m],c[m]))return!1;return!0}function Kh(o,c,m,b,E,C){return Rn=C,ae=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,kt.H=o===null||o.memoizedState===null?fl:rf,Ns=!1,C=m(b,E),Ns=!1,mr&&(C=Zh(c,m,b,E)),Qh(o),C}function Qh(o){kt.H=yr;var c=ye!==null&&ye.next!==null;if(Rn=0,Ke=ye=ae=null,Ea=!1,oo=0,Ta=null,c)throw Error(a(300));o===null||Qt||(o=o.dependencies,o!==null&&vn(o)&&(Qt=!0))}function Zh(o,c,m,b){ae=o;var E=0;do{if(mr&&(Ta=null),oo=0,mr=!1,25<=E)throw Error(a(301));if(E+=1,Ke=ye=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}kt.H=Dg,C=c(m,b)}while(mr);return C}function tm(){var o=kt.H,c=o.useState()[0];return c=typeof c.then=="function"?kr(c):c,o=o.useState()[0],(ye!==null?ye.memoizedState:null)!==o&&(ae.flags|=1024),c}function Ol(){var o=Qi!==0;return Qi=0,o}function Nl(o,c,m){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m}function ga(o){if(Ea){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ea=!1}Rn=0,Ke=ye=ae=null,mr=!1,oo=Qi=0,Ta=null}function ti(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ae.memoizedState=Ke=o:Ke=Ke.next=o,Ke}function Sn(){if(ye===null){var o=ae.alternate;o=o!==null?o.memoizedState:null}else o=ye.next;var c=Ke===null?ae.memoizedState:Ke.next;if(c!==null)Ke=c,ye=o;else{if(o===null)throw ae.alternate===null?Error(a(467)):Error(a(310));ye=o,o={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},Ke===null?ae.memoizedState=Ke=o:Ke=Ke.next=o}return Ke}function Ys(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kr(o){var c=oo;return oo+=1,Ta===null&&(Ta=[]),o=Yh(Ta,o,c),c=ae,(Ke===null?c.memoizedState:Ke.next)===null&&(c=c.alternate,kt.H=c===null||c.memoizedState===null?fl:rf),o}function Ll(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return kr(o);if(o.$$typeof===Ts)return He(o)}throw Error(a(438,String(o)))}function Wh(o){var c=null,m=ae.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var b=ae.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(c={data:b.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=Ys(),ae.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(o),b=0;b<o;b++)m[b]=Dd;return c.index++,m}function La(o,c){return typeof c=="function"?c(o):c}function pi(o){var c=Sn();return dc(c,ye,o)}function dc(o,c,m){var b=o.queue;if(b===null)throw Error(a(311));b.lastRenderedReducer=m;var E=o.baseQueue,C=b.pending;if(C!==null){if(E!==null){var B=E.next;E.next=C.next,C.next=B}c.baseQueue=E=C,b.pending=null}if(C=o.baseState,E===null)o.memoizedState=C;else{c=E.next;var I=B=null,Q=null,bt=c,Tt=!1;do{var Dt=bt.lane&-536870913;if(Dt!==bt.lane?(ue&Dt)===Dt:(Rn&Dt)===Dt){var Ot=bt.revertLane;if(Ot===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),Dt===Xe&&(Tt=!0);else if((Rn&Ot)===Ot){bt=bt.next,Ot===Xe&&(Tt=!0);continue}else Dt={lane:0,revertLane:bt.revertLane,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},Q===null?(I=Q=Dt,B=C):Q=Q.next=Dt,ae.lanes|=Ot,Dn|=Ot;Dt=bt.action,Ns&&m(C,Dt),C=bt.hasEagerState?bt.eagerState:m(C,Dt)}else Ot={lane:Dt,revertLane:bt.revertLane,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},Q===null?(I=Q=Ot,B=C):Q=Q.next=Ot,ae.lanes|=Dt,Dn|=Dt;bt=bt.next}while(bt!==null&&bt!==c);if(Q===null?B=C:Q.next=I,!Xi(C,o.memoizedState)&&(Qt=!0,Tt&&(m=gr,m!==null)))throw m;o.memoizedState=C,o.baseState=B,o.baseQueue=Q,b.lastRenderedState=C}return E===null&&(b.lanes=0),[o.memoizedState,b.dispatch]}function Jh(o){var c=Sn(),m=c.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var b=m.dispatch,E=m.pending,C=c.memoizedState;if(E!==null){m.pending=null;var B=E=E.next;do C=o(C,B.action),B=B.next;while(B!==E);Xi(C,c.memoizedState)||(Qt=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),m.lastRenderedState=C}return[C,b]}function jo(o,c,m){var b=ae,E=Sn(),C=Ae;if(C){if(m===void 0)throw Error(a(407));m=m()}else m=c();var B=!Xi((ye||E).memoizedState,m);B&&(E.memoizedState=m,Qt=!0),E=E.queue;var I=yp.bind(null,b,E,o);if(qr(2048,8,I,[o]),E.getSnapshot!==c||B||Ke!==null&&Ke.memoizedState.tag&1){if(b.flags|=2048,Xs(9,fs(),Fo.bind(null,b,E,m,c),null),we===null)throw Error(a(349));C||(Rn&124)!==0||$h(b,c,m)}return m}function $h(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=ae.updateQueue,c===null?(c=Ys(),ae.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function Fo(o,c,m,b){c.value=m,c.getSnapshot=b,ji(c)&&fc(o)}function yp(o,c,m){return m(function(){ji(c)&&fc(o)})}function ji(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!Xi(o,m)}catch{return!0}}function fc(o){var c=bn(o,2);c!==null&&ii(c,o,2)}function pc(o){var c=ti();if(typeof o=="function"){var m=o;if(o=m(),Ns){St(!0);try{m()}finally{St(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:o},c}function gc(o,c,m,b){return o.baseState=m,dc(o,ye,typeof b=="function"?b:La)}function zl(o,c,m,b,E){if(Ko(o))throw Error(a(485));if(o=c.action,o!==null){var C={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){C.listeners.push(B)}};kt.T!==null?m(!0):C.isTransition=!1,b(C),m=c.pending,m===null?(C.next=c.pending=C,td(c,C)):(C.next=m.next,c.pending=m.next=C)}}function td(o,c){var m=c.action,b=c.payload,E=o.state;if(c.isTransition){var C=kt.T,B={};kt.T=B;try{var I=m(E,b),Q=kt.S;Q!==null&&Q(B,I),ed(o,c,I)}catch(bt){nd(o,c,bt)}finally{kt.T=C}}else try{C=m(E,b),ed(o,c,C)}catch(bt){nd(o,c,bt)}}function ed(o,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(b){jr(o,c,b)},function(b){return nd(o,c,b)}):jr(o,c,m)}function jr(o,c,m){c.status="fulfilled",c.value=m,id(c),o.state=m,c=o.pending,c!==null&&(m=c.next,m===c?o.pending=null:(m=m.next,c.next=m,td(o,m)))}function nd(o,c,m){var b=o.pending;if(o.pending=null,b!==null){b=b.next;do c.status="rejected",c.reason=m,id(c),c=c.next;while(c!==b)}o.action=null}function id(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function ad(o,c){return c}function mc(o,c){if(Ae){var m=we.formState;if(m!==null){t:{var b=ae;if(Ae){if(wn){var E=cg(wn,Ne);if(E){wn=dg(E),b=hg(E);break t}}jt(b)}b=!1}b&&(c=m[0])}}m=ti(),m.memoizedState=m.baseState=c,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ad,lastRenderedState:c},m.queue=b,m=Sc.bind(null,ae,b),b.dispatch=m,b=pc(!1);var C=Gl.bind(null,ae,!1,b.queue);return b=ti(),E={state:c,dispatch:null,action:o,pending:null},b.queue=E,m=zl.bind(null,ae,E,C,m),E.dispatch=m,b.memoizedState=o,[c,m,!1]}function vp(o){var c=Sn();return bp(c,ye,o)}function bp(o,c,m){if(c=dc(o,c,ad)[0],o=pi(La)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var b=kr(c)}catch(B){throw B===lo?Ve:B}else b=c;c=Sn();var E=c.queue,C=E.dispatch;return m!==c.memoizedState&&(ae.flags|=2048,Xs(9,fs(),yc.bind(null,E,m),null)),[b,C,o]}function yc(o,c){o.action=c}function vc(o){var c=Sn(),m=ye;if(m!==null)return bp(c,m,o);Sn(),c=c.memoizedState,m=Sn();var b=m.queue.dispatch;return m.memoizedState=o,[c,b,!1]}function Xs(o,c,m,b){return o={tag:o,create:m,deps:b,inst:c,next:null},c=ae.updateQueue,c===null&&(c=Ys(),ae.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=o.next=o:(b=m.next,m.next=o,o.next=b,c.lastEffect=o),o}function fs(){return{destroy:void 0,resource:void 0}}function Fr(){return Sn().memoizedState}function qo(o,c,m,b){var E=ti();b=b===void 0?null:b,ae.flags|=o,E.memoizedState=Xs(1|c,fs(),m,b)}function qr(o,c,m,b){var E=Sn();b=b===void 0?null:b;var C=E.memoizedState.inst;ye!==null&&b!==null&&Vs(b,ye.memoizedState.deps)?E.memoizedState=Xs(c,C,m,b):(ae.flags|=o,E.memoizedState=Xs(1|c,C,m,b))}function sd(o,c){qo(8390656,8,o,c)}function Bl(o,c){qr(2048,8,o,c)}function za(o,c){return qr(4,2,o,c)}function bc(o,c){return qr(4,4,o,c)}function Pl(o,c){if(typeof c=="function"){o=o();var m=c(o);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function ps(o,c,m){m=m!=null?m.concat([o]):null,qr(4,4,Pl.bind(null,c,o),m)}function Io(){}function Vo(o,c){var m=Sn();c=c===void 0?null:c;var b=m.memoizedState;return c!==null&&Vs(c,b[1])?b[0]:(m.memoizedState=[o,c],o)}function rd(o,c){var m=Sn();c=c===void 0?null:c;var b=m.memoizedState;if(c!==null&&Vs(c,b[1]))return b[0];if(b=o(),Ns){St(!0);try{o()}finally{St(!1)}}return m.memoizedState=[b,c],b}function Hl(o,c,m){return m===void 0||(Rn&1073741824)!==0?o.memoizedState=c:(o.memoizedState=m,o=Jr(),ae.lanes|=o,Dn|=o,m)}function Yo(o,c,m,b){return Xi(m,c)?m:li.current!==null?(o=Hl(o,m,b),Xi(o,c)||(Qt=!0),o):(Rn&42)===0?(Qt=!0,o.memoizedState=m):(o=Jr(),ae.lanes|=o,Dn|=o,c)}function ld(o,c,m,b,E){var C=va();Fn(C!==0&&8>C?C:8);var B=kt.T,I={};kt.T=I,Gl(o,!1,c,m);try{var Q=E(),bt=kt.S;if(bt!==null&&bt(I,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Tt=$0(Q,b);ms(o,c,Tt,jn(o))}else ms(o,c,b,jn(o))}catch(Dt){ms(o,c,{then:function(){},status:"rejected",reason:Dt},jn())}finally{Fn(C),kt.T=B}}function gi(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:Oi,baseState:Oi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:Oi},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:m},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function gs(){return He(Ya)}function Xo(){return Sn().memoizedState}function Ul(){return Sn().memoizedState}function em(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var m=jn();o=Is(m);var b=hs(c,o,m);b!==null&&(ii(b,c,m),ds(b,c,m)),c={cache:os()},o.payload=c;return}c=c.return}}function od(o,c,m){var b=jn();m={lane:b,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Ko(o)?Sp(c,m):(m=Da(o,c,m,b),m!==null&&(ii(m,o,b),_p(m,c,b)))}function Sc(o,c,m){var b=jn();ms(o,c,m,b)}function ms(o,c,m,b){var E={lane:b,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ko(o))Sp(c,E);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var B=c.lastRenderedState,I=C(B,m);if(E.hasEagerState=!0,E.eagerState=I,Xi(I,B))return uc(o,c,E,0),we===null&&Uo(),!1}catch{}finally{}if(m=Da(o,c,E,b),m!==null)return ii(m,o,b),_p(m,c,b),!0}return!1}function Gl(o,c,m,b){if(b={lane:2,revertLane:us(),action:b,hasEagerState:!1,eagerState:null,next:null},Ko(o)){if(c)throw Error(a(479))}else c=Da(o,m,b,2),c!==null&&ii(c,o,2)}function Ko(o){var c=o.alternate;return o===ae||c!==null&&c===ae}function Sp(o,c){mr=Ea=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function _p(o,c,m){if((m&4194048)!==0){var b=c.lanes;b&=o.pendingLanes,m|=b,c.lanes=m,lt(o,m)}}function _c(o){var c=uo;return uo+=1,Za===null&&(Za=[]),Yh(Za,o,c)}function Ir(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Ac(o,c){throw c.$$typeof===Fp?Error(a(525)):(o=Object.prototype.toString.call(c),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function Ap(o){var c=o._init;return c(o._payload)}function Ep(o){function c(nt,X){if(o){var st=nt.deletions;st===null?(nt.deletions=[X],nt.flags|=16):st.push(X)}}function m(nt,X){if(!o)return null;for(;X!==null;)c(nt,X),X=X.sibling;return null}function b(nt){for(var X=new Map;nt!==null;)nt.key!==null?X.set(nt.key,nt):X.set(nt.index,nt),nt=nt.sibling;return X}function E(nt,X){return nt=As(nt,X),nt.index=0,nt.sibling=null,nt}function C(nt,X,st){return nt.index=st,o?(st=nt.alternate,st!==null?(st=st.index,st<X?(nt.flags|=67108866,X):st):(nt.flags|=67108866,X)):(nt.flags|=1048576,X)}function B(nt){return o&&nt.alternate===null&&(nt.flags|=67108866),nt}function I(nt,X,st,_t){return X===null||X.tag!==6?(X=nl(st,nt.mode,_t),X.return=nt,X):(X=E(X,st),X.return=nt,X)}function Q(nt,X,st,_t){var Lt=st.type;return Lt===rl?Tt(nt,X,st.props.children,_t,st.key):X!==null&&(X.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===mi&&Ap(Lt)===X.type)?(X=E(X,st.props),Ir(X,st),X.return=nt,X):(X=Kl(st.type,st.key,st.props,null,nt.mode,_t),Ir(X,st),X.return=nt,X)}function bt(nt,X,st,_t){return X===null||X.tag!==4||X.stateNode.containerInfo!==st.containerInfo||X.stateNode.implementation!==st.implementation?(X=ru(st,nt.mode,_t),X.return=nt,X):(X=E(X,st.children||[]),X.return=nt,X)}function Tt(nt,X,st,_t,Lt){return X===null||X.tag!==7?(X=ya(st,nt.mode,_t,Lt),X.return=nt,X):(X=E(X,st),X.return=nt,X)}function Dt(nt,X,st){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=nl(""+X,nt.mode,st),X.return=nt,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case sl:return st=Kl(X.type,X.key,X.props,null,nt.mode,st),Ir(st,X),st.return=nt,st;case ar:return X=ru(X,nt.mode,st),X.return=nt,X;case mi:var _t=X._init;return X=_t(X._payload),Dt(nt,X,st)}if(sr(X)||y(X))return X=ya(X,nt.mode,st,null),X.return=nt,X;if(typeof X.then=="function")return Dt(nt,_c(X),st);if(X.$$typeof===Ts)return Dt(nt,ki(nt,X),st);Ac(nt,X)}return null}function Ot(nt,X,st,_t){var Lt=X!==null?X.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Lt!==null?null:I(nt,X,""+st,_t);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case sl:return st.key===Lt?Q(nt,X,st,_t):null;case ar:return st.key===Lt?bt(nt,X,st,_t):null;case mi:return Lt=st._init,st=Lt(st._payload),Ot(nt,X,st,_t)}if(sr(st)||y(st))return Lt!==null?null:Tt(nt,X,st,_t,null);if(typeof st.then=="function")return Ot(nt,X,_c(st),_t);if(st.$$typeof===Ts)return Ot(nt,X,ki(nt,st),_t);Ac(nt,st)}return null}function ie(nt,X,st,_t,Lt){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return nt=nt.get(st)||null,I(X,nt,""+_t,Lt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case sl:return nt=nt.get(_t.key===null?st:_t.key)||null,Q(X,nt,_t,Lt);case ar:return nt=nt.get(_t.key===null?st:_t.key)||null,bt(X,nt,_t,Lt);case mi:var Ge=_t._init;return _t=Ge(_t._payload),ie(nt,X,st,_t,Lt)}if(sr(_t)||y(_t))return nt=nt.get(st)||null,Tt(X,nt,_t,Lt,null);if(typeof _t.then=="function")return ie(nt,X,st,_c(_t),Lt);if(_t.$$typeof===Ts)return ie(nt,X,st,ki(X,_t),Lt);Ac(X,_t)}return null}function oa(nt,X,st,_t){for(var Lt=null,Ge=null,Vt=X,Re=X=0,zn=null;Vt!==null&&Re<st.length;Re++){Vt.index>Re?(zn=Vt,Vt=null):zn=Vt.sibling;var Me=Ot(nt,Vt,st[Re],_t);if(Me===null){Vt===null&&(Vt=zn);break}o&&Vt&&Me.alternate===null&&c(nt,Vt),X=C(Me,X,Re),Ge===null?Lt=Me:Ge.sibling=Me,Ge=Me,Vt=zn}if(Re===st.length)return m(nt,Vt),Ae&&Ct(nt,Re),Lt;if(Vt===null){for(;Re<st.length;Re++)Vt=Dt(nt,st[Re],_t),Vt!==null&&(X=C(Vt,X,Re),Ge===null?Lt=Vt:Ge.sibling=Vt,Ge=Vt);return Ae&&Ct(nt,Re),Lt}for(Vt=b(Vt);Re<st.length;Re++)zn=ie(Vt,nt,Re,st[Re],_t),zn!==null&&(o&&zn.alternate!==null&&Vt.delete(zn.key===null?Re:zn.key),X=C(zn,X,Re),Ge===null?Lt=zn:Ge.sibling=zn,Ge=zn);return o&&Vt.forEach(function(Bs){return c(nt,Bs)}),Ae&&Ct(nt,Re),Lt}function Cr(nt,X,st,_t){if(st==null)throw Error(a(151));for(var Lt=null,Ge=null,Vt=X,Re=X=0,zn=null,Me=st.next();Vt!==null&&!Me.done;Re++,Me=st.next()){Vt.index>Re?(zn=Vt,Vt=null):zn=Vt.sibling;var Bs=Ot(nt,Vt,Me.value,_t);if(Bs===null){Vt===null&&(Vt=zn);break}o&&Vt&&Bs.alternate===null&&c(nt,Vt),X=C(Bs,X,Re),Ge===null?Lt=Bs:Ge.sibling=Bs,Ge=Bs,Vt=zn}if(Me.done)return m(nt,Vt),Ae&&Ct(nt,Re),Lt;if(Vt===null){for(;!Me.done;Re++,Me=st.next())Me=Dt(nt,Me.value,_t),Me!==null&&(X=C(Me,X,Re),Ge===null?Lt=Me:Ge.sibling=Me,Ge=Me);return Ae&&Ct(nt,Re),Lt}for(Vt=b(Vt);!Me.done;Re++,Me=st.next())Me=ie(Vt,nt,Re,Me.value,_t),Me!==null&&(o&&Me.alternate!==null&&Vt.delete(Me.key===null?Re:Me.key),X=C(Me,X,Re),Ge===null?Lt=Me:Ge.sibling=Me,Ge=Me);return o&&Vt.forEach(function(fm){return c(nt,fm)}),Ae&&Ct(nt,Re),Lt}function ua(nt,X,st,_t){if(typeof st=="object"&&st!==null&&st.type===rl&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case sl:t:{for(var Lt=st.key;X!==null;){if(X.key===Lt){if(Lt=st.type,Lt===rl){if(X.tag===7){m(nt,X.sibling),_t=E(X,st.props.children),_t.return=nt,nt=_t;break t}}else if(X.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===mi&&Ap(Lt)===X.type){m(nt,X.sibling),_t=E(X,st.props),Ir(_t,st),_t.return=nt,nt=_t;break t}m(nt,X);break}else c(nt,X);X=X.sibling}st.type===rl?(_t=ya(st.props.children,nt.mode,_t,st.key),_t.return=nt,nt=_t):(_t=Kl(st.type,st.key,st.props,null,nt.mode,_t),Ir(_t,st),_t.return=nt,nt=_t)}return B(nt);case ar:t:{for(Lt=st.key;X!==null;){if(X.key===Lt)if(X.tag===4&&X.stateNode.containerInfo===st.containerInfo&&X.stateNode.implementation===st.implementation){m(nt,X.sibling),_t=E(X,st.children||[]),_t.return=nt,nt=_t;break t}else{m(nt,X);break}else c(nt,X);X=X.sibling}_t=ru(st,nt.mode,_t),_t.return=nt,nt=_t}return B(nt);case mi:return Lt=st._init,st=Lt(st._payload),ua(nt,X,st,_t)}if(sr(st))return oa(nt,X,st,_t);if(y(st)){if(Lt=y(st),typeof Lt!="function")throw Error(a(150));return st=Lt.call(st),Cr(nt,X,st,_t)}if(typeof st.then=="function")return ua(nt,X,_c(st),_t);if(st.$$typeof===Ts)return ua(nt,X,ki(nt,st),_t);Ac(nt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,X!==null&&X.tag===6?(m(nt,X.sibling),_t=E(X,st),_t.return=nt,nt=_t):(m(nt,X),_t=nl(st,nt.mode,_t),_t.return=nt,nt=_t),B(nt)):m(nt,X)}return function(nt,X,st,_t){try{uo=0;var Lt=ua(nt,X,st,_t);return Za=null,Lt}catch(Vt){if(Vt===lo||Vt===Ve)throw Vt;var Ge=e(29,Vt,null,nt.mode);return Ge.lanes=_t,Ge.return=nt,Ge}finally{}}}function Ks(o){var c=o.alternate;T(Kt,Kt.current&1),T(ra,o),Wa===null&&(c===null||li.current!==null||c.memoizedState!==null)&&(Wa=o)}function Tp(o){if(o.tag===22){if(T(Kt,Kt.current),T(ra,o),Wa===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Wa=o)}}else ys()}function ys(){T(Kt,Kt.current),T(ra,ra.current)}function vs(o){x(ra),Wa===o&&(Wa=null),x(Kt)}function Ec(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||vu(m)||$c(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function ud(o,c,m,b){c=o.memoizedState,m=m(b,c),m=m==null?c:al({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}function xp(o,c,m,b,E,C,B){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(b,C,B):c.prototype&&c.prototype.isPureReactComponent?!qs(m,b)||!qs(E,C):!0}function Tc(o,c,m,b){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,b),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,b),c.state!==o&&qe.enqueueReplaceState(c,c.state,null)}function Vr(o,c){var m=c;if("ref"in c){m={};for(var b in c)b!=="ref"&&(m[b]=c[b])}if(o=o.defaultProps){m===c&&(m=al({},m));for(var E in o)m[E]===void 0&&(m[E]=o[E])}return m}function xc(o,c){try{var m=o.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(b){setTimeout(function(){throw b})}}function Cp(o,c,m){try{var b=o.onCaughtError;b(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Cc(o,c,m){return m=Is(m),m.tag=3,m.payload={element:null},m.callback=function(){xc(o,c)},m}function wp(o){return o=Is(o),o.tag=3,o}function Rp(o,c,m,b){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var C=b.value;o.payload=function(){return E(C)},o.callback=function(){Cp(c,m,b)}}var B=m.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(o.callback=function(){Cp(c,m,b),typeof E!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var I=b.stack;this.componentDidCatch(b.value,{componentStack:I!==null?I:""})})}function nm(o,c,m,b,E){if(m.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(c=m.alternate,c!==null&&Oe(c,m,E,!0),m=ra.current,m!==null){switch(m.tag){case 13:return Wa===null?sn():m.alternate===null&&dn===0&&(dn=3),m.flags&=-257,m.flags|=65536,m.lanes=E,b===Kn?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([b]):c.add(b),el(o,b,E)),!1;case 22:return m.flags|=65536,b===Kn?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([b])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([b]):m.add(b)),el(o,b,E)),!1}throw Error(a(435,m.tag))}return el(o,b,E),sn(),!1}if(Ae)return c=ra.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,b!==nf&&(o=Error(a(422),{cause:b}),ee(ot(o,m)))):(b!==nf&&(c=Error(a(423),{cause:b}),ee(ot(c,m))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,b=ot(b,m),E=Cc(o.stateNode,b,E),ko(o,E),dn!==4&&(dn=2)),!1;var C=Error(a(520),{cause:b});if(C=ot(C,m),Ar===null?Ar=[C]:Ar.push(C),dn!==4&&(dn=2),c===null)return!0;b=ot(b,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,o=E&-E,m.lanes|=o,o=Cc(m.stateNode,b,o),ko(m,o),!1;case 1:if(c=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ts===null||!ts.has(C))))return m.flags|=65536,E&=-E,m.lanes|=E,E=wp(E),Rp(E,o,m,b),ko(m,E),!1}m=m.return}while(m!==null);return!1}function Xn(o,c,m,b){c.child=o===null?lf(c,null,m,b):Ls(c,o.child,m,b)}function Mp(o,c,m,b,E){m=m.render;var C=c.ref;if("ref"in b){var B={};for(var I in b)I!=="ref"&&(B[I]=b[I])}else B=b;return xe(c),b=Kh(o,c,m,B,C,E),I=Ol(),o!==null&&!Qt?(Nl(o,c,E),Fi(o,c,E)):(Ae&&I&&$(c),c.flags|=1,Xn(o,c,b,E),c.child)}function Dp(o,c,m,b,E){if(o===null){var C=m.type;return typeof C=="function"&&!Cd(C)&&C.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=C,Op(o,c,C,b,E)):(o=Kl(m.type,null,b,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!Xr(o,E)){var B=C.memoizedProps;if(m=m.compare,m=m!==null?m:qs,m(B,b)&&o.ref===c.ref)return Fi(o,c,E)}return c.flags|=1,o=As(C,b),o.ref=c.ref,o.return=c,c.child=o}function Op(o,c,m,b,E){if(o!==null){var C=o.memoizedProps;if(qs(C,b)&&o.ref===c.ref)if(Qt=!1,c.pendingProps=b=C,Xr(o,E))(o.flags&131072)!==0&&(Qt=!0);else return c.lanes=o.lanes,Fi(o,c,E)}return Yr(o,c,m,b,E)}function Np(o,c,m){var b=c.pendingProps,E=b.children,C=o!==null?o.memoizedState:null;if(b.mode==="hidden"){if((c.flags&128)!==0){if(b=C!==null?C.baseLanes|m:m,o!==null){for(E=c.child=o.child,C=0;E!==null;)C=C|E.lanes|E.childLanes,E=E.sibling;c.childLanes=C&~b}else c.childLanes=0,c.child=null;return Lp(o,c,b,m)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Po(c,C!==null?C.cachePool:null),C!==null?On(c,C):cc(),Tp(c);else return c.lanes=c.childLanes=536870912,Lp(o,c,C!==null?C.baseLanes|m:m,m)}else C!==null?(Po(c,C.cachePool),On(c,C),ys(),c.memoizedState=null):(o!==null&&Po(c,null),cc(),ys());return Xn(o,c,E,m),c.child}function Lp(o,c,m,b){var E=sc();return E=E===null?null:{parent:Cs?ze._currentValue:ze._currentValue2,pool:E},c.memoizedState={baseLanes:m,cachePool:E},o!==null&&Po(c,null),cc(),Tp(c),o!==null&&Oe(o,c,b,!0),null}function kl(o,c){var m=c.ref;if(m===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(o===null||o.ref!==m)&&(c.flags|=4194816)}}function Yr(o,c,m,b,E){return xe(c),m=Kh(o,c,m,b,void 0,E),b=Ol(),o!==null&&!Qt?(Nl(o,c,E),Fi(o,c,E)):(Ae&&b&&$(c),c.flags|=1,Xn(o,c,m,E),c.child)}function zp(o,c,m,b,E,C){return xe(c),c.updateQueue=null,m=Zh(c,b,m,E),Qh(o),b=Ol(),o!==null&&!Qt?(Nl(o,c,C),Fi(o,c,C)):(Ae&&b&&$(c),c.flags|=1,Xn(o,c,m,C),c.child)}function cd(o,c,m,b,E){if(xe(c),c.stateNode===null){var C=cl,B=m.contextType;typeof B=="object"&&B!==null&&(C=He(B)),C=new m(b,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=qe,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=b,C.state=c.memoizedState,C.refs={},Go(c),B=m.contextType,C.context=typeof B=="object"&&B!==null?He(B):cl,C.state=c.memoizedState,B=m.getDerivedStateFromProps,typeof B=="function"&&(ud(c,m,B,b),C.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(B=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),B!==C.state&&qe.enqueueReplaceState(C,C.state,null),Na(c,b,C,E),Oa(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),b=!0}else if(o===null){C=c.stateNode;var I=c.memoizedProps,Q=Vr(m,I);C.props=Q;var bt=C.context,Tt=m.contextType;B=cl,typeof Tt=="object"&&Tt!==null&&(B=He(Tt));var Dt=m.getDerivedStateFromProps;Tt=typeof Dt=="function"||typeof C.getSnapshotBeforeUpdate=="function",I=c.pendingProps!==I,Tt||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(I||bt!==B)&&Tc(c,C,b,B),Qa=!1;var Ot=c.memoizedState;C.state=Ot,Na(c,b,C,E),Oa(),bt=c.memoizedState,I||Ot!==bt||Qa?(typeof Dt=="function"&&(ud(c,m,Dt,b),bt=c.memoizedState),(Q=Qa||xp(c,m,Q,b,Ot,bt,B))?(Tt||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=b,c.memoizedState=bt),C.props=b,C.state=bt,C.context=B,b=Q):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),b=!1)}else{C=c.stateNode,Xh(o,c),B=c.memoizedProps,Tt=Vr(m,B),C.props=Tt,Dt=c.pendingProps,Ot=C.context,bt=m.contextType,Q=cl,typeof bt=="object"&&bt!==null&&(Q=He(bt)),I=m.getDerivedStateFromProps,(bt=typeof I=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==Dt||Ot!==Q)&&Tc(c,C,b,Q),Qa=!1,Ot=c.memoizedState,C.state=Ot,Na(c,b,C,E),Oa();var ie=c.memoizedState;B!==Dt||Ot!==ie||Qa||o!==null&&o.dependencies!==null&&vn(o.dependencies)?(typeof I=="function"&&(ud(c,m,I,b),ie=c.memoizedState),(Tt=Qa||xp(c,m,Tt,b,Ot,ie,Q)||o!==null&&o.dependencies!==null&&vn(o.dependencies))?(bt||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(b,ie,Q),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(b,ie,Q)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||B===o.memoizedProps&&Ot===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&Ot===o.memoizedState||(c.flags|=1024),c.memoizedProps=b,c.memoizedState=ie),C.props=b,C.state=ie,C.context=Q,b=Tt):(typeof C.componentDidUpdate!="function"||B===o.memoizedProps&&Ot===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&Ot===o.memoizedState||(c.flags|=1024),b=!1)}return C=b,kl(o,c),b=(c.flags&128)!==0,C||b?(C=c.stateNode,m=b&&typeof m.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,o!==null&&b?(c.child=Ls(c,o.child,null,E),c.child=Ls(c,null,m,E)):Xn(o,c,m,E),c.memoizedState=C.state,o=c.child):o=Fi(o,c,E),o}function hd(o,c,m,b){return Tn(),c.flags|=256,Xn(o,c,m,b),c.child}function wc(o){return{baseLanes:o,cachePool:rc()}}function Rc(o,c,m){return o=o!==null?o.childLanes&~m:0,c&&(o|=la),o}function dd(o,c,m){var b=c.pendingProps,E=!1,C=(c.flags&128)!==0,B;if((B=C)||(B=o!==null&&o.memoizedState===null?!1:(Kt.current&2)!==0),B&&(E=!0,c.flags&=-129),B=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ae){if(E?Ks(c):ys(),Ae){var I=wn,Q;(Q=I)&&(I=um(I,Ne),I!==null?(c.memoizedState={dehydrated:I,treeContext:dr!==null?{id:ba,overflow:Ka}:null,retryLane:536870912,hydrationErrors:null},Q=e(18,null,null,0),Q.stateNode=I,Q.return=c,c.child=Q,hn=c,wn=null,Q=!0):Q=!1),Q||jt(c)}if(I=c.memoizedState,I!==null&&(I=I.dehydrated,I!==null))return $c(I)?c.lanes=32:c.lanes=536870912,null;vs(c)}return I=b.children,b=b.fallback,E?(ys(),E=c.mode,I=Mc({mode:"hidden",children:I},E),b=ya(b,E,m,null),I.return=c,b.return=c,I.sibling=b,c.child=I,E=c.child,E.memoizedState=wc(m),E.childLanes=Rc(o,B,m),c.memoizedState=_i,b):(Ks(c),Qs(c,I))}if(Q=o.memoizedState,Q!==null&&(I=Q.dehydrated,I!==null)){if(C)c.flags&256?(Ks(c),c.flags&=-257,c=fd(o,c,m)):c.memoizedState!==null?(ys(),c.child=o.child,c.flags|=128,c=null):(ys(),E=b.fallback,I=c.mode,b=Mc({mode:"visible",children:b.children},I),E=ya(E,I,m,null),E.flags|=2,b.return=c,E.return=c,b.sibling=E,c.child=b,Ls(c,o.child,null,m),b=c.child,b.memoizedState=wc(m),b.childLanes=Rc(o,B,m),c.memoizedState=_i,c=E);else if(Ks(c),$c(I))B=ug(I).digest,b=Error(a(419)),b.stack="",b.digest=B,ee({value:b,source:null,stack:null}),c=fd(o,c,m);else if(Qt||Oe(o,c,m,!1),B=(m&o.childLanes)!==0,Qt||B){if(B=we,B!==null&&(b=m&-m,b=(b&42)!==0?1:ct(b),b=(b&(B.suspendedLanes|m))!==0?0:b,b!==0&&b!==Q.retryLane))throw Q.retryLane=b,bn(o,b),ii(B,o,b),ve;vu(I)||sn(),c=fd(o,c,m)}else vu(I)?(c.flags|=192,c.child=o.child,c=null):(o=Q.treeContext,Mi&&(wn=Xd(I),hn=c,Ae=!0,Sa=null,Ne=!1,o!==null&&(bi[Li++]=ba,bi[Li++]=Ka,bi[Li++]=dr,ba=o.id,Ka=o.overflow,dr=c)),c=Qs(c,b.children),c.flags|=4096);return c}return E?(ys(),E=b.fallback,I=c.mode,Q=o.child,C=Q.sibling,b=As(Q,{mode:"hidden",children:b.children}),b.subtreeFlags=Q.subtreeFlags&65011712,C!==null?E=As(C,E):(E=ya(E,I,m,null),E.flags|=2),E.return=c,b.return=c,b.sibling=E,c.child=b,b=E,E=c.child,I=o.child.memoizedState,I===null?I=wc(m):(Q=I.cachePool,Q!==null?(C=Cs?ze._currentValue:ze._currentValue2,Q=Q.parent!==C?{parent:C,pool:C}:Q):Q=rc(),I={baseLanes:I.baseLanes|m,cachePool:Q}),E.memoizedState=I,E.childLanes=Rc(o,B,m),c.memoizedState=_i,b):(Ks(c),m=o.child,o=m.sibling,m=As(m,{mode:"visible",children:b.children}),m.return=c,m.sibling=null,o!==null&&(B=c.deletions,B===null?(c.deletions=[o],c.flags|=16):B.push(o)),c.child=m,c.memoizedState=null,m)}function Qs(o,c){return c=Mc({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Mc(o,c){return o=e(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function fd(o,c,m){return Ls(c,o.child,null,m),o=Qs(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function Bp(o,c,m){o.lanes|=c;var b=o.alternate;b!==null&&(b.lanes|=c),Gt(o.return,c,m)}function Dc(o,c,m,b,E){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:E}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=b,C.tail=m,C.tailMode=E)}function pd(o,c,m){var b=c.pendingProps,E=b.revealOrder,C=b.tail;if(Xn(o,c,b.children,m),b=Kt.current,(b&2)!==0)b=b&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)t:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Bp(o,m,c);else if(o.tag===19)Bp(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break t;for(;o.sibling===null;){if(o.return===null||o.return===c)break t;o=o.return}o.sibling.return=o.return,o=o.sibling}b&=1}switch(T(Kt,b),E){case"forwards":for(m=c.child,E=null;m!==null;)o=m.alternate,o!==null&&Ec(o)===null&&(E=m),m=m.sibling;m=E,m===null?(E=c.child,c.child=null):(E=m.sibling,m.sibling=null),Dc(c,!1,E,m,C);break;case"backwards":for(m=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Ec(o)===null){c.child=E;break}o=E.sibling,E.sibling=m,m=E,E=o}Dc(c,!0,m,null,C);break;case"together":Dc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Fi(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),Dn|=c.lanes,(m&c.childLanes)===0)if(o!==null){if(Oe(o,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(a(153));if(c.child!==null){for(o=c.child,m=As(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=As(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function Xr(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&vn(o)))}function im(o,c,m){switch(c.tag){case 3:ft(c,c.stateNode.containerInfo),de(c,ze,o.memoizedState.cache),Tn();break;case 27:case 5:Ht(c);break;case 4:ft(c,c.stateNode.containerInfo);break;case 10:de(c,c.type,c.memoizedProps.value);break;case 13:var b=c.memoizedState;if(b!==null)return b.dehydrated!==null?(Ks(c),c.flags|=128,null):(m&c.child.childLanes)!==0?dd(o,c,m):(Ks(c),o=Fi(o,c,m),o!==null?o.sibling:null);Ks(c);break;case 19:var E=(o.flags&128)!==0;if(b=(m&c.childLanes)!==0,b||(Oe(o,c,m,!1),b=(m&c.childLanes)!==0),E){if(b)return pd(o,c,m);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),T(Kt,Kt.current),b)break;return null;case 22:case 23:return c.lanes=0,Np(o,c,m);case 24:de(c,ze,o.memoizedState.cache)}return Fi(o,c,m)}function Qo(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps)Qt=!0;else{if(!Xr(o,m)&&(c.flags&128)===0)return Qt=!1,im(o,c,m);Qt=(o.flags&131072)!==0}else Qt=!1,Ae&&(c.flags&1048576)!==0&&U(c,ao,c.index);switch(c.lanes=0,c.tag){case 16:t:{o=c.pendingProps;var b=c.elementType,E=b._init;if(b=E(b._payload),c.type=b,typeof b=="function")Cd(b)?(o=Vr(b,o),c.tag=1,c=cd(null,c,b,o,m)):(c.tag=0,c=Yr(null,c,b,o,m));else{if(b!=null){if(E=b.$$typeof,E===qa){c.tag=11,c=Mp(null,c,b,o,m);break t}else if(E===Ia){c.tag=14,c=Dp(null,c,b,o,m);break t}}throw c=S(b)||b,Error(a(306,c,""))}}return c;case 0:return Yr(o,c,c.type,c.pendingProps,m);case 1:return b=c.type,E=Vr(b,c.pendingProps),cd(o,c,b,E,m);case 3:t:{if(ft(c,c.stateNode.containerInfo),o===null)throw Error(a(387));var C=c.pendingProps;E=c.memoizedState,b=E.element,Xh(o,c),Na(c,C,null,m);var B=c.memoizedState;if(C=B.cache,de(c,ze,C),C!==E.cache&&ne(c,[ze],m,!0),Oa(),C=B.element,Mi&&E.isDehydrated)if(E={element:C,isDehydrated:!1,cache:B.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=hd(o,c,C,m);break t}else if(C!==b){b=ot(Error(a(424)),c),ee(b),c=hd(o,c,C,m);break t}else for(Mi&&(wn=pg(c.stateNode.containerInfo),hn=c,Ae=!0,Sa=null,Ne=!0),m=lf(c,null,C,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Tn(),C===b){c=Fi(o,c,m);break t}Xn(o,c,C,m)}c=c.child}return c;case 26:if(yi)return kl(o,c),o===null?(m=_u(c.type,null,c.pendingProps,null))?c.memoizedState=m:Ae||(c.stateNode=Xa(c.type,c.pendingProps,fr.current,c)):c.memoizedState=_u(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:if(pe)return Ht(c),o===null&&pe&&Ae&&(b=c.stateNode=Au(c.type,c.pendingProps,fr.current,en.current,!1),hn=c,Ne=!0,wn=gg(c.type,b,wn)),Xn(o,c,c.pendingProps.children,m),kl(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ae&&(cm(c.type,c.pendingProps,en.current),(E=b=wn)&&(b=mg(b,c.type,c.pendingProps,Ne),b!==null?(c.stateNode=b,hn=c,wn=fg(b),Ne=!1,E=!0):E=!1),E||jt(c)),Ht(c),E=c.type,C=c.pendingProps,B=o!==null?o.memoizedProps:null,b=C.children,xs(E,C)?b=null:B!==null&&xs(E,B)&&(c.flags|=32),c.memoizedState!==null&&(E=Kh(o,c,tm,null,null,m),Cs?Ya._currentValue=E:Ya._currentValue2=E),kl(o,c),Xn(o,c,b,m),c.child;case 6:return o===null&&Ae&&(eo(c.pendingProps,en.current),(o=m=wn)&&(m=om(m,c.pendingProps,Ne),m!==null?(c.stateNode=m,hn=c,wn=null,o=!0):o=!1),o||jt(c)),null;case 13:return dd(o,c,m);case 4:return ft(c,c.stateNode.containerInfo),b=c.pendingProps,o===null?c.child=Ls(c,null,b,m):Xn(o,c,b,m),c.child;case 11:return Mp(o,c,c.type,c.pendingProps,m);case 7:return Xn(o,c,c.pendingProps,m),c.child;case 8:return Xn(o,c,c.pendingProps.children,m),c.child;case 12:return Xn(o,c,c.pendingProps.children,m),c.child;case 10:return b=c.pendingProps,de(c,c.type,b.value),Xn(o,c,b.children,m),c.child;case 9:return E=c.type._context,b=c.pendingProps.children,xe(c),E=He(E),b=b(E),c.flags|=1,Xn(o,c,b,m),c.child;case 14:return Dp(o,c,c.type,c.pendingProps,m);case 15:return Op(o,c,c.type,c.pendingProps,m);case 19:return pd(o,c,m);case 31:return b=c.pendingProps,m=c.mode,b={mode:b.mode,children:b.children},o===null?(m=Mc(b,m),m.ref=c.ref,c.child=m,m.return=c,c=m):(m=As(o.child,b),m.ref=c.ref,c.child=m,m.return=c,c=m),c;case 22:return Np(o,c,m);case 24:return xe(c),b=He(ze),o===null?(E=sc(),E===null&&(E=we,C=os(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=m),E=C),c.memoizedState={parent:b,cache:E},Go(c),de(c,ze,E)):((o.lanes&m)!==0&&(Xh(o,c),Na(c,null,null,m),Oa()),E=o.memoizedState,C=c.memoizedState,E.parent!==b?(E={parent:b,cache:b},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),de(c,ze,b)):(b=C.cache,de(c,ze,b),b!==E.cache&&ne(c,[ze],m,!0))),Xn(o,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function xi(o){o.flags|=4}function gd(o,c){if(o!==null&&o.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(o=c.child;o!==null;){if((o.flags&13878)!==0||(o.subtreeFlags&13878)!==0)return!0;o=o.sibling}return!1}function Zo(o,c,m,b){if(ge)for(m=c.child;m!==null;){if(m.tag===5||m.tag===6)pn(o,m.stateNode);else if(!(m.tag===4||pe&&m.tag===27)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}else if(Va)for(var E=c.child;E!==null;){if(E.tag===5){var C=E.stateNode;m&&b&&(C=qd(C,E.type,E.memoizedProps)),pn(o,C)}else if(E.tag===6)C=E.stateNode,m&&b&&(C=Id(C,E.memoizedProps)),pn(o,C);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)C=E.child,C!==null&&(C.return=E),Zo(o,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}}function Oc(o,c,m,b){var E=!1;if(Va)for(var C=c.child;C!==null;){if(C.tag===5){var B=C.stateNode;m&&b&&(B=qd(B,C.type,C.memoizedProps)),jd(o,B)}else if(C.tag===6)B=C.stateNode,m&&b&&(B=Id(B,C.memoizedProps)),jd(o,B);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)E=C.child,E!==null&&(E.return=C),Oc(o,C,!0,!0),E=!0;else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===c)break;for(;C.sibling===null;){if(C.return===null||C.return===c)return E;C=C.return}C.sibling.return=C.return,C=C.sibling}return E}function md(o,c){if(Va&&gd(o,c)){o=c.stateNode;var m=o.containerInfo,b=kd();Oc(b,c,!1,!1),o.pendingChildren=b,xi(c),og(m,b)}}function Nc(o,c,m,b){if(ge)o.memoizedProps!==b&&xi(c);else if(Va){var E=o.stateNode,C=o.memoizedProps;if((o=gd(o,c))||C!==b){var B=en.current;C=yu(E,m,C,b,!o,null),C===E?c.stateNode=E:(fu(C,m,b,B)&&xi(c),c.stateNode=C,o?Zo(C,c,!1,!1):xi(c))}else c.stateNode=E}}function Lc(o,c,m){if(Cn(c,m)){if(o.flags|=16777216,!Zc(c,m))if(kc())o.flags|=8192;else throw zi=Kn,ch}else o.flags&=-16777217}function Pp(o,c){if(_g(c)){if(o.flags|=16777216,!ws(c))if(kc())o.flags|=8192;else throw zi=Kn,ch}else o.flags&=-16777217}function zc(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?P():536870912,o.lanes|=c,Wi|=c)}function Wo(o,c){if(!Ae)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:b.sibling=null}}function cn(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,b=0;if(c)for(var E=o.child;E!==null;)m|=E.lanes|E.childLanes,b|=E.subtreeFlags&65011712,b|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)m|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=b,o.childLanes=m,c}function am(o,c,m){var b=c.pendingProps;switch(ht(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(c),null;case 1:return cn(c),null;case 3:return m=c.stateNode,b=null,o!==null&&(b=o.memoizedState.cache),c.memoizedState.cache!==b&&(c.flags|=2048),Et(ze),Mt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Te(c)?xi(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Yn())),md(o,c),cn(c),null;case 26:if(yi){m=c.type;var E=c.memoizedState;return o===null?(xi(c),E!==null?(cn(c),Pp(c,E)):(cn(c),Lc(c,m,b))):E?E!==o.memoizedState?(xi(c),cn(c),Pp(c,E)):(cn(c),c.flags&=-16777217):(ge?o.memoizedProps!==b&&xi(c):Nc(o,c,m,b),cn(c),Lc(c,m,b)),null}case 27:if(pe){if(Nt(c),m=fr.current,E=c.type,o!==null&&c.stateNode!=null)ge?o.memoizedProps!==b&&xi(c):Nc(o,c,E,b);else{if(!b){if(c.stateNode===null)throw Error(a(166));return cn(c),null}o=en.current,Te(c)?he(c,o):(o=Au(E,b,m,o,!0),c.stateNode=o,xi(c))}return cn(c),null}case 5:if(Nt(c),m=c.type,o!==null&&c.stateNode!=null)Nc(o,c,m,b);else{if(!b){if(c.stateNode===null)throw Error(a(166));return cn(c),null}o=en.current,Te(c)?he(c,o):(E=je(m,b,fr.current,o,c),Zo(E,c,!1,!1),c.stateNode=E,fu(E,m,b,o)&&xi(c))}return cn(c),Lc(c,c.type,c.pendingProps),null;case 6:if(o&&c.stateNode!=null)m=o.memoizedProps,ge?m!==b&&xi(c):Va&&(m!==b?(c.stateNode=lr(b,fr.current,en.current,c),xi(c)):c.stateNode=o.stateNode);else{if(typeof b!="string"&&c.stateNode===null)throw Error(a(166));if(o=fr.current,m=en.current,Te(c)){if(!Mi)throw Error(a(176));if(o=c.stateNode,m=c.memoizedProps,b=null,E=hn,E!==null)switch(E.tag){case 27:case 5:b=E.memoizedProps}bu(o,m,c,b)||jt(c)}else c.stateNode=lr(b,o,m,c)}return cn(c),null;case 13:if(b=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Te(c),b!==null&&b.dehydrated!==null){if(o===null){if(!E)throw Error(a(318));if(!Mi)throw Error(a(344));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));Kd(E,c)}else Tn(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),E=!1}else E=Yn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(vs(c),c):(vs(c),null)}if(vs(c),(c.flags&128)!==0)return c.lanes=m,c;if(m=b!==null,o=o!==null&&o.memoizedState!==null,m){b=c.child,E=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(E=b.alternate.memoizedState.cachePool.pool);var C=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(C=b.memoizedState.cachePool.pool),C!==E&&(b.flags|=2048)}return m!==o&&m&&(c.child.flags|=8192),zc(c,c.updateQueue),cn(c),null;case 4:return Mt(),md(o,c),o===null&&Vp(c.stateNode.containerInfo),cn(c),null;case 10:return Et(c.type),cn(c),null;case 19:if(x(Kt),E=c.memoizedState,E===null)return cn(c),null;if(b=(c.flags&128)!==0,C=E.rendering,C===null)if(b)Wo(E,!1);else{if(dn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=Ec(o),C!==null){for(c.flags|=128,Wo(E,!1),o=C.updateQueue,c.updateQueue=o,zc(c,o),c.subtreeFlags=0,o=m,m=c.child;m!==null;)xn(m,o),m=m.sibling;return T(Kt,Kt.current&1|2),c.child}o=o.sibling}E.tail!==null&&Fe()>po&&(c.flags|=128,b=!0,Wo(E,!1),c.lanes=4194304)}else{if(!b)if(o=Ec(C),o!==null){if(c.flags|=128,b=!0,o=o.updateQueue,c.updateQueue=o,zc(c,o),Wo(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!Ae)return cn(c),null}else 2*Fe()-E.renderingStartTime>po&&m!==536870912&&(c.flags|=128,b=!0,Wo(E,!1),c.lanes=4194304);E.isBackwards?(C.sibling=c.child,c.child=C):(o=E.last,o!==null?o.sibling=C:c.child=C,E.last=C)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Fe(),c.sibling=null,o=Kt.current,T(Kt,b?o&1|2:o&1),c):(cn(c),null);case 22:case 23:return vs(c),hc(),b=c.memoizedState!==null,o!==null?o.memoizedState!==null!==b&&(c.flags|=8192):b&&(c.flags|=8192),b?(m&536870912)!==0&&(c.flags&128)===0&&(cn(c),c.subtreeFlags&6&&(c.flags|=8192)):cn(c),m=c.updateQueue,m!==null&&zc(c,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==m&&(c.flags|=2048),o!==null&&x(rn),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Et(ze),cn(c),null;case 25:return null;case 30:return null}throw Error(a(156,c.tag))}function qi(o,c){switch(ht(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Et(ze),Mt(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Nt(c),null;case 13:if(vs(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(a(340));Tn()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return x(Kt),null;case 4:return Mt(),null;case 10:return Et(c.type),null;case 22:case 23:return vs(c),hc(),o!==null&&x(rn),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Et(ze),null;case 25:return null;default:return null}}function jl(o,c){switch(ht(c),c.tag){case 3:Et(ze),Mt();break;case 26:case 27:case 5:Nt(c);break;case 4:Mt();break;case 13:vs(c);break;case 19:x(Kt);break;case 10:Et(c.type);break;case 22:case 23:vs(c),hc(),o!==null&&x(rn);break;case 24:Et(ze)}}function Fl(o,c){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&o)===o){b=void 0;var C=m.create,B=m.inst;b=C(),B.destroy=b}m=m.next}while(m!==E)}}catch(I){Le(c,c.return,I)}}function bs(o,c,m){try{var b=c.updateQueue,E=b!==null?b.lastEffect:null;if(E!==null){var C=E.next;b=C;do{if((b.tag&o)===o){var B=b.inst,I=B.destroy;if(I!==void 0){B.destroy=void 0,E=c;var Q=m,bt=I;try{bt()}catch(Tt){Le(E,Q,Tt)}}}b=b.next}while(b!==C)}}catch(Tt){Le(c,c.return,Tt)}}function yd(o){var c=o.updateQueue;if(c!==null){var m=o.stateNode;try{Gr(c,m)}catch(b){Le(o,o.return,b)}}}function vd(o,c,m){m.props=Vr(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(b){Le(o,c,b)}}function Kr(o,c){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var b=Wl(o.stateNode);break;case 30:b=o.stateNode;break;default:b=o.stateNode}typeof m=="function"?o.refCleanup=m(b):m.current=b}}catch(E){Le(o,c,E)}}function Ba(o,c){var m=o.ref,b=o.refCleanup;if(m!==null)if(typeof b=="function")try{b()}catch(E){Le(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){Le(o,c,E)}else m.current=null}function Qr(o){var c=o.type,m=o.memoizedProps,b=o.stateNode;try{Gd(b,c,m,o)}catch(E){Le(o,o.return,E)}}function Jo(o,c,m){try{tg(o.stateNode,o.type,m,c,o)}catch(b){Le(o,o.return,b)}}function ql(o){return o.tag===5||o.tag===3||(yi?o.tag===26:!1)||(pe?o.tag===27&&ul(o.type):!1)||o.tag===4}function $o(o){t:for(;;){for(;o.sibling===null;){if(o.return===null||ql(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(pe&&o.tag===27&&ul(o.type)||o.flags&2||o.child===null||o.tag===4)continue t;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Bc(o,c,m){var b=o.tag;if(b===5||b===6)o=o.stateNode,c?ng(m,o,c):Jp(m,o);else if(b!==4&&(pe&&b===27&&ul(o.type)&&(m=o.stateNode,c=null),o=o.child,o!==null))for(Bc(o,c,m),o=o.sibling;o!==null;)Bc(o,c,m),o=o.sibling}function Pa(o,c,m){var b=o.tag;if(b===5||b===6)o=o.stateNode,c?eg(m,o,c):Wp(m,o);else if(b!==4&&(pe&&b===27&&ul(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Pa(o,c,m),o=o.sibling;o!==null;)Pa(o,c,m),o=o.sibling}function Zr(o,c,m){o=o.containerInfo;try{Fd(o,m)}catch(b){Le(c,c.return,b)}}function Pc(o){var c=o.stateNode,m=o.memoizedProps;try{$d(o.type,m,c,o)}catch(b){Le(o,o.return,b)}}function Hp(o,c){for(rr(o.containerInfo),oe=c;oe!==null;)if(o=oe,c=o.child,(o.subtreeFlags&1024)!==0&&c!==null)c.return=o,oe=c;else for(;oe!==null;){o=oe;var m=o.alternate;switch(c=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&m!==null){c=void 0;var b=o,E=m.memoizedProps;m=m.memoizedState;var C=b.stateNode;try{var B=Vr(b.type,E,b.elementType===b.type);c=C.getSnapshotBeforeUpdate(B,m),C.__reactInternalSnapshotBeforeUpdate=c}catch(I){Le(b,b.return,I)}}break;case 3:(c&1024)!==0&&ge&&Jc(o.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=o.sibling,c!==null){c.return=o.return,oe=c;break}oe=o.return}}function Zs(o,c,m){var b=m.flags;switch(m.tag){case 0:case 11:case 15:Ss(o,m),b&4&&Fl(5,m);break;case 1:if(Ss(o,m),b&4)if(o=m.stateNode,c===null)try{o.componentDidMount()}catch(B){Le(m,m.return,B)}else{var E=Vr(m.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(B){Le(m,m.return,B)}}b&64&&yd(m),b&512&&Kr(m,m.return);break;case 3:if(Ss(o,m),b&64&&(o=m.updateQueue,o!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=Wl(m.child.stateNode);break;case 1:c=m.child.stateNode}try{Gr(o,c)}catch(B){Le(m,m.return,B)}}break;case 27:pe&&c===null&&b&4&&Pc(m);case 26:case 5:Ss(o,m),c===null&&b&4&&Qr(m),b&512&&Kr(m,m.return);break;case 12:Ss(o,m);break;case 13:Ss(o,m),b&4&&Up(o,m),b&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=si.bind(null,m),Vd(o,m))));break;case 22:if(b=m.memoizedState!==null||oi,!b){c=c!==null&&c.memoizedState!==null||Qe,E=oi;var C=Qe;oi=b,(Qe=c)&&!C?Nn(o,m,(m.subtreeFlags&8772)!==0):Ss(o,m),oi=E,Qe=C}break;case 30:break;default:Ss(o,m)}}function bd(o){var c=o.alternate;c!==null&&(o.alternate=null,bd(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Di(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function ta(o,c,m){for(m=m.child;m!==null;)Hc(o,c,m),m=m.sibling}function Hc(o,c,m){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(ur,m)}catch{}switch(m.tag){case 26:if(yi){Qe||Ba(m,c),ta(o,c,m),m.memoizedState?Wd(m.memoizedState):m.stateNode&&Yi(m.stateNode);break}case 27:if(pe){Qe||Ba(m,c);var b=Ye,E=Mn;ul(m.type)&&(Ye=m.stateNode,Mn=!1),ta(o,c,m),nh(m.stateNode),Ye=b,Mn=E;break}case 5:Qe||Ba(m,c);case 6:if(ge){if(b=Ye,E=Mn,Ye=null,ta(o,c,m),Ye=b,Mn=E,Ye!==null)if(Mn)try{ag(Ye,m.stateNode)}catch(C){Le(m,c,C)}else try{ig(Ye,m.stateNode)}catch(C){Le(m,c,C)}}else ta(o,c,m);break;case 18:ge&&Ye!==null&&(Mn?Sg(Ye,m.stateNode):eh(Ye,m.stateNode));break;case 4:ge?(b=Ye,E=Mn,Ye=m.stateNode.containerInfo,Mn=!0,ta(o,c,m),Ye=b,Mn=E):(Va&&Zr(m.stateNode,m,kd()),ta(o,c,m));break;case 0:case 11:case 14:case 15:Qe||bs(2,m,c),Qe||bs(4,m,c),ta(o,c,m);break;case 1:Qe||(Ba(m,c),b=m.stateNode,typeof b.componentWillUnmount=="function"&&vd(m,c,b)),ta(o,c,m);break;case 21:ta(o,c,m);break;case 22:Qe=(b=Qe)||m.memoizedState!==null,ta(o,c,m),Qe=b;break;default:ta(o,c,m)}}function Up(o,c){if(Mi&&c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{bg(o)}catch(m){Le(c,c.return,m)}}function sm(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new Ja),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new Ja),c;default:throw Error(a(435,o.tag))}}function Sd(o,c){var m=sm(o);c.forEach(function(b){var E=Vc.bind(null,o,b);m.has(b)||(m.add(b),b.then(E,E))})}function ei(o,c){var m=c.deletions;if(m!==null)for(var b=0;b<m.length;b++){var E=m[b],C=o,B=c;if(ge){var I=B;t:for(;I!==null;){switch(I.tag){case 27:if(pe){if(ul(I.type)){Ye=I.stateNode,Mn=!1;break t}break}case 5:Ye=I.stateNode,Mn=!1;break t;case 3:case 4:Ye=I.stateNode.containerInfo,Mn=!0;break t}I=I.return}if(Ye===null)throw Error(a(160));Hc(C,B,E),Ye=null,Mn=!1}else Hc(C,B,E);C=E.alternate,C!==null&&(C.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)_d(c,o),c=c.sibling}function _d(o,c){var m=o.alternate,b=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ei(c,o),ni(o),b&4&&(bs(3,o,o.return),Fl(3,o),bs(5,o,o.return));break;case 1:ei(c,o),ni(o),b&512&&(Qe||m===null||Ba(m,m.return)),b&64&&oi&&(o=o.updateQueue,o!==null&&(b=o.callbacks,b!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?b:m.concat(b))));break;case 26:if(yi){var E=Zi;if(ei(c,o),ni(o),b&512&&(Qe||m===null||Ba(m,m.return)),b&4){b=m!==null?m.memoizedState:null;var C=o.memoizedState;m===null?C===null?o.stateNode===null?o.stateNode=no(E,o.type,o.memoizedProps,o):Jd(E,o.type,o.stateNode):o.stateNode=Zd(E,C,o.memoizedProps):b!==C?(b===null?m.stateNode!==null&&Yi(m.stateNode):Wd(b),C===null?Jd(E,o.type,o.stateNode):Zd(E,C,o.memoizedProps)):C===null&&o.stateNode!==null&&Jo(o,o.memoizedProps,m.memoizedProps)}break}case 27:if(pe){ei(c,o),ni(o),b&512&&(Qe||m===null||Ba(m,m.return)),m!==null&&b&4&&Jo(o,o.memoizedProps,m.memoizedProps);break}case 5:if(ei(c,o),ni(o),b&512&&(Qe||m===null||Ba(m,m.return)),ge){if(o.flags&32){E=o.stateNode;try{sg(E)}catch(Tt){Le(o,o.return,Tt)}}b&4&&o.stateNode!=null&&(E=o.memoizedProps,Jo(o,E,m!==null?m.memoizedProps:E)),b&1024&&(Lu=!0)}break;case 6:if(ei(c,o),ni(o),b&4&&ge){if(o.stateNode===null)throw Error(a(162));b=o.memoizedProps,m=m!==null?m.memoizedProps:b,E=o.stateNode;try{$p(E,m,b)}catch(Tt){Le(o,o.return,Tt)}}break;case 3:if(yi?(or(),E=Zi,Zi=ol(c.containerInfo),ei(c,o),Zi=E):ei(c,o),ni(o),b&4){if(ge&&Mi&&m!==null&&m.memoizedState.isDehydrated)try{vg(c.containerInfo)}catch(Tt){Le(o,o.return,Tt)}if(Va){b=c.containerInfo,m=c.pendingChildren;try{Fd(b,m)}catch(Tt){Le(o,o.return,Tt)}}}Lu&&(Lu=!1,ea(o));break;case 4:yi?(m=Zi,Zi=ol(o.stateNode.containerInfo),ei(c,o),ni(o),Zi=m):(ei(c,o),ni(o)),b&4&&Va&&Zr(o.stateNode,o,o.stateNode.pendingChildren);break;case 12:ei(c,o),ni(o);break;case 13:ei(c,o),ni(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(dh=Fe()),b&4&&(b=o.updateQueue,b!==null&&(o.updateQueue=null,Sd(o,b)));break;case 22:E=o.memoizedState!==null;var B=m!==null&&m.memoizedState!==null,I=oi,Q=Qe;if(oi=I||E,Qe=Q||B,ei(c,o),Qe=Q,oi=I,ni(o),b&8192&&(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(m===null||B||oi||Qe||kn(o)),ge)){t:if(m=null,ge)for(c=o;;){if(c.tag===5||yi&&c.tag===26){if(m===null){B=m=c;try{C=B.stateNode,E?rg(C):Wc(B.stateNode,B.memoizedProps)}catch(Tt){Le(B,B.return,Tt)}}}else if(c.tag===6){if(m===null){B=c;try{var bt=B.stateNode;E?to(bt):lg(bt,B.memoizedProps)}catch(Tt){Le(B,B.return,Tt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break t;for(;c.sibling===null;){if(c.return===null||c.return===o)break t;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}}b&4&&(b=o.updateQueue,b!==null&&(m=b.retryQueue,m!==null&&(b.retryQueue=null,Sd(o,m))));break;case 19:ei(c,o),ni(o),b&4&&(b=o.updateQueue,b!==null&&(o.updateQueue=null,Sd(o,b)));break;case 30:break;case 21:break;default:ei(c,o),ni(o)}}function ni(o){var c=o.flags;if(c&2){try{if(ge){for(var m,b=o.return;b!==null;){if(ql(b)){m=b;break}b=b.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:if(pe){var E=m.stateNode,C=$o(o);Pa(o,C,E);break}case 5:var B=m.stateNode;m.flags&32&&(sg(B),m.flags&=-33);var I=$o(o);Pa(o,I,B);break;case 3:case 4:var Q=m.stateNode.containerInfo,bt=$o(o);Bc(o,bt,Q);break;default:throw Error(a(161))}}}catch(Tt){Le(o,o.return,Tt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function ea(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;ea(c),c.tag===5&&c.flags&1024&&Pd(c.stateNode),o=o.sibling}}function Ss(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Zs(o,c.alternate,c),c=c.sibling}function kn(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:bs(4,c,c.return),kn(c);break;case 1:Ba(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&vd(c,c.return,m),kn(c);break;case 27:pe&&nh(c.stateNode);case 26:case 5:Ba(c,c.return),kn(c);break;case 22:c.memoizedState===null&&kn(c);break;case 30:kn(c);break;default:kn(c)}o=o.sibling}}function Nn(o,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var b=c.alternate,E=o,C=c,B=C.flags;switch(C.tag){case 0:case 11:case 15:Nn(E,C,m),Fl(4,C);break;case 1:if(Nn(E,C,m),b=C,E=b.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(bt){Le(b,b.return,bt)}if(b=C,E=b.updateQueue,E!==null){var I=b.stateNode;try{var Q=E.shared.hiddenCallbacks;if(Q!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Q.length;E++)Dl(Q[E],I)}catch(bt){Le(b,b.return,bt)}}m&&B&64&&yd(C),Kr(C,C.return);break;case 27:pe&&Pc(C);case 26:case 5:Nn(E,C,m),m&&b===null&&B&4&&Qr(C),Kr(C,C.return);break;case 12:Nn(E,C,m);break;case 13:Nn(E,C,m),m&&B&4&&Up(E,C);break;case 22:C.memoizedState===null&&Nn(E,C,m),Kr(C,C.return);break;case 30:break;default:Nn(E,C,m)}c=c.sibling}}function Ws(o,c){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&_e(m))}function tu(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&_e(o))}function Ii(o,c,m,b){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)eu(o,c,m,b),c=c.sibling}function eu(o,c,m,b){var E=c.flags;switch(c.tag){case 0:case 11:case 15:Ii(o,c,m,b),E&2048&&Fl(9,c);break;case 1:Ii(o,c,m,b);break;case 3:Ii(o,c,m,b),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&_e(o)));break;case 12:if(E&2048){Ii(o,c,m,b),o=c.stateNode;try{var C=c.memoizedProps,B=C.id,I=C.onPostCommit;typeof I=="function"&&I(B,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Q){Le(c,c.return,Q)}}else Ii(o,c,m,b);break;case 13:Ii(o,c,m,b);break;case 23:break;case 22:C=c.stateNode,B=c.alternate,c.memoizedState!==null?C._visibility&2?Ii(o,c,m,b):Ha(o,c):C._visibility&2?Ii(o,c,m,b):(C._visibility|=2,Js(o,c,m,b,(c.subtreeFlags&10256)!==0)),E&2048&&Ws(B,c);break;case 24:Ii(o,c,m,b),E&2048&&tu(c.alternate,c);break;default:Ii(o,c,m,b)}}function Js(o,c,m,b,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=o,B=c,I=m,Q=b,bt=B.flags;switch(B.tag){case 0:case 11:case 15:Js(C,B,I,Q,E),Fl(8,B);break;case 23:break;case 22:var Tt=B.stateNode;B.memoizedState!==null?Tt._visibility&2?Js(C,B,I,Q,E):Ha(C,B):(Tt._visibility|=2,Js(C,B,I,Q,E)),E&&bt&2048&&Ws(B.alternate,B);break;case 24:Js(C,B,I,Q,E),E&&bt&2048&&tu(B.alternate,B);break;default:Js(C,B,I,Q,E)}c=c.sibling}}function Ha(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=o,b=c,E=b.flags;switch(b.tag){case 22:Ha(m,b),E&2048&&Ws(b.alternate,b);break;case 24:Ha(m,b),E&2048&&tu(b.alternate,b);break;default:Ha(m,b)}c=c.sibling}}function $s(o){if(o.subtreeFlags&Qn)for(o=o.child;o!==null;)nu(o),o=o.sibling}function nu(o){switch(o.tag){case 26:$s(o),o.flags&Qn&&(o.memoizedState!==null?Rs(Zi,o.memoizedState,o.memoizedProps):mu(o.type,o.memoizedProps));break;case 5:$s(o),o.flags&Qn&&mu(o.type,o.memoizedProps);break;case 3:case 4:if(yi){var c=Zi;Zi=ol(o.stateNode.containerInfo),$s(o),Zi=c}else $s(o);break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=Qn,Qn=16777216,$s(o),Qn=c):$s(o));break;default:$s(o)}}function Wr(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function iu(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var b=c[m];oe=b,Ua(b,o)}Wr(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ci(o),o=o.sibling}function Ci(o){switch(o.tag){case 0:case 11:case 15:iu(o),o.flags&2048&&bs(9,o,o.return);break;case 3:iu(o);break;case 12:iu(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Il(o)):iu(o);break;default:iu(o)}}function Il(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var b=c[m];oe=b,Ua(b,o)}Wr(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:bs(8,c,c.return),Il(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,Il(c));break;default:Il(c)}o=o.sibling}}function Ua(o,c){for(;oe!==null;){var m=oe;switch(m.tag){case 0:case 11:case 15:bs(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var b=m.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:_e(m.memoizedState.cache)}if(b=m.child,b!==null)b.return=m,oe=b;else t:for(m=o;oe!==null;){b=oe;var E=b.sibling,C=b.return;if(bd(b),b===m){oe=null;break t}if(E!==null){E.return=C,oe=E;break t}oe=C}}}function Uc(o){var c=Ip(o);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(o=Xp(o),o===null)throw Error(a(362));return o.stateNode.current}function Vl(o,c){var m=o.tag;switch(c.$$typeof){case vr:if(o.type===c.value)return!0;break;case Zn:t:{for(c=c.value,o=[o,0],m=0;m<o.length;){var b=o[m++],E=b.tag,C=o[m++],B=c[C];if(E!==5&&E!==26&&E!==27||!$l(b)){for(;B!=null&&Vl(b,B);)C++,B=c[C];if(C===c.length){c=!0;break t}else for(b=b.child;b!==null;)o.push(b,C),b=b.sibling}}c=!1}return c;case ho:if((m===5||m===26||m===27)&&Ud(o.stateNode,c.value))return!0;break;case pl:if((m===5||m===6||m===26||m===27)&&(o=Qp(o),o!==null&&0<=o.indexOf(c.value)))return!0;break;case fo:if((m===5||m===26||m===27)&&(o=o.memoizedProps["data-testname"],typeof o=="string"&&o.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function _s(o){switch(o.$$typeof){case vr:return"<"+(S(o.value)||"Unknown")+">";case Zn:return":has("+(_s(o)||"")+")";case ho:return'[role="'+o.value+'"]';case pl:return'"'+o.value+'"';case fo:return'[data-testname="'+o.value+'"]';default:throw Error(a(365))}}function Gc(o,c){var m=[];o=[o,0];for(var b=0;b<o.length;){var E=o[b++],C=E.tag,B=o[b++],I=c[B];if(C!==5&&C!==26&&C!==27||!$l(E)){for(;I!=null&&Vl(E,I);)B++,I=c[B];if(B===c.length)m.push(E);else for(E=E.child;E!==null;)o.push(E,B),E=E.sibling}}return m}function au(o,c){if(!Jl)throw Error(a(363));o=Uc(o),o=Gc(o,c),c=[],o=Array.from(o);for(var m=0;m<o.length;){var b=o[m++],E=b.tag;if(E===5||E===26||E===27)$l(b)||c.push(b.stateNode);else for(b=b.child;b!==null;)o.push(b),b=b.sibling}return c}function jn(){if((Ft&2)!==0&&ue!==0)return ue&-ue;if(kt.T!==null){var o=Xe;return o!==0?o:us()}return Ld()}function Jr(){la===0&&(la=(ue&536870912)===0||Ae?z():536870912);var o=ra.current;return o!==null&&(o.flags|=32),la}function ii(o,c,m){(o===we&&(Be===2||Be===9)||o.cancelPendingCommit!==null)&&(ia(o,0),wi(o,ue,la,!1)),k(o,m),((Ft&2)===0||o!==we)&&(o===we&&((Ft&2)===0&&(_r|=m),dn===4&&wi(o,ue,la,!1)),Jt(o))}function su(o,c,m){if((Ft&6)!==0)throw Error(a(327));var b=!m&&(c&124)===0&&(c&o.expiredLanes)===0||O(o,c),E=b?ka(o,c):Ce(o,c,!0),C=b;do{if(E===0){$a&&!b&&wi(o,c,0,!1);break}else{if(m=o.current.alternate,C&&!na(m)){E=Ce(o,c,!1),C=!1;continue}if(E===2){if(C=c,o.errorRecoveryDisabledLanes&C)var B=0;else B=o.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){c=B;t:{var I=o;E=Ar;var Q=Mi&&I.current.memoizedState.isDehydrated;if(Q&&(ia(I,B).flags|=256),B=Ce(I,B,!1),B!==2){if(zu&&!Q){I.errorRecoveryDisabledLanes|=C,_r|=C,E=4;break t}C=ui,ui=E,C!==null&&(ui===null?ui=C:ui.push.apply(ui,C))}E=B}if(C=!1,E!==2)continue}}if(E===1){ia(o,0),wi(o,c,0,!0);break}t:{switch(b=o,C=E,C){case 0:case 1:throw Error(a(345));case 4:if((c&4194048)!==c)break;case 6:wi(b,c,la,!zs);break t;case 2:ui=null;break;case 3:case 5:break;default:throw Error(a(329))}if((c&62914560)===c&&(E=dh+300-Fe(),10<E)){if(wi(b,c,la,!zs),M(b,0,!0)!==0)break t;b.timeoutHandle=Qc(Vi.bind(null,b,m,ui,Bu,Er,c,la,_r,Wi,zs,C,2,-0,0),E);break t}Vi(b,m,ui,Bu,Er,c,la,_r,Wi,zs,C,0,-0,0)}}break}while(!0);Jt(o)}function Vi(o,c,m,b,E,C,B,I,Q,bt,Tt,Dt,Ot,ie){if(o.timeoutHandle=sa,Dt=c.subtreeFlags,(Dt&8192||(Dt&16785408)===16785408)&&(gu(),nu(c),Dt=Bd(),Dt!==null)){o.cancelPendingCommit=Dt(xd.bind(null,o,c,C,m,b,E,B,I,Q,Tt,1,Ot,ie)),wi(o,C,B,!bt);return}xd(o,c,C,m,b,E,B,I,Q)}function na(o){for(var c=o;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var b=0;b<m.length;b++){var E=m[b],C=E.getSnapshot;E=E.value;try{if(!Xi(C(),E))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function wi(o,c,m,b){c&=~hh,c&=~_r,o.suspendedLanes|=c,o.pingedLanes&=~c,b&&(o.warmLanes|=c),b=o.expirationTimes;for(var E=c;0<E;){var C=31-Ni(E),B=1<<C;b[C]=-1,E&=~B}m!==0&&J(o,m,c)}function Ga(){return(Ft&6)===0?($e(0),!1):!0}function ma(){if($t!==null){if(Be===0)var o=$t.return;else o=$t,ri=_a=null,ga(o),Za=null,uo=0,o=$t;for(;o!==null;)jl(o.alternate,o),o=o.return;$t=null}}function ia(o,c){var m=o.timeoutHandle;m!==sa&&(o.timeoutHandle=sa,pu(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),ma(),we=o,$t=m=As(o.current,null),ue=c,Be=0,Ai=null,zs=!1,$a=O(o,c),zu=!1,Wi=la=hh=_r=Dn=dn=0,ui=Ar=null,Er=!1,(c&8)!==0&&(c|=c&32);var b=o.entangledLanes;if(b!==0)for(o=o.entanglements,b&=c;0<b;){var E=31-Ni(b),C=1<<E;c|=o[E],b&=~C}return _n=c,Uo(),m}function Ad(o,c){ae=null,kt.H=yr,c===lo||c===Ve?(c=lc(),Be=3):c===ch?(c=lc(),Be=4):Be=c===ve?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ai=c,$t===null&&(dn=1,xc(o,ot(c,o.current)))}function kc(){var o=ra.current;return o===null?!0:(ue&4194048)===ue?Wa===null:(ue&62914560)===ue||(ue&536870912)!==0?o===Wa:!1}function jc(){var o=kt.H;return kt.H=yr,o===null?yr:o}function ai(){var o=kt.A;return kt.A=co,o}function sn(){dn=4,zs||(ue&4194048)!==ue&&ra.current!==null||($a=!0),(Dn&134217727)===0&&(_r&134217727)===0||we===null||wi(we,ue,la,!1)}function Ce(o,c,m){var b=Ft;Ft|=2;var E=jc(),C=ai();(we!==o||ue!==c)&&(Bu=null,ia(o,c)),c=!1;var B=dn;t:do try{if(Be!==0&&$t!==null){var I=$t,Q=Ai;switch(Be){case 8:ma(),B=6;break t;case 3:case 2:case 9:case 6:ra.current===null&&(c=!0);var bt=Be;if(Be=0,Ai=null,tl(o,I,Q,bt),m&&$a){B=0;break t}break;default:bt=Be,Be=0,Ai=null,tl(o,I,Q,bt)}}$r(),B=dn;break}catch(Tt){Ad(o,Tt)}while(!0);return c&&o.shellSuspendCounter++,ri=_a=null,Ft=b,kt.H=E,kt.A=C,$t===null&&(we=null,ue=0,Uo()),B}function $r(){for(;$t!==null;)tr($t)}function ka(o,c){var m=Ft;Ft|=2;var b=jc(),E=ai();we!==o||ue!==c?(Bu=null,po=Fe()+500,ia(o,c)):$a=O(o,c);t:do try{if(Be!==0&&$t!==null){c=$t;var C=Ai;e:switch(Be){case 1:Be=0,Ai=null,tl(o,c,C,1);break;case 2:case 9:if(mp(C)){Be=0,Ai=null,Td(c);break}c=function(){Be!==2&&Be!==9||we!==o||(Be=7),Jt(o)},C.then(c,c);break t;case 3:Be=7;break t;case 4:Be=5;break t;case 7:mp(C)?(Be=0,Ai=null,Td(c)):(Be=0,Ai=null,tl(o,c,C,7));break;case 5:var B=null;switch($t.tag){case 26:B=$t.memoizedState;case 5:case 27:var I=$t,Q=I.type,bt=I.pendingProps;if(B?ws(B):Zc(Q,bt)){Be=0,Ai=null;var Tt=I.sibling;if(Tt!==null)$t=Tt;else{var Dt=I.return;Dt!==null?($t=Dt,er(Dt)):$t=null}break e}}Be=0,Ai=null,tl(o,c,C,5);break;case 6:Be=0,Ai=null,tl(o,c,C,6);break;case 8:ma(),dn=6;break t;default:throw Error(a(462))}}Ed();break}catch(Ot){Ad(o,Ot)}while(!0);return ri=_a=null,kt.H=b,kt.A=E,Ft=m,$t!==null?0:(we=null,ue=0,Uo(),dn)}function Ed(){for(;$t!==null&&!hm();)tr($t)}function tr(o){var c=Qo(o.alternate,o,_n);o.memoizedProps=o.pendingProps,c===null?er(o):$t=c}function Td(o){var c=o,m=c.alternate;switch(c.tag){case 15:case 0:c=zp(m,c,c.pendingProps,c.type,void 0,ue);break;case 11:c=zp(m,c,c.pendingProps,c.type.render,c.ref,ue);break;case 5:ga(c);default:jl(m,c),c=$t=xn(c,_n),c=Qo(m,c,_n)}o.memoizedProps=o.pendingProps,c===null?er(o):$t=c}function tl(o,c,m,b){ri=_a=null,ga(c),Za=null,uo=0;var E=c.return;try{if(nm(o,E,c,m,ue)){dn=1,xc(o,ot(m,o.current)),$t=null;return}}catch(C){if(E!==null)throw $t=E,C;dn=1,xc(o,ot(m,o.current)),$t=null;return}c.flags&32768?(Ae||b===1?o=!0:$a||(ue&536870912)!==0?o=!1:(zs=o=!0,(b===2||b===9||b===3||b===6)&&(b=ra.current,b!==null&&b.tag===13&&(b.flags|=16384))),Yl(c,o)):er(c)}function er(o){var c=o;do{if((c.flags&32768)!==0){Yl(c,zs);return}o=c.return;var m=am(c.alternate,c,_n);if(m!==null){$t=m;return}if(c=c.sibling,c!==null){$t=c;return}$t=c=o}while(c!==null);dn===0&&(dn=5)}function Yl(o,c){do{var m=qi(o.alternate,o);if(m!==null){m.flags&=32767,$t=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(o=o.sibling,o!==null)){$t=o;return}$t=o=m}while(o!==null);dn=6,$t=null}function xd(o,c,m,b,E,C,B,I,Q){o.cancelPendingCommit=null;do aa();while(Ln!==0);if((Ft&6)!==0)throw Error(a(327));if(c!==null){if(c===o.current)throw Error(a(177));if(C=c.lanes|c.childLanes,C|=sf,Y(o,m,C,B,I,Q),o===we&&($t=we=null,ue=0),go=c,Tr=o,mo=m,fh=C,ph=E,gl=b,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Gp(sh,function(){return Fa(),null})):(o.callbackNode=null,o.callbackPriority=0),b=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||b){b=kt.T,kt.T=null,E=va(),Fn(2),B=Ft,Ft|=4;try{Hp(o,c,m)}finally{Ft=B,Fn(E),kt.T=b}}Ln=1,Xl(),Fc(),nr()}}function Xl(){if(Ln===1){Ln=0;var o=Tr,c=go,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=kt.T,kt.T=null;var b=va();Fn(2);var E=Ft;Ft|=4;try{_d(c,o),le(o.containerInfo)}finally{Ft=E,Fn(b),kt.T=m}}o.current=c,Ln=2}}function Fc(){if(Ln===2){Ln=0;var o=Tr,c=go,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=kt.T,kt.T=null;var b=va();Fn(2);var E=Ft;Ft|=4;try{Zs(o,c.alternate,c)}finally{Ft=E,Fn(b),kt.T=m}}Ln=3}}function nr(){if(Ln===4||Ln===3){Ln=0,Eg();var o=Tr,c=go,m=mo,b=gl;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ln=5:(Ln=0,go=Tr=null,ja(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(ts=null),gt(m),c=c.stateNode,vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(ur,c,void 0,(c.current.flags&128)===128)}catch{}if(b!==null){c=kt.T,E=va(),Fn(2),kt.T=null;try{for(var C=o.onRecoverableError,B=0;B<b.length;B++){var I=b[B];C(I.value,{componentStack:I.stack})}}finally{kt.T=c,Fn(E)}}(mo&3)!==0&&aa(),Jt(o),E=o.pendingLanes,(m&4194090)!==0&&(E&42)!==0?o===gh?xr++:(xr=0,gh=o):xr=0,$e(0)}}function ja(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,_e(c)))}function aa(o){return Xl(),Fc(),nr(),Fa()}function Fa(){if(Ln!==5)return!1;var o=Tr,c=fh;fh=0;var m=gt(mo),b=32>m?32:m;m=kt.T;var E=va();try{Fn(b),kt.T=null,b=ph,ph=null;var C=Tr,B=mo;if(Ln=0,go=Tr=null,mo=0,(Ft&6)!==0)throw Error(a(331));var I=Ft;if(Ft|=4,Ci(C.current),eu(C,C.current,B,b),Ft=I,$e(0,!1),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(ur,C)}catch{}return!0}finally{Fn(E),kt.T=m,ja(o,c)}}function qc(o,c,m){c=ot(m,c),c=Cc(o.stateNode,c,2),o=hs(o,c,2),o!==null&&(k(o,2),Jt(o))}function Le(o,c,m){if(o.tag===3)qc(o,o,m);else for(;c!==null;){if(c.tag===3){qc(c,o,m);break}else if(c.tag===1){var b=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ts===null||!ts.has(b))){o=ot(m,o),m=wp(2),b=hs(c,m,2),b!==null&&(Rp(m,b,c,o),k(b,2),Jt(b));break}}c=c.return}}function el(o,c,m){var b=o.pingCache;if(b===null){b=o.pingCache=new Sr;var E=new Set;b.set(c,E)}else E=b.get(c),E===void 0&&(E=new Set,b.set(c,E));E.has(m)||(zu=!0,E.add(m),o=Ic.bind(null,o,c,m),c.then(o,o))}function Ic(o,c,m){var b=o.pingCache;b!==null&&b.delete(c),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,we===o&&(ue&m)===m&&(dn===4||dn===3&&(ue&62914560)===ue&&300>Fe()-dh?(Ft&2)===0&&ia(o,0):hh|=m,Wi===ue&&(Wi=0)),Jt(o)}function ir(o,c){c===0&&(c=P()),o=bn(o,c),o!==null&&(k(o,c),Jt(o))}function si(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),ir(o,m)}function Vc(o,c){var m=0;switch(o.tag){case 13:var b=o.stateNode,E=o.memoizedState;E!==null&&(m=E.retryLane);break;case 19:b=o.stateNode;break;case 22:b=o.stateNode._retryCache;break;default:throw Error(a(314))}b!==null&&b.delete(c),ir(o,m)}function Gp(o,c){return Tu(o,c)}function rm(o,c,m,b){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function As(o,c){var m=o.alternate;return m===null?(m=e(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function xn(o,c){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,c=m.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Kl(o,c,m,b,E,C){var B=0;if(b=o,typeof o=="function")Cd(o)&&(B=1);else if(typeof o=="string")B=yi&&pe?Su(o,m,en.current)?26:tf(o)?27:5:yi?Su(o,m,en.current)?26:5:pe&&tf(o)?27:5;else t:switch(o){case ll:return o=e(31,m,c,E),o.elementType=ll,o.lanes=C,o;case rl:return ya(m.children,E,C,c);case lu:B=8,E|=24;break;case Xc:return o=e(12,m,c,E|2),o.elementType=Xc,o.lanes=C,o;case uu:return o=e(13,m,c,E),o.elementType=uu,o.lanes=C,o;case cu:return o=e(19,m,c,E),o.elementType=cu,o.lanes=C,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ou:case Ts:B=10;break t;case Md:B=9;break t;case qa:B=11;break t;case Ia:B=14;break t;case mi:B=16,b=null;break t}B=29,m=Error(a(130,o===null?"null":typeof o,"")),b=null}return c=e(B,m,c,E),c.elementType=o,c.type=b,c.lanes=C,c}function ya(o,c,m,b){return o=e(7,o,b,c),o.lanes=m,o}function nl(o,c,m){return o=e(6,o,null,c),o.lanes=m,o}function ru(o,c,m){return c=e(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function Ql(o,c,m,b,E,C,B,I){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=sa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=j(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j(0),this.hiddenUpdates=j(null),this.identifierPrefix=b,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function il(o,c,m,b,E,C,B,I,Q,bt,Tt,Dt){return o=new Ql(o,c,m,B,I,Q,bt,Dt),c=1,C===!0&&(c|=24),C=e(3,null,null,c),o.current=C,C.stateNode=o,c=os(),c.refCount++,o.pooledCache=c,c.refCount++,C.memoizedState={element:b,isDehydrated:m,cache:c},Go(C),o}function kp(o){return o?(o=cl,o):cl}function wd(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=d(c),o=o!==null?f(o):null,o===null?null:Wl(o.stateNode)}function jp(o,c,m,b,E,C){E=kp(E),b.context===null?b.context=E:b.pendingContext=E,b=Is(c),b.payload={element:m},C=C===void 0?null:C,C!==null&&(b.callback=C),m=hs(o,b,c),m!==null&&(ii(m,o,c),ds(m,o,c))}function Rd(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function Es(o,c){Rd(o,c),(o=o.alternate)&&Rd(o,c)}var re={},Yc=M0(),Ri=X1(),al=Object.assign,Fp=Symbol.for("react.element"),sl=Symbol.for("react.transitional.element"),ar=Symbol.for("react.portal"),rl=Symbol.for("react.fragment"),lu=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),ou=Symbol.for("react.provider"),Md=Symbol.for("react.consumer"),Ts=Symbol.for("react.context"),qa=Symbol.for("react.forward_ref"),uu=Symbol.for("react.suspense"),cu=Symbol.for("react.suspense_list"),Ia=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),ll=Symbol.for("react.activity"),Dd=Symbol.for("react.memo_cache_sentinel"),Kc=Symbol.iterator,hu=Symbol.for("react.client.reference"),sr=Array.isArray,kt=Yc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qp=t.rendererVersion,Zl=t.rendererPackageName,du=t.extraDevToolsConfig,Wl=t.getPublicInstance,Od=t.getRootHostContext,Nd=t.getChildHostContext,rr=t.prepareForCommit,le=t.resetAfterCommit,je=t.createInstance;t.cloneMutableInstance;var pn=t.appendInitialChild,fu=t.finalizeInitialChildren,xs=t.shouldSetTextContent,lr=t.createTextInstance;t.cloneMutableTextInstance;var Qc=t.scheduleTimeout,pu=t.cancelTimeout,sa=t.noTimeout,Cs=t.isPrimaryRenderer;t.warnsIfNotActing;var ge=t.supportsMutation,Va=t.supportsPersistence,Mi=t.supportsHydration,Ip=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var Vp=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Fn=t.setCurrentUpdatePriority,va=t.getCurrentUpdatePriority,Ld=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var zd=t.shouldAttemptEagerTransition,Di=t.detachDeletedInstance;t.requestPostPaintCallback;var Cn=t.maySuspendCommit,Zc=t.preloadInstance,gu=t.startSuspendingCommit,mu=t.suspendInstance;t.suspendOnActiveViewTransition;var Bd=t.waitForCommitToBeReady,Oi=t.NotPendingTransition,Ya=t.HostTransitionContext,Pd=t.resetFormInstance;t.bindToConsole;var Hd=t.supportsMicrotasks,Yp=t.scheduleMicrotask,Jl=t.supportsTestSelectors,Xp=t.findFiberRoot,Kp=t.getBoundingRect,Qp=t.getTextContent,$l=t.isHiddenSubtree,Ud=t.matchAccessibilityRole,Zp=t.setFocusIfFocusable,lm=t.setupIntersectionObserver,Wp=t.appendChild,Jp=t.appendChildToContainer,$p=t.commitTextUpdate,Gd=t.commitMount,tg=t.commitUpdate,eg=t.insertBefore,ng=t.insertInContainerBefore,ig=t.removeChild,ag=t.removeChildFromContainer,sg=t.resetTextContent,rg=t.hideInstance,to=t.hideTextInstance,Wc=t.unhideInstance,lg=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopGestureTransition,t.getCurrentGestureOffset,t.subscribeToGestureDirection,t.createViewTransitionInstance;var Jc=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var yu=t.cloneInstance,kd=t.createContainerChildSet,jd=t.appendChildToContainerChildSet,og=t.finalizeContainerChildren,Fd=t.replaceContainerChildren,qd=t.cloneHiddenInstance,Id=t.cloneHiddenTextInstance,vu=t.isSuspenseInstancePending,$c=t.isSuspenseInstanceFallback,ug=t.getSuspenseInstanceFallbackErrorDetails,Vd=t.registerSuspenseInstanceRetry,cg=t.canHydrateFormStateMarker,hg=t.isFormStateMarkerMatching,dg=t.getNextHydratableSibling,Yd=t.getNextHydratableSiblingAfterSingleton,fg=t.getFirstHydratableChild,pg=t.getFirstHydratableChildWithinContainer,Xd=t.getFirstHydratableChildWithinSuspenseInstance,gg=t.getFirstHydratableChildWithinSingleton,mg=t.canHydrateInstance,om=t.canHydrateTextInstance,um=t.canHydrateSuspenseInstance,yg=t.hydrateInstance,bu=t.hydrateTextInstance,Kd=t.hydrateSuspenseInstance,th=t.getNextHydratableInstanceAfterSuspenseInstance,vg=t.commitHydratedContainer,bg=t.commitHydratedSuspenseInstance,eh=t.clearSuspenseBoundary,Sg=t.clearSuspenseBoundaryFromContainer,Qd=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var cm=t.validateHydratableInstance,eo=t.validateHydratableTextInstance,yi=t.supportsResources,Su=t.isHostHoistableType,ol=t.getHoistableRoot,_u=t.getResource,Zd=t.acquireResource,Wd=t.releaseResource,no=t.hydrateHoistable,Jd=t.mountHoistable,Yi=t.unmountHoistable,Xa=t.createHoistableInstance,or=t.prepareToCommitHoistables,_g=t.mayResourceSuspendCommit,ws=t.preloadResource,Rs=t.suspendResource,pe=t.supportsSingletons,Au=t.resolveSingletonInstance,$d=t.acquireSingletonInstance,nh=t.releaseSingletonInstance,tf=t.isHostSingletonType,ul=t.isSingletonScope,Ms=[],Ds=-1,cl={},Ni=Math.clz32?Math.clz32:w,Ag=Math.log,ih=Math.LN2,Eu=256,io=4194304,Tu=Ri.unstable_scheduleCallback,ah=Ri.unstable_cancelCallback,hm=Ri.unstable_shouldYield,Eg=Ri.unstable_requestPaint,Fe=Ri.unstable_now,qn=Ri.unstable_ImmediatePriority,Tg=Ri.unstable_UserBlockingPriority,sh=Ri.unstable_NormalPriority,xg=Ri.unstable_IdlePriority,Cg=Ri.log,wg=Ri.unstable_setDisableYieldValue,ur=null,vi=null,rh,ef,lh=!1,oh=new WeakMap,cr=[],hr=0,xu=null,ao=0,bi=[],Li=0,dr=null,ba=1,Ka="",en=_(null),hl=_(null),fr=_(null),Cu=_(null),hn=null,wn=null,Ae=!1,Sa=null,Ne=!1,nf=Error(a(519)),Xi=typeof Object.is=="function"?Object.is:Pe,wu=_(null),_a=null,ri=null,Rg=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(m,b){o.push(b)}};this.abort=function(){c.aborted=!0,o.forEach(function(m){return m()})}},Mg=Ri.unstable_scheduleCallback,Ru=Ri.unstable_NormalPriority,ze={$$typeof:Ts,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Mu=null,pr=null,uh=!1,so=!1,Du=!1,Os=0,ro=null,Aa=0,Xe=0,gr=null,af=kt.S;kt.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&ac(o,c),af!==null&&af(o,c)};var rn=_(null),dm=Object.prototype.hasOwnProperty,lo=Error(a(460)),ch=Error(a(474)),Ve=Error(a(542)),Kn={then:function(){}},zi=null,Ki=[],dl=0,sf=0,Qa=!1,Si=!1,li=_(null),Ou=_(0),Rn=0,ae=null,ye=null,Ke=null,Ea=!1,mr=!1,Ns=!1,Qi=0,oo=0,Ta=null,Nu=0,yr={readContext:He,use:Ll,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie},fl={readContext:He,use:Ll,useCallback:function(o,c){return ti().memoizedState=[o,c===void 0?null:c],o},useContext:He,useEffect:sd,useImperativeHandle:function(o,c,m){m=m!=null?m.concat([o]):null,qo(4194308,4,Pl.bind(null,c,o),m)},useLayoutEffect:function(o,c){return qo(4194308,4,o,c)},useInsertionEffect:function(o,c){qo(4,2,o,c)},useMemo:function(o,c){var m=ti();c=c===void 0?null:c;var b=o();if(Ns){St(!0);try{o()}finally{St(!1)}}return m.memoizedState=[b,c],b},useReducer:function(o,c,m){var b=ti();if(m!==void 0){var E=m(c);if(Ns){St(!0);try{m(c)}finally{St(!1)}}}else E=c;return b.memoizedState=b.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},b.queue=o,o=o.dispatch=od.bind(null,ae,o),[b.memoizedState,o]},useRef:function(o){var c=ti();return o={current:o},c.memoizedState=o},useState:function(o){o=pc(o);var c=o.queue,m=Sc.bind(null,ae,c);return c.dispatch=m,[o.memoizedState,m]},useDebugValue:Io,useDeferredValue:function(o,c){var m=ti();return Hl(m,o,c)},useTransition:function(){var o=pc(!1);return o=ld.bind(null,ae,o.queue,!0,!1),ti().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,m){var b=ae,E=ti();if(Ae){if(m===void 0)throw Error(a(407));m=m()}else{if(m=c(),we===null)throw Error(a(349));(ue&124)!==0||$h(b,c,m)}E.memoizedState=m;var C={value:m,getSnapshot:c};return E.queue=C,sd(yp.bind(null,b,C,o),[o]),b.flags|=2048,Xs(9,fs(),Fo.bind(null,b,C,m,c),null),m},useId:function(){var o=ti(),c=we.identifierPrefix;if(Ae){var m=Ka,b=ba;m=(b&~(1<<32-Ni(b)-1)).toString(32)+m,c=""+c+"R"+m,m=Qi++,0<m&&(c+="H"+m.toString(32)),c+=""}else m=Nu++,c=""+c+"r"+m.toString(32)+"";return o.memoizedState=c},useHostTransitionStatus:gs,useFormState:mc,useActionState:mc,useOptimistic:function(o){var c=ti();c.memoizedState=c.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=Gl.bind(null,ae,!0,m),m.dispatch=c,[o,c]},useMemoCache:Wh,useCacheRefresh:function(){return ti().memoizedState=em.bind(null,ae)}},rf={readContext:He,use:Ll,useCallback:Vo,useContext:He,useEffect:Bl,useImperativeHandle:ps,useInsertionEffect:za,useLayoutEffect:bc,useMemo:rd,useReducer:pi,useRef:Fr,useState:function(){return pi(La)},useDebugValue:Io,useDeferredValue:function(o,c){var m=Sn();return Yo(m,ye.memoizedState,o,c)},useTransition:function(){var o=pi(La)[0],c=Sn().memoizedState;return[typeof o=="boolean"?o:kr(o),c]},useSyncExternalStore:jo,useId:Xo,useHostTransitionStatus:gs,useFormState:vp,useActionState:vp,useOptimistic:function(o,c){var m=Sn();return gc(m,ye,o,c)},useMemoCache:Wh,useCacheRefresh:Ul},Dg={readContext:He,use:Ll,useCallback:Vo,useContext:He,useEffect:Bl,useImperativeHandle:ps,useInsertionEffect:za,useLayoutEffect:bc,useMemo:rd,useReducer:Jh,useRef:Fr,useState:function(){return Jh(La)},useDebugValue:Io,useDeferredValue:function(o,c){var m=Sn();return ye===null?Hl(m,o,c):Yo(m,ye.memoizedState,o,c)},useTransition:function(){var o=Jh(La)[0],c=Sn().memoizedState;return[typeof o=="boolean"?o:kr(o),c]},useSyncExternalStore:jo,useId:Xo,useHostTransitionStatus:gs,useFormState:vc,useActionState:vc,useOptimistic:function(o,c){var m=Sn();return ye!==null?gc(m,ye,o,c):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:Ul},Za=null,uo=0,Ls=Ep(!0),lf=Ep(!1),ra=_(null),Wa=null,Kt=_(0),qe={enqueueSetState:function(o,c,m){o=o._reactInternals;var b=jn(),E=Is(b);E.payload=c,m!=null&&(E.callback=m),c=hs(o,E,b),c!==null&&(ii(c,o,b),ds(c,o,b))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var b=jn(),E=Is(b);E.tag=1,E.payload=c,m!=null&&(E.callback=m),c=hs(o,E,b),c!==null&&(ii(c,o,b),ds(c,o,b))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=jn(),b=Is(m);b.tag=2,c!=null&&(b.callback=c),c=hs(o,b,m),c!==null&&(ii(c,o,m),ds(c,o,m))}},fe=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ve=Error(a(461)),Qt=!1,_i={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},oi=!1,Qe=!1,Lu=!1,Ja=typeof WeakSet=="function"?WeakSet:Set,oe=null,Ye=null,Mn=!1,Zi=null,Qn=8192,co={getCacheForType:function(o){var c=He(ze),m=c.data.get(o);return m===void 0&&(m=o(),c.data.set(o,m)),m}},vr=0,Zn=1,ho=2,fo=3,pl=4;if(typeof Symbol=="function"&&Symbol.for){var br=Symbol.for;vr=br("selector.component"),Zn=br("selector.has_pseudo_class"),ho=br("selector.role"),fo=br("selector.test_id"),pl=br("selector.text")}var Sr=typeof WeakMap=="function"?WeakMap:Map,Ft=0,we=null,$t=null,ue=0,Be=0,Ai=null,zs=!1,$a=!1,zu=!1,_n=0,dn=0,Dn=0,_r=0,hh=0,la=0,Wi=0,Ar=null,ui=null,Er=!1,dh=0,po=1/0,Bu=null,ts=null,Ln=0,Tr=null,go=null,mo=0,fh=0,ph=null,gl=null,xr=0,gh=null;return re.attemptContinuousHydration=function(o){if(o.tag===13){var c=bn(o,67108864);c!==null&&ii(c,o,67108864),Es(o,67108864)}},re.attemptHydrationAtCurrentPriority=function(o){if(o.tag===13){var c=jn();c=ct(c);var m=bn(o,c);m!==null&&ii(m,o,c),Es(o,c)}},re.attemptSynchronousHydration=function(o){switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var c=R(o.pendingLanes);if(c!==0){for(o.pendingLanes|=2,o.entangledLanes|=2;c;){var m=1<<31-Ni(c);o.entanglements[1]|=m,c&=~m}Jt(o),(Ft&6)===0&&(po=Fe()+500,$e(0))}}break;case 13:c=bn(o,2),c!==null&&ii(c,o,2),Ga(),Es(o,2)}},re.batchedUpdates=function(o,c){return o(c)},re.createComponentSelector=function(o){return{$$typeof:vr,value:o}},re.createContainer=function(o,c,m,b,E,C,B,I,Q,bt){return il(o,c,!1,null,m,b,C,B,I,Q,bt,null)},re.createHasPseudoClassSelector=function(o){return{$$typeof:Zn,value:o}},re.createHydrationContainer=function(o,c,m,b,E,C,B,I,Q,bt,Tt,Dt,Ot){return o=il(m,b,!0,o,E,C,I,Q,bt,Tt,Dt,Ot),o.context=kp(null),m=o.current,b=jn(),b=ct(b),E=Is(b),E.callback=c??null,hs(m,E,b),c=b,o.current.lanes=c,k(o,c),Jt(o),o},re.createPortal=function(o,c,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:b==null?null:""+b,children:o,containerInfo:c,implementation:m}},re.createRoleSelector=function(o){return{$$typeof:ho,value:o}},re.createTestNameSelector=function(o){return{$$typeof:fo,value:o}},re.createTextSelector=function(o){return{$$typeof:pl,value:o}},re.defaultOnCaughtError=function(o){console.error(o)},re.defaultOnRecoverableError=function(o){fe(o)},re.defaultOnUncaughtError=function(o){fe(o)},re.deferredUpdates=function(o){var c=kt.T,m=va();try{return Fn(32),kt.T=null,o()}finally{Fn(m),kt.T=c}},re.discreteUpdates=function(o,c,m,b,E){var C=kt.T,B=va();try{return Fn(2),kt.T=null,o(c,m,b,E)}finally{Fn(B),kt.T=C,Ft===0&&(po=Fe()+500)}},re.findAllNodes=au,re.findBoundingRects=function(o,c){if(!Jl)throw Error(a(363));c=au(o,c),o=[];for(var m=0;m<c.length;m++)o.push(Kp(c[m]));for(c=o.length-1;0<c;c--){m=o[c];for(var b=m.x,E=b+m.width,C=m.y,B=C+m.height,I=c-1;0<=I;I--)if(c!==I){var Q=o[I],bt=Q.x,Tt=bt+Q.width,Dt=Q.y,Ot=Dt+Q.height;if(b>=bt&&C>=Dt&&E<=Tt&&B<=Ot){o.splice(c,1);break}else if(b!==bt||m.width!==Q.width||Ot<C||Dt>B){if(!(C!==Dt||m.height!==Q.height||Tt<b||bt>E)){bt>b&&(Q.width+=bt-b,Q.x=b),Tt<E&&(Q.width=E-bt),o.splice(c,1);break}}else{Dt>C&&(Q.height+=Dt-C,Q.y=C),Ot<B&&(Q.height=B-Dt),o.splice(c,1);break}}}return o},re.findHostInstance=wd,re.findHostInstanceWithNoPortals=function(o){return o=d(o),o=o!==null?g(o):null,o===null?null:Wl(o.stateNode)},re.findHostInstanceWithWarning=function(o){return wd(o)},re.flushPassiveEffects=aa,re.flushSyncFromReconciler=function(o){var c=Ft;Ft|=1;var m=kt.T,b=va();try{if(Fn(2),kt.T=null,o)return o()}finally{Fn(b),kt.T=m,Ft=c,(Ft&6)===0&&$e(0)}},re.flushSyncWork=Ga,re.focusWithin=function(o,c){if(!Jl)throw Error(a(363));for(o=Uc(o),c=Gc(o,c),c=Array.from(c),o=0;o<c.length;){var m=c[o++],b=m.tag;if(!$l(m)){if((b===5||b===26||b===27)&&Zp(m.stateNode))return!0;for(m=m.child;m!==null;)c.push(m),m=m.sibling}}return!1},re.getFindAllNodesFailureDescription=function(o,c){if(!Jl)throw Error(a(363));var m=0,b=[];o=[Uc(o),0];for(var E=0;E<o.length;){var C=o[E++],B=C.tag,I=o[E++],Q=c[I];if((B!==5&&B!==26&&B!==27||!$l(C))&&(Vl(C,Q)&&(b.push(_s(Q)),I++,I>m&&(m=I)),I<c.length))for(C=C.child;C!==null;)o.push(C,I),C=C.sibling}if(m<c.length){for(o=[];m<c.length;m++)o.push(_s(c[m]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+o.join(" > ")}return null},re.getPublicRootInstance=function(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 27:case 5:return Wl(o.child.stateNode);default:return o.child.stateNode}},re.injectIntoDevTools=function(){var o={bundleType:0,version:qp,rendererPackageName:Zl,currentDispatcherRef:kt,reconcilerVersion:"19.1.0"};if(du!==null&&(o.rendererConfig=du),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")o=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)o=!0;else{try{ur=c.inject(o),vi=c}catch{}o=!!c.checkDCE}}return o},re.isAlreadyRendering=function(){return(Ft&6)!==0},re.observeVisibleRects=function(o,c,m,b){if(!Jl)throw Error(a(363));o=au(o,c);var E=lm(o,m,b).disconnect;return{disconnect:function(){E()}}},re.shouldError=function(){return null},re.shouldSuspend=function(){return!1},re.startHostTransition=function(o,c,m,b){if(o.tag!==5)throw Error(a(476));var E=gi(o).queue;ld(o,E,c,Oi,m===null?n:function(){var C=gi(o).next.queue;return ms(o,C,{},jn()),m(b)})},re.updateContainer=function(o,c,m,b){var E=c.current,C=jn();return jp(E,C,o,c,m,b),C},re.updateContainerSync=function(o,c,m,b){return jp(c.current,2,o,c,m,b),2},re},l.exports.default=l.exports,Object.defineProperty(l.exports,"__esModule",{value:!0})})(d1)),d1.exports}var Iv;function K8(){return Iv||(Iv=1,h1.exports=X8()),h1.exports}var Q8=K8();const Z8=Y1(Q8);var f1={exports:{}},yl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function W8(){return Vv||(Vv=1,yl.ConcurrentRoot=1,yl.ContinuousEventPriority=8,yl.DefaultEventPriority=32,yl.DiscreteEventPriority=2,yl.IdleEventPriority=268435456,yl.LegacyRoot=0,yl.NoEventPriority=0),yl}var Yv;function J8(){return Yv||(Yv=1,f1.exports=W8()),f1.exports}var K0=J8();const Xv={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Kv=!1,Qv=!1;const C0=".react-konva-event",$8=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,tT=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,eT={};function Q0(l,t,e=eT){if(!Kv&&"zIndex"in t&&(console.warn(tT),Kv=!0),!Qv&&t.draggable){var n=t.x!==void 0||t.y!==void 0,a=t.onDragEnd||t.onDragMove;n&&!a&&(console.warn($8),Qv=!0)}for(var r in e)if(!Xv[r]){var u=r.slice(0,2)==="on",d=e[r]!==t[r];if(u&&d){var f=r.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),l.off(f,e[r])}var g=!t.hasOwnProperty(r);g&&l.setAttr(r,void 0)}var y=t._useStrictMode,S={},_=!1;const x={};for(var r in t)if(!Xv[r]){var u=r.slice(0,2)==="on",T=e[r]!==t[r];if(u&&T){var f=r.substr(2).toLowerCase();f.substr(0,7)==="content"&&(f="content"+f.substr(7,1).toUpperCase()+f.substr(8)),t[r]&&(x[f]=t[r])}!u&&(t[r]!==e[r]||y&&t[r]!==l.getAttr(r))&&(_=!0,S[r]=t[r])}_&&(l.setAttrs(S),Lo(l));for(var f in x)l.off(f+C0),l.on(f+C0,x[f])}function Lo(l){if(!Rt.autoDrawEnabled){var t=l.getLayer()||l.getStage();t&&t.batchDraw()}}var p1=X1();const n_={},nT={};Hh.Node.prototype._applyProps=Q0;let i_=K0.DefaultEventPriority;function iT(l,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}l.add(t),Lo(l)}function aT(l,t,e){let n=Hh[l];n||(console.error(`Konva has no node with the type ${l}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${l}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=Hh.Group);const a={},r={};for(var u in t)if(u!=="ref"){var d=u.slice(0,2)==="on";d?r[u]=t[u]:a[u]=t[u]}const f=new n(a);return Q0(f,r),f}function sT(l,t,e){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${l}"`)}function rT(l,t,e){return!1}function lT(l){return l}function oT(){return null}function uT(){return null}function cT(l,t,e,n){return nT}function hT(){}function dT(l){}function fT(l,t){return!1}function pT(){return n_}function gT(){return n_}const mT=setTimeout,yT=clearTimeout,vT=!0,bT=l=>{l()},ST=-1;function _T(l,t){return!1}const AT=!1,ET=!1,TT=!0,xT=!1,CT=!1;function wT(l,t){t.parent===l?t.moveToTop():l.add(t),Lo(l)}function RT(l,t){t.parent===l?t.moveToTop():l.add(t),Lo(l)}function a_(l,t,e){t._remove(),l.add(t),t.setZIndex(e.getZIndex()),Lo(l)}function MT(l,t,e){a_(l,t,e)}function DT(l,t){t.destroy(),t.off(C0),Lo(l)}function OT(l,t){t.destroy(),t.off(C0),Lo(l)}function NT(l,t,e){console.error(`Text components are not yet supported in ReactKonva. You text is: "${e}"`)}function LT(l,t,e){}function zT(l,t,e,n){Q0(l,n,e)}function BT(l){l.hide(),Lo(l)}function PT(l){}function HT(l,t){(t.visible==null||t.visible)&&l.show()}function UT(l,t){}function GT(l){}function kT(){}function jT(){return K0.DefaultEventPriority}function FT(){}function qT(){return null}function IT(l){i_=l}function VT(){return i_}function YT(){return K0.DiscreteEventPriority}function XT(){return!1}function KT(){}function QT(){return!1}function ZT(){return!0}function WT(){}function JT(){}function $T(){return null}const tx=null;function ex(){}const nx=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:tx,appendChild:wT,appendChildToContainer:RT,appendInitialChild:iT,cancelTimeout:yT,clearContainer:GT,commitMount:LT,commitTextUpdate:NT,commitUpdate:zT,createInstance:aT,createTextInstance:sT,detachDeletedInstance:kT,finalizeInitialChildren:rT,getChildHostContext:gT,getCurrentEventPriority:jT,getCurrentUpdatePriority:VT,getInstanceFromScope:qT,getPublicInstance:lT,getRootHostContext:pT,hideInstance:BT,hideTextInstance:PT,idlePriority:p1.unstable_IdlePriority,insertBefore:a_,insertInContainerBefore:MT,isPrimaryRenderer:AT,maySuspendCommit:QT,noTimeout:ST,now:p1.unstable_now,preloadInstance:ZT,prepareForCommit:oT,preparePortalMount:uT,prepareScopeUpdate:FT,prepareUpdate:cT,removeChild:DT,removeChildFromContainer:OT,requestPostPaintCallback:KT,resetAfterCommit:hT,resetFormInstance:ex,resetTextContent:dT,resolveUpdatePriority:YT,run:p1.unstable_runWithPriority,scheduleMicrotask:bT,scheduleTimeout:mT,setCurrentUpdatePriority:IT,shouldAttemptEagerTransition:XT,shouldDeprioritizeSubtree:fT,shouldSetTextContent:_T,startSuspendingCommit:WT,supportsHydration:CT,supportsMicrotasks:vT,supportsMutation:TT,supportsPersistence:xT,suspendInstance:JT,unhideInstance:HT,unhideTextInstance:UT,waitForCommitToBeReady:$T,warnsIfNotActing:ET},Symbol.toStringTag,{value:"Module"}));function s_(l,t,e){if(!l)return;if(e(l)===!0)return l;let n=l.child;for(;n;){const a=s_(n,t,e);if(a)return a;n=n.sibling}}function r_(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const Ty=r_(q.createContext(null));class l_ extends q.Component{render(){return q.createElement(Ty.Provider,{value:this._reactInternals},this.props.children)}}function ix(){const l=q.useContext(Ty);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=q.useId();return q.useMemo(()=>{for(const e of[l,l?.alternate]){if(!e)continue;const n=s_(e,!1,a=>{let r=a.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(n)return n}},[l,t])}const ax=Symbol.for("react.context"),sx=l=>l!==null&&typeof l=="object"&&"$$typeof"in l&&l.$$typeof===ax;function rx(){const l=ix(),[t]=q.useState(()=>new Map);t.clear();let e=l;for(;e;){const n=e.type;sx(n)&&n!==Ty&&!t.has(n)&&t.set(n,q.use(r_(n))),e=e.return}return t}function lx(){const l=rx();return q.useMemo(()=>Array.from(l.keys()).reduce((t,e)=>n=>q.createElement(t,null,q.createElement(e.Provider,{...n,value:l.get(e)})),t=>q.createElement(l_,{...t})),[l])}if(Jn.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function ox(l){const t=Jn.useRef({});return Jn.useLayoutEffect(()=>{t.current=l}),Jn.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const ux=()=>{const l=Jn.useRef(0);return Jn.useMemo(()=>{l.current++},[]),l.current>1},cx=l=>{const t=Jn.useRef(null),e=Jn.useRef(null),n=Jn.useRef(null),a=ox(l),r=lx(),u=Jn.useRef(!1),d=g=>{const{forwardedRef:y}=l;y&&(typeof y=="function"?y(g):y.current=g)},f=ux();return Jn.useLayoutEffect(()=>u.current&&f?()=>{u.current=!1,d(null),xh.updateContainer(null,n.current,null),e.current.destroy()}:(u.current=!0,e.current=new Hh.Stage({width:l.width,height:l.height,container:t.current}),d(e.current),n.current=xh.createContainer(e.current,K0.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),xh.updateContainer(Jn.createElement(r,{},l.children),n.current,null,()=>{}),()=>{f||(d(null),xh.updateContainer(null,n.current,null),e.current.destroy())}),[]),Jn.useLayoutEffect(()=>{d(e.current),Q0(e.current,l,a),xh.updateContainer(Jn.createElement(r,{},l.children),n.current,null)}),Jn.createElement("div",{ref:t,id:l.id,accessKey:l.accessKey,className:l.className,role:l.role,style:l.style,tabIndex:l.tabIndex,title:l.title})},hx="Layer",dx="Line",fx="Text",xh=Z8(nx);xh.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Jn.version,rendererPackageName:"react-konva"});const px=Jn.forwardRef((l,t)=>Jn.createElement(l_,{},Jn.createElement(cx,{...l,forwardedRef:t})));wo.workerSrc=A5;const gx=()=>{const[l,t]=q.useState(null),[e,n]=q.useState(null),[a,r]=q.useState(1),[u,d]=q.useState(null),[f,g]=q.useState(null),[y,S]=q.useState(!1),[_,x]=q.useState(!1),T=q.useRef(),[w,R]=q.useState(!1),{isLoggedIn:M}=q.useContext(kh),O=q.useRef(null),[N,z]=q.useState([]);q.useEffect(()=>{if(!u)return;const Et=[];for(let Gt=0;Gt<u;Gt++)Et.push({Texts:[],Lines:[]});z(Et)},[u]);const P=Et=>{z(Gt=>Gt.map((ne,Oe)=>Oe===a-1?{...ne,Lines:[...ne.Lines,Et]}:ne))},j=Et=>{z(Gt=>Gt.map((ne,Oe)=>Oe===a-1?{...ne,Texts:[...ne.Texts,Et]}:ne))},k=q.useRef(!1),[Y,J]=q.useState(20),[lt,ct]=q.useState(null),[gt,St]=q.useState(""),dt=q.useRef(),[vt,H]=q.useState(5),[Z,ot]=q.useState("#000000"),Ct=["#df4b26","#000000","#007bff","#28a745","#ffc107"],[U,$]=q.useState(null),ht=Et=>{const ne=Et.target.getStage().getPointerPosition();if(U==="pen"||U==="eraser"){k.current=!0;const Oe={tool:U,points:[ne.x,ne.y],strokeWidth:vt,strokeColor:Z};P(Oe)}else if(U==="Text"){const Oe={x:ne.x,y:ne.y,text:"New text",fontSize:Y,id:Date.now()};j(Oe)}},ft=Et=>{if(!k.current)return;const ne=Et.target.getStage().getPointerPosition();z(Oe=>{const vn=[...Oe],xe={...vn[a-1]};if(!xe.Lines.length)return Oe;const He={...xe.Lines[xe.Lines.length-1]};return He.points=He.points.concat([ne.x,ne.y]),xe.Lines=[...xe.Lines.slice(0,-1),He],vn[a-1]=xe,vn})},Mt=()=>{k.current=!1,U==="Text"&&$(null)},Ht=Et=>{Et.preventDefault(),S(!1);const Gt=Et.dataTransfer.files[0];Gt&&Gt.type==="application/pdf"?(t(Gt),g(null)):g("Please drop a valid PDF file.")},Nt=Et=>Et.preventDefault(),jt=Et=>{Et.preventDefault(),S(!0)},he=Et=>{Et.preventDefault(),S(!1)},un=({numPages:Et})=>{d(Et),g(null)},Te=({width:Et,height:Gt})=>{n({width:Et,height:Gt})},Tn=Et=>{console.error(Et),g("Failed to load PDF.")},Yn=async Et=>{if(!l){g("No file selected.");return}if(!M){R("Login or signup for free unlimited use.");return}x(!0);try{const Gt=a,ne=new FormData;if(ne.append("way",Et),ne.append("pdf",l),Et==1){const ki=N.map((ls,os)=>({page:os+1,lines:ls.Lines.map(_e=>({points:_e.points,strokeColor:_e.strokeColor,strokeWidth:_e.strokeWidth,tool:_e.tool})),texts:ls.Texts.map(_e=>({x:_e.x,y:_e.y,text:_e.text,fontSize:_e.fontSize}))}));ne.append("edits",JSON.stringify(ki))}else{const ki=[],ls=()=>{let _e=0;for(let Jt=0;Jt<u;Jt++)N[Jt].Texts.length+N[Jt].Lines.length>0&&_e++;return _e>10?1:_e>5?2:3},os=_e=>new Promise(Jt=>{r(_e+1);const $e=()=>{if(O.current){const tn=ls();Jt(O.current.toDataURL({pixelRatio:tn}))}else requestAnimationFrame($e)};requestAnimationFrame($e)});for(let _e=0;_e<u;_e++){const Jt=N[_e];if(!Jt||Jt.Lines.length===0&&Jt.Texts.length===0){ki.push({index:_e,png:null});continue}const $e=await os(_e);ki.push({index:_e,png:$e})}ne.append("edits",JSON.stringify(ki))}const Oe=await as.post("/protected/",ne,{responseType:"blob"}),vn=new Blob([Oe.data],{type:"application/pdf"}),xe=URL.createObjectURL(vn),He=document.createElement("a");He.href=xe,Et==0&&(He.download="exported_Heavy_100Percent.pdf"),Et==1&&(He.download="exported_Light_80Percent.pdf"),He.target="_blank",document.body.appendChild(He),He.click(),document.body.removeChild(He),setTimeout(()=>URL.revokeObjectURL(xe),5e3),console.log("Success:",Oe.data),r(Gt)}catch(Gt){console.error("Error in handleProcess:",Gt),alert("An error occurred during PDF processing. Check console.")}finally{x(!1)}},ee=()=>{t(null),r(1),z(null),d(null),ct(null),St(""),g(null)},Pe=lt?(()=>{const Gt=N[a-1].Texts.find(ne=>ne.id===lt);return Gt?ut.jsx("input",{ref:dt,style:{position:"absolute",top:Gt.y,left:Gt.x,fontSize:Gt.fontSize,padding:0,border:"1px solid #ccc",background:"transparent"},value:gt,onChange:ne=>St(ne.target.value),onBlur:()=>{z(ne=>{const Oe=[...ne],vn={...Oe[a-1]};return vn.Texts=vn.Texts.map(xe=>xe.id===lt?{...xe,text:gt}:xe),Oe[a-1]=vn,Oe}),ct(null)},onKeyDown:ne=>{ne.key==="Enter"&&dt.current.blur()}}):null})():null,de=e?Math.min(window.innerWidth/e.width,1):1;return ut.jsxs("div",{className:"pdf-container",children:[_&&ut.jsx("div",{className:"loading-overlay",children:"Loading..."}),l?ut.jsx("div",{className:"pdf-preview",children:w?ut.jsx(ut.Fragment,{children:ut.jsxs("div",{className:"error-box",children:[ut.jsx("div",{children:w}),ut.jsx("button",{className:"error-dismiss",onClick:()=>R(null),children:""})]})}):ut.jsxs(ut.Fragment,{children:[ut.jsxs("div",{className:"tool-controls",children:[ut.jsxs("div",{className:"pagination-controls",children:[ut.jsx("button",{disabled:U==="pen",onClick:()=>$("pen"),children:"Draw"}),ut.jsx("button",{disabled:U==="eraser",onClick:()=>$("eraser"),children:"Eraser"}),ut.jsx("button",{disabled:U==="Text",onClick:()=>$("Text"),children:"TextBox"}),ut.jsx("button",{disabled:U===null,onClick:()=>$(null),children:"UnSelect"})]}),U==="Text"&&ut.jsx("div",{className:"pagination-controls",style:{marginTop:"8px",gap:"8px"},children:ut.jsxs("label",{children:["Font Size for New Text:",ut.jsx("input",{type:"number",min:"1",max:"50",value:Y,onChange:Et=>J(Number(Et.target.value)),style:{width:"50px",marginLeft:"4px"}})]})}),(U==="pen"||U==="eraser")&&ut.jsxs("div",{className:"pagination-controls",style:{marginTop:"8px",gap:"8px"},children:[ut.jsxs("label",{children:["Size:",ut.jsx("input",{type:"number",min:"1",max:"50",value:vt,onChange:Et=>H(Number(Et.target.value)),style:{width:"50px",marginLeft:"4px"}})]}),U!=="eraser"&&ut.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:["Color:",Ct.map(Et=>ut.jsx("div",{onClick:()=>ot(Et),style:{width:"20px",height:"20px",backgroundColor:Et,border:Z===Et?"2px solid black":"1px solid #ccc",cursor:"pointer"}},Et))]})]})]}),ut.jsx(h5,{file:l,onLoadSuccess:un,onLoadError:Tn,children:ut.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[ut.jsx(_5,{pageNumber:a,renderAnnotationLayer:!1,renderTextLayer:!1,onRenderSuccess:Te},`page_${a}`),e&&N&&N[a-1]&&ut.jsxs(ut.Fragment,{children:[ut.jsx(px,{width:e.width*de,height:e.height*de,scaleX:de,scaleY:de,ref:O,style:{position:"absolute",top:0,left:0},onMouseDown:ht,onMouseMove:ft,onMouseUp:Mt,onTouchStart:ht,onTouchMove:ft,onTouchEnd:Mt,children:ut.jsxs(hx,{children:[N[a-1].Lines.map((Et,Gt)=>ut.jsx(dx,{points:Et.points,stroke:Et.tool==="eraser"?"#fff":Et.strokeColor,strokeWidth:Et.strokeWidth,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:Et.tool==="eraser"?"destination-out":"source-over"},Gt)),N[a-1].Texts.map(Et=>Et.id===lt?null:ut.jsx(fx,{x:Et.x*de,y:Et.y*de,text:Et.text,fontSize:Et.fontSize*de,draggable:!0,onDragEnd:Gt=>{z(ne=>{const Oe=[...ne],vn={...Oe[a-1]};return vn.Texts=vn.Texts.map(xe=>xe.id===Et.id?{...xe,x:Gt.target.x()/de,y:Gt.target.y()/de}:xe),Oe[a-1]=vn,Oe})},onClick:()=>{ct(Et.id),St(Et.text),setTimeout(()=>dt.current?.focus(),0)}},Et.id))]})}),Pe]})]})}),ut.jsxs("div",{className:"controls",children:[ut.jsxs("div",{className:"pagination-controls",children:[ut.jsx("button",{disabled:a===1,onClick:()=>r(a-1),children:"Previous"}),ut.jsxs("span",{children:["Page ",a," of ",u]}),ut.jsx("button",{disabled:a===u,onClick:()=>r(a+1),children:"Next"})]}),ut.jsx("button",{className:"fprocess-btn",onClick:()=>Yn(1),children:"Export PDF 80% Detail (Slow download/Light file)"}),ut.jsx("button",{className:"process-btn",onClick:()=>Yn(0),children:"Export PDF 100% Detail (Fast download/Heavy file)"}),ut.jsx("button",{className:"clear-btn",onClick:ee,children:"Clear"})]})]})}):ut.jsxs(ut.Fragment,{children:[ut.jsxs("div",{className:"upload-container",children:[ut.jsx("input",{type:"file",accept:"application/pdf",ref:T,style:{display:"none"},onChange:Et=>{if(!M)return;const Gt=Et.target.files[0];Gt&&Gt.type==="application/pdf"?(t(Gt),g(null)):g("Please select a valid PDF file.")}}),ut.jsxs("div",{className:"upload-wrapper",children:[ut.jsx("button",{className:`upload-btn ${M?"":"disabled-btn"}`,onClick:()=>{M&&T.current.click()},children:"Upload PDF"}),!M&&ut.jsx("div",{className:"hover-dropdown",children:ut.jsxs("p",{children:[ut.jsx("strong",{children:"Login"})," or ",ut.jsx("strong",{children:"Sign Up"})," for free unlimited use"]})})]})]}),ut.jsxs("div",{className:"dropzone-wrapper",children:[ut.jsx("div",{className:`drop-zone ${f?"drop-error":""} ${y?"active":""} ${M?"":"disabled-drop"}`,onDrop:Et=>{if(!M){Et.preventDefault();return}Ht(Et)},onDragOver:Nt,onDragEnter:jt,onDragLeave:he,children:ut.jsx("p",{children:f||"Drag & Drop a PDF here"})}),!M&&ut.jsx("div",{className:"hover-dropdown",children:ut.jsxs("p",{children:[ut.jsx("strong",{children:"Login"})," or ",ut.jsx("strong",{children:"Sign Up"})," for free unlimited use"]})})]})]})]})},Zv=()=>{const{isLoggedIn:l,username:t}=q.useContext(kh);return ut.jsxs(ut.Fragment,{children:[ut.jsx("div",{className:"page",children:ut.jsxs("div",{className:"center-box",children:[l?ut.jsxs("h2",{children:["Welcome ",t]}):ut.jsx("h2",{children:"Welcome to PDF Editor"}),ut.jsx("p",{children:"Fast & Free simple PDF Editor"})]})}),ut.jsx("div",{className:"page",children:ut.jsx("div",{className:"center-box",children:ut.jsx(gx,{})})})]})};/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Wv="popstate";function mx(l={}){function t(n,a){let{pathname:r,search:u,hash:d}=n.location;return I1("",{pathname:r,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Wf(a)}return vx(t,e,null,l)}function yn(l,t){if(l===!1||l===null||typeof l>"u")throw new Error(t)}function Gs(l,t){if(!l){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yx(){return Math.random().toString(36).substring(2,10)}function Jv(l,t){return{usr:l.state,key:l.key,idx:t}}function I1(l,t,e=null,n){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof t=="string"?qh(t):t,state:e,key:t&&t.key||n||yx()}}function Wf({pathname:l="/",search:t="",hash:e=""}){return t&&t!=="?"&&(l+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(l+=e.charAt(0)==="#"?e:"#"+e),l}function qh(l){let t={};if(l){let e=l.indexOf("#");e>=0&&(t.hash=l.substring(e),l=l.substring(0,e));let n=l.indexOf("?");n>=0&&(t.search=l.substring(n),l=l.substring(0,n)),l&&(t.pathname=l)}return t}function vx(l,t,e,n={}){let{window:a=document.defaultView,v5Compat:r=!1}=n,u=a.history,d="POP",f=null,g=y();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function y(){return(u.state||{idx:null}).idx}function S(){d="POP";let R=y(),M=R==null?null:R-g;g=R,f&&f({action:d,location:w.location,delta:M})}function _(R,M){d="PUSH";let O=I1(w.location,R,M);g=y()+1;let N=Jv(O,g),z=w.createHref(O);try{u.pushState(N,"",z)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(z)}r&&f&&f({action:d,location:w.location,delta:1})}function x(R,M){d="REPLACE";let O=I1(w.location,R,M);g=y();let N=Jv(O,g),z=w.createHref(O);u.replaceState(N,"",z),r&&f&&f({action:d,location:w.location,delta:0})}function T(R){return bx(R)}let w={get action(){return d},get location(){return l(a,u)},listen(R){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Wv,S),f=R,()=>{a.removeEventListener(Wv,S),f=null}},createHref(R){return t(a,R)},createURL:T,encodeLocation(R){let M=T(R);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:x,go(R){return u.go(R)}};return w}function bx(l,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),yn(e,"No window.location.(origin|href) available to create URL");let n=typeof l=="string"?l:Wf(l);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function o_(l,t,e="/"){return Sx(l,t,e,!1)}function Sx(l,t,e,n){let a=typeof t=="string"?qh(t):t,r=Tl(a.pathname||"/",e);if(r==null)return null;let u=u_(l);_x(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let g=Nx(r);d=Dx(u[f],g,n)}return d}function u_(l,t=[],e=[],n="",a=!1){let r=(u,d,f=a,g)=>{let y={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(n)&&f)return;yn(y.relativePath.startsWith(n),`Absolute route path "${y.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(n.length)}let S=_l([n,y.relativePath]),_=e.concat(y);u.children&&u.children.length>0&&(yn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),u_(u.children,t,_,S,f)),!(u.path==null&&!u.index)&&t.push({path:S,score:Rx(S,u.index),routesMeta:_})};return l.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))r(u,d);else for(let f of c_(u.path))r(u,d,!0,f)}),t}function c_(l){let t=l.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return a?[r,""]:[r];let u=c_(n.join("/")),d=[];return d.push(...u.map(f=>f===""?r:[r,f].join("/"))),a&&d.push(...u),d.map(f=>l.startsWith("/")&&f===""?"/":f)}function _x(l){l.sort((t,e)=>t.score!==e.score?e.score-t.score:Mx(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var Ax=/^:[\w-]+$/,Ex=3,Tx=2,xx=1,Cx=10,wx=-2,$v=l=>l==="*";function Rx(l,t){let e=l.split("/"),n=e.length;return e.some($v)&&(n+=wx),t&&(n+=Tx),e.filter(a=>!$v(a)).reduce((a,r)=>a+(Ax.test(r)?Ex:r===""?xx:Cx),n)}function Mx(l,t){return l.length===t.length&&l.slice(0,-1).every((n,a)=>n===t[a])?l[l.length-1]-t[t.length-1]:0}function Dx(l,t,e=!1){let{routesMeta:n}=l,a={},r="/",u=[];for(let d=0;d<n.length;++d){let f=n[d],g=d===n.length-1,y=r==="/"?t:t.slice(r.length)||"/",S=w0({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},y),_=f.route;if(!S&&g&&e&&!n[n.length-1].route.index&&(S=w0({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!S)return null;Object.assign(a,S.params),u.push({params:a,pathname:_l([r,S.pathname]),pathnameBase:Px(_l([r,S.pathnameBase])),route:_}),S.pathnameBase!=="/"&&(r=_l([r,S.pathnameBase]))}return u}function w0(l,t){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[e,n]=Ox(l.path,l.caseSensitive,l.end),a=t.match(e);if(!a)return null;let r=a[0],u=r.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((g,{paramName:y,isOptional:S},_)=>{if(y==="*"){let T=d[_]||"";u=r.slice(0,r.length-T.length).replace(/(.)\/+$/,"$1")}const x=d[_];return S&&!x?g[y]=void 0:g[y]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:r,pathnameBase:u,pattern:l}}function Ox(l,t=!1,e=!0){Gs(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let n=[],a="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(n.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(n.push({paramName:"*"}),a+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":l!==""&&l!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Nx(l){try{return l.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gs(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),l}}function Tl(l,t){if(t==="/")return l;if(!l.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=l.charAt(e);return n&&n!=="/"?null:l.slice(e)||"/"}function Lx(l,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof l=="string"?qh(l):l;return{pathname:e?e.startsWith("/")?e:zx(e,t):t,search:Hx(n),hash:Ux(a)}}function zx(l,t){let e=t.replace(/\/+$/,"").split("/");return l.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function g1(l,t,e,n){return`Cannot include a '${l}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bx(l){return l.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function xy(l){let t=Bx(l);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Cy(l,t,e,n=!1){let a;typeof l=="string"?a=qh(l):(a={...l},yn(!a.pathname||!a.pathname.includes("?"),g1("?","pathname","search",a)),yn(!a.pathname||!a.pathname.includes("#"),g1("#","pathname","hash",a)),yn(!a.search||!a.search.includes("#"),g1("#","search","hash",a)));let r=l===""||a.pathname==="",u=r?"/":a.pathname,d;if(u==null)d=e;else{let S=t.length-1;if(!n&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),S-=1;a.pathname=_.join("/")}d=S>=0?t[S]:"/"}let f=Lx(a,d),g=u&&u!=="/"&&u.endsWith("/"),y=(r||u===".")&&e.endsWith("/");return!f.pathname.endsWith("/")&&(g||y)&&(f.pathname+="/"),f}var _l=l=>l.join("/").replace(/\/\/+/g,"/"),Px=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),Hx=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Ux=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function Gx(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var h_=["POST","PUT","PATCH","DELETE"];new Set(h_);var kx=["GET",...h_];new Set(kx);var Ih=q.createContext(null);Ih.displayName="DataRouter";var Z0=q.createContext(null);Z0.displayName="DataRouterState";q.createContext(!1);var d_=q.createContext({isTransitioning:!1});d_.displayName="ViewTransition";var jx=q.createContext(new Map);jx.displayName="Fetchers";var Fx=q.createContext(null);Fx.displayName="Await";var Fs=q.createContext(null);Fs.displayName="Navigation";var dp=q.createContext(null);dp.displayName="Location";var Ur=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var wy=q.createContext(null);wy.displayName="RouteError";function qx(l,{relative:t}={}){yn(Vh(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=q.useContext(Fs),{hash:a,pathname:r,search:u}=fp(l,{relative:t}),d=r;return e!=="/"&&(d=r==="/"?e:_l([e,r])),n.createHref({pathname:d,search:u,hash:a})}function Vh(){return q.useContext(dp)!=null}function zo(){return yn(Vh(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(dp).location}var f_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p_(l){q.useContext(Fs).static||q.useLayoutEffect(l)}function W0(){let{isDataRoute:l}=q.useContext(Ur);return l?nC():Ix()}function Ix(){yn(Vh(),"useNavigate() may be used only in the context of a <Router> component.");let l=q.useContext(Ih),{basename:t,navigator:e}=q.useContext(Fs),{matches:n}=q.useContext(Ur),{pathname:a}=zo(),r=JSON.stringify(xy(n)),u=q.useRef(!1);return p_(()=>{u.current=!0}),q.useCallback((f,g={})=>{if(Gs(u.current,f_),!u.current)return;if(typeof f=="number"){e.go(f);return}let y=Cy(f,JSON.parse(r),a,g.relative==="path");l==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:_l([t,y.pathname])),(g.replace?e.replace:e.push)(y,g.state,g)},[t,e,r,a,l])}q.createContext(null);function fp(l,{relative:t}={}){let{matches:e}=q.useContext(Ur),{pathname:n}=zo(),a=JSON.stringify(xy(e));return q.useMemo(()=>Cy(l,JSON.parse(a),n,t==="path"),[l,a,n,t])}function Vx(l,t){return g_(l,t)}function g_(l,t,e,n,a){yn(Vh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=q.useContext(Fs),{matches:u}=q.useContext(Ur),d=u[u.length-1],f=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",S=d&&d.route;{let O=S&&S.path||"";m_(g,!S||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let _=zo(),x;if(t){let O=typeof t=="string"?qh(t):t;yn(y==="/"||O.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${O.pathname}" was given in the \`location\` prop.`),x=O}else x=_;let T=x.pathname||"/",w=T;if(y!=="/"){let O=y.replace(/^\//,"").split("/");w="/"+T.replace(/^\//,"").split("/").slice(O.length).join("/")}let R=o_(l,{pathname:w});Gs(S||R!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Gs(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=Zx(R&&R.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:_l([y,r.encodeLocation?r.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?y:_l([y,r.encodeLocation?r.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),u,e,n,a);return t&&M?q.createElement(dp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},M):M}function Yx(){let l=eC(),t=Gx(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),e=l instanceof Error?l.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",l),u=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:r},"ErrorBoundary")," or"," ",q.createElement("code",{style:r},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),e?q.createElement("pre",{style:a},e):null,u)}var Xx=q.createElement(Yx,null),Kx=class extends q.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,t){return t.location!==l.location||t.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:t.error,location:t.location,revalidation:l.revalidation||t.revalidation}}componentDidCatch(l,t){this.props.unstable_onError?this.props.unstable_onError(l,t):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?q.createElement(Ur.Provider,{value:this.props.routeContext},q.createElement(wy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qx({routeContext:l,match:t,children:e}){let n=q.useContext(Ih);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(Ur.Provider,{value:l},e)}function Zx(l,t=[],e=null,n=null,a=null){if(l==null){if(!e)return null;if(e.errors)l=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)l=e.matches;else return null}let r=l,u=e?.errors;if(u!=null){let g=r.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);yn(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),r=r.slice(0,Math.min(r.length,g+1))}let d=!1,f=-1;if(e)for(let g=0;g<r.length;g++){let y=r[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:S,errors:_}=e,x=y.route.loader&&!S.hasOwnProperty(y.route.id)&&(!_||_[y.route.id]===void 0);if(y.route.lazy||x){d=!0,f>=0?r=r.slice(0,f+1):r=[r[0]];break}}}return r.reduceRight((g,y,S)=>{let _,x=!1,T=null,w=null;e&&(_=u&&y.route.id?u[y.route.id]:void 0,T=y.route.errorElement||Xx,d&&(f<0&&S===0?(m_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):f===S&&(x=!0,w=y.route.hydrateFallbackElement||null)));let R=t.concat(r.slice(0,S+1)),M=()=>{let O;return _?O=T:x?O=w:y.route.Component?O=q.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=g,q.createElement(Qx,{match:y,routeContext:{outlet:g,matches:R,isDataRoute:e!=null},children:O})};return e&&(y.route.ErrorBoundary||y.route.errorElement||S===0)?q.createElement(Kx,{location:e.location,revalidation:e.revalidation,component:T,error:_,children:M(),routeContext:{outlet:null,matches:R,isDataRoute:!0},unstable_onError:n}):M()},null)}function Ry(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wx(l){let t=q.useContext(Ih);return yn(t,Ry(l)),t}function Jx(l){let t=q.useContext(Z0);return yn(t,Ry(l)),t}function $x(l){let t=q.useContext(Ur);return yn(t,Ry(l)),t}function My(l){let t=$x(l),e=t.matches[t.matches.length-1];return yn(e.route.id,`${l} can only be used on routes that contain a unique "id"`),e.route.id}function tC(){return My("useRouteId")}function eC(){let l=q.useContext(wy),t=Jx("useRouteError"),e=My("useRouteError");return l!==void 0?l:t.errors?.[e]}function nC(){let{router:l}=Wx("useNavigate"),t=My("useNavigate"),e=q.useRef(!1);return p_(()=>{e.current=!0}),q.useCallback(async(a,r={})=>{Gs(e.current,f_),e.current&&(typeof a=="number"?l.navigate(a):await l.navigate(a,{fromRouteId:t,...r}))},[l,t])}var tb={};function m_(l,t,e){!t&&!tb[l]&&(tb[l]=!0,Gs(!1,e))}q.memo(iC);function iC({routes:l,future:t,state:e,unstable_onError:n}){return g_(l,void 0,e,n,t)}function eb({to:l,replace:t,state:e,relative:n}){yn(Vh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=q.useContext(Fs);Gs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=q.useContext(Ur),{pathname:u}=zo(),d=W0(),f=Cy(l,xy(r),u,n==="path"),g=JSON.stringify(f);return q.useEffect(()=>{d(JSON.parse(g),{replace:t,state:e,relative:n})},[d,g,n,t,e]),null}function Uf(l){yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aC({basename:l="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:r=!1}){yn(!Vh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=l.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:u,navigator:a,static:r,future:{}}),[u,a,r]);typeof e=="string"&&(e=qh(e));let{pathname:f="/",search:g="",hash:y="",state:S=null,key:_="default"}=e,x=q.useMemo(()=>{let T=Tl(f,u);return T==null?null:{location:{pathname:T,search:g,hash:y,state:S,key:_},navigationType:n}},[u,f,g,y,S,_,n]);return Gs(x!=null,`<Router basename="${u}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:q.createElement(Fs.Provider,{value:d},q.createElement(dp.Provider,{children:t,value:x}))}function sC({children:l,location:t}){return Vx(V1(l),t)}function V1(l,t=[]){let e=[];return q.Children.forEach(l,(n,a)=>{if(!q.isValidElement(n))return;let r=[...t,a];if(n.type===q.Fragment){e.push.apply(e,V1(n.props.children,r));return}yn(n.type===Uf,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let u={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(u.children=V1(n.props.children,r)),e.push(u)}),e}var S0="get",_0="application/x-www-form-urlencoded";function J0(l){return l!=null&&typeof l.tagName=="string"}function rC(l){return J0(l)&&l.tagName.toLowerCase()==="button"}function lC(l){return J0(l)&&l.tagName.toLowerCase()==="form"}function oC(l){return J0(l)&&l.tagName.toLowerCase()==="input"}function uC(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function cC(l,t){return l.button===0&&(!t||t==="_self")&&!uC(l)}var d0=null;function hC(){if(d0===null)try{new FormData(document.createElement("form"),0),d0=!1}catch{d0=!0}return d0}var dC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m1(l){return l!=null&&!dC.has(l)?(Gs(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_0}"`),null):l}function fC(l,t){let e,n,a,r,u;if(lC(l)){let d=l.getAttribute("action");n=d?Tl(d,t):null,e=l.getAttribute("method")||S0,a=m1(l.getAttribute("enctype"))||_0,r=new FormData(l)}else if(rC(l)||oC(l)&&(l.type==="submit"||l.type==="image")){let d=l.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=l.getAttribute("formaction")||d.getAttribute("action");if(n=f?Tl(f,t):null,e=l.getAttribute("formmethod")||d.getAttribute("method")||S0,a=m1(l.getAttribute("formenctype"))||m1(d.getAttribute("enctype"))||_0,r=new FormData(d,l),!hC()){let{name:g,type:y,value:S}=l;if(y==="image"){let _=g?`${g}.`:"";r.append(`${_}x`,"0"),r.append(`${_}y`,"0")}else g&&r.append(g,S)}}else{if(J0(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=S0,n=null,a=_0,u=l}return r&&a==="text/plain"&&(u=r,r=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:r,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dy(l,t){if(l===!1||l===null||typeof l>"u")throw new Error(t)}function pC(l,t,e){let n=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&Tl(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function gC(l,t){if(l.id in t)return t[l.id];try{let e=await import(l.module);return t[l.id]=e,e}catch(e){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mC(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function yC(l,t,e){let n=await Promise.all(l.map(async a=>{let r=t.routes[a.route.id];if(r){let u=await gC(r,e);return u.links?u.links():[]}return[]}));return _C(n.flat(1).filter(mC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function nb(l,t,e,n,a,r){let u=(f,g)=>e[g]?f.route.id!==e[g].route.id:!0,d=(f,g)=>e[g].pathname!==f.pathname||e[g].route.path?.endsWith("*")&&e[g].params["*"]!==f.params["*"];return r==="assets"?t.filter((f,g)=>u(f,g)||d(f,g)):r==="data"?t.filter((f,g)=>{let y=n.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(u(f,g)||d(f,g))return!0;if(f.route.shouldRevalidate){let S=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function vC(l,t,{includeHydrateFallback:e}={}){return bC(l.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let r=[a.module];return a.clientActionModule&&(r=r.concat(a.clientActionModule)),a.clientLoaderModule&&(r=r.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(r=r.concat(a.hydrateFallbackModule)),a.imports&&(r=r.concat(a.imports)),r}).flat(1))}function bC(l){return[...new Set(l)]}function SC(l){let t={},e=Object.keys(l).sort();for(let n of e)t[n]=l[n];return t}function _C(l,t){let e=new Set;return new Set(t),l.reduce((n,a)=>{let r=JSON.stringify(SC(a));return e.has(r)||(e.add(r),n.push({key:r,link:a})),n},[])}function y_(){let l=q.useContext(Ih);return Dy(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function AC(){let l=q.useContext(Z0);return Dy(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Oy=q.createContext(void 0);Oy.displayName="FrameworkContext";function v_(){let l=q.useContext(Oy);return Dy(l,"You must render this element inside a <HydratedRouter> element"),l}function EC(l,t){let e=q.useContext(Oy),[n,a]=q.useState(!1),[r,u]=q.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:g,onMouseLeave:y,onTouchStart:S}=t,_=q.useRef(null);q.useEffect(()=>{if(l==="render"&&u(!0),l==="viewport"){let w=M=>{M.forEach(O=>{u(O.isIntersecting)})},R=new IntersectionObserver(w,{threshold:.5});return _.current&&R.observe(_.current),()=>{R.disconnect()}}},[l]),q.useEffect(()=>{if(n){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[n]);let x=()=>{a(!0)},T=()=>{a(!1),u(!1)};return e?l!=="intent"?[r,_,{}]:[r,_,{onFocus:Mf(d,x),onBlur:Mf(f,T),onMouseEnter:Mf(g,x),onMouseLeave:Mf(y,T),onTouchStart:Mf(S,x)}]:[!1,_,{}]}function Mf(l,t){return e=>{l&&l(e),e.defaultPrevented||t(e)}}function TC({page:l,...t}){let{router:e}=y_(),n=q.useMemo(()=>o_(e.routes,l,e.basename),[e.routes,l,e.basename]);return n?q.createElement(CC,{page:l,matches:n,...t}):null}function xC(l){let{manifest:t,routeModules:e}=v_(),[n,a]=q.useState([]);return q.useEffect(()=>{let r=!1;return yC(l,t,e).then(u=>{r||a(u)}),()=>{r=!0}},[l,t,e]),n}function CC({page:l,matches:t,...e}){let n=zo(),{manifest:a,routeModules:r}=v_(),{basename:u}=y_(),{loaderData:d,matches:f}=AC(),g=q.useMemo(()=>nb(l,t,f,a,n,"data"),[l,t,f,a,n]),y=q.useMemo(()=>nb(l,t,f,a,n,"assets"),[l,t,f,a,n]),S=q.useMemo(()=>{if(l===n.pathname+n.search+n.hash)return[];let T=new Set,w=!1;if(t.forEach(M=>{let O=a.routes[M.route.id];!O||!O.hasLoader||(!g.some(N=>N.route.id===M.route.id)&&M.route.id in d&&r[M.route.id]?.shouldRevalidate||O.hasClientLoader?w=!0:T.add(M.route.id))}),T.size===0)return[];let R=pC(l,u,"data");return w&&T.size>0&&R.searchParams.set("_routes",t.filter(M=>T.has(M.route.id)).map(M=>M.route.id).join(",")),[R.pathname+R.search]},[u,d,n,a,g,t,l,r]),_=q.useMemo(()=>vC(y,a),[y,a]),x=xC(y);return q.createElement(q.Fragment,null,S.map(T=>q.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...e})),_.map(T=>q.createElement("link",{key:T,rel:"modulepreload",href:T,...e})),x.map(({key:T,link:w})=>q.createElement("link",{key:T,nonce:e.nonce,...w})))}function wC(...l){return t=>{l.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var b_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{b_&&(window.__reactRouterVersion="7.8.2")}catch{}function RC({basename:l,children:t,window:e}){let n=q.useRef();n.current==null&&(n.current=mx({window:e,v5Compat:!0}));let a=n.current,[r,u]=q.useState({action:a.action,location:a.location}),d=q.useCallback(f=>{q.startTransition(()=>u(f))},[u]);return q.useLayoutEffect(()=>a.listen(d),[a,d]),q.createElement(aC,{basename:l,children:t,location:r.location,navigationType:r.action,navigator:a})}var S_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,__=q.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:r,replace:u,state:d,target:f,to:g,preventScrollReset:y,viewTransition:S,..._},x){let{basename:T}=q.useContext(Fs),w=typeof g=="string"&&S_.test(g),R,M=!1;if(typeof g=="string"&&w&&(R=g,b_))try{let J=new URL(window.location.href),lt=g.startsWith("//")?new URL(J.protocol+g):new URL(g),ct=Tl(lt.pathname,T);lt.origin===J.origin&&ct!=null?g=ct+lt.search+lt.hash:M=!0}catch{Gs(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=qx(g,{relative:a}),[N,z,P]=EC(n,_),j=NC(g,{replace:u,state:d,target:f,preventScrollReset:y,relative:a,viewTransition:S});function k(J){t&&t(J),J.defaultPrevented||j(J)}let Y=q.createElement("a",{..._,...P,href:R||O,onClick:M||r?t:k,ref:wC(x,z),target:f,"data-discover":!w&&e==="render"?"true":void 0});return N&&!w?q.createElement(q.Fragment,null,Y,q.createElement(TC,{page:O})):Y});__.displayName="Link";var MC=q.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:r,to:u,viewTransition:d,children:f,...g},y){let S=fp(u,{relative:g.relative}),_=zo(),x=q.useContext(Z0),{navigator:T,basename:w}=q.useContext(Fs),R=x!=null&&HC(S)&&d===!0,M=T.encodeLocation?T.encodeLocation(S).pathname:S.pathname,O=_.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(O=O.toLowerCase(),N=N?N.toLowerCase():null,M=M.toLowerCase()),N&&w&&(N=Tl(N,w)||N);const z=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let P=O===M||!a&&O.startsWith(M)&&O.charAt(z)==="/",j=N!=null&&(N===M||!a&&N.startsWith(M)&&N.charAt(M.length)==="/"),k={isActive:P,isPending:j,isTransitioning:R},Y=P?t:void 0,J;typeof n=="function"?J=n(k):J=[n,P?"active":null,j?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let lt=typeof r=="function"?r(k):r;return q.createElement(__,{...g,"aria-current":Y,className:J,ref:y,style:lt,to:u,viewTransition:d},typeof f=="function"?f(k):f)});MC.displayName="NavLink";var DC=q.forwardRef(({discover:l="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:r,method:u=S0,action:d,onSubmit:f,relative:g,preventScrollReset:y,viewTransition:S,..._},x)=>{let T=BC(),w=PC(d,{relative:g}),R=u.toLowerCase()==="get"?"get":"post",M=typeof d=="string"&&S_.test(d),O=N=>{if(f&&f(N),N.defaultPrevented)return;N.preventDefault();let z=N.nativeEvent.submitter,P=z?.getAttribute("formmethod")||u;T(z||N.currentTarget,{fetcherKey:t,method:P,navigate:e,replace:a,state:r,relative:g,preventScrollReset:y,viewTransition:S})};return q.createElement("form",{ref:x,method:R,action:w,onSubmit:n?f:O,..._,"data-discover":!M&&l==="render"?"true":void 0})});DC.displayName="Form";function OC(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A_(l){let t=q.useContext(Ih);return yn(t,OC(l)),t}function NC(l,{target:t,replace:e,state:n,preventScrollReset:a,relative:r,viewTransition:u}={}){let d=W0(),f=zo(),g=fp(l,{relative:r});return q.useCallback(y=>{if(cC(y,t)){y.preventDefault();let S=e!==void 0?e:Wf(f)===Wf(g);d(l,{replace:S,state:n,preventScrollReset:a,relative:r,viewTransition:u})}},[f,d,g,e,n,t,l,a,r,u])}var LC=0,zC=()=>`__${String(++LC)}__`;function BC(){let{router:l}=A_("useSubmit"),{basename:t}=q.useContext(Fs),e=tC();return q.useCallback(async(n,a={})=>{let{action:r,method:u,encType:d,formData:f,body:g}=fC(n,t);if(a.navigate===!1){let y=a.fetcherKey||zC();await l.fetch(y,e,a.action||r,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||u,formEncType:a.encType||d,flushSync:a.flushSync})}else await l.navigate(a.action||r,{preventScrollReset:a.preventScrollReset,formData:f,body:g,formMethod:a.method||u,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[l,t,e])}function PC(l,{relative:t}={}){let{basename:e}=q.useContext(Fs),n=q.useContext(Ur);yn(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),r={...fp(l||".",{relative:t})},u=zo();if(l==null){r.search=u.search;let d=new URLSearchParams(r.search),f=d.getAll("index");if(f.some(y=>y==="")){d.delete("index"),f.filter(S=>S).forEach(S=>d.append("index",S));let y=d.toString();r.search=y?`?${y}`:""}}return(!l||l===".")&&a.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:_l([e,r.pathname])),Wf(r)}function HC(l,{relative:t}={}){let e=q.useContext(d_);yn(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=A_("useViewTransitionState"),a=fp(l,{relative:t});if(!e.isTransitioning)return!1;let r=Tl(e.currentLocation.pathname,n)||e.currentLocation.pathname,u=Tl(e.nextLocation.pathname,n)||e.nextLocation.pathname;return w0(a.pathname,u)!=null||w0(a.pathname,r)!=null}const UC=()=>{const[l,t]=q.useState(""),[e,n]=q.useState(""),[a,r]=q.useState(""),u=W0(),[d,f]=q.useState(!1),[g,y]=q.useState(!1),[S,_]=q.useState(!1),[x,T]=q.useState(!1),[w,R]=q.useState(!1),M=async N=>{try{f(!0);const z=await as.post("/register/",N);console.log("Registration successful:",z.data),u("/login")}catch(z){if(z.response&&z.response.data){const P=z.response.data;P.email&&_(P.email),P.password&&y(P.password),P.username&&T(P.username),console.log(P)}else R("An unexpected error occurred. Please try again.")}finally{f(!1)}},O=N=>{N.preventDefault(),M({username:l,email:e,password:a})};return ut.jsxs("div",{className:"auth-box",children:[w&&w,ut.jsx("h2",{className:"auth-title",children:"Sign Up"}),ut.jsxs("form",{onSubmit:O,children:[x&&x,ut.jsx("input",{type:"text",placeholder:"Username",className:"auth-input",value:l,onChange:N=>{t(N.target.value),T(!1)},required:!0}),S&&S,ut.jsx("input",{type:"email",placeholder:"Email",className:"auth-input",value:e,onChange:N=>{n(N.target.value),_(!1)},required:!0}),g&&g,ut.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:a,onChange:N=>{r(N.target.value),y(!1)},required:!0}),d?ut.jsx("button",{type:"submit",className:"auth-btn",disabled:!0,children:"Loading"}):ut.jsx("button",{type:"submit",className:"auth-btn",children:"Sign Up"})]})]})},GC=()=>{const[l,t]=q.useState(""),[e,n]=q.useState(""),{login:a}=q.useContext(kh),[r,u]=q.useState(!1),[d,f]=q.useState(null),g=W0(),y=async S=>{S.preventDefault(),u(!0);try{await a(l,e),g("/")}catch(_){_.response?.data?.detail?f(_.response.data.detail):f("Login failed. Please try again.")}finally{u(!1)}};return ut.jsxs("div",{className:"auth-box",children:[ut.jsx("h2",{className:"auth-title",children:"Login"}),ut.jsxs("form",{onSubmit:y,children:[ut.jsx("input",{type:"text",placeholder:"Username",className:"auth-input",value:l,onChange:S=>t(S.target.value),required:!0}),ut.jsx("input",{type:"password",placeholder:"Password",className:"auth-input",value:e,onChange:S=>n(S.target.value),required:!0}),d&&ut.jsx("div",{children:d}),r?ut.jsx("button",{type:"submit",className:"auth-btn",disabled:!0,children:"Loading"}):ut.jsx("button",{type:"submit",className:"auth-btn",children:"Sign In"})]})]})};function kC(){const{isLoggedIn:l}=q.useContext(kh);return ut.jsx(RC,{children:ut.jsxs("div",{className:"app",children:[ut.jsx(YA,{}),ut.jsx("main",{className:"main",children:ut.jsxs(sC,{children:[ut.jsx(Uf,{path:"/",element:ut.jsx(Zv,{})}),ut.jsx(Uf,{path:"/register",element:l?ut.jsx(eb,{to:"/",replace:!0}):ut.jsx(UC,{})}),ut.jsx(Uf,{path:"/login",element:l?ut.jsx(eb,{to:"/",replace:!0}):ut.jsx(GC,{})}),ut.jsx(Uf,{path:"*",element:ut.jsx(Zv,{})})]})}),ut.jsx(XA,{})]})})}p3.createRoot(document.getElementById("root")).render(ut.jsx(q.StrictMode,{children:ut.jsx(VA,{children:ut.jsx(kC,{})})}));
